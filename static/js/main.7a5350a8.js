/*! For license information please see main.7a5350a8.js.LICENSE.txt */
(()=>{var e={5881:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case s:case a:case d:case p:return e;default:switch(e=e&&e.$$typeof){case c:case u:case h:case g:case f:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},805:(e,t,n)=>{"use strict";n(5881)},8818:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(I){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},o={};function a(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=l(e,(0|e)<0?-1:0,!0),a&&(o[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=l(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function s(e,t){if(isNaN(e))return t?y:m;if(t){if(e<0)return y;if(e>=p)return k}else{if(e<=-f)return S;if(e+1>=f)return w}return e<0?s(-e,t).neg():l(e%d|0,e/d|0,t)}function l(e,t,r){return new n(e,t,r)}n.fromInt=a,n.fromNumber=s,n.fromBits=l;var u=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var i=s(u(n,8)),o=m,a=0;a<e.length;a+=8){var l=Math.min(8,e.length-a),h=parseInt(e.substring(a,a+l),n);if(l<8){var d=s(u(n,l));o=o.mul(d).add(s(h))}else o=(o=o.mul(i)).add(s(h))}return o.unsigned=t,o}function h(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?c(e,t):l(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=h;var d=4294967296,p=d*d,f=p/2,g=a(1<<24),m=a(0);n.ZERO=m;var y=a(0,!0);n.UZERO=y;var v=a(1);n.ONE=v;var b=a(1,!0);n.UONE=b;var x=a(-1);n.NEG_ONE=x;var w=l(-1,2147483647,!1);n.MAX_VALUE=w;var k=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var S=l(0,-2147483648,!1);n.MIN_VALUE=S;var C=n.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=s(u(e,6),this.unsigned),o=this,a="";;){var l=o.div(i),c=(o.sub(l.mul(i)).toInt()>>>0).toString(e);if((o=l).isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1===(1&this.low)},C.isEven=function(){return 0===(1&this.low)},C.equals=function(e){return r(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(r(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(v)},C.neg=C.negate,C.add=function(e){r(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,s=65535&e.high,u=e.low>>>16,c=0,d=0,p=0,f=0;return p+=(f+=o+(65535&e.low))>>>16,d+=(p+=i+u)>>>16,c+=(d+=n+s)>>>16,c+=t+a,l((p&=65535)<<16|(f&=65535),(c&=65535)<<16|(d&=65535),this.unsigned)},C.subtract=function(e){return r(e)||(e=h(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=h(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(S))return e.isOdd()?S:m;if(e.eq(S))return this.isOdd()?S:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,a=65535&this.low,u=e.high>>>16,c=65535&e.high,d=e.low>>>16,p=65535&e.low,f=0,y=0,v=0,b=0;return v+=(b+=a*p)>>>16,y+=(v+=o*p)>>>16,v&=65535,y+=(v+=a*d)>>>16,f+=(y+=i*p)>>>16,y&=65535,f+=(y+=o*d)>>>16,y&=65535,f+=(y+=a*c)>>>16,f+=n*p+i*d+o*c+a*u,l((v&=65535)<<16|(b&=65535),(f&=65535)<<16|(y&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(r(e)||(e=h(e)),e.isZero())throw Error("division by zero");var n,i,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return b;o=y}else{if(this.eq(S))return e.eq(v)||e.eq(x)?S:e.eq(S)?v:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?v:x:(i=this.sub(e.mul(n)),o=n.add(i.div(e)));if(e.eq(S))return this.unsigned?y:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=m}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),c=a<=48?1:u(2,a-48),d=s(n),p=d.mul(e);p.isNegative()||p.gt(i);)p=(d=s(n-=c,this.unsigned)).mul(e);d.isZero()&&(d=v),o=o.add(d),i=i.sub(p)}return o},C.div=C.divide,C.modulo=function(e){return r(e)||(e=h(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return l(~this.low,~this.high,this.unsigned)},C.and=function(e){return r(e)||(e=h(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return r(e)||(e=h(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return r(e)||(e=h(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},8210:function(e,t,n){var r;!function(){"use strict";var i,o=1e9,a={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},s=!0,l="[DecimalError] ",u=l+"Invalid argument: ",c=l+"Exponent out of range: ",h=Math.floor,d=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,f=1e7,g=9007199254740991,m=h(1286742750677284.5),y={};function v(e,t){var n,r,i,o,a,l,u,c,h=e.constructor,d=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),s?_(t,d):t;if(u=e.d,c=t.d,a=e.e,i=t.e,u=u.slice(),o=a-i){for(o<0?(r=u,o=-o,l=c.length):(r=c,i=a,l=u.length),o>(l=(a=Math.ceil(d/7))>l?a+1:l+1)&&(o=l,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for((l=u.length)-(o=c.length)<0&&(o=l,r=c,c=u,u=r),n=0;o;)n=(u[--o]=u[o]+c[o]+n)/f|0,u[o]%=f;for(n&&(u.unshift(n),++i),l=u.length;0==u[--l];)u.pop();return t.d=u,t.e=i,s?_(t,d):t}function b(e,t,n){if(e!==~~e||e<t||e>n)throw Error(u+e)}function x(e){var t,n,r,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(o+=I(n)),o+=r;(n=7-(r=(a=e[t])+"").length)&&(o+=I(n))}else if(0===a)return"0";for(;a%10===0;)a/=10;return o+a}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},y.comparedTo=y.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,n=(r=o.d.length)<(i=e.d.length)?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1},y.decimalPlaces=y.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},y.dividedBy=y.div=function(e){return w(this,new this.constructor(e))},y.dividedToIntegerBy=y.idiv=function(e){var t=this.constructor;return _(w(this,new t(e),0,1),t.precision)},y.equals=y.eq=function(e){return!this.cmp(e)},y.exponent=function(){return S(this)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){return this.cmp(e)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(e){return this.cmp(e)<0},y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1},y.logarithm=y.log=function(e){var t,n=this,r=n.constructor,o=r.precision,a=o+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(i))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(i)?new r(0):(s=!1,t=w(E(n,a),E(e,a),a),s=!0,_(t,o))},y.minus=y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?N(t,e):v(t,(e.s=-e.s,e))},y.modulo=y.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(s=!1,t=w(n,e,0,1).times(e),s=!0,n.minus(t)):_(new r(n),i)},y.naturalExponential=y.exp=function(){return k(this)},y.naturalLogarithm=y.ln=function(){return E(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},y.plus=y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):N(t,(e.s=-e.s,e))},y.precision=y.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(u+e);if(t=S(i)+1,n=7*(r=i.d.length-1)+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},y.squareRoot=y.sqrt=function(){var e,t,n,r,i,o,a,u=this,c=u.constructor;if(u.s<1){if(!u.s)return new c(0);throw Error(l+"NaN")}for(e=S(u),s=!1,0==(i=Math.sqrt(+u))||i==1/0?(((t=x(u.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=h((e+1)/2)-(e<0||e%2),r=new c(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new c(i.toString()),i=a=(n=c.precision)+3;;)if(r=(o=r).plus(w(u,o,a+2)).times(.5),x(o.d).slice(0,a)===(t=x(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&"4999"==t){if(_(o,n+1,0),o.times(o).eq(u)){r=o;break}}else if("9999"!=t)break;a+=4}return s=!0,_(r,n)},y.times=y.mul=function(e){var t,n,r,i,o,a,l,u,c,h=this,d=h.constructor,p=h.d,g=(e=new d(e)).d;if(!h.s||!e.s)return new d(0);for(e.s*=h.s,n=h.e+e.e,(u=p.length)<(c=g.length)&&(o=p,p=g,g=o,a=u,u=c,c=a),o=[],r=a=u+c;r--;)o.push(0);for(r=c;--r>=0;){for(t=0,i=u+r;i>r;)l=o[i]+g[r]*p[i-r-1]+t,o[i--]=l%f|0,t=l/f|0;o[i]=(o[i]+t)%f|0}for(;!o[--a];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,s?_(e,d.precision):e},y.toDecimalPlaces=y.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(b(e,0,o),void 0===t?t=r.rounding:b(t,0,8),_(n,e+S(n)+1,t))},y.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=A(r,!0):(b(e,0,o),void 0===t?t=i.rounding:b(t,0,8),n=A(r=_(new i(r),e+1,t),!0,e+1)),n},y.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?A(i):(b(e,0,o),void 0===t?t=a.rounding:b(t,0,8),n=A((r=_(new a(i),e+S(i)+1,t)).abs(),!1,e+S(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},y.toInteger=y.toint=function(){var e=this,t=e.constructor;return _(new t(e),S(e)+1,t.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(e){var t,n,r,o,a,u,c=this,d=c.constructor,p=+(e=new d(e));if(!e.s)return new d(i);if(!(c=new d(c)).s){if(e.s<1)throw Error(l+"Infinity");return c}if(c.eq(i))return c;if(r=d.precision,e.eq(i))return _(c,r);if(u=(t=e.e)>=(n=e.d.length-1),a=c.s,u){if((n=p<0?-p:p)<=g){for(o=new d(i),t=Math.ceil(r/7+4),s=!1;n%2&&O((o=o.times(c)).d,t),0!==(n=h(n/2));)O((c=c.times(c)).d,t);return s=!0,e.s<0?new d(i).div(o):_(o,r)}}else if(a<0)throw Error(l+"NaN");return a=a<0&&1&e.d[Math.max(t,n)]?-1:1,c.s=1,s=!1,o=e.times(E(c,r+12)),s=!0,(o=k(o)).s=a,o},y.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?r=A(i,(n=S(i))<=a.toExpNeg||n>=a.toExpPos):(b(e,1,o),void 0===t?t=a.rounding:b(t,0,8),r=A(i=_(new a(i),e,t),e<=(n=S(i))||n<=a.toExpNeg,e)),r},y.toSignificantDigits=y.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(b(e,1,o),void 0===t?t=n.rounding:b(t,0,8)),_(new n(this),e,t)},y.toString=y.valueOf=y.val=y.toJSON=function(){var e=this,t=S(e),n=e.constructor;return A(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%f|0,r=n/f|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*f+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,a){var s,u,c,h,d,p,g,m,y,v,b,x,w,k,C,I,E,T,N=r.constructor,A=r.s==i.s?1:-1,O=r.d,R=i.d;if(!r.s)return new N(r);if(!i.s)throw Error(l+"Division by zero");for(u=r.e-i.e,E=R.length,C=O.length,m=(g=new N(A)).d=[],c=0;R[c]==(O[c]||0);)++c;if(R[c]>(O[c]||0)&&--u,(x=null==o?o=N.precision:a?o+(S(r)-S(i))+1:o)<0)return new N(0);if(x=x/7+2|0,c=0,1==E)for(h=0,R=R[0],x++;(c<C||h)&&x--;c++)w=h*f+(O[c]||0),m[c]=w/R|0,h=w%R|0;else{for((h=f/(R[0]+1)|0)>1&&(R=e(R,h),O=e(O,h),E=R.length,C=O.length),k=E,v=(y=O.slice(0,E)).length;v<E;)y[v++]=0;(T=R.slice()).unshift(0),I=R[0],R[1]>=f/2&&++I;do{h=0,(s=t(R,y,E,v))<0?(b=y[0],E!=v&&(b=b*f+(y[1]||0)),(h=b/I|0)>1?(h>=f&&(h=f-1),1==(s=t(d=e(R,h),y,p=d.length,v=y.length))&&(h--,n(d,E<p?T:R,p))):(0==h&&(s=h=1),d=R.slice()),(p=d.length)<v&&d.unshift(0),n(y,d,v),-1==s&&(s=t(R,y,E,v=y.length))<1&&(h++,n(y,E<v?T:R,v)),v=y.length):0===s&&(h++,y=[0]),m[c++]=h,s&&y[0]?y[v++]=O[k]||0:(y=[O[k]],v=1)}while((k++<C||void 0!==y[0])&&x--)}return m[0]||m.shift(),g.e=u,_(g,a?o+S(g)+1:o)}}();function k(e,t){var n,r,o,a,l,u=0,h=0,p=e.constructor,f=p.precision;if(S(e)>16)throw Error(c+S(e));if(!e.s)return new p(i);for(null==t?(s=!1,l=f):l=t,a=new p(.03125);e.abs().gte(.1);)e=e.times(a),h+=5;for(l+=Math.log(d(2,h))/Math.LN10*2+5|0,n=r=o=new p(i),p.precision=l;;){if(r=_(r.times(e),l),n=n.times(++u),x((a=o.plus(w(r,n,l))).d).slice(0,l)===x(o.d).slice(0,l)){for(;h--;)o=_(o.times(o),l);return p.precision=f,null==t?(s=!0,_(o,f)):o}o=a}}function S(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function C(e,t,n){if(t>e.LN10.sd())throw s=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return _(new e(e.LN10),t)}function I(e){for(var t="";e--;)t+="0";return t}function E(e,t){var n,r,o,a,u,c,h,d,p,f=1,g=e,m=g.d,y=g.constructor,v=y.precision;if(g.s<1)throw Error(l+(g.s?"NaN":"-Infinity"));if(g.eq(i))return new y(0);if(null==t?(s=!1,d=v):d=t,g.eq(10))return null==t&&(s=!0),C(y,d);if(d+=10,y.precision=d,r=(n=x(m)).charAt(0),a=S(g),!(Math.abs(a)<15e14))return h=C(y,d+2,v).times(a+""),g=E(new y(r+"."+n.slice(1)),d-10).plus(h),y.precision=v,null==t?(s=!0,_(g,v)):g;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=x((g=g.times(e)).d)).charAt(0),f++;for(a=S(g),r>1?(g=new y("0."+n),a++):g=new y(r+"."+n.slice(1)),c=u=g=w(g.minus(i),g.plus(i),d),p=_(g.times(g),d),o=3;;){if(u=_(u.times(p),d),x((h=c.plus(w(u,new y(o),d))).d).slice(0,d)===x(c.d).slice(0,d))return c=c.times(2),0!==a&&(c=c.plus(C(y,d+2,v).times(a+""))),c=w(c,new y(f),d),y.precision=v,null==t?(s=!0,_(c,v)):c;c=h,o+=2}}function T(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=h(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),s&&(e.e>m||e.e<-m))throw Error(c+n)}else e.s=0,e.e=0,e.d=[0];return e}function _(e,t,n){var r,i,o,a,l,u,p,g,y=e.d;for(a=1,o=y[0];o>=10;o/=10)a++;if((r=t-a)<0)r+=7,i=t,p=y[g=0];else{if((g=Math.ceil((r+1)/7))>=(o=y.length))return e;for(p=o=y[g],a=1;o>=10;o/=10)a++;i=(r%=7)-7+a}if(void 0!==n&&(l=p/(o=d(10,a-i-1))%10|0,u=t<0||void 0!==y[g+1]||p%o,u=n<4?(l||u)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||u||6==n&&(r>0?i>0?p/d(10,a-i):0:y[g-1])%10&1||n==(e.s<0?8:7))),t<1||!y[0])return u?(o=S(e),y.length=1,t=t-o-1,y[0]=d(10,(7-t%7)%7),e.e=h(-t/7)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(0==r?(y.length=g,o=1,g--):(y.length=g+1,o=d(10,7-r),y[g]=i>0?(p/d(10,a-i)%d(10,i)|0)*o:0),u)for(;;){if(0==g){(y[0]+=o)==f&&(y[0]=1,++e.e);break}if(y[g]+=o,y[g]!=f)break;y[g--]=0,o=1}for(r=y.length;0===y[--r];)y.pop();if(s&&(e.e>m||e.e<-m))throw Error(c+S(e));return e}function N(e,t){var n,r,i,o,a,l,u,c,h,d,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),s?_(t,g):t;if(u=e.d,d=t.d,r=t.e,c=e.e,u=u.slice(),a=c-r){for((h=a<0)?(n=u,a=-a,l=d.length):(n=d,r=c,l=u.length),a>(i=Math.max(Math.ceil(g/7),l)+2)&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for((h=(i=u.length)<(l=d.length))&&(l=i),i=0;i<l;i++)if(u[i]!=d[i]){h=u[i]<d[i];break}a=0}for(h&&(n=u,u=d,d=n,t.s=-t.s),l=u.length,i=d.length-l;i>0;--i)u[l++]=0;for(i=d.length;i>a;){if(u[--i]<d[i]){for(o=i;o&&0===u[--o];)u[o]=f-1;--u[o],u[i]+=f}u[i]-=d[i]}for(;0===u[--l];)u.pop();for(;0===u[0];u.shift())--r;return u[0]?(t.d=u,t.e=r,s?_(t,g):t):new p(0)}function A(e,t,n){var r,i=S(e),o=x(e.d),a=o.length;return t?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+I(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+I(-i-1)+o,n&&(r=n-a)>0&&(o+=I(r))):i>=a?(o+=I(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+I(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=I(r))),e.s<0?"-"+o:o}function O(e,t){if(e.length>t)return e.length=t,!0}function R(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,r,i=["precision",1,o,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(h(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(u+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(u+n+": "+r);this[n]=new this(r)}return this}a=function e(t){var n,r,i;function o(e){var t=this;if(!(t instanceof o))return new o(e);if(t.constructor=o,e instanceof o)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(u+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):T(t,e.toString())}if("string"!==typeof e)throw Error(u+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(u+e);T(t,e)}if(o.prototype=y,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=R,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(a),a.default=a.Decimal=a,i=new a(1),void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,a),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},219:(e,t,n)=>{"use strict";var r=n(3763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var a=c(n);h&&(a=a.concat(h(n)));for(var s=l(t),g=l(n),m=0;m<a.length;++m){var y=a[m];if(!o[y]&&(!r||!r[y])&&(!g||!g[y])&&(!s||!s[y])){var v=d(n,y);try{u(t,y,v)}catch(b){}}}}return t}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case u:case d:case m:case g:case l:return e;default:return t}}case i:return t}}}function k(e){return w(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=m,t.Memo=g,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return k(e)||w(e)===c},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===u},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===g},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===s||e===a||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===u||e.$$typeof===d||e.$$typeof===v||e.$$typeof===b||e.$$typeof===x||e.$$typeof===y)},t.typeOf=w},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},7685:(e,t,n)=>{var r=n(7937)(n(6552),"DataView");e.exports=r},8724:(e,t,n)=>{var r=n(7615),i=n(5051),o=n(2154),a=n(8734),s=n(2662);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},7160:(e,t,n)=>{var r=n(7563),i=n(9935),o=n(4190),a=n(1946),s=n(1714);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},5204:(e,t,n)=>{var r=n(7937)(n(6552),"Map");e.exports=r},4816:(e,t,n)=>{var r=n(7251),i=n(7159),o=n(438),a=n(9394),s=n(6874);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},5387:(e,t,n)=>{var r=n(7937)(n(6552),"Promise");e.exports=r},2070:(e,t,n)=>{var r=n(7937)(n(6552),"Set");e.exports=r},8902:(e,t,n)=>{var r=n(4816),i=n(6179),o=n(6704);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},5538:(e,t,n)=>{var r=n(7160),i=n(4545),o=n(793),a=n(7760),s=n(3892),l=n(6788);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,e.exports=u},9812:(e,t,n)=>{var r=n(6552).Symbol;e.exports=r},2929:(e,t,n)=>{var r=n(6552).Uint8Array;e.exports=r},6600:(e,t,n)=>{var r=n(7937)(n(6552),"WeakMap");e.exports=r},1170:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},5295:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},7529:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},5866:(e,t,n)=>{var r=n(8468);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},1558:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},3204:(e,t,n)=>{var r=n(3343),i=n(2777),o=n(4052),a=n(4543),s=n(9194),l=n(1268),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),c=!n&&i(e),h=!n&&!c&&a(e),d=!n&&!c&&!h&&l(e),p=n||c||h||d,f=p?r(e.length,String):[],g=f.length;for(var m in e)!t&&!u.call(e,m)||p&&("length"==m||h&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||f.push(m);return f}},149:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},8895:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},2587:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},5967:e=>{e.exports=function(e){return e.split("")}},1340:(e,t,n)=>{var r=n(3211);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1775:(e,t,n)=>{var r=n(5654);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},5652:(e,t,n)=>{var r=n(4664),i=n(6516)(r);e.exports=i},4746:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n=!0;return r(e,(function(e,r,i){return n=!!t(e,r,i)})),n}},9742:(e,t,n)=>{var r=n(9841);e.exports=function(e,t,n){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(void 0===l?s===s&&!r(s):n(s,l)))var l=s,u=a}return u}},5816:e=>{e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},755:(e,t,n)=>{var r=n(8895),i=n(7116);e.exports=function e(t,n,o,a,s){var l=-1,u=t.length;for(o||(o=i),s||(s=[]);++l<u;){var c=t[l];n>0&&o(c)?n>1?e(c,n-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}},4258:(e,t,n)=>{var r=n(5906)();e.exports=r},4664:(e,t,n)=>{var r=n(4258),i=n(8673);e.exports=function(e,t){return e&&r(e,t,i)}},2969:(e,t,n)=>{var r=n(5324),i=n(914);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},4262:(e,t,n)=>{var r=n(8895),i=n(4052);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},6913:(e,t,n)=>{var r=n(9812),i=n(4552),o=n(6095),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},7498:e=>{e.exports=function(e,t){return e>t}},7894:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},8468:(e,t,n)=>{var r=n(5816),i=n(644),o=n(4020);e.exports=function(e,t,n){return t===t?o(e,t,n):r(e,i,n)}},5193:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},6989:(e,t,n)=>{var r=n(6399),i=n(2761);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,o,a,e,s))}},6399:(e,t,n)=>{var r=n(5538),i=n(3668),o=n(9987),a=n(5752),s=n(6924),l=n(4052),u=n(4543),c=n(1268),h="[object Arguments]",d="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,g,m,y){var v=l(e),b=l(t),x=v?d:s(e),w=b?d:s(t),k=(x=x==h?p:x)==p,S=(w=w==h?p:w)==p,C=x==w;if(C&&u(e)){if(!u(t))return!1;v=!0,k=!1}if(C&&!k)return y||(y=new r),v||c(e)?i(e,t,n,g,m,y):o(e,t,x,n,g,m,y);if(!(1&n)){var I=k&&f.call(e,"__wrapped__"),E=S&&f.call(t,"__wrapped__");if(I||E){var T=I?e.value():e,_=E?t.value():t;return y||(y=new r),m(T,_,n,g,y)}}return!!C&&(y||(y=new r),a(e,t,n,g,m,y))}},6532:(e,t,n)=>{var r=n(5538),i=n(6989);e.exports=function(e,t,n,o){var a=n.length,s=a,l=!o;if(null==e)return!s;for(e=Object(e);a--;){var u=n[a];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<s;){var c=(u=n[a])[0],h=e[c],d=u[1];if(l&&u[2]){if(void 0===h&&!(c in e))return!1}else{var p=new r;if(o)var f=o(h,d,c,e,t,p);if(!(void 0===f?i(d,h,3,o,p):f))return!1}}return!0}},644:e=>{e.exports=function(e){return e!==e}},6954:(e,t,n)=>{var r=n(1629),i=n(7857),o=n(6686),a=n(6996),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,h=u.hasOwnProperty,d=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:s).test(a(e))}},5428:(e,t,n)=>{var r=n(6913),i=n(6173),o=n(2761),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},9096:(e,t,n)=>{var r=n(9256),i=n(5029),o=n(3279),a=n(4052),s=n(3932);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},3713:(e,t,n)=>{var r=n(6140),i=n(1143),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},61:e=>{e.exports=function(e,t){return e<t}},8883:(e,t,n)=>{var r=n(5652),i=n(6571);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},9256:(e,t,n)=>{var r=n(6532),i=n(3781),o=n(1310);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},5029:(e,t,n)=>{var r=n(6989),i=n(3097),o=n(3366),a=n(2597),s=n(9417),l=n(1310),u=n(914);e.exports=function(e,t){return a(e)&&s(t)?l(u(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},2536:(e,t,n)=>{var r=n(149),i=n(2969),o=n(9096),a=n(8883),s=n(320),l=n(7574),u=n(5893),c=n(3279),h=n(4052);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return h(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[c];var d=-1;t=r(t,l(o));var p=a(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++d,value:e}}));return s(p,(function(e,t){return u(e,t,n)}))}},396:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},2866:(e,t,n)=>{var r=n(2969);e.exports=function(e){return function(t){return r(t,e)}}},9676:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,r,i,o){for(var a=-1,s=n(t((r-e)/(i||1)),0),l=Array(s);s--;)l[o?s:++a]=e,e+=i;return l}},5647:(e,t,n)=>{var r=n(3279),i=n(5636),o=n(6350);e.exports=function(e,t){return o(i(e,t,r),e+"")}},8325:(e,t,n)=>{var r=n(2541),i=n(5654),o=n(3279),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},3871:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},2165:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n;return r(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}},320:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},3343:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},8541:(e,t,n)=>{var r=n(9812),i=n(149),o=n(4052),a=n(9841),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},1141:(e,t,n)=>{var r=n(143),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},4416:(e,t,n)=>{var r=n(8902),i=n(5866),o=n(1558),a=n(8114),s=n(8182),l=n(2074);e.exports=function(e,t,n){var u=-1,c=i,h=e.length,d=!0,p=[],f=p;if(n)d=!1,c=o;else if(h>=200){var g=t?null:s(e);if(g)return l(g);d=!1,c=a,f=new r}else f=t?[]:p;e:for(;++u<h;){var m=e[u],y=t?t(m):m;if(m=n||0!==m?m:0,d&&y===y){for(var v=f.length;v--;)if(f[v]===y)continue e;t&&f.push(y),p.push(m)}else c(f,y,n)||(f!==p&&f.push(y),p.push(m))}return p}},8114:e=>{e.exports=function(e,t){return e.has(t)}},5324:(e,t,n)=>{var r=n(4052),i=n(2597),o=n(4079),a=n(1069);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},8189:(e,t,n)=>{var r=n(3871);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},6599:(e,t,n)=>{var r=n(9841);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e===e,a=r(e),s=void 0!==t,l=null===t,u=t===t,c=r(t);if(!l&&!c&&!a&&e>t||a&&s&&u&&!l&&!c||i&&s&&u||!n&&u||!o)return 1;if(!i&&!a&&!c&&e<t||c&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!u)return-1}return 0}},5893:(e,t,n)=>{var r=n(6599);e.exports=function(e,t,n){for(var i=-1,o=e.criteria,a=t.criteria,s=o.length,l=n.length;++i<s;){var u=r(o[i],a[i]);if(u)return i>=l?u:u*("desc"==n[i]?-1:1)}return e.index-t.index}},3440:(e,t,n)=>{var r=n(6552)["__core-js_shared__"];e.exports=r},6516:(e,t,n)=>{var r=n(6571);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},5906:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}},7676:(e,t,n)=>{var r=n(8189),i=n(6311),o=n(9115),a=n(1069);e.exports=function(e){return function(t){t=a(t);var n=i(t)?o(t):void 0,s=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return s[e]()+l}}},9995:(e,t,n)=>{var r=n(9096),i=n(6571),o=n(8673);e.exports=function(e){return function(t,n,a){var s=Object(t);if(!i(t)){var l=r(n,3);t=o(t),n=function(e){return l(s[e],e,s)}}var u=e(t,n,a);return u>-1?s[l?t[u]:u]:void 0}}},3331:(e,t,n)=>{var r=n(9676),i=n(929),o=n(7303);e.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&i(t,n,a)&&(n=a=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),a=void 0===a?t<n?1:-1:o(a),r(t,n,a,e)}}},8182:(e,t,n)=>{var r=n(2070),i=n(5713),o=n(2074),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},5654:(e,t,n)=>{var r=n(7937),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},3668:(e,t,n)=>{var r=n(8902),i=n(2587),o=n(8114);e.exports=function(e,t,n,a,s,l){var u=1&n,c=e.length,h=t.length;if(c!=h&&!(u&&h>c))return!1;var d=l.get(e),p=l.get(t);if(d&&p)return d==t&&p==e;var f=-1,g=!0,m=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++f<c;){var y=e[f],v=t[f];if(a)var b=u?a(v,y,f,t,e,l):a(y,v,f,e,t,l);if(void 0!==b){if(b)continue;g=!1;break}if(m){if(!i(t,(function(e,t){if(!o(m,t)&&(y===e||s(y,e,n,a,l)))return m.push(t)}))){g=!1;break}}else if(y!==v&&!s(y,v,n,a,l)){g=!1;break}}return l.delete(e),l.delete(t),g}},9987:(e,t,n)=>{var r=n(9812),i=n(2929),o=n(3211),a=n(3668),s=n(4160),l=n(2074),u=r?r.prototype:void 0,c=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,h,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s;case"[object Set]":var f=1&r;if(p||(p=l),e.size!=t.size&&!f)return!1;var g=d.get(e);if(g)return g==t;r|=2,d.set(e,t);var m=a(p(e),p(t),r,u,h,d);return d.delete(e),m;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},5752:(e,t,n)=>{var r=n(9395),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var l=1&n,u=r(e),c=u.length;if(c!=r(t).length&&!l)return!1;for(var h=c;h--;){var d=u[h];if(!(l?d in t:i.call(t,d)))return!1}var p=s.get(e),f=s.get(t);if(p&&f)return p==t&&f==e;var g=!0;s.set(e,t),s.set(t,e);for(var m=l;++h<c;){var y=e[d=u[h]],v=t[d];if(o)var b=l?o(v,y,d,t,e,s):o(y,v,d,e,t,s);if(!(void 0===b?y===v||a(y,v,n,o,s):b)){g=!1;break}m||(m="constructor"==d)}if(g&&!m){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(g=!1)}return s.delete(e),s.delete(t),g}},7105:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},9395:(e,t,n)=>{var r=n(4262),i=n(9621),o=n(8673);e.exports=function(e){return r(e,o,i)}},2622:(e,t,n)=>{var r=n(705);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},3781:(e,t,n)=>{var r=n(9417),i=n(8673);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},7937:(e,t,n)=>{var r=n(6954),i=n(4657);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},5990:(e,t,n)=>{var r=n(3028)(Object.getPrototypeOf,Object);e.exports=r},4552:(e,t,n)=>{var r=n(9812),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(l){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},9621:(e,t,n)=>{var r=n(7529),i=n(7828),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},6924:(e,t,n)=>{var r=n(7685),i=n(5204),o=n(5387),a=n(2070),s=n(6600),l=n(6913),u=n(6996),c="[object Map]",h="[object Promise]",d="[object Set]",p="[object WeakMap]",f="[object DataView]",g=u(r),m=u(i),y=u(o),v=u(a),b=u(s),x=l;(r&&x(new r(new ArrayBuffer(1)))!=f||i&&x(new i)!=c||o&&x(o.resolve())!=h||a&&x(new a)!=d||s&&x(new s)!=p)&&(x=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case g:return f;case m:return c;case y:return h;case v:return d;case b:return p}return t}),e.exports=x},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},9057:(e,t,n)=>{var r=n(5324),i=n(2777),o=n(4052),a=n(9194),s=n(6173),l=n(914);e.exports=function(e,t,n){for(var u=-1,c=(t=r(t,e)).length,h=!1;++u<c;){var d=l(t[u]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++u!=c?h:!!(c=null==e?0:e.length)&&s(c)&&a(d,c)&&(o(e)||i(e))}},6311:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},7615:(e,t,n)=>{var r=n(5575);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},2154:(e,t,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},8734:(e,t,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},2662:(e,t,n)=>{var r=n(5575);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},7116:(e,t,n)=>{var r=n(9812),i=n(2777),o=n(4052),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},929:(e,t,n)=>{var r=n(3211),i=n(6571),o=n(9194),a=n(6686);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},2597:(e,t,n)=>{var r=n(4052),i=n(9841),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7857:(e,t,n)=>{var r=n(3440),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},6140:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},9417:(e,t,n)=>{var r=n(6686);e.exports=function(e){return e===e&&!r(e)}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},9935:(e,t,n)=>{var r=n(1340),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},4190:(e,t,n)=>{var r=n(1340);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},1946:(e,t,n)=>{var r=n(1340);e.exports=function(e){return r(this.__data__,e)>-1}},1714:(e,t,n)=>{var r=n(1340);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},7251:(e,t,n)=>{var r=n(8724),i=n(7160),o=n(5204);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},7159:(e,t,n)=>{var r=n(2622);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},438:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).get(e)}},9394:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).has(e)}},6874:(e,t,n)=>{var r=n(2622);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},4160:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},1310:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},8259:(e,t,n)=>{var r=n(5797);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},5575:(e,t,n)=>{var r=n(7937)(Object,"create");e.exports=r},1143:(e,t,n)=>{var r=n(3028)(Object.keys,Object);e.exports=r},6832:(e,t,n)=>{e=n.nmd(e);var r=n(7105),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=s},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},3028:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5636:(e,t,n)=>{var r=n(1170),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=o[a];return u[t]=n(l),r(e,this,u)}}},6552:(e,t,n)=>{var r=n(7105),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},2074:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},6350:(e,t,n)=>{var r=n(8325),i=n(6578)(r);e.exports=i},6578:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},4545:(e,t,n)=>{var r=n(7160);e.exports=function(){this.__data__=new r,this.size=0}},793:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},6788:(e,t,n)=>{var r=n(7160),i=n(5204),o=n(4816);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},4020:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},9115:(e,t,n)=>{var r=n(5967),i=n(6311),o=n(715);e.exports=function(e){return i(e)?o(e):r(e)}},4079:(e,t,n)=>{var r=n(8259),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},914:(e,t,n)=>{var r=n(9841);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},143:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},715:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+t+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")"+"?",u="[\\ufe0e\\ufe0f]?",c=u+l+("(?:\\u200d(?:"+[o,a,s].join("|")+")"+u+l+")*"),h="(?:"+[o+r+"?",r,a,s,n].join("|")+")",d=RegExp(i+"(?="+i+")|"+h+c,"g");e.exports=function(e){return e.match(d)||[]}},2541:e=>{e.exports=function(e){return function(){return e}}},3950:(e,t,n)=>{var r=n(6686),i=n(4757),o=n(801),a=Math.max,s=Math.min;e.exports=function(e,t,n){var l,u,c,h,d,p,f=0,g=!1,m=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=l,r=u;return l=u=void 0,f=t,h=e.apply(r,n)}function b(e){var n=e-p;return void 0===p||n>=t||n<0||m&&e-f>=c}function x(){var e=i();if(b(e))return w(e);d=setTimeout(x,function(e){var n=t-(e-p);return m?s(n,c-(e-f)):n}(e))}function w(e){return d=void 0,y&&l?v(e):(l=u=void 0,h)}function k(){var e=i(),n=b(e);if(l=arguments,u=this,p=e,n){if(void 0===d)return function(e){return f=e,d=setTimeout(x,t),g?v(e):h}(p);if(m)return clearTimeout(d),d=setTimeout(x,t),v(p)}return void 0===d&&(d=setTimeout(x,t)),h}return t=o(t)||0,r(n)&&(g=!!n.leading,c=(m="maxWait"in n)?a(o(n.maxWait)||0,t):c,y="trailing"in n?!!n.trailing:y),k.cancel=function(){void 0!==d&&clearTimeout(d),f=0,l=p=u=d=void 0},k.flush=function(){return void 0===d?h:w(i())},k}},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},7002:(e,t,n)=>{var r=n(5295),i=n(4746),o=n(9096),a=n(4052),s=n(929);e.exports=function(e,t,n){var l=a(e)?r:i;return n&&s(e,t,n)&&(t=void 0),l(e,o(t,3))}},8990:(e,t,n)=>{var r=n(9995)(n(2520));e.exports=r},2520:(e,t,n)=>{var r=n(5816),i=n(9096),o=n(9140),a=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),r(e,i(t,3),l)}},3538:(e,t,n)=>{var r=n(755),i=n(3411);e.exports=function(e,t){return r(i(e,t),1)}},3097:(e,t,n)=>{var r=n(2969);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},3366:(e,t,n)=>{var r=n(7894),i=n(9057);e.exports=function(e,t){return null!=e&&i(e,t,r)}},3279:e=>{e.exports=function(e){return e}},2777:(e,t,n)=>{var r=n(5193),i=n(2761),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},4052:e=>{var t=Array.isArray;e.exports=t},6571:(e,t,n)=>{var r=n(1629),i=n(6173);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},6361:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==r(e)}},4543:(e,t,n)=>{e=n.nmd(e);var r=n(6552),i=n(14),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},9853:(e,t,n)=>{var r=n(6989);e.exports=function(e,t){return r(e,t)}},1629:(e,t,n)=>{var r=n(6913),i=n(6686);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},5268:(e,t,n)=>{var r=n(9160);e.exports=function(e){return r(e)&&e!=+e}},9686:e=>{e.exports=function(e){return null==e}},9160:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==r(e)}},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2322:(e,t,n)=>{var r=n(6913),i=n(5990),o=n(2761),a=Function.prototype,s=Object.prototype,l=a.toString,u=s.hasOwnProperty,c=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==c}},620:(e,t,n)=>{var r=n(6913),i=n(4052),o=n(2761);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},9841:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},1268:(e,t,n)=>{var r=n(5428),i=n(7574),o=n(6832),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},8673:(e,t,n)=>{var r=n(3204),i=n(3713),o=n(6571);e.exports=function(e){return o(e)?r(e):i(e)}},4065:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},3411:(e,t,n)=>{var r=n(149),i=n(9096),o=n(8883),a=n(4052);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},1733:(e,t,n)=>{var r=n(1775),i=n(4664),o=n(9096);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,i,t(e,i,o))})),n}},539:(e,t,n)=>{var r=n(9742),i=n(7498),o=n(3279);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},5797:(e,t,n)=>{var r=n(4816);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},6745:(e,t,n)=>{var r=n(9742),i=n(61),o=n(3279);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},5713:e=>{e.exports=function(){}},4757:(e,t,n)=>{var r=n(6552);e.exports=function(){return r.Date.now()}},3932:(e,t,n)=>{var r=n(396),i=n(2866),o=n(2597),a=n(914);e.exports=function(e){return o(e)?r(a(e)):i(e)}},6604:(e,t,n)=>{var r=n(3331)();e.exports=r},4597:(e,t,n)=>{var r=n(2587),i=n(9096),o=n(2165),a=n(4052),s=n(929);e.exports=function(e,t,n){var l=a(e)?r:o;return n&&s(e,t,n)&&(t=void 0),l(e,i(t,3))}},7424:(e,t,n)=>{var r=n(755),i=n(2536),o=n(5647),a=n(929),s=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=s},7828:e=>{e.exports=function(){return[]}},14:e=>{e.exports=function(){return!1}},9889:(e,t,n)=>{var r=n(3950),i=n(6686);e.exports=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:o,maxWait:t,trailing:a})}},7303:(e,t,n)=>{var r=n(801),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},9140:(e,t,n)=>{var r=n(7303);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},801:(e,t,n)=>{var r=n(1141),i=n(6686),o=n(9841),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):a.test(e)?NaN:+e}},1069:(e,t,n)=>{var r=n(8541);e.exports=function(e){return null==e?"":r(e)}},977:(e,t,n)=>{var r=n(9096),i=n(4416);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},643:(e,t,n)=>{var r=n(7676)("toUpperCase");e.exports=r},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var $=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var M,F=Object.assign;function L(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function z(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function B(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case I:return"Profiler";case C:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function oe(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ce=null;function Ie(e){if(e=bi(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),ke(e.stateNode,e.type,t))}}function Ee(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function Te(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function _e(e,t){return e(t)}function Ne(){}var Ae=!1;function Oe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return _e(e,t,n)}finally{Ae=!1,(null!==Se||null!==Ce)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var $e=!1;if(c)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){$e=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ce){$e=!1}function De(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Me=!1,Fe=null,Le=!1,je=null,ze={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,o,a,s,l){Me=!1,Fe=null,De.apply(ze,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(We(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ve(i),e;if(a===r)return Ve(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Qe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=ht(s):0!==(o&=a)&&(r=ht(o))}else 0!==(a=n&~i)?r=ht(a):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,Ct,It,Et=!1,Tt=[],_t=null,Nt=null,At=null,Ot=new Map,Rt=new Map,$t=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void It(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function jt(e,t,n){Lt(e)&&n.delete(t)}function zt(){Et=!1,null!==_t&&Lt(_t)&&(_t=null),null!==Nt&&Lt(Nt)&&(Nt=null),null!==At&&Lt(At)&&(At=null),Ot.forEach(jt),Rt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Wt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Bt(_t,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Ot.forEach(t),Rt.forEach(t),n=0;n<$t.length;n++)(r=$t[n]).blockedOn===e&&(r.blockedOn=null);for(;0<$t.length&&null===(n=$t[0]).blockedOn;)Ft(n),null===n.blockedOn&&$t.shift()}var Ut=x.ReactCurrentBatchConfig,Vt=!0;function Gt(e,t,n,r){var i=bt,o=Ut.transition;Ut.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=i,Ut.transition=o}}function Ht(e,t,n,r){var i=bt,o=Ut.transition;Ut.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=i,Ut.transition=o}}function qt(e,t,n,r){if(Vt){var i=Xt(e,t,n,r);if(null===i)Vr(e,t,r,Kt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return _t=Mt(_t,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ot.set(o,Mt(Ot.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Rt.set(o,Mt(Rt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&wt(o),null===(o=Xt(e,t,n,r))&&Vr(e,t,r,Kt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Kt=null;function Xt(e,t,n,r){if(Kt=null,null!==(e=vi(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),hn=F({},un,{view:0,detail:0}),dn=on(hn),pn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=on(pn),gn=on(F({},pn,{dataTransfer:0})),mn=on(F({},hn,{relatedTarget:0})),yn=on(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),xn=on(F({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function In(){return Cn}var En=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(En),_n=on(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=on(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=F({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(On),$n=[9,13,27,32],Pn=c&&"CompositionEvent"in window,Dn=null;c&&"documentMode"in document&&(Dn=document.documentMode);var Mn=c&&"TextEvent"in window&&!Dn,Fn=c&&(!Pn||Dn&&8<Dn&&11>=Dn),Ln=String.fromCharCode(32),jn=!1;function zn(e,t){switch(e){case"keyup":return-1!==$n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,qn=null;function Kn(e){Lr(e,0)}function Xn(e){if(q(xi(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),qn=Hn=null)}function nr(e){if("value"===e.propertyName&&Xn(qn)){var t=[];Gn(t,qn,e,we(e)),Oe(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(qn)}function or(e,t){if("click"===e)return Xn(t)}function ar(e,t){if("input"===e||"change"===e)return Xn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==K(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Cr={};function Ir(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Sr[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Er=Ir("animationend"),Tr=Ir("animationiteration"),_r=Ir("animationstart"),Nr=Ir("transitionend"),Ar=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),l(t,[e])}for(var $r=0;$r<Or.length;$r++){var Pr=Or[$r];Rr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Rr(Er,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(_r,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,u){if(Be.apply(this,arguments),Me){if(!Me)throw Error(o(198));var c=Fe;Me=!1,Fe=null,Le||(Le=!0,je=c)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,s,u),o=l}}}if(Le)throw e=je,Le=!1,je=null,e}function jr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Br]){e[Br]=!0,a.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!$e||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Oe((function(){var r=o,i=we(n),a=[];e:{var s=Ar.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Er:case Tr:case _r:l=yn;break;case Nr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_n}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=r;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==d&&(null!=(g=Re(f,d))&&c.push(Gr(f,g,p)))),h)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(u=n.relatedTarget||n.fromElement)||!vi(u)&&!u[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?vi(u):null)&&(u!==(h=We(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,g="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=_n,g="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:xi(l),p=null==u?s:xi(u),(s=new c(g,f+"leave",l,n,i)).target=h,s.relatedTarget=p,g=null,vi(i)===r&&((c=new c(d,f+"enter",u,n,i)).target=p,c.relatedTarget=h,g=c),h=g,l&&u)e:{for(d=u,f=0,p=c=l;p;p=qr(p))f++;for(p=0,g=d;g;g=qr(g))p++;for(;0<f-p;)c=qr(c),f--;for(;0<p-f;)d=qr(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break e;c=qr(c),d=qr(d)}c=null}else c=null;null!==l&&Kr(a,s,l,c,!1),null!==u&&null!==h&&Kr(a,h,u,c,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Yn;else if(Vn(s))if(Qn)m=ar;else{m=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=or);switch(m&&(m=m(e,r))?Gn(a,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?xi(r):window,e){case"focusin":(Vn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(a,n,i)}var v;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(v=en()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,Wn=!0)),0<(y=Hr(r,b)).length&&(b=new xn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Ln);case"textInput":return(e=t.data)===Ln&&jn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Pn&&zn(e,t)?(e=en(),Zt=Jt=Qt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Lr(a,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Re(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=Re(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Re(n,o))&&a.unshift(Gr(n,l,s)):i||null!=(l=Re(n,o))&&a.push(Gr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Wt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[pi]||null}var ki=[],Si=-1;function Ci(e){return{current:e}}function Ii(e){0>Si||(e.current=ki[Si],ki[Si]=null,Si--)}function Ei(e,t){Si++,ki[Si]=e.current,e.current=t}var Ti={},_i=Ci(Ti),Ni=Ci(!1),Ai=Ti;function Oi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function $i(){Ii(Ni),Ii(_i)}function Pi(e,t,n){if(_i.current!==Ti)throw Error(o(168));Ei(_i,t),Ei(Ni,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,U(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=_i.current,Ei(_i,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Di(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(_i),Ei(_i,e)):Ii(Ni),Ei(Ni,n)}var Li=null,ji=!1,zi=!1;function Bi(e){null===Li?Li=[e]:Li.push(e)}function Wi(){if(!zi&&null!==Li){zi=!0;var e=0,t=bt;try{var n=Li;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,ji=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),qe(Ze,Wi),i}finally{bt=t,zi=!1}}return null}var Ui=[],Vi=0,Gi=null,Hi=0,qi=[],Ki=0,Xi=null,Yi=1,Qi="";function Ji(e,t){Ui[Vi++]=Hi,Ui[Vi++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){qi[Ki++]=Yi,qi[Ki++]=Qi,qi[Ki++]=Xi,Xi=e;var r=Yi;e=Qi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Yi=1<<32-at(t)+i|n<<i|r,Qi=o+e}else Yi=1<<o|n<<i|r,Qi=e}function eo(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function to(e){for(;e===Gi;)Gi=Ui[--Vi],Ui[Vi]=null,Hi=Ui[--Vi],Ui[Vi]=null;for(;e===Xi;)Xi=qi[--Ki],qi[Ki]=null,Qi=qi[--Ki],qi[Ki]=null,Yi=qi[--Ki],qi[Ki]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Ou(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Yi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ou(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ui(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return co(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=ui(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ui(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ui(e.nextSibling)}function fo(){ro=no=null,io=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=x.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=$u(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&bo(o)===t.type)?((r=i(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Pu(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Du(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pu(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case k:return(t=Lu(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Du(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case k:return n.key===i?c(e,t,n,r):null;case R:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:h(e,t,n,r,null);vo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return h(t,e=e.get(n)||null,r,i,null);vo(t,r)}return null}function g(i,o,s,l){for(var u=null,c=null,h=o,g=o=0,m=null;null!==h&&g<s.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=p(i,h,s[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),o=a(y,o,g),null===c?u=y:c.sibling=y,c=y,h=m}if(g===s.length)return n(i,h),io&&Ji(i,g),u;if(null===h){for(;g<s.length;g++)null!==(h=d(i,s[g],l))&&(o=a(h,o,g),null===c?u=h:c.sibling=h,c=h);return io&&Ji(i,g),u}for(h=r(i,h);g<s.length;g++)null!==(m=f(h,i,g,s[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=a(m,o,g),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),io&&Ji(i,g),u}function m(i,s,l,u){var c=D(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,g=s,m=s=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=p(i,g,v.value,u);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),s=a(b,s,m),null===h?c=b:h.sibling=b,h=b,g=y}if(v.done)return n(i,g),io&&Ji(i,m),c;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(i,v.value,u))&&(s=a(v,s,m),null===h?c=v:h.sibling=v,h=v);return io&&Ji(i,m),c}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=f(g,i,m,v.value,u))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=a(v,s,m),null===h?c=v:h.sibling=v,h=v);return e&&g.forEach((function(e){return t(i,e)})),io&&Ji(i,m),c}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var u=a.key,c=o;null!==c;){if(c.key===u){if((u=a.type)===S){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&bo(u)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=yo(r,c,a),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===S?((o=Du(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Pu(a.type,a.key,a.props,null,r.mode,l)).ref=yo(r,o,a),l.return=r,r=l)}return s(r);case k:e:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Lu(a,r.mode,l)).return=r,r=o}return s(r);case R:return e(r,o,(c=a._init)(a._payload),l)}if(te(a))return g(r,o,a,l);if(D(a))return m(r,o,a,l);vo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Fu(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var wo=xo(!0),ko=xo(!1),So=Ci(null),Co=null,Io=null,Eo=null;function To(){Eo=Io=Co=null}function _o(e){var t=So.current;Ii(So),e._currentValue=t}function No(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ao(e,t){Co=e,Eo=Io=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Oo(e){var t=e._currentValue;if(Eo!==e)if(e={context:e,memoizedValue:t,next:null},null===Io){if(null===Co)throw Error(o(308));Io=e,Co.dependencies={lanes:0,firstContext:e}}else Io=Io.next=e;return t}var Ro=null;function $o(e){null===Ro?Ro=[e]:Ro.push(e)}function Po(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,$o(t)):(n.next=i.next,i.next=n),t.interleaved=n,Do(e,r)}function Do(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Fo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&_l)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Do(e,n)}return null===(i=r.interleaved)?(t.next=t,$o(r)):(t.next=i.next,i.next=t),r.interleaved=t,Do(e,n)}function Bo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Wo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Uo(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(a=0,c=u=l=null,s=o;;){var d=s.lane,p=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,g=s;switch(d=t,p=n,g.tag){case 1:if("function"===typeof(f=g.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=g.payload)?f.call(p,h,d):f)||void 0===d)break e;h=F({},h,d);break e;case 2:Mo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=h):c=c.next=p,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ml|=a,e.lanes=a,e.memoizedState=h}}function Vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Go={},Ho=Ci(Go),qo=Ci(Go),Ko=Ci(Go);function Xo(e){if(e===Go)throw Error(o(174));return e}function Yo(e,t){switch(Ei(Ko,t),Ei(qo,e),Ei(Ho,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Ho),Ei(Ho,t)}function Qo(){Ii(Ho),Ii(qo),Ii(Ko)}function Jo(e){Xo(Ko.current);var t=Xo(Ho.current),n=le(t,e.type);t!==n&&(Ei(qo,e),Ei(Ho,n))}function Zo(e){qo.current===e&&(Ii(Ho),Ii(qo))}var ea=Ci(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=x.ReactCurrentDispatcher,oa=x.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ua=null,ca=!1,ha=!1,da=0,pa=0;function fa(){throw Error(o(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Za:es,e=n(r,i),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(o(301));a+=1,ua=la=null,t.updateQueue=null,ia.current=ts,e=n(r,i)}while(ha)}if(ia.current=Ja,t=null!==la&&null!==la.next,aa=0,ua=la=sa=null,ca=!1,t)throw Error(o(300));return e}function ya(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ua?sa.memoizedState=ua=e:ua=ua.next=e,ua}function ba(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ua?sa.memoizedState:ua.next;if(null!==t)ua=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ua?sa.memoizedState=ua=e:ua=ua.next=e}return ua}function xa(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,u=null,c=a;do{var h=c.lane;if((aa&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,sa.lanes|=h,Ml|=h}c=c.next}while(null!==c&&c!==a);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,sa.lanes|=a,Ml|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ka(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function Ca(e,t){var n=sa,r=ba(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,Ma(Ta.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ua&&1&ua.memoizedState.tag){if(n.flags|=2048,Oa(9,Ea.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(o(349));0!==(30&aa)||Ia(n,t,i)}return i}function Ia(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,r){t.value=n,t.getSnapshot=r,_a(t)&&Na(e)}function Ta(e,t,n){return n((function(){_a(t)&&Na(e)}))}function _a(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Na(e){var t=Do(e,1);null!==t&&nu(t,e,1,-1)}function Aa(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,sa,e),[t.memoizedState,e]}function Oa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ra(){return ba().memoizedState}function $a(e,t,n,r){var i=va();sa.flags|=e,i.memoizedState=Oa(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var i=ba();r=void 0===r?null:r;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==r&&ga(r,a.deps))return void(i.memoizedState=Oa(t,n,o,r))}sa.flags|=e,i.memoizedState=Oa(1|t,n,o,r)}function Da(e,t){return $a(8390656,8,e,t)}function Ma(e,t){return Pa(2048,8,e,t)}function Fa(e,t){return Pa(4,2,e,t)}function La(e,t){return Pa(4,4,e,t)}function ja(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,ja.bind(null,t,e),n)}function Ba(){}function Wa(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ua(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Va(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=gt(),sa.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ga(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{bt=n,oa.transition=r}}function Ha(){return ba().memoizedState}function qa(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))Ya(t,n);else if(null!==(n=Po(e,t,n,r))){nu(n,e,r,eu()),Qa(n,t,r)}}function Ka(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ya(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,$o(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Po(e,t,i,r))&&(nu(n,e,r,i=eu()),Qa(n,t,r))}}function Xa(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ya(e,t){ha=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Ja={readContext:Oo,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Za={readContext:Oo,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Oo,useEffect:Da,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,$a(4194308,4,ja.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $a(4194308,4,e,t)},useInsertionEffect:function(e,t){return $a(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qa.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Aa,useDebugValue:Ba,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Aa(!1),t=e[0];return e=Ga.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=va();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Nl)throw Error(o(349));0!==(30&aa)||Ia(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Da(Ta.bind(null,r,a,e),[e]),r.flags|=2048,Oa(9,Ea.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Nl.identifierPrefix;if(io){var n=Qi;t=":"+t+"R"+(n=(Yi&~(1<<32-at(Yi)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Oo,useCallback:Wa,useContext:Oo,useEffect:Ma,useImperativeHandle:za,useInsertionEffect:Fa,useLayoutEffect:La,useMemo:Ua,useReducer:wa,useRef:Ra,useState:function(){return wa(xa)},useDebugValue:Ba,useDeferredValue:function(e){return Va(ba(),la.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ca,useId:Ha,unstable_isNewReconciler:!1},ts={readContext:Oo,useCallback:Wa,useContext:Oo,useEffect:Ma,useImperativeHandle:za,useInsertionEffect:Fa,useLayoutEffect:La,useMemo:Ua,useReducer:ka,useRef:Ra,useState:function(){return ka(xa)},useDebugValue:Ba,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:Va(t,la.memoizedState,e)},useTransition:function(){return[ka(xa)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ca,useId:Ha,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),o=jo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(nu(t,e,i,r),Bo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),o=jo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(nu(t,e,i,r),Bo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=jo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zo(e,i,r))&&(nu(t,e,r,n),Bo(t,e,r))}};function os(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function as(e,t,n){var r=!1,i=Ti,o=t.contextType;return"object"===typeof o&&null!==o?o=Oo(o):(i=Ri(t)?Ai:_i.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):Ti),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Oo(o):(o=Ri(t)?Ai:_i.current,i.context=Oi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Uo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function us(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function cs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=jo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,Gl=r),hs(0,t)},n}function fs(e,t,n){(n=jo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Iu.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=jo(-1,1)).tag=2,zo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vs=x.ReactCurrentOwner,bs=!1;function xs(e,t,n,r){t.child=null===e?ko(t,null,n,r):wo(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var o=t.ref;return Ao(t,i),r=ma(e,t,n,r,o,i),n=ya(),null===e||bs?(io&&n&&eo(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vs(e,t,i))}function ks(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Ru(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ss(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Vs(e,t,i)}return t.flags|=1,(e=$u(o,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Vs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Es(e,t,n,r,i)}function Cs(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei($l,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei($l,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ei($l,Rl),Rl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ei($l,Rl),Rl|=r;return xs(e,t,i,n),t.child}function Is(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,n,r,i){var o=Ri(n)?Ai:_i.current;return o=Oi(t,o),Ao(t,i),n=ma(e,t,n,r,o,i),r=ya(),null===e||bs?(io&&r&&eo(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vs(e,t,i))}function Ts(e,t,n,r,i){if(Ri(n)){var o=!0;Mi(t)}else o=!1;if(Ao(t,i),null===t.stateNode)Us(e,t),as(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Oo(u):u=Oi(t,u=Ri(n)?Ai:_i.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&ss(t,a,r,u),Mo=!1;var d=t.memoizedState;a.state=d,Uo(t,r,a,i),l=t.memoizedState,s!==r||d!==l||Ni.current||Mo?("function"===typeof c&&(rs(t,n,c,r),l=t.memoizedState),(s=Mo||os(t,n,s,r,d,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Lo(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ns(t.type,s),a.props=u,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Oo(l):l=Oi(t,l=Ri(n)?Ai:_i.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&ss(t,a,r,l),Mo=!1,d=t.memoizedState,a.state=d,Uo(t,r,a,i);var f=t.memoizedState;s!==h||d!==f||Ni.current||Mo?("function"===typeof p&&(rs(t,n,p,r),f=t.memoizedState),(u=Mo||os(t,n,u,r,d,f,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return _s(e,t,n,r,o,i)}function _s(e,t,n,r,i,o){Is(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Fi(t,n,!1),Vs(e,t,o);r=t.stateNode,vs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,s,o)):xs(e,t,s,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),Yo(e,t.containerInfo)}function As(e,t,n,r,i){return fo(),go(i),t.flags|=256,xs(e,t,n,r),t.child}var Os,Rs,$s,Ps,Ds={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ei(ea,1&a),null===e)return uo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Mu(l,i,0,null),e=Du(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ds,e):Ls(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,js(e,t,s,r=cs(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Mu({mode:"visible",children:r.children},i,0,null),(a=Du(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&wo(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ds,a);if(0===(1&t.mode))return js(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,js(e,t,s,r=cs(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Nl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Do(e,i),nu(r,e,i,-1))}return gu(),js(e,t,s,r=cs(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tu.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ui(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(qi[Ki++]=Yi,qi[Ki++]=Qi,qi[Ki++]=Xi,Yi=e.id,Qi=e.overflow,Xi=t),t=Ls(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=$u(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=$u(r,s):(s=Du(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ms(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ds,i}return e=(s=e.child).sibling,i=$u(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ls(e,t){return(t=Mu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,r){return null!==r&&go(r),wo(t,e.child,null,n),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),No(e.return,t,n)}function Bs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ws(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,o);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Us(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=$u(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$u(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Ri(t.type)&&$i(),Hs(t),null;case 3:return r=t.stateNode,Qo(),Ii(Ni),Ii(_i),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(au(oo),oo=null))),Rs(e,t),Hs(t),null;case 5:Zo(t);var i=Xo(Ko.current);if(n=t.type,null!==e&&null!=t.stateNode)$s(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Hs(t),null}if(e=Xo(Ho.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)jr(Dr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,a),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},jr("invalid",r);break;case"textarea":ie(r,a),jr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,a,!0);break;case"textarea":H(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[pi]=r,Os(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)jr(Dr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=X(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(a in ve(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?me(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&jr("scroll",e):null!=c&&b(e,a,c,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Ps(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Xo(Ko.current),Xo(Ho.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Hs(t),null;case 13:if(Ii(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[di]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),a=!1}else null!==oo&&(au(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Pl&&(Pl=3):gu())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return Qo(),Rs(e,t),null===e&&Wr(t.stateNode.containerInfo),Hs(t),null;case 10:return _o(t.type._context),Hs(t),null;case 19:if(Ii(ea),null===(a=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Gs(a,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Gs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Wl&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Hs(t),null}else 2*Qe()-a.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=ea.current,Ei(ea,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ks(e,t){switch(to(t),t.tag){case 1:return Ri(t.type)&&$i(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),Ii(Ni),Ii(_i),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Ii(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(ea),null;case 4:return Qo(),null;case 10:return _o(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(){},$s=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xo(Ho.current);var o,a=null;switch(n){case"input":i=X(e,i),r=X(e,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&jr("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Ps=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Ys=!1,Qs="function"===typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cu(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Cu(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||Zs(n,t);case 6:var r=cl,i=hl;cl=null,dl(e,t,n),hl=i,null!==(cl=r)&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Wt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=hl,cl=n.stateNode.containerInfo,hl=!0,dl(e,t,n),cl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ys&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Cu(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,dl(e,t,n),Ys=r):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=_u.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===cl)throw Error(o(160));pl(a,s,i),cl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Cu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Cu(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Cu(e,e.return,m)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Cu(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(i,a),be(l,s);var c=be(l,a);for(s=0;s<u.length;s+=2){var h=u[s],d=u[s+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,c)}switch(l){case"input":J(i,a);break;case"textarea":oe(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(i,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(m){Cu(e,e.return,m)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Cu(e,e.return,m)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(m){Cu(e,e.return,m)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Qe())),4&r&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(c=Ys)||h,gl(t,e),Ys=c):gl(t,e),yl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Js=e,h=e.child;null!==h;){for(d=Js=h;null!==Js;){switch(f=(p=Js).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zs(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Cu(r,n,m)}}break;case 5:Zs(p,p.return);break;case 22:if(null!==p.memoizedState){wl(d);continue}}null!==f?(f.return=p,Js=f):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ge("display",s))}catch(m){Cu(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Cu(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),yl(e),4&r&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Cu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Js=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Xs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ys;s=Xs;var u=Ys;if(Xs=a,(Ys=l)&&!u)for(Js=i;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?kl(i):null!==l?(l.return=a,Js=l):kl(i);for(;null!==o;)Js=o,bl(o,t,n),o=o.sibling;Js=i,Xs=s,Ys=u}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Js=o):xl(e)}}function xl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Vo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Wt(d)}}}break;default:throw Error(o(163))}Ys||512&t.flags&&il(t)}catch(p){Cu(t,t.return,p)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function wl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function kl(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Cu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cu(t,i,l)}}var o=t.return;try{il(t)}catch(l){Cu(t,o,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Cu(t,a,l)}}}catch(l){Cu(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Sl,Cl=Math.ceil,Il=x.ReactCurrentDispatcher,El=x.ReactCurrentOwner,Tl=x.ReactCurrentBatchConfig,_l=0,Nl=null,Al=null,Ol=0,Rl=0,$l=Ci(0),Pl=0,Dl=null,Ml=0,Fl=0,Ll=0,jl=null,zl=null,Bl=0,Wl=1/0,Ul=null,Vl=!1,Gl=null,Hl=null,ql=!1,Kl=null,Xl=0,Yl=0,Ql=null,Jl=-1,Zl=0;function eu(){return 0!==(6&_l)?Qe():-1!==Jl?Jl:Jl=Qe()}function tu(e){return 0===(1&e.mode)?1:0!==(2&_l)&&0!==Ol?Ol&-Ol:null!==mo.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nu(e,t,n,r){if(50<Yl)throw Yl=0,Ql=null,Error(o(185));yt(e,n,r),0!==(2&_l)&&e===Nl||(e===Nl&&(0===(2&_l)&&(Fl|=n),4===Pl&&su(e,Ol)),ru(e,r),1===n&&0===_l&&0===(1&t.mode)&&(Wl=Qe()+500,ji&&Wi()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=dt(e,e===Nl?Ol:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(lu.bind(null,e)):Bi(lu.bind(null,e)),ai((function(){0===(6&_l)&&Wi()})),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nu(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Jl=-1,Zl=0,0!==(6&_l))throw Error(o(327));var n=e.callbackNode;if(ku()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mu(e,r);else{t=r;var i=_l;_l|=2;var a=fu();for(Nl===e&&Ol===t||(Ul=null,Wl=Qe()+500,du(e,t));;)try{vu();break}catch(l){pu(e,l)}To(),Il.current=a,_l=i,null!==Al?t=0:(Nl=null,Ol=0,t=Pl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ou(e,i))),1===t)throw n=Dl,du(e,0),su(e,r),ru(e,Qe()),n;if(6===t)su(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mu(e,r))&&(0!==(a=ft(e))&&(r=a,t=ou(e,a))),1===t))throw n=Dl,du(e,0),su(e,r),ru(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wu(e,zl,Ul);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=Bl+500-Qe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wu.bind(null,e,zl,Ul),t);break}wu(e,zl,Ul);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(wu.bind(null,e,zl,Ul),r);break}wu(e,zl,Ul);break;default:throw Error(o(329))}}}return ru(e,Qe()),e.callbackNode===n?iu.bind(null,e):null}function ou(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=mu(e,t))&&(t=zl,zl=n,null!==t&&au(t)),e}function au(e){null===zl?zl=e:zl.push.apply(zl,e)}function su(e,t){for(t&=~Ll,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&_l))throw Error(o(327));ku();var t=dt(e,0);if(0===(1&t))return ru(e,Qe()),null;var n=mu(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Dl,du(e,0),su(e,t),ru(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,zl,Ul),ru(e,Qe()),null}function uu(e,t){var n=_l;_l|=1;try{return e(t)}finally{0===(_l=n)&&(Wl=Qe()+500,ji&&Wi())}}function cu(e){null!==Kl&&0===Kl.tag&&0===(6&_l)&&ku();var t=_l;_l|=1;var n=Tl.transition,r=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=r,Tl.transition=n,0===(6&(_l=t))&&Wi()}}function hu(){Rl=$l.current,Ii($l)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&$i();break;case 3:Qo(),Ii(Ni),Ii(_i),ra();break;case 5:Zo(r);break;case 4:Qo();break;case 13:case 19:Ii(ea);break;case 10:_o(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Nl=e,Al=e=$u(e.current,null),Ol=Rl=t,Pl=0,Dl=null,Ll=Fl=Ml=0,zl=jl=null,null!==Ro){for(t=0;t<Ro.length;t++)if(null!==(r=(n=Ro[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Ro=null}return e}function pu(e,t){for(;;){var n=Al;try{if(To(),ia.current=Ja,ca){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(aa=0,ua=la=sa=null,ha=!1,da=0,El.current=null,null===n||null===n.return){Pl=1,Dl=t,Al=null;break}e:{var a=e,s=n.return,l=n,u=t;if(t=Ol,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ms(s);if(null!==f){f.flags&=-257,ys(f,s,l,0,t),1&f.mode&&gs(a,c,t),u=c;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(u),t.updateQueue=m}else g.add(u);break e}if(0===(1&t)){gs(a,c,t),gu();break e}u=Error(o(426))}else if(io&&1&l.mode){var y=ms(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,t),go(us(u,l));break e}}a=u=us(u,l),4!==Pl&&(Pl=2),null===jl?jl=[a]:jl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Wo(a,ps(0,u,t));break e;case 1:l=u;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hl||!Hl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Wo(a,fs(a,l,t));break e}}a=a.return}while(null!==a)}xu(n)}catch(x){t=x,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function fu(){var e=Il.current;return Il.current=Ja,null===e?Ja:e}function gu(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Nl||0===(268435455&Ml)&&0===(268435455&Fl)||su(Nl,Ol)}function mu(e,t){var n=_l;_l|=2;var r=fu();for(Nl===e&&Ol===t||(Ul=null,du(e,t));;)try{yu();break}catch(i){pu(e,i)}if(To(),_l=n,Il.current=r,null!==Al)throw Error(o(261));return Nl=null,Ol=0,Pl}function yu(){for(;null!==Al;)bu(Al)}function vu(){for(;null!==Al&&!Xe();)bu(Al)}function bu(e){var t=Sl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?xu(e):Al=t,El.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Rl)))return void(Al=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Pl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Pl&&(Pl=5)}function wu(e,t,n){var r=bt,i=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,r){do{ku()}while(null!==Kl);if(0!==(6&_l))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Nl&&(Al=Nl=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Nu(tt,(function(){return ku(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var s=bt;bt=1;var l=_l;_l|=4,El.current=null,function(e,t){if(ei=Vt,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,l=-1,u=-1,c=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==a||0!==r&&3!==d.nodeType||(u=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++c===i&&(l=s),p===a&&++h===r&&(u=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Vt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ns(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(w){Cu(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}g=tl,tl=!1}(e,n),ml(n,e),fr(ti),Vt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ye(),_l=l,bt=s,Tl.transition=a}else e.current=n;if(ql&&(ql=!1,Kl=e,Xl=i),a=e.pendingLanes,0===a&&(Hl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,e=Gl,Gl=null,e;0!==(1&Xl)&&0!==e.tag&&ku(),a=e.pendingLanes,0!==(1&a)?e===Ql?Yl++:(Yl=0,Ql=e):Yl=0,Wi()}(e,t,n,r)}finally{Tl.transition=i,bt=r}return null}function ku(){if(null!==Kl){var e=xt(Xl),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Xl=0,0!==(6&_l))throw Error(o(331));var i=_l;for(_l|=4,Js=e.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Js=c;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Js=d;else for(;null!==Js;){var p=(h=Js).sibling,f=h.return;if(ol(h),h===c){Js=null;break}if(null!==p){p.return=f,Js=p;break}Js=f}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else e:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Js=v;break e}Js=a.return}}var b=e.current;for(Js=b;null!==Js;){var x=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Js=x;else e:for(s=b;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){Cu(l,l.return,k)}if(l===s){Js=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Js=w;break e}Js=l.return}}if(_l=i,Wi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{bt=n,Tl.transition=t}}return!1}function Su(e,t,n){e=zo(e,t=ps(0,t=us(n,t),1),1),t=eu(),null!==e&&(yt(e,1,t),ru(e,t))}function Cu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=zo(t,e=fs(t,e=us(n,e),1),1),e=eu(),null!==t&&(yt(t,1,e),ru(t,e));break}}t=t.return}}function Iu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Ol&n)===n&&(4===Pl||3===Pl&&(130023424&Ol)===Ol&&500>Qe()-Bl?du(e,0):Ll|=n),ru(e,t)}function Eu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Do(e,t))&&(yt(e,t,n),ru(e,n))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Eu(e,n)}function _u(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Eu(e,n)}function Nu(e,t){return qe(e,t)}function Au(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ou(e,t,n,r){return new Au(e,t,n,r)}function Ru(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $u(e,t){var n=e.alternate;return null===n?((n=Ou(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Ru(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Du(n.children,i,a,t);case C:s=8,i|=8;break;case I:return(e=Ou(12,n,t,2|i)).elementType=I,e.lanes=a,e;case N:return(e=Ou(13,n,t,i)).elementType=N,e.lanes=a,e;case A:return(e=Ou(19,n,t,i)).elementType=A,e.lanes=a,e;case $:return Mu(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case T:s=9;break e;case _:s=11;break e;case O:s=14;break e;case R:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ou(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Du(e,t,n,r){return(e=Ou(7,e,r,t)).lanes=n,e}function Mu(e,t,n,r){return(e=Ou(22,e,r,t)).elementType=$,e.lanes=n,e.stateNode={isHidden:!1},e}function Fu(e,t,n){return(e=Ou(6,e,null,t)).lanes=n,e}function Lu(e,t,n){return(t=Ou(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ju(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zu(e,t,n,r,i,o,a,s,l){return e=new ju(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ou(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fo(o),e}function Bu(e){if(!e)return Ti;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Di(e,n,t)}return t}function Wu(e,t,n,r,i,o,a,s,l){return(e=zu(n,r,!0,e,0,o,0,s,l)).context=Bu(null),n=e.current,(o=jo(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,zo(n,o,i),e.current.lanes=i,yt(e,i,r),ru(e,r),e}function Uu(e,t,n,r){var i=t.current,o=eu(),a=tu(i);return n=Bu(n),null===t.context?t.context=n:t.pendingContext=n,(t=jo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zo(i,t,a))&&(nu(e,i,a,o),Bo(e,i,a)),a}function Vu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),fo();break;case 5:Jo(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ei(ea,1&ea.current),null!==(e=Vs(e,t,n))?e.sibling:null);Ei(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Vs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,io&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Us(e,t),e=t.pendingProps;var i=Oi(t,_i.current);Ao(t,n),i=ma(null,t,r,e,i,n);var a=ya();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(a=!0,Mi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fo(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=_s(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Us(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ru(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===O)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Es(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=ks(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Ns(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Lo(e,t),Uo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=As(e,t,r,n,i=us(Error(o(423)),t));break e}if(r!==i){t=As(e,t,r,n,i=us(Error(o(424)),t));break e}for(ro=ui(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=ko(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=Vs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return Jo(t),null===e&&uo(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Is(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&uo(t),null;case 13:return Fs(e,t,n);case 4:return Yo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wo(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ei(So,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ni.current){t=Vs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=jo(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),No(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),No(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ao(t,n),r=r(i=Oo(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),ks(e,t,r,i=ns(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Us(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ao(t,n),as(t,r,i),ls(t,r,i,n),_s(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Cs(e,t,n)}throw Error(o(156,t.tag))};var qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Ku(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function Zu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Vu(a);s.call(e)}}Uu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Vu(a);o.call(e)}}var a=Wu(t,r,e,0,null,!1,0,"",Ju);return e._reactRootContainer=a,e[fi]=a.current,Wr(8===e.nodeType?e.parentNode:e),cu(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Vu(l);s.call(e)}}var l=zu(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[fi]=l.current,Wr(8===e.nodeType?e.parentNode:e),cu((function(){Uu(t,l,n,r)})),l}(n,t,e,i,r);return Vu(a)}Xu.prototype.render=Ku.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Uu(e,t,null,null)},Xu.prototype.unmount=Ku.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Uu(null,e,null,null)})),t[fi]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$t.length&&0!==t&&t<$t[n].priority;n++);$t.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ru(t,Qe()),0===(6&_l)&&(Wl=Qe()+500,Wi()))}break;case 13:cu((function(){var t=Do(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Hu(e,1)}},kt=function(e){if(13===e.tag){var t=Do(e,134217728);if(null!==t)nu(t,e,134217728,eu());Hu(e,134217728)}},St=function(e){if(13===e.tag){var t=tu(e),n=Do(e,t);if(null!==n)nu(n,e,t,eu());Hu(e,t)}},Ct=function(){return bt},It=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));q(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=uu,Ne=cu;var ec={usingClientEntryPoint:!1,Events:[bi,xi,wi,Ee,Te,uu]},tc={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),ot=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yu(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yu(e))throw Error(o(299));var n=!1,r="",i=qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zu(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Ku(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Qu(t))throw Error(o(200));return Zu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yu(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wu(t,null,e,1,null!=n?n:null,i,0,a,s),e[fi]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xu(t)},t.render=function(e,t,n){if(!Qu(t))throw Error(o(200));return Zu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(o(40));return!!e._reactRootContainer&&(cu((function(){Zu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:s.current}}t.jsx=u,t.jsxs=u},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,g(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,i)&&!C.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+_(l,0):o,w(a)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(a,t,i,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",w(e))for(var u=0;u<e.length;u++){var c=o+_(s=e[u],u);l+=N(s,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=N(s=s.value,t,i,c=o+_(s,u++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},$={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:$,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)k.call(t,u)&&!C.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=$.transition;$.transition={};try{e()}finally{$.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},6378:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case s:case a:case d:case p:return e;default:switch(e=e&&e.$$typeof){case c:case u:case h:case g:case f:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isFragment=function(e){return y(e)===o}},9062:(e,t,n)=>{"use strict";e.exports=n(6378)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,d=null,p=3,f=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(m=!1,x(e),!g)if(null!==r(u))g=!0,$(k);else{var t=r(c);null!==t&&P(w,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,v(E),E=-1),f=!0;var o=p;try{for(x(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!N());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),x(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&P(w,h.startTime-n),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,I=null,E=-1,T=5,_=-1;function N(){return!(t.unstable_now()-_<T)}function A(){if(null!==I){var e=t.unstable_now();_=e;var n=!0;try{n=I(!0,e)}finally{n?S():(C=!1,I=null)}}else C=!1}if("function"===typeof b)S=function(){b(A)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=A,S=function(){R.postMessage(null)}}else S=function(){y(A,0)};function $(e){I=e,C||(C=!0,S())}function P(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,$(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(m?(v(E),E=-1):m=!0,P(w,o-a))):(e.sortIndex=s,n(u,e),g||f||(g=!0,$(k))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},4334:(e,t,n)=>{var r=n(7359),i=n(7066),o=n(9016),a=n(9538),s=n(6288),l=n(5262),u=n(2430);u.alea=r,u.xor128=i,u.xorwow=o,u.xorshift7=a,u.xor4096=s,u.tychei=l,e.exports=u},7359:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new o(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.alea=s}(0,e=n.nmd(e),n.amdD)},5262:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.tychei=s}(0,e=n.nmd(e),n.amdD)},7066:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xor128=s}(0,e=n.nmd(e),n.amdD)},6288:function(e,t,n){var r;!function(e,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,o=t.i;return t.w=r=r+1640531527|0,n=i[o+34&127],e=i[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,i,o,a,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,o=-32;o<l;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=r+a)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=a,e.X=s,e.i=i}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xor4096=s}(0,e=n.nmd(e),n.amdD)},9538:function(e,t,n){var r;!function(e,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xorshift7=s}(0,e=n.nmd(e),n.amdD)},9016:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xorwow=s}(0,e=n.nmd(e),n.amdD)},2430:function(e,t,n){var r;!function(i,o,a){var s,l=256,u=a.pow(l,6),c=a.pow(2,52),h=2*c,d=255;function p(e,t,n){var r=[],d=y(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,v(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(i.crypto||i.msCrypto).getRandomValues(e)),v(e)}catch(r){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,v(o)]}}():e,3),r),p=new f(r),b=function(){for(var e=p.g(6),t=u,n=0;e<c;)e=(e+n)*l,t*=l,n=p.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,y(v(p.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&g(r,p),e.state=function(){return g(p,{})}),n?(a.random=e,t):e})(b,d,"global"in t?t.global:this==a,t.state)}function f(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);i<l;)a[i]=i++;for(i=0;i<l;i++)a[i]=a[o=d&o+e[i%n]+(t=a[i])],a[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,a=r.S;e--;)t=a[i=d&i+1],n=n*l+a[d&(a[i]=a[o=d&o+t])+(a[o]=t)];return r.i=i,r.j=o,n})(l)}function g(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(m(e[n],t-1))}catch(o){}return r.length?r:"string"==i?e:e+"\0"}function y(e,t){for(var n,r=e+"",i=0;i<r.length;)t[d&i]=d&(n^=19*t[d&i])+r.charCodeAt(i++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(y(a.random(),o),e.exports){e.exports=p;try{s=n(1234)}catch(b){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},5817:()=>{},8590:()=>{},4530:()=>{},8108:()=>{},551:()=>{},1234:()=>{}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".5779cf73.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="site:";n.l=(r,i,o,a)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,a=r[0],s=r[1],l=r[2],u=0;if(a.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);u<a.length;u++)o=a[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunksite=self.webpackChunksite||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{scaleBand:()=>fs,scaleDiverging:()=>Gd,scaleDivergingLog:()=>Hd,scaleDivergingPow:()=>Kd,scaleDivergingSqrt:()=>Xd,scaleDivergingSymlog:()=>qd,scaleIdentity:()=>ju,scaleImplicit:()=>ds,scaleLinear:()=>Lu,scaleLog:()=>Ku,scaleOrdinal:()=>ps,scalePoint:()=>ms,scalePow:()=>rc,scaleQuantile:()=>gc,scaleQuantize:()=>mc,scaleRadial:()=>ac,scaleSequential:()=>Ld,scaleSequentialLog:()=>jd,scaleSequentialPow:()=>Bd,scaleSequentialQuantile:()=>Ud,scaleSequentialSqrt:()=>Wd,scaleSequentialSymlog:()=>zd,scaleSqrt:()=>ic,scaleSymlog:()=>Ju,scaleThreshold:()=>yc,scaleTime:()=>Pd,scaleUtc:()=>Dd,tickFormat:()=>Mu});var t={};n.r(t),n.d(t,{assertParamsValid:()=>jJ,computeFlatOffset:()=>JJ,computeOutShape:()=>BJ,getNormalizedAxes:()=>GJ,isSliceContinous:()=>QJ,maskToAxes:()=>zJ,parseSliceParams:()=>ZJ,sliceInfo:()=>eZ,startForAxis:()=>XJ,startIndicesWithElidedDims:()=>HJ,stopForAxis:()=>YJ,stopIndicesWithElidedDims:()=>qJ,stridesForAxis:()=>KJ,stridesWithElidedDims:()=>WJ});var r={};n.r(r),n.d(r,{collectGatherOpShapeInfo:()=>v3,computeOutShape:()=>y3,segOpComputeOptimalWindowSize:()=>m3});var i={};n.r(i),n.d(i,{ERF_A1:()=>P2,ERF_A2:()=>D2,ERF_A3:()=>M2,ERF_A4:()=>F2,ERF_A5:()=>L2,ERF_P:()=>$2,PARALLELIZE_THRESHOLD:()=>b2,RowPartitionType:()=>f2,SELU_SCALE:()=>R2,SELU_SCALEALPHA:()=>O2,applyActivation:()=>y1,assertAndGetBroadcastShape:()=>kJ,assertAxesAreInnerMostDims:()=>c0,assertParamsConsistent:()=>d2,assignToTypedArray:()=>V2,axesAreInnerMostDims:()=>a0,calculateShapes:()=>A2,checkEinsumDimSizes:()=>Z2,checkPadOnDimRoundingMode:()=>bZ,combineLocations:()=>s0,combineRaggedTensorToTensorShapes:()=>g2,complexWithEvenIndex:()=>B2,complexWithOddIndex:()=>W2,computeConv2DInfo:()=>lZ,computeConv3DInfo:()=>uZ,computeDefaultPad:()=>cZ,computeDilation2DInfo:()=>oZ,computeOptimalWindowSize:()=>x2,computeOutAndReduceShapes:()=>l0,computeOutShape:()=>p2,computePool2DInfo:()=>aZ,computePool3DInfo:()=>sZ,convertConv2DDataFormat:()=>vZ,decodeEinsumEquation:()=>Q2,eitherStridesOrDilationsAreOne:()=>mZ,expandShapeToKeepDim:()=>u0,exponent:()=>H2,exponents:()=>G2,fromStringArrayToUint8:()=>x3,fromUint8ToStringArray:()=>b3,getAxesPermutation:()=>h0,getBroadcastDims:()=>xJ,getComplexWithIndex:()=>U2,getEinsumComputePath:()=>e3,getEinsumPermutation:()=>J2,getFusedBiasGradient:()=>m1,getFusedDyActivation:()=>g1,getImageCenter:()=>w2,getInnerMostAxes:()=>p0,getPermuted:()=>S2,getRaggedRank:()=>y2,getReductionAxes:()=>wJ,getReshaped:()=>k2,getReshapedPermuted:()=>C2,getRowPartitionTypesHelper:()=>m2,getSliceBeginCoords:()=>I2,getSliceSize:()=>E2,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>i3,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>o3,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>a3,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>u3,getSparseReshapeInputOutputMismatchErrorMessage:()=>h3,getSparseReshapeInputOutputMultipleErrorMessage:()=>c3,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>s3,getSparseReshapeNegativeOutputDimErrorMessage:()=>l3,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>g3,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>d3,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>p3,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>f3,getUndoAxesPermutation:()=>d0,isIdentityPermutation:()=>t3,log:()=>NX,mergeRealAndImagArrays:()=>j2,prepareAndValidate:()=>T2,prepareSplitSize:()=>r3,segment_util:()=>r,shouldFuse:()=>v1,slice_util:()=>t,splitRealAndImagArrays:()=>z2,stridesOrDilationsArePositive:()=>yZ,tupleValuesAreOne:()=>gZ,upcastType:()=>TY,validateDefaultValueShape:()=>v2,validateInput:()=>N2,validateUpdateShape:()=>_2,warn:()=>_X});var o={};n.r(o),n.d(o,{mx:()=>yre,XI:()=>uie,Nk:()=>cie,f6:()=>die,ct:()=>dre,YG:()=>gie,hH:()=>wie,z3:()=>ooe,sG:()=>moe,uM:()=>woe,vS:()=>Loe,qB:()=>Hoe,GG:()=>Koe,lg:()=>Zoe,rq:()=>Yoe,cu:()=>dae,WR:()=>uae,GE:()=>gae,px:()=>yae,jC:()=>Rae,He:()=>Dae,hE:()=>Gae,BF:()=>Qie,Dk:()=>tse,cl:()=>use,_B:()=>kse,ub:()=>Tse,_f:()=>Ase,Ku:()=>Mse,qy:()=>Lse,Zy:()=>Yse,bu:()=>Zse,zv:()=>rre,dH:()=>Ere,HS:()=>oie,yH:()=>ble,l3:()=>wle,z9:()=>Sle,x6:()=>_le,_m:()=>Dle,eW:()=>zle,GK:()=>Ule,SP:()=>Hle,yr:()=>Kle,dl:()=>Toe,Dw:()=>eue,xT:()=>iue,_X:()=>$re,wz:()=>hue});var a=n(5043),s=n.t(a,2),l=n(4391);function u(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some((t=>e.test(t.brand))))||e.test(window.navigator.userAgent))}function c(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function h(e){let t=null;return()=>(null==t&&(t=e()),t)}const d=h((function(){return c(/^Mac/i)})),p=h((function(){return c(/^iPhone/i)})),f=h((function(){return c(/^iPad/i)||d()&&navigator.maxTouchPoints>1})),g=h((function(){return p()||f()})),m=(h((function(){return d()||g()})),h((function(){return u(/AppleWebKit/i)&&!m()})),h((function(){return u(/Chrome/i)}))),y=h((function(){return u(/Android/i)}));h((function(){return u(/Firefox/i)}));const v=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.ownerDocument)&&void 0!==t?t:document},b=e=>{if(e&&"window"in e&&e.window===e)return e;return v(e).defaultView||window};let x=null,w=new Set,k=new Map,S=!1,C=!1;const I={Tab:!0,Escape:!0};function E(e,t){for(let n of w)n(e,t)}function T(e){S=!0,function(e){return!(e.metaKey||!d()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key)}(e)&&(x="keyboard",E("keyboard",e))}function _(e){x="pointer","mousedown"!==e.type&&"pointerdown"!==e.type||(S=!0,E("pointer",e))}function N(e){var t;(0===(t=e).mozInputSource&&t.isTrusted||(y()&&t.pointerType?"click"===t.type&&1===t.buttons:0===t.detail&&!t.pointerType))&&(S=!0,x="virtual")}function A(e){e.target!==window&&e.target!==document&&(S||C||(x="virtual",E("virtual",e)),S=!1,C=!1)}function O(){S=!1,C=!0}function R(e){if("undefined"===typeof window||k.get(b(e)))return;const t=b(e),n=v(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){S=!0,r.apply(this,arguments)},n.addEventListener("keydown",T,!0),n.addEventListener("keyup",T,!0),n.addEventListener("click",N,!0),t.addEventListener("focus",A,!0),t.addEventListener("blur",O,!1),"undefined"!==typeof PointerEvent?(n.addEventListener("pointerdown",_,!0),n.addEventListener("pointermove",_,!0),n.addEventListener("pointerup",_,!0)):(n.addEventListener("mousedown",_,!0),n.addEventListener("mousemove",_,!0),n.addEventListener("mouseup",_,!0)),t.addEventListener("beforeunload",(()=>{$(e)}),{once:!0}),k.set(t,{focus:r})}const $=(e,t)=>{const n=b(e),r=v(e);t&&r.removeEventListener("DOMContentLoaded",t),k.has(n)&&(n.HTMLElement.prototype.focus=k.get(n).focus,r.removeEventListener("keydown",T,!0),r.removeEventListener("keyup",T,!0),r.removeEventListener("click",N,!0),n.removeEventListener("focus",A,!0),n.removeEventListener("blur",O,!1),"undefined"!==typeof PointerEvent?(r.removeEventListener("pointerdown",_,!0),r.removeEventListener("pointermove",_,!0),r.removeEventListener("pointerup",_,!0)):(r.removeEventListener("mousedown",_,!0),r.removeEventListener("mousemove",_,!0),r.removeEventListener("mouseup",_,!0)),k.delete(n))};function P(){return"pointer"!==x}"undefined"!==typeof document&&function(e){const t=v(e);let n;"loading"!==t.readyState?R(e):(n=()=>{R(e)},t.addEventListener("DOMContentLoaded",n))}();const D=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function M(e,t,n){R(),(0,a.useEffect)((()=>{let t=(t,r)=>{(function(e,t,n){var r;const i="undefined"!==typeof window?b(null===n||void 0===n?void 0:n.target).HTMLInputElement:HTMLInputElement,o="undefined"!==typeof window?b(null===n||void 0===n?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,a="undefined"!==typeof window?b(null===n||void 0===n?void 0:n.target).HTMLElement:HTMLElement,s="undefined"!==typeof window?b(null===n||void 0===n?void 0:n.target).KeyboardEvent:KeyboardEvent;return!((e=e||(null===n||void 0===n?void 0:n.target)instanceof i&&!D.has(null===n||void 0===n||null===(r=n.target)||void 0===r?void 0:r.type)||(null===n||void 0===n?void 0:n.target)instanceof o||(null===n||void 0===n?void 0:n.target)instanceof a&&(null===n||void 0===n?void 0:n.target.isContentEditable))&&"keyboard"===t&&n instanceof s&&!I[n.key])})(!!(null===n||void 0===n?void 0:n.isTextInput),t,r)&&e(P())};return w.add(t),()=>{w.delete(t)}}),t)}const F="undefined"!==typeof document?a.useLayoutEffect:()=>{};function L(e){const t=(0,a.useRef)(null);return F((()=>{t.current=e}),[e]),(0,a.useCallback)((function(){const e=t.current;return null===e||void 0===e?void 0:e(...arguments)}),[])}class j{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=e}}function z(e){let t=(0,a.useRef)({isFocused:!1,observer:null});F((()=>{const e=t.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}}),[]);let n=L((t=>{null===e||void 0===e||e(t)}));return(0,a.useCallback)((e=>{if(e.target instanceof HTMLButtonElement||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=e.target,i=e=>{t.current.isFocused=!1,r.disabled&&n(new j("blur",e)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};r.addEventListener("focusout",i,{once:!0}),t.current.observer=new MutationObserver((()=>{if(t.current.isFocused&&r.disabled){var e;null===(e=t.current.observer)||void 0===e||e.disconnect();let n=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}})),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}}),[n])}function B(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:i}=e;const o=(0,a.useCallback)((e=>{if(e.target===e.currentTarget)return r&&r(e),i&&i(!1),!0}),[r,i]),s=z(o),l=(0,a.useCallback)((e=>{const t=v(e.target);e.target===e.currentTarget&&t.activeElement===e.target&&(n&&n(e),i&&i(!0),s(e))}),[i,n,s]);return{focusProps:{onFocus:!t&&(n||i||r)?l:void 0,onBlur:t||!r&&!i?void 0:o}}}function W(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=e,o=(0,a.useRef)({isFocusWithin:!1}),s=(0,a.useCallback)((e=>{o.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(o.current.isFocusWithin=!1,n&&n(e),i&&i(!1))}),[n,i,o]),l=z(s),u=(0,a.useCallback)((e=>{o.current.isFocusWithin||document.activeElement!==e.target||(r&&r(e),i&&i(!0),o.current.isFocusWithin=!0,l(e))}),[r,i,l]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:u,onBlur:s}}}function U(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{autoFocus:t=!1,isTextInput:n,within:r}=e,i=(0,a.useRef)({isFocused:!1,isFocusVisible:t||P()}),[o,s]=(0,a.useState)(!1),[l,u]=(0,a.useState)((()=>i.current.isFocused&&i.current.isFocusVisible)),c=(0,a.useCallback)((()=>u(i.current.isFocused&&i.current.isFocusVisible)),[]),h=(0,a.useCallback)((e=>{i.current.isFocused=e,s(e),c()}),[c]);M((e=>{i.current.isFocusVisible=e,c()}),[],{isTextInput:n});let{focusProps:d}=B({isDisabled:r,onFocusChange:h}),{focusWithinProps:p}=W({isDisabled:!r,onFocusWithinChange:h});return{isFocused:o,isFocusVisible:l,focusProps:r?p:d}}let V=!1,G=0;function H(){V=!0,setTimeout((()=>{V=!1}),50)}function q(e){"touch"===e.pointerType&&H()}function K(){if("undefined"!==typeof document)return"undefined"!==typeof PointerEvent?document.addEventListener("pointerup",q):document.addEventListener("touchend",H),G++,()=>{G--,G>0||("undefined"!==typeof PointerEvent?document.removeEventListener("pointerup",q):document.removeEventListener("touchend",H))}}var X=Object.defineProperty,Y=(e,t,n)=>(((e,t,n)=>{t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let Q=new class{constructor(){Y(this,"current",this.detect()),Y(this,"handoffState","pending"),Y(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}};function J(e){return Q.isServer?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function Z(){let e=[],t={addEventListener:(e,n,r,i)=>(e.addEventListener(n,r,i),t.add((()=>e.removeEventListener(n,r,i)))),requestAnimationFrame(){let e=requestAnimationFrame(...arguments);return t.add((()=>cancelAnimationFrame(e)))},nextFrame(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.requestAnimationFrame((()=>t.requestAnimationFrame(...n)))},setTimeout(){let e=setTimeout(...arguments);return t.add((()=>clearTimeout(e)))},microTask(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let i={current:!0};return function(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}((()=>{i.current&&n[0]()})),t.add((()=>{i.current=!1}))},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add((()=>{Object.assign(e.style,{[t]:r})}))},group(e){let t=Z();return e(t),this.add((()=>t.dispose()))},add:t=>(e.includes(t)||e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function ee(){let[e]=(0,a.useState)(Z);return(0,a.useEffect)((()=>()=>e.dispose()),[e]),e}let te=(e,t)=>{Q.isServer?(0,a.useEffect)(e,t):(0,a.useLayoutEffect)(e,t)};let ne=function(e){let t=function(e){let t=(0,a.useRef)(e);return te((()=>{t.current=e}),[e]),t}(e);return a.useCallback((function(){return t.current(...arguments)}),[t])};function re(){let{disabled:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useRef)(null),[n,r]=(0,a.useState)(!1),i=ee(),o=ne((()=>{t.current=null,r(!1),i.dispose()})),s=ne((e=>{if(i.dispose(),null===t.current){t.current=e.currentTarget,r(!0);{let n=J(e.currentTarget);i.addEventListener(n,"pointerup",o,!1),i.addEventListener(n,"pointermove",(e=>{if(t.current){let n=function(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}(e);r(function(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}(n,t.current.getBoundingClientRect()))}}),!1),i.addEventListener(n,"pointercancel",o,!1)}}}));return{pressed:n,pressProps:e?{}:{onPointerDown:s,onPointerUp:o,onClick:o}}}function ie(e,t){return(0,a.useMemo)((()=>{var n;if(e.type)return e.type;let r=null!=(n=e.as)?n:"button";return"string"==typeof r&&"button"===r.toLowerCase()||"BUTTON"===(null==t?void 0:t.tagName)&&!t.hasAttribute("type")?"button":void 0}),[e.type,e.as,t])}let oe=Symbol();function ae(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=(0,a.useRef)(t);(0,a.useEffect)((()=>{r.current=t}),[t]);let i=ne((e=>{for(let t of r.current)null!=t&&("function"==typeof t?t(e):t.current=e)}));return t.every((e=>null==e||(null==e?void 0:e[oe])))?void 0:i}let se=(0,a.createContext)(void 0);function le(){return(0,a.useContext)(se)}var ue=n(7950);function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let[r,i]of Object.entries(e))de(n,he(t,r),i);return n}function he(e,t){return e?e+"["+t+"]":t}function de(e,t,n){if(Array.isArray(n))for(let[r,i]of n.entries())de(e,he(t,r.toString()),i);else n instanceof Date?e.push([t,n.toISOString()]):"boolean"==typeof n?e.push([t,n?"1":"0"]):"string"==typeof n?e.push([t,n]):"number"==typeof n?e.push([t,`${n}`]):null==n?e.push([t,""]):ce(n,t,e)}function pe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(new Set(t.flatMap((e=>"string"==typeof e?e.split(" "):[])))).filter(Boolean).join(" ")}function fe(e,t){if(e in t){let o=t[e];for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return"function"==typeof o?o(...r):o}let o=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,fe),o}var ge=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(ge||{}),me=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(me||{});function ye(e){let{ourProps:t,theirProps:n,slot:r,defaultTag:i,features:o,visible:a=!0,name:s,mergeRefs:l}=e;l=null!=l?l:be;let u=xe(n,t);if(a)return ve(u,r,i,s,l);let c=null!=o?o:0;if(2&c){let{static:e=!1,...t}=u;if(e)return ve(t,r,i,s,l)}if(1&c){let{unmount:e=!0,...t}=u;return fe(e?0:1,{0:()=>null,1:()=>ve({...t,hidden:!0,style:{display:"none"}},r,i,s,l)})}return ve(u,r,i,s,l)}function ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,{as:o=n,children:s,refName:l="ref",...u}=Se(e,["unmount","static"]),c=void 0!==e.ref?{[l]:e.ref}:{},h="function"==typeof s?s(t):s;"className"in u&&u.className&&"function"==typeof u.className&&(u.className=u.className(t)),u["aria-labelledby"]&&u["aria-labelledby"]===u.id&&(u["aria-labelledby"]=void 0);let d={};if(t){let e=!1,n=[];for(let[r,i]of Object.entries(t))"boolean"==typeof i&&(e=!0),!0===i&&n.push(r.replace(/([A-Z])/g,(e=>`-${e.toLowerCase()}`)));if(e){d["data-headlessui-state"]=n.join(" ");for(let e of n)d[`data-${e}`]=""}}if(o===a.Fragment&&(Object.keys(ke(u)).length>0||Object.keys(ke(d)).length>0)){if((0,a.isValidElement)(h)&&!(Array.isArray(h)&&h.length>1)){let e=h.props,t=null==e?void 0:e.className,n="function"==typeof t?function(){return pe(t(...arguments),u.className)}:pe(t,u.className),r=n?{className:n}:{},o=xe(h.props,ke(Se(u,["ref"])));for(let i in d)i in o&&delete d[i];return(0,a.cloneElement)(h,Object.assign({},o,d,c,{ref:i(h.ref,c.ref)},r))}if(Object.keys(ke(u)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ke(u)).concat(Object.keys(ke(d))).map((e=>`  - ${e}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join("\n")].join("\n"))}return(0,a.createElement)(o,Object.assign({},Se(u,["ref"]),o!==a.Fragment&&c,o!==a.Fragment&&d),h)}function be(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((e=>null==e))?void 0:e=>{for(let n of t)null!=n&&("function"==typeof n?n(e):n.current=e)}}function xe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},i={};for(let o of t)for(let e in o)e.startsWith("on")&&"function"==typeof o[e]?(null!=i[e]||(i[e]=[]),i[e].push(o[e])):r[e]=o[e];if(r.disabled||r["aria-disabled"])for(let o in i)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(o)&&(i[o]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let o in i)Object.assign(r,{[o](e){let t=i[o];for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(let i of t){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;i(e,...r)}}});return r}function we(e){var t;return Object.assign((0,a.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function ke(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function Se(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}var Ce=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Ce||{});let Ie=we((function(e,t){var n;let{features:r=1,...i}=e;return ye({ourProps:{ref:t,"aria-hidden":2===(2&r)||(null!=(n=i["aria-hidden"])?n:void 0),hidden:4===(4&r)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4===(4&r)&&2!==(2&r)&&{display:"none"}}},theirProps:i,slot:{},defaultTag:"span",name:"Hidden"})})),Ee=(0,a.createContext)(null);function Te(e){let{children:t}=e,n=(0,a.useContext)(Ee);if(!n)return a.createElement(a.Fragment,null,t);let{target:r}=n;return r?(0,ue.createPortal)(a.createElement(a.Fragment,null,t),r):null}function _e(e){let{data:t,form:n,disabled:r,onReset:i,overrides:o}=e,[s,l]=(0,a.useState)(null),u=ee();return(0,a.useEffect)((()=>{if(i&&s)return u.addEventListener(s,"reset",i)}),[s,n,i]),a.createElement(Te,null,a.createElement(Ne,{setForm:l,formId:n}),ce(t).map((e=>{let[t,i]=e;return a.createElement(Ie,{features:Ce.Hidden,...ke({key:t,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:n,disabled:r,name:t,value:i,...o})})})))}function Ne(e){let{setForm:t,formId:n}=e;return(0,a.useEffect)((()=>{if(n){let e=document.getElementById(n);e&&t(e)}}),[t,n]),n?null:a.createElement(Ie,{features:Ce.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:e=>{if(!e)return;let n=e.closest("form");n&&t(n)}})}let Ae=(0,a.createContext)(void 0);function Oe(){return(0,a.useContext)(Ae)}function Re(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=""===(null==t?void 0:t.getAttribute("disabled"));return(!r||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(n))&&r}let $e=(0,a.createContext)(null);function Pe(){let e=(0,a.useContext)($e);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Pe),e}return e}$e.displayName="DescriptionContext";let De=we((function(e,t){let n=(0,a.useId)(),r=le(),{id:i=`headlessui-description-${n}`,...o}=e,s=Pe(),l=ae(t);te((()=>s.register(i)),[i,s.register]);let u=r||!1,c=(0,a.useMemo)((()=>({...s.slot,disabled:u})),[s.slot,u]);return ye({ourProps:{ref:l,...s.props,id:i},theirProps:o,slot:c,defaultTag:"p",name:s.name||"Description"})})),Me=Object.assign(De,{});var Fe=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Fe||{});let Le=(0,a.createContext)(null);function je(){let e=(0,a.useContext)(Le);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,je),e}return e}function ze(e){var t,n,r;let i=null!=(n=null==(t=(0,a.useContext)(Le))?void 0:t.value)?n:void 0;return(null!=(r=null==e?void 0:e.length)?r:0)>0?[i,...e].filter(Boolean).join(" "):i}Le.displayName="LabelContext";let Be=we((function(e,t){var n;let r=(0,a.useId)(),i=je(),o=Oe(),s=le(),{id:l=`headlessui-label-${r}`,htmlFor:u=(null!=o?o:null==(n=i.props)?void 0:n.htmlFor),passive:c=!1,...h}=e,d=ae(t);te((()=>i.register(l)),[l,i.register]);let p=ne((e=>{let t=e.currentTarget;if(t instanceof HTMLLabelElement&&e.preventDefault(),i.props&&"onClick"in i.props&&"function"==typeof i.props.onClick&&i.props.onClick(e),t instanceof HTMLLabelElement){let e=document.getElementById(t.htmlFor);if(e){let t=e.getAttribute("disabled");if("true"===t||""===t)return;let n=e.getAttribute("aria-disabled");if("true"===n||""===n)return;(e instanceof HTMLInputElement&&("radio"===e.type||"checkbox"===e.type)||"radio"===e.role||"checkbox"===e.role||"switch"===e.role)&&e.click(),e.focus({preventScroll:!0})}}})),f=s||!1,g=(0,a.useMemo)((()=>({...i.slot,disabled:f})),[i.slot,f]),m={ref:d,...i.props,id:l,htmlFor:u,onClick:p};return c&&("onClick"in m&&(delete m.htmlFor,delete m.onClick),"onClick"in h&&delete h.onClick),ye({ourProps:m,theirProps:h,slot:g,defaultTag:u?"label":"div",name:i.name||"Label"})})),We=Object.assign(Be,{}),Ue=(0,a.createContext)(null);Ue.displayName="GroupContext";let Ve=a.Fragment;let Ge=we((function(e,t){var n;let r=(0,a.useId)(),i=Oe(),o=le(),{id:s=i||`headlessui-switch-${r}`,disabled:l=o||!1,checked:u,defaultChecked:c,onChange:h,name:d,value:p,form:f,autoFocus:g=!1,...m}=e,y=(0,a.useContext)(Ue),[v,b]=(0,a.useState)(null),x=ae((0,a.useRef)(null),t,null===y?null:y.setSwitch,b),w=function(e){let[t]=(0,a.useState)(e);return t}(c),[k,S]=function(e,t,n){let[r,i]=(0,a.useState)(n),o=void 0!==e,s=(0,a.useRef)(o),l=(0,a.useRef)(!1),u=(0,a.useRef)(!1);return!o||s.current||l.current?!o&&s.current&&!u.current&&(u.current=!0,s.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(l.current=!0,s.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[o?e:r,ne((e=>(o||i(e),null==t?void 0:t(e))))]}(u,h,null!=w&&w),C=ee(),[I,E]=(0,a.useState)(!1),T=ne((()=>{E(!0),null==S||S(!k),C.nextFrame((()=>{E(!1)}))})),_=ne((e=>{if(Re(e.currentTarget))return e.preventDefault();e.preventDefault(),T()})),N=ne((e=>{e.key===Fe.Space?(e.preventDefault(),T()):e.key===Fe.Enter&&function(e){var t,n;let r=null!=(t=null==e?void 0:e.form)?t:e.closest("form");if(r){for(let t of r.elements)if(t!==e&&("INPUT"===t.tagName&&"submit"===t.type||"BUTTON"===t.tagName&&"submit"===t.type||"INPUT"===t.nodeName&&"image"===t.type))return void t.click();null==(n=r.requestSubmit)||n.call(r)}}(e.currentTarget)})),A=ne((e=>e.preventDefault())),O=ze(),R=function(){var e,t;return null!=(t=null==(e=(0,a.useContext)($e))?void 0:e.value)?t:void 0}(),{isFocusVisible:$,focusProps:P}=U({autoFocus:g}),{isHovered:D,hoverProps:M}=function(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:i}=e,[o,s]=(0,a.useState)(!1),l=(0,a.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;(0,a.useEffect)(K,[]);let{hoverProps:u,triggerHoverEnd:c}=(0,a.useMemo)((()=>{let e=(e,r)=>{if(l.pointerType=r,i||"touch"===r||l.isHovered||!e.currentTarget.contains(e.target))return;l.isHovered=!0;let o=e.currentTarget;l.target=o,t&&t({type:"hoverstart",target:o,pointerType:r}),n&&n(!0),s(!0)},o=(e,t)=>{if(l.pointerType="",l.target=null,"touch"===t||!l.isHovered)return;l.isHovered=!1;let i=e.currentTarget;r&&r({type:"hoverend",target:i,pointerType:t}),n&&n(!1),s(!1)},a={};return"undefined"!==typeof PointerEvent?(a.onPointerEnter=t=>{V&&"mouse"===t.pointerType||e(t,t.pointerType)},a.onPointerLeave=e=>{!i&&e.currentTarget.contains(e.target)&&o(e,e.pointerType)}):(a.onTouchStart=()=>{l.ignoreEmulatedMouseEvents=!0},a.onMouseEnter=t=>{l.ignoreEmulatedMouseEvents||V||e(t,"mouse"),l.ignoreEmulatedMouseEvents=!1},a.onMouseLeave=e=>{!i&&e.currentTarget.contains(e.target)&&o(e,"mouse")}),{hoverProps:a,triggerHoverEnd:o}}),[t,n,r,i,l]);return(0,a.useEffect)((()=>{i&&c({currentTarget:l.target},l.pointerType)}),[i]),{hoverProps:u,isHovered:o}}({isDisabled:l}),{pressed:F,pressProps:L}=re({disabled:l}),j=(0,a.useMemo)((()=>({checked:k,disabled:l,hover:D,focus:$,active:F,autofocus:g,changing:I})),[k,D,$,F,l,I,g]),z=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},i={};for(let o of t)for(let e in o)e.startsWith("on")&&"function"==typeof o[e]?(null!=i[e]||(i[e]=[]),i[e].push(o[e])):r[e]=o[e];for(let o in i)Object.assign(r,{[o](){let e=i[o];for(let t of e)null==t||t(...arguments)}});return r}({id:s,ref:x,role:"switch",type:ie(e,v),tabIndex:-1===e.tabIndex?0:null!=(n=e.tabIndex)?n:0,"aria-checked":k,"aria-labelledby":O,"aria-describedby":R,disabled:l||void 0,autoFocus:g,onClick:_,onKeyUp:N,onKeyPress:A},P,M,L),B=(0,a.useCallback)((()=>{if(void 0!==w)return null==S?void 0:S(w)}),[S,w]);return a.createElement(a.Fragment,null,null!=d&&a.createElement(_e,{disabled:l,data:{[d]:p||"on"},overrides:{type:"checkbox",checked:k},form:f,onReset:B}),ye({ourProps:z,theirProps:m,slot:j,defaultTag:"button",name:"Switch"}))})),He=function(e){var t;let[n,r]=(0,a.useState)(null),[i,o]=function(){let{inherit:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ze(),[n,r]=(0,a.useState)([]),i=e?[t,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,(0,a.useMemo)((()=>function(e){let t=ne((e=>(r((t=>[...t,e])),()=>r((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),n=(0,a.useMemo)((()=>({register:t,slot:e.slot,name:e.name,props:e.props,value:e.value})),[t,e.slot,e.name,e.props,e.value]);return a.createElement(Le.Provider,{value:n},e.children)}),[r])]}(),[s,l]=function(){let[e,t]=(0,a.useState)([]);return[e.length>0?e.join(" "):void 0,(0,a.useMemo)((()=>function(e){let n=ne((e=>(t((t=>[...t,e])),()=>t((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),r=(0,a.useMemo)((()=>({register:n,slot:e.slot,name:e.name,props:e.props,value:e.value})),[n,e.slot,e.name,e.props,e.value]);return a.createElement($e.Provider,{value:r},e.children)}),[t])]}(),u=(0,a.useMemo)((()=>({switch:n,setSwitch:r})),[n,r]),c=e;return a.createElement(l,{name:"Switch.Description",value:s},a.createElement(o,{name:"Switch.Label",value:i,props:{htmlFor:null==(t=u.switch)?void 0:t.id,onClick(e){n&&(e.currentTarget instanceof HTMLLabelElement&&e.preventDefault(),n.click(),n.focus({preventScroll:!0}))}}},a.createElement(Ue.Provider,{value:u},ye({ourProps:{},theirProps:c,slot:{},defaultTag:Ve,name:"Switch.Group"}))))},qe=We,Ke=Me,Xe=Object.assign(Ge,{Group:He,Label:qe,Description:Ke});var Ye={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Qe=a.createContext&&a.createContext(Ye),Je=["attr","size","title"];function Ze(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},et.apply(this,arguments)}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function it(e){return e&&e.map(((e,t)=>a.createElement(e.tag,nt({key:t},e.attr),it(e.child))))}function ot(e){return t=>a.createElement(at,et({attr:nt({},e.attr)},t),it(e.child))}function at(e){var t=t=>{var n,{attr:r,size:i,title:o}=e,s=Ze(e,Je),l=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),a.createElement("svg",et({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,s,{className:n,style:nt(nt({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&a.createElement("title",null,o),e.children)};return void 0!==Qe?a.createElement(Qe.Consumer,null,(e=>t(e))):t(Ye)}function st(e){return ot({tag:"svg",attr:{viewBox:"0 0 256 512"},child:[{tag:"path",attr:{d:"M192 384c0 35.346-28.654 64-64 64s-64-28.654-64-64c0-23.685 12.876-44.349 32-55.417V224c0-17.673 14.327-32 32-32s32 14.327 32 32v104.583c19.124 11.068 32 31.732 32 55.417zm32-84.653c19.912 22.563 32 52.194 32 84.653 0 70.696-57.303 128-128 128-.299 0-.609-.001-.909-.003C56.789 511.509-.357 453.636.002 383.333.166 351.135 12.225 321.755 32 299.347V96c0-53.019 42.981-96 96-96s96 42.981 96 96v203.347zM208 384c0-34.339-19.37-52.19-32-66.502V96c0-26.467-21.533-48-48-48S80 69.533 80 96v221.498c-12.732 14.428-31.825 32.1-31.999 66.08-.224 43.876 35.563 80.116 79.423 80.42L128 464c44.112 0 80-35.888 80-80z"},child:[]}]})(e)}function lt(e){return ot({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M205.22 22.09c-7.94-28.78-49.44-30.12-58.44 0C100.01 179.85 0 222.72 0 333.91 0 432.35 78.72 512 176 512s176-79.65 176-178.09c0-111.75-99.79-153.34-146.78-311.82zM176 448c-61.75 0-112-50.25-112-112 0-8.84 7.16-16 16-16s16 7.16 16 16c0 44.11 35.89 80 80 80 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(e)}function ut(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ut(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const ct=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ut(e))&&(r&&(r+=" "),r+=t);return r};var ht=n(9889),dt=n.n(ht),pt=n(9062),ft=n(620),gt=n.n(ft),mt=n(5268),yt=n.n(mt),vt=n(3097),bt=n.n(vt),xt=n(9160),wt=n.n(xt),kt=function(e){return 0===e?0:e>0?1:-1},St=function(e){return gt()(e)&&e.indexOf("%")===e.length-1},Ct=function(e){return wt()(e)&&!yt()(e)},It=function(e){return Ct(e)||gt()(e)},Et=0,Tt=function(e){var t=++Et;return"".concat(e||"").concat(t)},_t=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Ct(e)&&!gt()(e))return r;if(St(e)){var o=e.indexOf("%");n=t*parseFloat(e.slice(0,o))/100}else n=+e;return yt()(n)&&(n=r),i&&n>t&&(n=t),n},Nt=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},At=function(e,t){return Ct(e)&&Ct(t)?function(n){return e+n*(t-e)}:function(){return t}};function Ot(e,t,n){return e&&e.length?e.find((function(e){return e&&("function"===typeof t?t(e):bt()(e,t))===n})):null}var Rt=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]},$t=n(9686),Pt=n.n($t),Dt=n(1629),Mt=n.n(Dt),Ft=n(6686),Lt=n.n(Ft);function jt(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}var Bt=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Wt=["points","pathLength"],Ut={svg:["viewBox","children"],polygon:Wt,polyline:Wt},Vt=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Gt=function(e,t){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,a.isValidElement)(e)&&(n=e.props),!Lt()(n))return null;var r={};return Object.keys(n).forEach((function(e){Vt.includes(e)&&(r[e]=t||function(t){return n[e](n,t)})})),r},Ht=function(e,t,n){if(!Lt()(e)||"object"!==zt(e))return null;var r=null;return Object.keys(e).forEach((function(i){var o=e[i];Vt.includes(i)&&"function"===typeof o&&(r||(r={}),r[i]=function(e,t,n){return function(r){return e(t,n,r),null}}(o,t,n))})),r},qt=["children"],Kt=["children"];function Xt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Yt(e){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}var Qt={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Jt=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},Zt=null,en=null,tn=function e(t){if(t===Zt&&Array.isArray(en))return en;var n=[];return a.Children.forEach(t,(function(t){Pt()(t)||((0,pt.isFragment)(t)?n=n.concat(e(t.props.children)):n.push(t))})),en=n,Zt=t,n};function nn(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map((function(e){return Jt(e)})):[Jt(t)],tn(e).forEach((function(e){var t=bt()(e,"type.displayName")||bt()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)})),n}function rn(e,t){var n=nn(e,t);return n&&n[0]}var on=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!Ct(n)||n<=0||!Ct(r)||r<=0)},an=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],sn=function(e){return e&&e.type&&gt()(e.type)&&an.indexOf(e.type)>=0},ln=function(e,t,n){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var r=e;if((0,a.isValidElement)(e)&&(r=e.props),!Lt()(r))return null;var i={};return Object.keys(r).forEach((function(e){var o;(function(e,t,n,r){var i,o=null!==(i=null===Ut||void 0===Ut?void 0:Ut[r])&&void 0!==i?i:[];return!Mt()(e)&&(r&&o.includes(t)||Bt.includes(t))||n&&Vt.includes(t)})(null===(o=r)||void 0===o?void 0:o[e],e,t,n)&&(i[e]=r[e])})),i},un=function e(t,n){if(t===n)return!0;var r=a.Children.count(t);if(r!==a.Children.count(n))return!1;if(0===r)return!0;if(1===r)return cn(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=t[i],s=n[i];if(Array.isArray(o)||Array.isArray(s)){if(!e(o,s))return!1}else if(!cn(o,s))return!1}return!0},cn=function(e,t){if(Pt()(e)&&Pt()(t))return!0;if(!Pt()(e)&&!Pt()(t)){var n=e.props||{},r=n.children,i=Xt(n,qt),o=t.props||{},a=o.children,s=Xt(o,Kt);return r&&a?jt(i,s)&&un(r,a):!r&&!a&&jt(i,s)}return!1},hn=function(e,t){var n=[],r={};return tn(e).forEach((function(e,i){if(sn(e))n.push(e);else if(e){var o=Jt(e.type),a=t[o]||{},s=a.handler,l=a.once;if(s&&(!l||!r[o])){var u=s(e,o,i);n.push(u),r[o]=!0}}})),n},dn=function(e,t){return tn(t).indexOf(e)};function pn(e){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(e)}function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){mn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mn(e,t,n){return t=function(e){var t=function(e,t){if("object"!=pn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pn(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bn=(0,a.forwardRef)((function(e,t){var n=e.aspect,r=e.initialDimension,i=void 0===r?{width:-1,height:-1}:r,o=e.width,s=void 0===o?"100%":o,l=e.height,u=void 0===l?"100%":l,c=e.minWidth,h=void 0===c?0:c,d=e.minHeight,p=e.maxHeight,f=e.children,g=e.debounce,m=void 0===g?0:g,y=e.id,v=e.className,b=e.onResize,x=e.style,w=void 0===x?{}:x,k=(0,a.useRef)(null),S=(0,a.useRef)();S.current=b,(0,a.useImperativeHandle)(t,(function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})}));var C=yn((0,a.useState)({containerWidth:i.width,containerHeight:i.height}),2),I=C[0],E=C[1],T=(0,a.useCallback)((function(e,t){E((function(n){var r=Math.round(e),i=Math.round(t);return n.containerWidth===r&&n.containerHeight===i?n:{containerWidth:r,containerHeight:i}}))}),[]);(0,a.useEffect)((function(){var e=function(e){var t,n=e[0].contentRect,r=n.width,i=n.height;T(r,i),null===(t=S.current)||void 0===t||t.call(S,r,i)};m>0&&(e=dt()(e,m,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),n=k.current.getBoundingClientRect(),r=n.width,i=n.height;return T(r,i),t.observe(k.current),function(){t.disconnect()}}),[T,m]);var _=(0,a.useMemo)((function(){var e=I.containerWidth,t=I.containerHeight;if(e<0||t<0)return null;Rt(St(s)||St(u),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",s,u),Rt(!n||n>0,"The aspect(%s) must be greater than zero.",n);var r=St(s)?e:s,i=St(u)?t:u;n&&n>0&&(r?i=r/n:i&&(r=i*n),p&&i>p&&(i=p)),Rt(r>0||i>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",r,i,s,u,h,d,n);var o=!Array.isArray(f)&&Jt(f.type).endsWith("Chart");return a.Children.map(f,(function(e){return(0,pt.isElement)(e)?(0,a.cloneElement)(e,gn({width:r,height:i},o?{style:gn({height:"100%",width:"100%",maxHeight:i,maxWidth:r},e.props.style)}:{})):e}))}),[n,f,u,p,d,h,I,s]);return a.createElement("div",{id:y?"".concat(y):void 0,className:ct("recharts-responsive-container",v),style:gn(gn({},w),{},{width:s,height:u,minWidth:h,minHeight:d,maxHeight:p}),ref:k},_)})),xn=n(6604),wn=n.n(xn),kn=n(7424),Sn=n.n(kn),Cn="Invariant failed";function In(e,t){if(!e)throw new Error(Cn)}var En=["children","width","height","viewBox","className","style","title","desc"];function Tn(){return Tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tn.apply(this,arguments)}function _n(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Nn(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,o=e.className,s=e.style,l=e.title,u=e.desc,c=_n(e,En),h=i||{width:n,height:r,x:0,y:0},d=ct("recharts-surface",o);return a.createElement("svg",Tn({},ln(c,!0,"svg"),{className:d,width:n,height:r,style:s,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),a.createElement("title",null,l),a.createElement("desc",null,u),t)}var An=["children","className"];function On(){return On=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},On.apply(this,arguments)}function Rn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var $n=a.forwardRef((function(e,t){var n=e.children,r=e.className,i=Rn(e,An),o=ct("recharts-layer",r);return a.createElement("g",On({className:o},ln(i,!0),{ref:t}),n)}));function Pn(e){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pn(e)}function Dn(){return Dn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dn.apply(this,arguments)}function Mn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(n),!0).forEach((function(t){zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zn(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Pn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pn(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bn(e){return Array.isArray(e)&&It(e[0])&&It(e[1])?e.join(" ~ "):e}var Wn=function(e){var t=e.separator,n=void 0===t?" : ":t,r=e.contentStyle,i=void 0===r?{}:r,o=e.itemStyle,s=void 0===o?{}:o,l=e.labelStyle,u=void 0===l?{}:l,c=e.payload,h=e.formatter,d=e.itemSorter,p=e.wrapperClassName,f=e.labelClassName,g=e.label,m=e.labelFormatter,y=e.accessibilityLayer,v=void 0!==y&&y,b=jn({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),x=jn({margin:0},u),w=!Pt()(g),k=w?g:"",S=ct("recharts-default-tooltip",p),C=ct("recharts-tooltip-label",f);w&&m&&void 0!==c&&null!==c&&(k=m(g,c));var I=v?{role:"status","aria-live":"assertive"}:{};return a.createElement("div",Dn({className:S,style:b},I),a.createElement("p",{className:C,style:x},a.isValidElement(k)?k:"".concat(k)),function(){if(c&&c.length){var e=(d?Sn()(c,d):c).map((function(e,t){if("none"===e.type)return null;var r=jn({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},s),i=e.formatter||h||Bn,o=e.value,l=e.name,u=o,d=l;if(i&&null!=u&&null!=d){var p=i(o,l,e,t,c);if(Array.isArray(p)){var f=Mn(p,2);u=f[0],d=f[1]}else u=p}return a.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:r},It(d)?a.createElement("span",{className:"recharts-tooltip-item-name"},d):null,It(d)?a.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,a.createElement("span",{className:"recharts-tooltip-item-value"},u),a.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return a.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function Un(e){return Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Un(e)}function Vn(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Un(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Un(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Un(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gn="recharts-tooltip-wrapper",Hn={visibility:"hidden"};function qn(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return ct(Gn,Vn(Vn(Vn(Vn({},"".concat(Gn,"-right"),Ct(n)&&t&&Ct(t.x)&&n>=t.x),"".concat(Gn,"-left"),Ct(n)&&t&&Ct(t.x)&&n<t.x),"".concat(Gn,"-bottom"),Ct(r)&&t&&Ct(t.y)&&r>=t.y),"".concat(Gn,"-top"),Ct(r)&&t&&Ct(t.y)&&r<t.y))}function Kn(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,o=e.position,a=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(o&&Ct(o[r]))return o[r];var c=n[r]-s-i,h=n[r]+i;return t[r]?a[r]?c:h:a[r]?c<l[r]?Math.max(h,l[r]):Math.max(c,l[r]):h+s>l[r]+u?Math.max(c,l[r]):Math.max(h,l[r])}function Xn(e){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xn(e)}function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ir(r.key),r)}}function Zn(e,t,n){return t=tr(t),function(e,t){if(t&&("object"===Xn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,er()?Reflect.construct(t,n||[],tr(e).constructor):t.apply(e,n))}function er(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(er=function(){return!!e})()}function tr(e){return tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tr(e)}function nr(e,t){return nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nr(e,t)}function rr(e,t,n){return(t=ir(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ir(e){var t=function(e,t){if("object"!=Xn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xn(t)?t:t+""}var or=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return rr(e=Zn(this,t,[].concat(r)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),rr(e,"handleKeyDown",(function(t){var n,r,i,o;"Escape"===t.key&&e.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=e.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(i=null===(o=e.props.coordinate)||void 0===o?void 0:o.y)&&void 0!==i?i:0}})})),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nr(e,t)}(t,e),n=t,r=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.allowEscapeViewBox,i=t.animationDuration,o=t.animationEasing,s=t.children,l=t.coordinate,u=t.hasPayload,c=t.isAnimationActive,h=t.offset,d=t.position,p=t.reverseDirection,f=t.useTranslate3d,g=t.viewBox,m=t.wrapperStyle,y=function(e){var t,n,r=e.allowEscapeViewBox,i=e.coordinate,o=e.offsetTopLeft,a=e.position,s=e.reverseDirection,l=e.tooltipBox,u=e.useTranslate3d,c=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&i?function(e){var t=e.translateX,n=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:t=Kn({allowEscapeViewBox:r,coordinate:i,key:"x",offsetTopLeft:o,position:a,reverseDirection:s,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),translateY:n=Kn({allowEscapeViewBox:r,coordinate:i,key:"y",offsetTopLeft:o,position:a,reverseDirection:s,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),useTranslate3d:u}):Hn,cssClasses:qn({translateX:t,translateY:n,coordinate:i})}}({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:h,position:d,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:f,viewBox:g}),v=y.cssClasses,b=y.cssProperties,x=Qn(Qn({transition:c&&n?"transform ".concat(i,"ms ").concat(o):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&u?"visible":"hidden",position:"absolute",top:0,left:0},m);return a.createElement("div",{tabIndex:-1,className:v,style:x,ref:function(t){e.wrapperNode=t}},s)}}],r&&Jn(n.prototype,r),i&&Jn(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(a.PureComponent),ar={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return ar[e]},set:function(e,t){if("string"===typeof e)ar[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach((function(t){ar[t]=e[t]}))}}},sr=n(977),lr=n.n(sr);function ur(e,t,n){return!0===t?lr()(e,n):Mt()(t)?lr()(e,t):e}function cr(e){return cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cr(e)}function hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hr(Object(n),!0).forEach((function(t){vr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,br(r.key),r)}}function fr(e,t,n){return t=mr(t),function(e,t){if(t&&("object"===cr(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gr()?Reflect.construct(t,n||[],mr(e).constructor):t.apply(e,n))}function gr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gr=function(){return!!e})()}function mr(e){return mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mr(e)}function yr(e,t){return yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yr(e,t)}function vr(e,t,n){return(t=br(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function br(e){var t=function(e,t){if("object"!=cr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cr(t)?t:t+""}function xr(e){return e.dataKey}var wr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fr(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yr(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.allowEscapeViewBox,i=t.animationDuration,o=t.animationEasing,s=t.content,l=t.coordinate,u=t.filterNull,c=t.isAnimationActive,h=t.offset,d=t.payload,p=t.payloadUniqBy,f=t.position,g=t.reverseDirection,m=t.useTranslate3d,y=t.viewBox,v=t.wrapperStyle,b=null!==d&&void 0!==d?d:[];u&&b.length&&(b=ur(d.filter((function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)})),p,xr));var x=b.length>0;return a.createElement(or,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:c,active:n,coordinate:l,hasPayload:x,offset:h,position:f,reverseDirection:g,useTranslate3d:m,viewBox:y,wrapperStyle:v},function(e,t){return a.isValidElement(e)?a.cloneElement(e,t):"function"===typeof e?a.createElement(e,t):a.createElement(Wn,t)}(s,dr(dr({},this.props),{},{payload:b})))}}],r&&pr(n.prototype,r),i&&pr(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(a.PureComponent);vr(wr,"displayName","Tooltip"),vr(wr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ar.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var kr=n(643),Sr=n.n(kr);Math.abs,Math.atan2;const Cr=Math.cos,Ir=(Math.max,Math.min,Math.sin),Er=Math.sqrt,Tr=Math.PI,_r=2*Tr;const Nr={draw(e,t){const n=Er(t/Tr);e.moveTo(n,0),e.arc(0,0,n,0,_r)}},Ar={draw(e,t){const n=Er(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Or=Er(1/3),Rr=2*Or,$r={draw(e,t){const n=Er(t/Rr),r=n*Or;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Pr={draw(e,t){const n=Er(t),r=-n/2;e.rect(r,r,n,n)}},Dr=Ir(Tr/10)/Ir(7*Tr/10),Mr=Ir(_r/10)*Dr,Fr=-Cr(_r/10)*Dr,Lr={draw(e,t){const n=Er(.8908130915292852*t),r=Mr*n,i=Fr*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const t=_r*o/5,a=Cr(t),s=Ir(t);e.lineTo(s*n,-a*n),e.lineTo(a*r-s*i,s*r+a*i)}e.closePath()}},jr=Er(3),zr={draw(e,t){const n=-Er(t/(3*jr));e.moveTo(0,2*n),e.lineTo(-jr*n,-n),e.lineTo(jr*n,-n),e.closePath()}},Br=-.5,Wr=Er(3)/2,Ur=1/Er(12),Vr=3*(Ur/2+1),Gr={draw(e,t){const n=Er(t/Vr),r=n/2,i=n*Ur,o=r,a=n*Ur+n,s=-o,l=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(s,l),e.lineTo(Br*r-Wr*i,Wr*r+Br*i),e.lineTo(Br*o-Wr*a,Wr*o+Br*a),e.lineTo(Br*s-Wr*l,Wr*s+Br*l),e.lineTo(Br*r+Wr*i,Br*i-Wr*r),e.lineTo(Br*o+Wr*a,Br*a-Wr*o),e.lineTo(Br*s+Wr*l,Br*l-Wr*s),e.closePath()}};function Hr(e){return function(){return e}}const qr=Math.PI,Kr=2*qr,Xr=1e-6,Yr=Kr-Xr;function Qr(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class Jr{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?Qr:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Qr;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,o){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=n-e,l=r-t,u=o-e,c=a-t,h=u*u+c*c;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(h>Xr)if(Math.abs(c*s-l*u)>Xr&&i){let d=n-o,p=r-a,f=s*s+l*l,g=d*d+p*p,m=Math.sqrt(f),y=Math.sqrt(h),v=i*Math.tan((qr-Math.acos((f+h-g)/(2*m*y)))/2),b=v/y,x=v/m;Math.abs(b-1)>Xr&&this._append`L${e+b*u},${t+b*c}`,this._append`A${i},${i},0,0,${+(c*d>u*p)},${this._x1=e+x*s},${this._y1=t+x*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,i,o){if(e=+e,t=+t,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),l=e+a,u=t+s,c=1^o,h=o?r-i:i-r;null===this._x1?this._append`M${l},${u}`:(Math.abs(this._x1-l)>Xr||Math.abs(this._y1-u)>Xr)&&this._append`L${l},${u}`,n&&(h<0&&(h=h%Kr+Kr),h>Yr?this._append`A${n},${n},0,1,${c},${e-a},${t-s}A${n},${n},0,1,${c},${this._x1=l},${this._y1=u}`:h>Xr&&this._append`A${n},${n},0,${+(h>=qr)},${c},${this._x1=e+n*Math.cos(i)},${this._y1=t+n*Math.sin(i)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function Zr(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new Jr(t)}Er(3),Er(3);function ei(e){return ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ei(e)}var ti=["type","size","sizeType"];function ni(){return ni=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ni.apply(this,arguments)}function ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ii(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(n),!0).forEach((function(t){oi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oi(e,t,n){return t=function(e){var t=function(e,t){if("object"!=ei(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ei(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ei(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ai(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var si={symbolCircle:Nr,symbolCross:Ar,symbolDiamond:$r,symbolSquare:Pr,symbolStar:Lr,symbolTriangle:zr,symbolWye:Gr},li=Math.PI/180,ui=function(e){var t=e.type,n=void 0===t?"circle":t,r=e.size,i=void 0===r?64:r,o=e.sizeType,s=void 0===o?"area":o,l=ii(ii({},ai(e,ti)),{},{type:n,size:i,sizeType:s}),u=l.className,c=l.cx,h=l.cy,d=ln(l,!0);return c===+c&&h===+h&&i===+i?a.createElement("path",ni({},d,{className:ct("recharts-symbols",u),transform:"translate(".concat(c,", ").concat(h,")"),d:function(){var e=function(e){var t="symbol".concat(Sr()(e));return si[t]||Nr}(n),t=function(e,t){let n=null,r=Zr(i);function i(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return e="function"===typeof e?e:Hr(e||Nr),t="function"===typeof t?t:Hr(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"===typeof t?t:Hr(t),i):e},i.size=function(e){return arguments.length?(t="function"===typeof e?e:Hr(+e),i):t},i.context=function(e){return arguments.length?(n=null==e?null:e,i):n},i}().type(e).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*li;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(i,s,n));return t()}()})):null};function ci(e){return ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ci(e)}function hi(){return hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hi.apply(this,arguments)}function di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bi(r.key),r)}}function fi(e,t,n){return t=mi(t),function(e,t){if(t&&("object"===ci(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gi()?Reflect.construct(t,n||[],mi(e).constructor):t.apply(e,n))}function gi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gi=function(){return!!e})()}function mi(e){return mi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mi(e)}function yi(e,t){return yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yi(e,t)}function vi(e,t,n){return(t=bi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bi(e){var t=function(e,t){if("object"!=ci(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ci(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ci(t)?t:t+""}ui.registerSymbol=function(e,t){si["symbol".concat(Sr()(e))]=t};var xi=32,wi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fi(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yi(e,t)}(t,e),n=t,r=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,n=16,r=xi/6,i=xi/3,o=e.inactive?t:e.color;if("plainline"===e.type)return a.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:xi,y2:n,className:"recharts-legend-icon"});if("line"===e.type)return a.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(n,"h").concat(i,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(2*i,",").concat(n,"\n            H").concat(xi,"M").concat(2*i,",").concat(n,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(i,",").concat(n),className:"recharts-legend-icon"});if("rect"===e.type)return a.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(xi,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(a.isValidElement(e.legendIcon)){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?di(Object(n),!0).forEach((function(t){vi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete s.legendIcon,a.cloneElement(e.legendIcon,s)}return a.createElement(ui,{fill:o,cx:n,cy:n,size:xi,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.payload,r=t.iconSize,i=t.layout,o=t.formatter,s=t.inactiveColor,l={x:0,y:0,width:xi,height:xi},u={display:"horizontal"===i?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map((function(t,n){var i=t.formatter||o,h=ct(vi(vi({"recharts-legend-item":!0},"legend-item-".concat(n),!0),"inactive",t.inactive));if("none"===t.type)return null;var d=Mt()(t.value)?null:t.value;Rt(!Mt()(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var p=t.inactive?s:t.color;return a.createElement("li",hi({className:h,style:u,key:"legend-item-".concat(n)},Ht(e.props,t,n)),a.createElement(Nn,{width:r,height:r,viewBox:l,style:c},e.renderIcon(t)),a.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},i?i(d,t,n):d))}))}},{key:"render",value:function(){var e=this.props,t=e.payload,n=e.layout,r=e.align;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:"horizontal"===n?r:"left"};return a.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}],r&&pi(n.prototype,r),i&&pi(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(a.PureComponent);function ki(e){return ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ki(e)}vi(wi,"displayName","Legend"),vi(wi,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Si=["ref"];function Ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ii(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(n),!0).forEach((function(t){Oi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ci(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ri(r.key),r)}}function Ti(e,t,n){return t=Ni(t),function(e,t){if(t&&("object"===ki(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_i()?Reflect.construct(t,n||[],Ni(e).constructor):t.apply(e,n))}function _i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_i=function(){return!!e})()}function Ni(e){return Ni=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ni(e)}function Ai(e,t){return Ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ai(e,t)}function Oi(e,t,n){return(t=Ri(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ri(e){var t=function(e,t){if("object"!=ki(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ki(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ki(t)?t:t+""}function $i(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Pi(e){return e.value}var Di=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oi(e=Ti(this,t,[].concat(r)),"lastBoundingBox",{width:-1,height:-1}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ai(e,t)}(t,e),n=t,r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ii({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,i=r.layout,o=r.align,a=r.verticalAlign,s=r.margin,l=r.chartWidth,u=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===o&&"vertical"===i?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===o?{right:s&&s.right||0}:{left:s&&s.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===a?{top:((u||0)-this.getBBoxSnapshot().height)/2}:"bottom"===a?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),Ii(Ii({},t),n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,r=t.width,i=t.height,o=t.wrapperStyle,s=t.payloadUniqBy,l=t.payload,u=Ii(Ii({position:"absolute",width:r||"auto",height:i||"auto"},this.getDefaultPosition(o)),o);return a.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(t){e.wrapperNode=t}},function(e,t){if(a.isValidElement(e))return a.cloneElement(e,t);if("function"===typeof e)return a.createElement(e,t);t.ref;var n=$i(t,Si);return a.createElement(wi,n)}(n,Ii(Ii({},this.props),{},{payload:ur(l,s,Pi)})))}}],i=[{key:"getWithHeight",value:function(e,t){var n=Ii(Ii({},this.defaultProps),e.props).layout;return"vertical"===n&&Ct(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],r&&Ei(n.prototype,r),i&&Ei(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(a.PureComponent);function Mi(){return Mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mi.apply(this,arguments)}Oi(Di,"displayName","Legend"),Oi(Di,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Fi=function(e){var t=e.cx,n=e.cy,r=e.r,i=e.className,o=ct("recharts-dot",i);return t===+t&&n===+n&&r===+r?a.createElement("circle",Mi({},ln(e,!1),Gt(e),{className:o,cx:t,cy:n,r:r})):null},Li=n(5173),ji=n.n(Li),zi=Object.getOwnPropertyNames,Bi=Object.getOwnPropertySymbols,Wi=Object.prototype.hasOwnProperty;function Ui(e,t){return function(n,r,i){return e(n,r,i)&&t(n,r,i)}}function Vi(e){return function(t,n,r){if(!t||!n||"object"!==typeof t||"object"!==typeof n)return e(t,n,r);var i=r.cache,o=i.get(t),a=i.get(n);if(o&&a)return o===n&&a===t;i.set(t,n),i.set(n,t);var s=e(t,n,r);return i.delete(t),i.delete(n),s}}function Gi(e){return zi(e).concat(Bi(e))}var Hi=Object.hasOwn||function(e,t){return Wi.call(e,t)};function qi(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var Ki="_owner",Xi=Object.getOwnPropertyDescriptor,Yi=Object.keys;function Qi(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function Ji(e,t){return qi(e.getTime(),t.getTime())}function Zi(e,t,n){if(e.size!==t.size)return!1;for(var r,i,o={},a=e.entries(),s=0;(r=a.next())&&!r.done;){for(var l=t.entries(),u=!1,c=0;(i=l.next())&&!i.done;){var h=r.value,d=h[0],p=h[1],f=i.value,g=f[0],m=f[1];u||o[c]||!(u=n.equals(d,g,s,c,e,t,n)&&n.equals(p,m,d,g,e,t,n))||(o[c]=!0),c++}if(!u)return!1;s++}return!0}function eo(e,t,n){var r,i=Yi(e),o=i.length;if(Yi(t).length!==o)return!1;for(;o-- >0;){if((r=i[o])===Ki&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof)return!1;if(!Hi(t,r)||!n.equals(e[r],t[r],r,r,e,t,n))return!1}return!0}function to(e,t,n){var r,i,o,a=Gi(e),s=a.length;if(Gi(t).length!==s)return!1;for(;s-- >0;){if((r=a[s])===Ki&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof)return!1;if(!Hi(t,r))return!1;if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;if(i=Xi(e,r),o=Xi(t,r),(i||o)&&(!i||!o||i.configurable!==o.configurable||i.enumerable!==o.enumerable||i.writable!==o.writable))return!1}return!0}function no(e,t){return qi(e.valueOf(),t.valueOf())}function ro(e,t){return e.source===t.source&&e.flags===t.flags}function io(e,t,n){if(e.size!==t.size)return!1;for(var r,i,o={},a=e.values();(r=a.next())&&!r.done;){for(var s=t.values(),l=!1,u=0;(i=s.next())&&!i.done;)l||o[u]||!(l=n.equals(r.value,i.value,r.value,i.value,e,t,n))||(o[u]=!0),u++;if(!l)return!1}return!0}function oo(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}var ao=Array.isArray,so="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,lo=Object.assign,uo=Object.prototype.toString.call.bind(Object.prototype.toString);var co=ho();ho({strict:!0}),ho({circular:!0}),ho({circular:!0,strict:!0}),ho({createInternalComparator:function(){return qi}}),ho({strict:!0,createInternalComparator:function(){return qi}}),ho({circular:!0,createInternalComparator:function(){return qi}}),ho({circular:!0,createInternalComparator:function(){return qi},strict:!0});function ho(e){void 0===e&&(e={});var t,n=e.circular,r=void 0!==n&&n,i=e.createInternalComparator,o=e.createState,a=e.strict,s=void 0!==a&&a,l=function(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?to:Qi,areDatesEqual:Ji,areMapsEqual:r?Ui(Zi,to):Zi,areObjectsEqual:r?to:eo,arePrimitiveWrappersEqual:no,areRegExpsEqual:ro,areSetsEqual:r?Ui(io,to):io,areTypedArraysEqual:r?to:oo};if(n&&(i=lo({},i,n(i))),t){var o=Vi(i.areArraysEqual),a=Vi(i.areMapsEqual),s=Vi(i.areObjectsEqual),l=Vi(i.areSetsEqual);i=lo({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:l})}return i}(e),u=function(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areMapsEqual,i=e.areObjectsEqual,o=e.arePrimitiveWrappersEqual,a=e.areRegExpsEqual,s=e.areSetsEqual,l=e.areTypedArraysEqual;return function(e,u,c){if(e===u)return!0;if(null==e||null==u||"object"!==typeof e||"object"!==typeof u)return e!==e&&u!==u;var h=e.constructor;if(h!==u.constructor)return!1;if(h===Object)return i(e,u,c);if(ao(e))return t(e,u,c);if(null!=so&&so(e))return l(e,u,c);if(h===Date)return n(e,u,c);if(h===RegExp)return a(e,u,c);if(h===Map)return r(e,u,c);if(h===Set)return s(e,u,c);var d=uo(e);return"[object Date]"===d?n(e,u,c):"[object RegExp]"===d?a(e,u,c):"[object Map]"===d?r(e,u,c):"[object Set]"===d?s(e,u,c):"[object Object]"===d?"function"!==typeof e.then&&"function"!==typeof u.then&&i(e,u,c):"[object Arguments]"===d?i(e,u,c):("[object Boolean]"===d||"[object Number]"===d||"[object String]"===d)&&o(e,u,c)}}(l),c=i?i(u):(t=u,function(e,n,r,i,o,a,s){return t(e,n,s)});return function(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,o=e.strict;if(r)return function(e,a){var s=r(),l=s.cache,u=void 0===l?t?new WeakMap:void 0:l,c=s.meta;return n(e,a,{cache:u,equals:i,meta:c,strict:o})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(e,t){return n(e,t,a)}}({circular:r,comparator:u,createState:o,equals:c,strict:s})}function po(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame((function r(i){n<0&&(n=i),i-n>t?(e(i),n=-1):function(e){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(e)}(r)}))}function fo(e){return fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fo(e)}function go(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return mo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yo(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var i=go(r),o=i[0],a=i.slice(1);return"number"===typeof o?void po(n.bind(null,a),o):(n(o),void po(n.bind(null,a)))}"object"===fo(r)&&e(r),"function"===typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function vo(e){return vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vo(e)}function bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(n),!0).forEach((function(t){wo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wo(e,t,n){return t=function(e){var t=function(e,t){if("object"!==vo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vo(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ko=function(e){return e},So=function(e,t){return Object.keys(t).reduce((function(n,r){return xo(xo({},n),{},wo({},r,e(r,t[r])))}),{})},Co=function(e,t,n){return e.map((function(e){return"".concat((r=e,r.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())})))," ").concat(t,"ms ").concat(n);var r})).join(",")};function Io(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||To(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eo(e){return function(e){if(Array.isArray(e))return _o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||To(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function To(e,t){if(e){if("string"===typeof e)return _o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_o(e,t):void 0}}function _o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var No=1e-4,Ao=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},Oo=function(e,t){return e.map((function(e,n){return e*Math.pow(t,n)})).reduce((function(e,t){return e+t}))},Ro=function(e,t){return function(n){var r=Ao(e,t);return Oo(r,n)}},$o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2],a=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,i=0,o=1,a=1;break;case"ease":r=.25,i=.1,o=.25,a=1;break;case"ease-in":r=.42,i=0,o=1,a=1;break;case"ease-out":r=.42,i=0,o=.58,a=1;break;case"ease-in-out":r=0,i=0,o=.58,a=1;break;default:var s=t[0].split("(");if("cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length){var l=s[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),u=Io(l,4);r=u[0],i=u[1],o=u[2],a=u[3]}}[r,o,i,a].every((function(e){return"number"===typeof e&&e>=0&&e<=1}));var c,h,d=Ro(r,o),p=Ro(i,a),f=(c=r,h=o,function(e){var t=Ao(c,h),n=[].concat(Eo(t.map((function(e,t){return e*t})).slice(1)),[0]);return Oo(n,e)}),g=function(e){return e>1?1:e<0?0:e},m=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var i=d(n)-t,o=f(n);if(Math.abs(i-t)<No||o<No)return p(n);n=g(n-i/o)}return p(n)};return m.isStepper=!1,m},Po=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return $o(r);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,i=void 0===r?8:r,o=e.dt,a=void 0===o?17:o,s=function(e,t,r){var o=r+(-(e-t)*n-r*i)*a/1e3,s=r*a/1e3+e;return Math.abs(s-t)<No&&Math.abs(o)<No?[t,0]:[s,o]};return s.isStepper=!0,s.dt=a,s}();default:if("cubic-bezier"===r.split("(")[0])return $o(r)}return"function"===typeof r?r:null};function Do(e){return Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Do(e)}function Mo(e){return function(e){if(Array.isArray(e))return Wo(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fo(Object(n),!0).forEach((function(t){jo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jo(e,t,n){return t=function(e){var t=function(e,t){if("object"!==Do(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Do(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Do(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||Bo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bo(e,t){if(e){if("string"===typeof e)return Wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wo(e,t):void 0}}function Wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Uo=function(e,t,n){return e+(t-e)*n},Vo=function(e){return e.from!==e.to},Go=function e(t,n,r){var i=So((function(e,n){if(Vo(n)){var r=zo(t(n.from,n.to,n.velocity),2),i=r[0],o=r[1];return Lo(Lo({},n),{},{from:i,velocity:o})}return n}),n);return r<1?So((function(e,t){return Vo(t)?Lo(Lo({},t),{},{velocity:Uo(t.velocity,i[e].velocity,r),from:Uo(t.from,i[e].from,r)}):t}),n):e(t,i,r-1)};const Ho=function(e,t,n,r,i){var o,a,s,l,u=(o=e,a=t,[Object.keys(o),Object.keys(a)].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))),c=u.reduce((function(n,r){return Lo(Lo({},n),{},jo({},r,[e[r],t[r]]))}),{}),h=u.reduce((function(n,r){return Lo(Lo({},n),{},jo({},r,{from:e[r],velocity:0,to:t[r]}))}),{}),d=-1,p=function(){return null};return p=n.isStepper?function(r){s||(s=r);var o=(r-s)/n.dt;h=Go(n,h,o),i(Lo(Lo(Lo({},e),t),So((function(e,t){return t.from}),h))),s=r,Object.values(h).filter(Vo).length&&(d=requestAnimationFrame(p))}:function(o){l||(l=o);var a=(o-l)/r,s=So((function(e,t){return Uo.apply(void 0,Mo(t).concat([n(a)]))}),c);if(i(Lo(Lo(Lo({},e),t),s)),a<1)d=requestAnimationFrame(p);else{var u=So((function(e,t){return Uo.apply(void 0,Mo(t).concat([n(1)]))}),c);i(Lo(Lo(Lo({},e),t),u))}},function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(d)}}};function qo(e){return qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(e)}var Ko=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Xo(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Yo(e){return function(e){if(Array.isArray(e))return Qo(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Qo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(n),!0).forEach((function(t){ea(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ea(e,t,n){return(t=na(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ta(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,na(r.key),r)}}function na(e){var t=function(e,t){if("object"!==qo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===qo(t)?t:String(t)}function ra(e,t){return ra=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ra(e,t)}function ia(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ie){return!1}}();return function(){var n,r=sa(e);if(t){var i=sa(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return oa(this,n)}}function oa(e,t){if(t&&("object"===qo(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return aa(e)}function aa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sa(e){return sa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sa(e)}var la=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ra(e,t)}(o,e);var t,n,r,i=ia(o);function o(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=(n=i.call(this,e,t)).props,a=r.isActive,s=r.attributeName,l=r.from,u=r.to,c=r.steps,h=r.children,d=r.duration;if(n.handleStyleChange=n.handleStyleChange.bind(aa(n)),n.changeStyle=n.changeStyle.bind(aa(n)),!a||d<=0)return n.state={style:{}},"function"===typeof h&&(n.state={style:u}),oa(n);if(c&&c.length)n.state={style:c[0].style};else if(l){if("function"===typeof h)return n.state={style:l},oa(n);n.state={style:s?ea({},s,l):l}}else n.state={style:{}};return n}return t=o,n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,i=t.attributeName,o=t.shouldReAnimate,a=t.to,s=t.from,l=this.state.style;if(r)if(n){if(!(co(e.to,a)&&e.canBegin&&e.isActive)){var u=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var c=u||o?s:e.to;if(this.state&&l){var h={style:i?ea({},i,c):c};(i&&l[i]!==c||!i&&l!==c)&&this.setState(h)}this.runAnimation(Zo(Zo({},this.props),{},{from:c,begin:0}))}}else{var d={style:i?ea({},i,a):a};this.state&&l&&(i&&l[i]!==a||!i&&l!==a)&&this.setState(d)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,i=e.duration,o=e.easing,a=e.begin,s=e.onAnimationEnd,l=e.onAnimationStart,u=Ho(n,r,Po(o),i,this.changeStyle);this.manager.start([l,a,function(){t.stopJSAnimation=u()},i,s])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,i=e.onAnimationStart,o=n[0],a=o.style,s=o.duration,l=void 0===s?0:s;return this.manager.start([i].concat(Yo(n.reduce((function(e,r,i){if(0===i)return e;var o=r.duration,a=r.easing,s=void 0===a?"ease":a,l=r.style,u=r.properties,c=r.onAnimationEnd,h=i>0?n[i-1]:r,d=u||Object.keys(l);if("function"===typeof s||"spring"===s)return[].concat(Yo(e),[t.runJSAnimation.bind(t,{from:h.style,to:l,duration:o,easing:s}),o]);var p=Co(d,o,s),f=Zo(Zo(Zo({},h.style),l),{},{transition:p});return[].concat(Yo(e),[f,o,c]).filter(ko)}),[a,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=yo());var t=e.begin,n=e.duration,r=e.attributeName,i=e.to,o=e.easing,a=e.onAnimationStart,s=e.onAnimationEnd,l=e.steps,u=e.children,c=this.manager;if(this.unSubscribe=c.subscribe(this.handleStyleChange),"function"!==typeof o&&"function"!==typeof u&&"spring"!==o)if(l.length>1)this.runStepAnimation(e);else{var h=r?ea({},r,i):i,d=Co(Object.keys(h),n,o);c.start([a,t,Zo(Zo({},h),{},{transition:d}),n,s])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.begin,e.duration),r=(e.attributeName,e.easing,e.isActive),i=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,Xo(e,Ko)),o=a.Children.count(t),s=this.state.style;if("function"===typeof t)return t(s);if(!r||0===o||n<=0)return t;var l=function(e){var t=e.props,n=t.style,r=void 0===n?{}:n,o=t.className;return(0,a.cloneElement)(e,Zo(Zo({},i),{},{style:Zo(Zo({},r),s),className:o}))};return 1===o?l(a.Children.only(t)):a.createElement("div",null,a.Children.map(t,(function(e){return l(e)})))}}],n&&ta(t.prototype,n),r&&ta(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(a.PureComponent);la.displayName="Animate",la.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},la.propTypes={from:ji().oneOfType([ji().object,ji().string]),to:ji().oneOfType([ji().object,ji().string]),attributeName:ji().string,duration:ji().number,begin:ji().number,easing:ji().oneOfType([ji().string,ji().func]),steps:ji().arrayOf(ji().shape({duration:ji().number.isRequired,style:ji().object.isRequired,easing:ji().oneOfType([ji().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ji().func]),properties:ji().arrayOf("string"),onAnimationEnd:ji().func})),children:ji().oneOfType([ji().node,ji().func]),isActive:ji().bool,canBegin:ji().bool,onAnimationEnd:ji().func,shouldReAnimate:ji().bool,onAnimationStart:ji().func,onAnimationReStart:ji().func};const ua=la;function ca(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function ha(){return ha=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ha.apply(null,arguments)}function da(e,t){return da=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},da(e,t)}function pa(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,da(e,t)}const fa=a.createContext(null);function ga(e,t){var n=Object.create(null);return e&&a.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,a.isValidElement)(e)?t(e):e}(e)})),n}function ma(e,t,n){return null!=n[t]?n[t]:e.props[t]}function ya(e,t,n){var r=ga(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];s[i[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(t,r);return Object.keys(i).forEach((function(o){var s=i[o];if((0,a.isValidElement)(s)){var l=o in t,u=o in r,c=t[o],h=(0,a.isValidElement)(c)&&!c.props.in;!u||l&&!h?u||!l||h?u&&l&&(0,a.isValidElement)(c)&&(i[o]=(0,a.cloneElement)(s,{onExited:n.bind(null,s),in:c.props.in,exit:ma(s,"exit",e),enter:ma(s,"enter",e)})):i[o]=(0,a.cloneElement)(s,{in:!1}):i[o]=(0,a.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:ma(s,"exit",e),enter:ma(s,"enter",e)})}})),i}var va=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},ba=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}pa(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,ga(n.children,(function(e){return(0,a.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:ma(e,"appear",n),enter:ma(e,"enter",n),exit:ma(e,"exit",n)})}))):ya(e,i,o),firstRender:!1}},n.handleExited=function(e,t){var n=ga(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=ha({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=ca(e,["component","childFactory"]),i=this.state.contextValue,o=va(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?a.createElement(fa.Provider,{value:i},o):a.createElement(fa.Provider,{value:i},a.createElement(t,r,o))},t}(a.Component);ba.propTypes={},ba.defaultProps={component:"div",childFactory:function(e){return e}};const xa=ba,wa=!1;var ka="unmounted",Sa="exited",Ca="entering",Ia="entered",Ea="exiting",Ta=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=Sa,r.appearStatus=Ca):i=Ia:i=t.unmountOnExit||t.mountOnEnter?ka:Sa,r.state={status:i},r.nextCallback=null,r}pa(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===ka?{status:Sa}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Ca&&n!==Ia&&(t=Ca):n!==Ca&&n!==Ia||(t=Ea)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Ca){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:ue.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Sa&&this.setState({status:ka})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[ue.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||wa?this.safeSetState({status:Ia},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:Ca},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:Ia},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:ue.findDOMNode(this);t&&!wa?(this.props.onExit(r),this.safeSetState({status:Ea},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Sa},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Sa},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:ue.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===ka)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,ca(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.createElement(fa.Provider,{value:null},"function"===typeof n?n(e,r):a.cloneElement(a.Children.only(n),r))},t}(a.Component);function _a(){}Ta.contextType=fa,Ta.propTypes={},Ta.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:_a,onEntering:_a,onEntered:_a,onExit:_a,onExiting:_a,onExited:_a},Ta.UNMOUNTED=ka,Ta.EXITED=Sa,Ta.ENTERING=Ca,Ta.ENTERED=Ia,Ta.EXITING=Ea;const Na=Ta;var Aa=["children","appearOptions","enterOptions","leaveOptions"];function Oa(e){return Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oa(e)}function Ra(){return Ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ra.apply(this,arguments)}function $a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(n),!0).forEach((function(t){Ba(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wa(r.key),r)}}function Fa(e,t){return Fa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fa(e,t)}function La(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ie){return!1}}();return function(){var n,r=za(e);if(t){var i=za(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Oa(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ja(e)}(this,n)}}function ja(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function za(e){return za=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},za(e)}function Ba(e,t,n){return(t=Wa(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wa(e){var t=function(e,t){if("object"!==Oa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Oa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Oa(t)?t:String(t)}var Ua=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.steps,n=e.duration;return t&&t.length?t.reduce((function(e,t){return e+(Number.isFinite(t.duration)&&t.duration>0?t.duration:0)}),0):Number.isFinite(n)?n:0},Va=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fa(e,t)}(o,e);var t,n,r,i=La(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Ba(ja(e=i.call(this)),"handleEnter",(function(t,n){var r=e.props,i=r.appearOptions,o=r.enterOptions;e.handleStyleActive(n?i:o)})),Ba(ja(e),"handleExit",(function(){var t=e.props.leaveOptions;e.handleStyleActive(t)})),e.state={isActive:!1},e}return t=o,n=[{key:"handleStyleActive",value:function(e){if(e){var t=e.onAnimationEnd?function(){e.onAnimationEnd()}:null;this.setState(Da(Da({},e),{},{onAnimationEnd:t,isActive:!0}))}}},{key:"parseTimeout",value:function(){var e=this.props,t=e.appearOptions,n=e.enterOptions,r=e.leaveOptions;return Ua(t)+Ua(n)+Ua(r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=(t.appearOptions,t.enterOptions,t.leaveOptions,$a(t,Aa));return a.createElement(Na,Ra({},r,{onEnter:this.handleEnter,onExit:this.handleExit,timeout:this.parseTimeout()}),(function(){return a.createElement(ua,e.state,a.Children.only(n))}))}}],n&&Ma(t.prototype,n),r&&Ma(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(a.Component);Va.propTypes={appearOptions:ji().object,enterOptions:ji().object,leaveOptions:ji().object,children:ji().element};const Ga=Va;function Ha(e){var t=e.component,n=e.children,r=e.appear,i=e.enter,o=e.leave;return a.createElement(xa,{component:t},a.Children.map(n,(function(e,t){return a.createElement(Ga,{appearOptions:r,enterOptions:i,leaveOptions:o,key:"child-".concat(t)},e)})))}Ha.propTypes={appear:ji().object,enter:ji().object,leave:ji().object,children:ji().oneOfType([ji().array,ji().element]),component:ji().any},Ha.defaultProps={component:"span"};const qa=ua;function Ka(e){return Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ka(e)}function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xa.apply(this,arguments)}function Ya(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Qa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){es(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function es(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Ka(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ka(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ka(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ts=function(e,t,n,r,i){var o,a=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,u=r>=0&&n>=0||r<0&&n<0?1:0;if(a>0&&i instanceof Array){for(var c=[0,0,0,0],h=0;h<4;h++)c[h]=i[h]>a?a:i[h];o="M".concat(e,",").concat(t+s*c[0]),c[0]>0&&(o+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(u,",").concat(e+l*c[0],",").concat(t)),o+="L ".concat(e+n-l*c[1],",").concat(t),c[1]>0&&(o+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(u,",\n        ").concat(e+n,",").concat(t+s*c[1])),o+="L ".concat(e+n,",").concat(t+r-s*c[2]),c[2]>0&&(o+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(u,",\n        ").concat(e+n-l*c[2],",").concat(t+r)),o+="L ".concat(e+l*c[3],",").concat(t+r),c[3]>0&&(o+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(u,",\n        ").concat(e,",").concat(t+r-s*c[3])),o+="Z"}else if(a>0&&i===+i&&i>0){var d=Math.min(a,i);o="M ".concat(e,",").concat(t+s*d,"\n            A ").concat(d,",").concat(d,",0,0,").concat(u,",").concat(e+l*d,",").concat(t,"\n            L ").concat(e+n-l*d,",").concat(t,"\n            A ").concat(d,",").concat(d,",0,0,").concat(u,",").concat(e+n,",").concat(t+s*d,"\n            L ").concat(e+n,",").concat(t+r-s*d,"\n            A ").concat(d,",").concat(d,",0,0,").concat(u,",").concat(e+n-l*d,",").concat(t+r,"\n            L ").concat(e+l*d,",").concat(t+r,"\n            A ").concat(d,",").concat(d,",0,0,").concat(u,",").concat(e,",").concat(t+r-s*d," Z")}else o="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return o},ns=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,i=t.x,o=t.y,a=t.width,s=t.height;if(Math.abs(a)>0&&Math.abs(s)>0){var l=Math.min(i,i+a),u=Math.max(i,i+a),c=Math.min(o,o+s),h=Math.max(o,o+s);return n>=l&&n<=u&&r>=c&&r<=h}return!1},rs={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},is=function(e){var t=Za(Za({},rs),e),n=(0,a.useRef)(),r=Ya((0,a.useState)(-1),2),i=r[0],o=r[1];(0,a.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&o(e)}catch(t){}}),[]);var s=t.x,l=t.y,u=t.width,c=t.height,h=t.radius,d=t.className,p=t.animationEasing,f=t.animationDuration,g=t.animationBegin,m=t.isAnimationActive,y=t.isUpdateAnimationActive;if(s!==+s||l!==+l||u!==+u||c!==+c||0===u||0===c)return null;var v=ct("recharts-rectangle",d);return y?a.createElement(qa,{canBegin:i>0,from:{width:u,height:c,x:s,y:l},to:{width:u,height:c,x:s,y:l},duration:f,animationEasing:p,isActive:y},(function(e){var r=e.width,o=e.height,s=e.x,l=e.y;return a.createElement(qa,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:f,isActive:m,easing:p},a.createElement("path",Xa({},ln(t,!0),{className:v,d:ts(s,l,r,o,h),ref:n})))})):a.createElement("path",Xa({},ln(t,!0),{className:v,d:ts(s,l,u,c,h)}))};function os(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function as(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class ss extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hs;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(ls(this,e))}has(e){return super.has(ls(this,e))}set(e,t){return super.set(us(this,e),t)}delete(e){return super.delete(cs(this,e))}}Set;function ls(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):t}function us(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function cs(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function hs(e){return null!==e&&"object"===typeof e?e.valueOf():e}const ds=Symbol("implicit");function ps(){var e=new ss,t=[],n=[],r=ds;function i(i){let o=e.get(i);if(void 0===o){if(r!==ds)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new ss;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return ps(t,n).unknown(r)},os.apply(i,arguments),i}function fs(){var e,t,n=ps().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,l=0,u=0,c=.5;function h(){var n=r().length,h=a<o,d=h?a:o,p=h?o:a;e=(p-d)/Math.max(1,n-l+2*u),s&&(e=Math.floor(e)),d+=(p-d-e*(n-l))*c,t=e*(1-l),s&&(d=Math.round(d),t=Math.round(t));var f=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}(n).map((function(t){return d+e*t}));return i(h?f.reverse():f)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),h()):r()},n.range=function(e){return arguments.length?([o,a]=e,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(e){return[o,a]=e,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,h()):s},n.padding=function(e){return arguments.length?(l=Math.min(1,u=+e),h()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},n.paddingOuter=function(e){return arguments.length?(u=+e,h()):u},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),h()):c},n.copy=function(){return fs(r(),[o,a]).round(s).paddingInner(l).paddingOuter(u).align(c)},os.apply(h(),arguments)}function gs(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return gs(t())},e}function ms(){return gs(fs.apply(null,arguments).paddingInner(1))}function ys(e){return ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ys(e)}function vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vs(Object(n),!0).forEach((function(t){xs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xs(e,t,n){return t=function(e){var t=function(e,t){if("object"!=ys(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ys(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ys(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ws={widthCache:{},cacheCount:0},ks={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Ss="recharts_measurement_span";var Cs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||ar.isSsr)return{width:0,height:0};var n=function(e){var t=bs({},e);return Object.keys(t).forEach((function(e){t[e]||delete t[e]})),t}(t),r=JSON.stringify({text:e,copyStyle:n});if(ws.widthCache[r])return ws.widthCache[r];try{var i=document.getElementById(Ss);i||((i=document.createElement("span")).setAttribute("id",Ss),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=bs(bs({},ks),n);Object.assign(i.style,o),i.textContent="".concat(e);var a=i.getBoundingClientRect(),s={width:a.width,height:a.height};return ws.widthCache[r]=s,++ws.cacheCount>2e3&&(ws.cacheCount=0,ws.widthCache={}),s}catch(ie){return{width:0,height:0}}};function Is(e){return Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Is(e)}function Es(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ts(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ts(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ts(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ns(r.key),r)}}function Ns(e){var t=function(e,t){if("object"!=Is(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Is(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Is(t)?t:t+""}var As=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Os=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Rs=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,$s=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Ps={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},Ds=Object.keys(Ps),Ms="NaN";var Fs=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),""===n||Rs.test(n)||(this.num=NaN,this.unit=""),Ds.includes(n)&&(this.num=function(e,t){return e*Ps[t]}(t,n),this.unit="px")}return t=e,r=[{key:"parse",value:function(t){var n,r=Es(null!==(n=$s.exec(t))&&void 0!==n?n:[],3),i=r[1],o=r[2];return new e(parseFloat(i),null!==o&&void 0!==o?o:"")}}],(n=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&_s(t.prototype,n),r&&_s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function Ls(e){if(e.includes(Ms))return Ms;for(var t=e;t.includes("*")||t.includes("/");){var n,r=Es(null!==(n=As.exec(t))&&void 0!==n?n:[],4),i=r[1],o=r[2],a=r[3],s=Fs.parse(null!==i&&void 0!==i?i:""),l=Fs.parse(null!==a&&void 0!==a?a:""),u="*"===o?s.multiply(l):s.divide(l);if(u.isNaN())return Ms;t=t.replace(As,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,h=Es(null!==(c=Os.exec(t))&&void 0!==c?c:[],4),d=h[1],p=h[2],f=h[3],g=Fs.parse(null!==d&&void 0!==d?d:""),m=Fs.parse(null!==f&&void 0!==f?f:""),y="+"===p?g.add(m):g.subtract(m);if(y.isNaN())return Ms;t=t.replace(Os,y.toString())}return t}var js=/\(([^()]*)\)/;function zs(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var n=Es(js.exec(t),2)[1];t=t.replace(js,Ls(n))}return t}(t),t=Ls(t)}function Bs(e){var t=function(e){try{return zs(e)}catch(ie){return Ms}}(e.slice(5,-1));return t===Ms?"":t}var Ws=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Us=["dx","dy","angle","className","breakAll"];function Vs(){return Vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vs.apply(this,arguments)}function Gs(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Hs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return qs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ks=/[ \f\n\r\t\v\u2028\u2029]+/,Xs=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var i=[];return Pt()(t)||(i=n?t.toString().split(""):t.toString().split(Ks)),{wordsWithComputedWidth:i.map((function(e){return{word:e,width:Cs(e,r).width}})),spaceWidth:n?0:Cs("\xa0",r).width}}catch(ie){return null}},Ys=function(e){return[{words:Pt()(e)?[]:e.toString().split(Ks)}]},Qs=function(e){var t=e.width,n=e.scaleToFit,r=e.children,i=e.style,o=e.breakAll,a=e.maxLines;if((t||n)&&!ar.isSsr){var s=Xs({breakAll:o,children:r,style:i});return s?function(e,t,n,r,i){var o=e.maxLines,a=e.children,s=e.style,l=e.breakAll,u=Ct(o),c=a,h=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var o=t.word,a=t.width,s=e[e.length-1];if(s&&(null==r||i||s.width+a+n<Number(r)))s.words.push(o),s.width+=a+n;else{var l={words:[o],width:a};e.push(l)}return e}),[])},d=h(t);if(!u)return d;for(var p,f=function(e){var t=c.slice(0,e),n=Xs({breakAll:l,style:s,children:t+"\u2026"}).wordsWithComputedWidth,i=h(n),a=i.length>o||function(e){return e.reduce((function(e,t){return e.width>t.width?e:t}))}(i).width>Number(r);return[a,i]},g=0,m=c.length-1,y=0;g<=m&&y<=c.length-1;){var v=Math.floor((g+m)/2),b=Hs(f(v-1),2),x=b[0],w=b[1],k=Hs(f(v),1)[0];if(x||k||(g=v+1),x&&k&&(m=v-1),!x&&k){p=w;break}y++}return p||d}({breakAll:o,children:r,maxLines:a,style:i},s.wordsWithComputedWidth,s.spaceWidth,t,n):Ys(r)}return Ys(r)},Js="#808080",Zs=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.lineHeight,s=void 0===o?"1em":o,l=e.capHeight,u=void 0===l?"0.71em":l,c=e.scaleToFit,h=void 0!==c&&c,d=e.textAnchor,p=void 0===d?"start":d,f=e.verticalAnchor,g=void 0===f?"end":f,m=e.fill,y=void 0===m?Js:m,v=Gs(e,Ws),b=(0,a.useMemo)((function(){return Qs({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:h,style:v.style,width:v.width})}),[v.breakAll,v.children,v.maxLines,h,v.style,v.width]),x=v.dx,w=v.dy,k=v.angle,S=v.className,C=v.breakAll,I=Gs(v,Us);if(!It(n)||!It(i))return null;var E,T=n+(Ct(x)?x:0),_=i+(Ct(w)?w:0);switch(g){case"start":E=Bs("calc(".concat(u,")"));break;case"middle":E=Bs("calc(".concat((b.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:E=Bs("calc(".concat(b.length-1," * -").concat(s,")"))}var N=[];if(h){var A=b[0].width,O=v.width;N.push("scale(".concat((Ct(O)?O/A:1)/A,")"))}return k&&N.push("rotate(".concat(k,", ").concat(T,", ").concat(_,")")),N.length&&(I.transform=N.join(" ")),a.createElement("text",Vs({},ln(I,!0),{x:T,y:_,className:ct("recharts-text",S),textAnchor:p,fill:y.includes("url")?Js:y}),b.map((function(e,t){var n=e.words.join(C?"":" ");return a.createElement("tspan",{x:T,dy:0===t?E:s,key:n},n)})))};const el=Math.sqrt(50),tl=Math.sqrt(10),nl=Math.sqrt(2);function rl(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=el?10:o>=tl?5:o>=nl?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?rl(e,t,2*n):[s,l,u]}function il(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[i,o,a]=r?rl(t,e,n):rl(e,t,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function ol(e,t,n){return rl(e=+e,t=+t,n=+n)[2]}function al(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?ol(t,e,n):ol(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function sl(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ll(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ul(e){let t,n,r;function i(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<0?i=t+1:o=t}while(i<o)}return i}return 2!==e.length?(t=sl,n=(t,n)=>sl(e(t),n),r=(t,n)=>e(t)-n):(t=e===sl||e===ll?e:cl,n=e,r=e),{left:i,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=i(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<=0?i=t+1:o=t}while(i<o)}return i}}}function cl(){return 0}function hl(e){return null===e?NaN:+e}const dl=ul(sl),pl=dl.right,fl=(dl.left,ul(hl).center,pl);function gl(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ml(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function yl(){}var vl=.7,bl=1/vl,xl="\\s*([+-]?\\d+)\\s*",wl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sl=/^#([0-9a-f]{3,8})$/,Cl=new RegExp(`^rgb\\(${xl},${xl},${xl}\\)$`),Il=new RegExp(`^rgb\\(${kl},${kl},${kl}\\)$`),El=new RegExp(`^rgba\\(${xl},${xl},${xl},${wl}\\)$`),Tl=new RegExp(`^rgba\\(${kl},${kl},${kl},${wl}\\)$`),_l=new RegExp(`^hsl\\(${wl},${kl},${kl}\\)$`),Nl=new RegExp(`^hsla\\(${wl},${kl},${kl},${wl}\\)$`),Al={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ol(){return this.rgb().formatHex()}function Rl(){return this.rgb().formatRgb()}function $l(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Sl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Pl(t):3===n?new Fl(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Dl(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Dl(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Cl.exec(e))?new Fl(t[1],t[2],t[3],1):(t=Il.exec(e))?new Fl(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=El.exec(e))?Dl(t[1],t[2],t[3],t[4]):(t=Tl.exec(e))?Dl(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=_l.exec(e))?Ul(t[1],t[2]/100,t[3]/100,1):(t=Nl.exec(e))?Ul(t[1],t[2]/100,t[3]/100,t[4]):Al.hasOwnProperty(e)?Pl(Al[e]):"transparent"===e?new Fl(NaN,NaN,NaN,0):null}function Pl(e){return new Fl(e>>16&255,e>>8&255,255&e,1)}function Dl(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fl(e,t,n,r)}function Ml(e,t,n,r){return 1===arguments.length?function(e){return e instanceof yl||(e=$l(e)),e?new Fl((e=e.rgb()).r,e.g,e.b,e.opacity):new Fl}(e):new Fl(e,t,n,null==r?1:r)}function Fl(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ll(){return`#${Wl(this.r)}${Wl(this.g)}${Wl(this.b)}`}function jl(){const e=zl(this.opacity);return`${1===e?"rgb(":"rgba("}${Bl(this.r)}, ${Bl(this.g)}, ${Bl(this.b)}${1===e?")":`, ${e})`}`}function zl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Bl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wl(e){return((e=Bl(e))<16?"0":"")+e.toString(16)}function Ul(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Gl(e,t,n,r)}function Vl(e){if(e instanceof Gl)return new Gl(e.h,e.s,e.l,e.opacity);if(e instanceof yl||(e=$l(e)),!e)return new Gl;if(e instanceof Gl)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Gl(a,s,l,e.opacity)}function Gl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Hl(e){return(e=(e||0)%360)<0?e+360:e}function ql(e){return Math.max(0,Math.min(1,e||0))}function Kl(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Xl(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}gl(yl,$l,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ol,formatHex:Ol,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Vl(this).formatHsl()},formatRgb:Rl,toString:Rl}),gl(Fl,Ml,ml(yl,{brighter(e){return e=null==e?bl:Math.pow(bl,e),new Fl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?vl:Math.pow(vl,e),new Fl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fl(Bl(this.r),Bl(this.g),Bl(this.b),zl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ll,formatHex:Ll,formatHex8:function(){return`#${Wl(this.r)}${Wl(this.g)}${Wl(this.b)}${Wl(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:jl,toString:jl})),gl(Gl,(function(e,t,n,r){return 1===arguments.length?Vl(e):new Gl(e,t,n,null==r?1:r)}),ml(yl,{brighter(e){return e=null==e?bl:Math.pow(bl,e),new Gl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?vl:Math.pow(vl,e),new Gl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Fl(Kl(e>=240?e-240:e+120,i,r),Kl(e,i,r),Kl(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Gl(Hl(this.h),ql(this.s),ql(this.l),zl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zl(this.opacity);return`${1===e?"hsl(":"hsla("}${Hl(this.h)}, ${100*ql(this.s)}%, ${100*ql(this.l)}%${1===e?")":`, ${e})`}`}}));const Yl=e=>()=>e;function Ql(e,t){return function(n){return e+n*t}}function Jl(e){return 1===(e=+e)?Zl:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Yl(isNaN(t)?n:t)}}function Zl(e,t){var n=t-e;return n?Ql(e,n):Yl(isNaN(e)?t:e)}const eu=function e(t){var n=Jl(t);function r(e,t){var r=n((e=Ml(e)).r,(t=Ml(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=Zl(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function tu(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Ml(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}tu((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return Xl((n-r/t)*t,a,i,o,s)}})),tu((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return Xl((n-r/t)*t,i,o,a,s)}}));function nu(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=cu(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function ru(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function iu(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ou(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=cu(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var au=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,su=new RegExp(au.source,"g");function lu(e,t){var n,r,i,o=au.lastIndex=su.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=au.exec(e))&&(r=su.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:iu(n,r)})),o=su.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function uu(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function cu(e,t){var n,r=typeof t;return null==t||"boolean"===r?Yl(t):("number"===r?iu:"string"===r?(n=$l(t))?(t=n,eu):lu:t instanceof $l?eu:t instanceof Date?ru:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?uu:Array.isArray(t)?nu:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?ou:iu)(e,t)}function hu(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function du(e){return+e}var pu=[0,1];function fu(e){return e}function gu(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function mu(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=gu(i,r),o=n(a,o)):(r=gu(r,i),o=n(o,a)),function(e){return o(r(e))}}function yu(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=gu(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=fl(e,t,1,r)-1;return o[n](i[n](t))}}function vu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function bu(){var e,t,n,r,i,o,a=pu,s=pu,l=cu,u=fu;function c(){var e=Math.min(a.length,s.length);return u!==fu&&(u=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?yu:mu,i=o=null,h}function h(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(u(t)))}return h.invert=function(n){return u(t((o||(o=r(s,a.map(e),iu)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,du),c()):a.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),l=hu,c()},h.clamp=function(e){return arguments.length?(u=!!e||fu,c()):u!==fu},h.interpolate=function(e){return arguments.length?(l=e,c()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,c()}}function xu(){return bu()(fu,fu)}var wu,ku=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Su(e){if(!(t=ku.exec(e)))throw new Error("invalid format: "+e);var t;return new Cu({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Cu(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Iu(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Eu(e){return(e=Iu(Math.abs(e)))?e[1]:NaN}function Tu(e,t){var n=Iu(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Su.prototype=Cu.prototype,Cu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const _u={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Tu(100*e,t),r:Tu,s:function(e,t){var n=Iu(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(wu=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Iu(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Nu(e){return e}var Au,Ou,Ru,$u=Array.prototype.map,Pu=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Du(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Nu:(t=$u.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Nu:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}($u.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"\u2212":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=Su(e)).fill,n=e.align,h=e.sign,d=e.symbol,p=e.zero,f=e.width,g=e.comma,m=e.precision,y=e.trim,v=e.type;"n"===v?(g=!0,v="g"):_u[v]||(void 0===m&&(m=12),y=!0,v="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===d?o:/[%p]/.test(v)?l:"",w=_u[v],k=/[defgprs%]/.test(v);function S(e){var i,o,l,d=b,S=x;if("c"===v)S=w(e)+S,e="";else{var C=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:w(Math.abs(e),m),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),C&&0===+e&&"+"!==h&&(C=!1),d=(C?"("===h?h:u:"-"===h||"("===h?"":h)+d,S=("s"===v?Pu[8+wu/3]:"")+S+(C&&"("===h?")":""),k)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){S=(46===l?a+e.slice(i+1):e.slice(i))+S,e=e.slice(0,i);break}}g&&!p&&(e=r(e,1/0));var I=d.length+e.length+S.length,E=I<f?new Array(f-I+1).join(t):"";switch(g&&p&&(e=r(E+e,E.length?f-S.length:1/0),E=""),n){case"<":e=d+e+S+E;break;case"=":e=d+E+e+S;break;case"^":e=E.slice(0,I=E.length>>1)+d+e+S+E.slice(I);break;default:e=E+d+e+S}return s(e)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),S.toString=function(){return e+""},S}return{format:h,formatPrefix:function(e,t){var n=h(((e=Su(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Eu(t)/3))),i=Math.pow(10,-r),o=Pu[8+r/3];return function(e){return n(i*e)+o}}}}function Mu(e,t,n,r){var i,o=al(e,t,n);switch((r=Su(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Eu(t)/3)))-Eu(Math.abs(e)))}(o,a))||(r.precision=i),Ru(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Eu(t)-Eu(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-Eu(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return Ou(r)}function Fu(e){var t=e.domain;return e.ticks=function(e){var n=t();return il(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Mu(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,l=o[a],u=o[s],c=10;for(u<l&&(i=l,l=u,u=i,i=a,a=s,s=i);c-- >0;){if((i=ol(l,u,n))===r)return o[a]=l,o[s]=u,t(o);if(i>0)l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i}r=i}return e},e}function Lu(){var e=xu();return e.copy=function(){return vu(e,Lu())},os.apply(e,arguments),Fu(e)}function ju(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,du),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return ju(e).unknown(t)},e=arguments.length?Array.from(e,du):[0,1],Fu(n)}function zu(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function Bu(e){return Math.log(e)}function Wu(e){return Math.exp(e)}function Uu(e){return-Math.log(-e)}function Vu(e){return-Math.exp(-e)}function Gu(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Hu(e){return(t,n)=>-e(-t,n)}function qu(e){const t=e(Bu,Wu),n=t.domain;let r,i,o=10;function a(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(o),i=function(e){return 10===e?Gu:e===Math.E?Math.exp:t=>Math.pow(e,t)}(o),n()[0]<0?(r=Hu(r),i=Hu(i),e(Uu,Vu)):e(Bu,Wu),t}return t.base=function(e){return arguments.length?(o=+e,a()):o},t.domain=function(e){return arguments.length?(n(e),a()):n()},t.ticks=e=>{const t=n();let a=t[0],s=t[t.length-1];const l=s<a;l&&([a,s]=[s,a]);let u,c,h=r(a),d=r(s);const p=null==e?10:+e;let f=[];if(!(o%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),a>0){for(;h<=d;++h)for(u=1;u<o;++u)if(c=h<0?u/i(-h):u*i(h),!(c<a)){if(c>s)break;f.push(c)}}else for(;h<=d;++h)for(u=o-1;u>=1;--u)if(c=h>0?u/i(-h):u*i(h),!(c<a)){if(c>s)break;f.push(c)}2*f.length<p&&(f=il(a,s,p))}else f=il(h,d,Math.min(d-h,p)).map(i);return l?f.reverse():f},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===o?"s":","),"function"!==typeof n&&(o%1||null!=(n=Su(n)).precision||(n.trim=!0),n=Ou(n)),e===1/0)return n;const a=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*o<o-.5&&(t*=o),t<=a?n(e):""}},t.nice=()=>n(zu(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function Ku(){const e=qu(bu()).domain([1,10]);return e.copy=()=>vu(e,Ku()).base(e.base()),os.apply(e,arguments),e}function Xu(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Yu(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Qu(e){var t=1,n=e(Xu(t),Yu(t));return n.constant=function(n){return arguments.length?e(Xu(t=+n),Yu(t)):t},Fu(n)}function Ju(){var e=Qu(bu());return e.copy=function(){return vu(e,Ju()).constant(e.constant())},os.apply(e,arguments)}function Zu(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ec(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function tc(e){return e<0?-e*e:e*e}function nc(e){var t=e(fu,fu),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(fu,fu):.5===n?e(ec,tc):e(Zu(n),Zu(1/n)):n},Fu(t)}function rc(){var e=nc(bu());return e.copy=function(){return vu(e,rc()).exponent(e.exponent())},os.apply(e,arguments),e}function ic(){return rc.apply(null,arguments).exponent(.5)}function oc(e){return Math.sign(e)*e*e}function ac(){var e,t=xu(),n=[0,1],r=!1;function i(n){var i=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(i)?e:r?Math.round(i):i}return i.invert=function(e){return t.invert(oc(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((n=Array.from(e,du)).map(oc)),i):n.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(r=!!e,i):r},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return ac(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},os.apply(i,arguments),Fu(i)}function sc(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function lc(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function uc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sl;if(e===sl)return cc;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function cc(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function hc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=void 0===i?cc:uc(i);r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);hc(e,t,Math.max(n,Math.floor(t-a*l/o+u)),Math.min(r,Math.floor(t+(o-a)*l/o+u)),i)}const o=e[t];let a=n,s=r;for(dc(e,n,t),i(e[r],o)>0&&dc(e,n,r);a<s;){for(dc(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[n],o)?dc(e,n,s):(++s,dc(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function dc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function pc(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return lc(e);if(t>=1)return sc(e);var r,i=(r-1)*t,o=Math.floor(i),a=sc(hc(e,o).subarray(0,o+1));return a+(lc(e.subarray(o+1))-a)*(i-o)}}function fc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hl;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}function gc(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=fc(t,e/i);return o}function o(t){return null==t||isNaN(t=+t)?e:n[fl(r,t)]}return o.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(sl),i()},o.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return gc().domain(t).range(n).unknown(e)},os.apply(o,arguments)}function mc(){var e,t=0,n=1,r=1,i=[.5],o=[0,1];function a(t){return null!=t&&t<=t?o[fl(i,t,0,r)]:e}function s(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return a}return a.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,s()):[t,n]},a.range=function(e){return arguments.length?(r=(o=Array.from(e)).length-1,s()):o.slice()},a.invertExtent=function(e){var a=o.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return mc().domain([t,n]).range(o).unknown(e)},os.apply(Fu(a),arguments)}function yc(){var e,t=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[fl(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return yc().domain(t).range(n).unknown(e)},os.apply(i,arguments)}Au=Du({thousands:",",grouping:[3],currency:["$",""]}),Ou=Au.format,Ru=Au.formatPrefix;const vc=1e3,bc=6e4,xc=36e5,wc=864e5,kc=6048e5,Sc=2592e6,Cc=31536e6,Ic=new Date,Ec=new Date;function Tc(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return a;let s;do{a.push(s=new Date(+n)),t(n,o),e(n)}while(s<n&&n<r);return a},i.filter=n=>Tc((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})),n&&(i.count=(t,r)=>(Ic.setTime(+t),Ec.setTime(+r),e(Ic),e(Ec),Math.floor(n(Ic,Ec))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const _c=Tc((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));_c.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?Tc((t=>{t.setTime(Math.floor(t/e)*e)}),((t,n)=>{t.setTime(+t+n*e)}),((t,n)=>(n-t)/e)):_c:null);_c.range;const Nc=Tc((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*vc)}),((e,t)=>(t-e)/vc),(e=>e.getUTCSeconds())),Ac=(Nc.range,Tc((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vc)}),((e,t)=>{e.setTime(+e+t*bc)}),((e,t)=>(t-e)/bc),(e=>e.getMinutes()))),Oc=(Ac.range,Tc((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*bc)}),((e,t)=>(t-e)/bc),(e=>e.getUTCMinutes()))),Rc=(Oc.range,Tc((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vc-e.getMinutes()*bc)}),((e,t)=>{e.setTime(+e+t*xc)}),((e,t)=>(t-e)/xc),(e=>e.getHours()))),$c=(Rc.range,Tc((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*xc)}),((e,t)=>(t-e)/xc),(e=>e.getUTCHours()))),Pc=($c.range,Tc((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*bc)/wc),(e=>e.getDate()-1))),Dc=(Pc.range,Tc((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/wc),(e=>e.getUTCDate()-1))),Mc=(Dc.range,Tc((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/wc),(e=>Math.floor(e/wc))));Mc.range;function Fc(e){return Tc((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*bc)/kc))}const Lc=Fc(0),jc=Fc(1),zc=Fc(2),Bc=Fc(3),Wc=Fc(4),Uc=Fc(5),Vc=Fc(6);Lc.range,jc.range,zc.range,Bc.range,Wc.range,Uc.range,Vc.range;function Gc(e){return Tc((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/kc))}const Hc=Gc(0),qc=Gc(1),Kc=Gc(2),Xc=Gc(3),Yc=Gc(4),Qc=Gc(5),Jc=Gc(6),Zc=(Hc.range,qc.range,Kc.range,Xc.range,Yc.range,Qc.range,Jc.range,Tc((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()))),eh=(Zc.range,Tc((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()))),th=(eh.range,Tc((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear())));th.every=e=>isFinite(e=Math.floor(e))&&e>0?Tc((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null;th.range;const nh=Tc((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));nh.every=e=>isFinite(e=Math.floor(e))&&e>0?Tc((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null;nh.range;function rh(e,t,n,r,i,o){const a=[[Nc,1,vc],[Nc,5,5e3],[Nc,15,15e3],[Nc,30,3e4],[o,1,bc],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,xc],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,wc],[r,2,1728e5],[n,1,kc],[t,1,Sc],[t,3,7776e6],[e,1,Cc]];function s(t,n,r){const i=Math.abs(n-t)/r,o=ul((e=>{let[,,t]=e;return t})).right(a,i);if(o===a.length)return e.every(al(t/Cc,n/Cc,r));if(0===o)return _c.every(Math.max(al(t,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"===typeof n.range?n:s(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},s]}const[ih,oh]=rh(nh,eh,Hc,Mc,$c,Oc),[ah,sh]=rh(th,Zc,Lc,Pc,Rc,Ac);function lh(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function uh(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ch(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var hh,dh,ph,fh={"-":"",_:" ",0:"0"},gh=/^\s*\d+/,mh=/^%/,yh=/[\\^$*+?|[\]().{}]/g;function vh(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function bh(e){return e.replace(yh,"\\$&")}function xh(e){return new RegExp("^(?:"+e.map(bh).join("|")+")","i")}function wh(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function kh(e,t,n){var r=gh.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Sh(e,t,n){var r=gh.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Ch(e,t,n){var r=gh.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Ih(e,t,n){var r=gh.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Eh(e,t,n){var r=gh.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Th(e,t,n){var r=gh.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function _h(e,t,n){var r=gh.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Nh(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ah(e,t,n){var r=gh.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Oh(e,t,n){var r=gh.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Rh(e,t,n){var r=gh.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function $h(e,t,n){var r=gh.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Ph(e,t,n){var r=gh.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Dh(e,t,n){var r=gh.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Mh(e,t,n){var r=gh.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Fh(e,t,n){var r=gh.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Lh(e,t,n){var r=gh.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function jh(e,t,n){var r=mh.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function zh(e,t,n){var r=gh.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Bh(e,t,n){var r=gh.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Wh(e,t){return vh(e.getDate(),t,2)}function Uh(e,t){return vh(e.getHours(),t,2)}function Vh(e,t){return vh(e.getHours()%12||12,t,2)}function Gh(e,t){return vh(1+Pc.count(th(e),e),t,3)}function Hh(e,t){return vh(e.getMilliseconds(),t,3)}function qh(e,t){return Hh(e,t)+"000"}function Kh(e,t){return vh(e.getMonth()+1,t,2)}function Xh(e,t){return vh(e.getMinutes(),t,2)}function Yh(e,t){return vh(e.getSeconds(),t,2)}function Qh(e){var t=e.getDay();return 0===t?7:t}function Jh(e,t){return vh(Lc.count(th(e)-1,e),t,2)}function Zh(e){var t=e.getDay();return t>=4||0===t?Wc(e):Wc.ceil(e)}function ed(e,t){return e=Zh(e),vh(Wc.count(th(e),e)+(4===th(e).getDay()),t,2)}function td(e){return e.getDay()}function nd(e,t){return vh(jc.count(th(e)-1,e),t,2)}function rd(e,t){return vh(e.getFullYear()%100,t,2)}function id(e,t){return vh((e=Zh(e)).getFullYear()%100,t,2)}function od(e,t){return vh(e.getFullYear()%1e4,t,4)}function ad(e,t){var n=e.getDay();return vh((e=n>=4||0===n?Wc(e):Wc.ceil(e)).getFullYear()%1e4,t,4)}function sd(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+vh(t/60|0,"0",2)+vh(t%60,"0",2)}function ld(e,t){return vh(e.getUTCDate(),t,2)}function ud(e,t){return vh(e.getUTCHours(),t,2)}function cd(e,t){return vh(e.getUTCHours()%12||12,t,2)}function hd(e,t){return vh(1+Dc.count(nh(e),e),t,3)}function dd(e,t){return vh(e.getUTCMilliseconds(),t,3)}function pd(e,t){return dd(e,t)+"000"}function fd(e,t){return vh(e.getUTCMonth()+1,t,2)}function gd(e,t){return vh(e.getUTCMinutes(),t,2)}function md(e,t){return vh(e.getUTCSeconds(),t,2)}function yd(e){var t=e.getUTCDay();return 0===t?7:t}function vd(e,t){return vh(Hc.count(nh(e)-1,e),t,2)}function bd(e){var t=e.getUTCDay();return t>=4||0===t?Yc(e):Yc.ceil(e)}function xd(e,t){return e=bd(e),vh(Yc.count(nh(e),e)+(4===nh(e).getUTCDay()),t,2)}function wd(e){return e.getUTCDay()}function kd(e,t){return vh(qc.count(nh(e)-1,e),t,2)}function Sd(e,t){return vh(e.getUTCFullYear()%100,t,2)}function Cd(e,t){return vh((e=bd(e)).getUTCFullYear()%100,t,2)}function Id(e,t){return vh(e.getUTCFullYear()%1e4,t,4)}function Ed(e,t){var n=e.getUTCDay();return vh((e=n>=4||0===n?Yc(e):Yc.ceil(e)).getUTCFullYear()%1e4,t,4)}function Td(){return"+0000"}function _d(){return"%"}function Nd(e){return+e}function Ad(e){return Math.floor(+e/1e3)}function Od(e){return new Date(e)}function Rd(e){return e instanceof Date?+e:+new Date(+e)}function $d(e,t,n,r,i,o,a,s,l,u){var c=xu(),h=c.invert,d=c.domain,p=u(".%L"),f=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y");function w(e){return(l(e)<e?p:s(e)<e?f:a(e)<e?g:o(e)<e?m:r(e)<e?i(e)<e?y:v:n(e)<e?b:x)(e)}return c.invert=function(e){return new Date(h(e))},c.domain=function(e){return arguments.length?d(Array.from(e,Rd)):d().map(Od)},c.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?w:u(t)},c.nice=function(e){var n=d();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(zu(n,e)):c},c.copy=function(){return vu(c,$d(e,t,n,r,i,o,a,s,l,u))},c}function Pd(){return os.apply($d(ah,sh,th,Zc,Lc,Pc,Rc,Ac,Nc,dh).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Dd(){return os.apply($d(ih,oh,nh,eh,Hc,Dc,$c,Oc,Nc,ph).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Md(){var e,t,n,r,i,o=0,a=1,s=fu,l=!1;function u(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function c(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),u):[s(0),s(1)]}}return u.domain=function(i){return arguments.length?([o,a]=i,e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),u):[o,a]},u.clamp=function(e){return arguments.length?(l=!!e,u):l},u.interpolator=function(e){return arguments.length?(s=e,u):s},u.range=c(cu),u.rangeRound=c(hu),u.unknown=function(e){return arguments.length?(i=e,u):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),u}}function Fd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ld(){var e=Fu(Md()(fu));return e.copy=function(){return Fd(e,Ld())},as.apply(e,arguments)}function jd(){var e=qu(Md()).domain([1,10]);return e.copy=function(){return Fd(e,jd()).base(e.base())},as.apply(e,arguments)}function zd(){var e=Qu(Md());return e.copy=function(){return Fd(e,zd()).constant(e.constant())},as.apply(e,arguments)}function Bd(){var e=nc(Md());return e.copy=function(){return Fd(e,Bd()).exponent(e.exponent())},as.apply(e,arguments)}function Wd(){return Bd.apply(null,arguments).exponent(.5)}function Ud(){var e=[],t=fu;function n(n){if(null!=n&&!isNaN(n=+n))return t((fl(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(sl),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map(((n,r)=>t(r/(e.length-1))))},n.quantiles=function(t){return Array.from({length:t+1},((n,r)=>pc(e,r/t)))},n.copy=function(){return Ud(t).domain(e)},as.apply(n,arguments)}function Vd(){var e,t,n,r,i,o,a,s=0,l=.5,u=1,c=1,h=fu,d=!1;function p(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(c*e<c*t?r:i),h(d?Math.max(0,Math.min(1,e)):e))}function f(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,h=function(e,t){void 0===t&&(t=e,e=cu);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}(e,[n,r,i]),p):[h(0),h(.5),h(1)]}}return p.domain=function(a){return arguments.length?([s,l,u]=a,e=o(s=+s),t=o(l=+l),n=o(u=+u),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,p):[s,l,u]},p.clamp=function(e){return arguments.length?(d=!!e,p):d},p.interpolator=function(e){return arguments.length?(h=e,p):h},p.range=f(cu),p.rangeRound=f(hu),p.unknown=function(e){return arguments.length?(a=e,p):a},function(a){return o=a,e=a(s),t=a(l),n=a(u),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,p}}function Gd(){var e=Fu(Vd()(fu));return e.copy=function(){return Fd(e,Gd())},as.apply(e,arguments)}function Hd(){var e=qu(Vd()).domain([.1,1,10]);return e.copy=function(){return Fd(e,Hd()).base(e.base())},as.apply(e,arguments)}function qd(){var e=Qu(Vd());return e.copy=function(){return Fd(e,qd()).constant(e.constant())},as.apply(e,arguments)}function Kd(){var e=nc(Vd());return e.copy=function(){return Fd(e,Kd()).exponent(e.exponent())},as.apply(e,arguments)}function Xd(){return Kd.apply(null,arguments).exponent(.5)}function Yd(e,t){if((i=e.length)>1)for(var n,r,i,o=1,a=e[t[0]],s=a.length;o<i;++o)for(r=a,a=e[t[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}!function(e){hh=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=xh(i),c=wh(i),h=xh(o),d=wh(o),p=xh(a),f=wh(a),g=xh(s),m=wh(s),y=xh(l),v=wh(l),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Wh,e:Wh,f:qh,g:id,G:ad,H:Uh,I:Vh,j:Gh,L:Hh,m:Kh,M:Xh,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Nd,s:Ad,S:Yh,u:Qh,U:Jh,V:ed,w:td,W:nd,x:null,X:null,y:rd,Y:od,Z:sd,"%":_d},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:ld,e:ld,f:pd,g:Cd,G:Ed,H:ud,I:cd,j:hd,L:dd,m:fd,M:gd,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Nd,s:Ad,S:md,u:yd,U:vd,V:xd,w:wd,W:kd,x:null,X:null,y:Sd,Y:Id,Z:Td,"%":_d},w={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return C(e,t,n,r)},d:Rh,e:Rh,f:Lh,g:_h,G:Th,H:Ph,I:Ph,j:$h,L:Fh,m:Oh,M:Dh,p:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:Ah,Q:zh,s:Bh,S:Mh,u:Sh,U:Ch,V:Ih,w:kh,W:Eh,x:function(e,t,r){return C(e,n,t,r)},X:function(e,t,n){return C(e,r,t,n)},y:_h,Y:Th,Z:Nh,"%":jh};function k(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=fh[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function S(e,t){return function(n){var r,i,o=ch(1900,void 0,1);if(C(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=uh(ch(o.y,0,1))).getUTCDay(),r=i>4||0===i?qc.ceil(r):qc(r),r=Dc.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=lh(ch(o.y,0,1))).getDay(),r=i>4||0===i?jc.ceil(r):jc(r),r=Pc.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?uh(ch(o.y,0,1)).getUTCDay():lh(ch(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,uh(o)):lh(o)}}function C(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=w[i in fh?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x),{format:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}(e),dh=hh.format,hh.parse,ph=hh.utcFormat,hh.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function Qd(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Jd(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Zd(e,t){return e[t]}function ep(e){const t=[];return t.key=e,t}var tp=n(539),np=n.n(tp),rp=n(6745),ip=n.n(rp),op=n(3538),ap=n.n(op),sp=n(9853),lp=n.n(sp),up=n(8210),cp=n.n(up);function hp(e){return function(e){if(Array.isArray(e))return dp(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return dp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dp(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pp=function(e){return e},fp={"@@functional/placeholder":!0},gp=function(e){return e===fp},mp=function(e){return function t(){return 0===arguments.length||1===arguments.length&&gp(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},yp=function e(t,n){return 1===t?n:mp((function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter((function(e){return e!==fp})).length;return a>=t?n.apply(void 0,i):e(t-a,mp((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=i.map((function(e){return gp(e)?t.shift():e}));return n.apply(void 0,hp(o).concat(t))})))}))},vp=function(e){return yp(e.length,e)},bp=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},xp=vp((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)})),wp=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return pp;var r=t.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((function(e,t){return t(e)}),i.apply(void 0,arguments))}},kp=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Sp=function(e){var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t&&i.every((function(e,n){return e===t[n]}))?n:(t=i,n=e.apply(void 0,i))}};var Cp=vp((function(e,t,n){var r=+e;return r+n*(+t-r)})),Ip=vp((function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)})),Ep=vp((function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))}));const Tp={rangeStep:function(e,t,n){for(var r=new(cp())(e),i=0,o=[];r.lt(t)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o},getDigitCount:function(e){return 0===e?1:Math.floor(new(cp())(e).abs().log(10).toNumber())+1},interpolateNumber:Cp,uninterpolateNumber:Ip,uninterpolateTruncation:Ep};function _p(e){return function(e){if(Array.isArray(e))return Op(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ap(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Np(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||Ap(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ap(e,t){if(e){if("string"===typeof e)return Op(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Op(e,t):void 0}}function Op(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rp(e){var t=Np(e,2),n=t[0],r=t[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function $p(e,t,n){if(e.lte(0))return new(cp())(0);var r=Tp.getDigitCount(e.toNumber()),i=new(cp())(10).pow(r),o=e.div(i),a=1!==r?.05:.1,s=new(cp())(Math.ceil(o.div(a).toNumber())).add(n).mul(a).mul(i);return t?s:new(cp())(Math.ceil(s))}function Pp(e,t,n){var r=1,i=new(cp())(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(r=new(cp())(10).pow(Tp.getDigitCount(e)-1),i=new(cp())(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new(cp())(Math.floor(e)))}else 0===e?i=new(cp())(Math.floor((t-1)/2)):n||(i=new(cp())(Math.floor(e)));var a=Math.floor((t-1)/2);return wp(xp((function(e){return i.add(new(cp())(e-a).mul(r)).toNumber()})),bp)(0,t)}function Dp(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(cp())(0),tickMin:new(cp())(0),tickMax:new(cp())(0)};var o,a=$p(new(cp())(t).sub(e).div(n-1),r,i);o=e<=0&&t>=0?new(cp())(0):(o=new(cp())(e).add(t).div(2)).sub(new(cp())(o).mod(a));var s=Math.ceil(o.sub(e).div(a).toNumber()),l=Math.ceil(new(cp())(t).sub(o).div(a).toNumber()),u=s+l+1;return u>n?Dp(e,t,n,r,i+1):(u<n&&(l=t>0?l+(n-u):l,s=t>0?s:s+(n-u)),{step:a,tickMin:o.sub(new(cp())(s).mul(a)),tickMax:o.add(new(cp())(l).mul(a))})}var Mp=Sp((function(e){var t=Np(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=Np(Rp([n,r]),2),l=s[0],u=s[1];if(l===-1/0||u===1/0){var c=u===1/0?[l].concat(_p(bp(0,i-1).map((function(){return 1/0})))):[].concat(_p(bp(0,i-1).map((function(){return-1/0}))),[u]);return n>r?kp(c):c}if(l===u)return Pp(l,i,o);var h=Dp(l,u,a,o),d=h.step,p=h.tickMin,f=h.tickMax,g=Tp.rangeStep(p,f.add(new(cp())(.1).mul(d)),d);return n>r?kp(g):g})),Fp=(Sp((function(e){var t=Np(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=Np(Rp([n,r]),2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[n,r];if(l===u)return Pp(l,i,o);var c=$p(new(cp())(u).sub(l).div(a-1),o,0),h=wp(xp((function(e){return new(cp())(l).add(new(cp())(e).mul(c)).toNumber()})),bp)(0,a).filter((function(e){return e>=l&&e<=u}));return n>r?kp(h):h})),Sp((function(e,t){var n=Np(e,2),r=n[0],i=n[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Np(Rp([r,i]),2),s=a[0],l=a[1];if(s===-1/0||l===1/0)return[r,i];if(s===l)return[s];var u=Math.max(t,2),c=$p(new(cp())(l).sub(s).div(u-1),o,0),h=[].concat(_p(Tp.rangeStep(new(cp())(s),new(cp())(l).sub(new(cp())(.99).mul(c)),c)),[l]);return r>i?kp(h):h}))),Lp=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function jp(e){return jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(e)}function zp(){return zp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zp.apply(this,arguments)}function Bp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Wp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Up(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Vp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yp(r.key),r)}}function Gp(e,t,n){return t=qp(t),function(e,t){if(t&&("object"===jp(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Hp()?Reflect.construct(t,n||[],qp(e).constructor):t.apply(e,n))}function Hp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hp=function(){return!!e})()}function qp(e){return qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qp(e)}function Kp(e,t){return Kp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kp(e,t)}function Xp(e,t,n){return(t=Yp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yp(e){var t=function(e,t){if("object"!=jp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jp(t)?t:t+""}var Qp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Gp(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kp(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this.props,t=e.offset,n=e.layout,r=e.width,i=e.dataKey,o=e.data,s=e.dataPointFormatter,l=e.xAxis,u=e.yAxis,c=Up(e,Lp),h=ln(c,!1);"x"===this.props.direction&&"number"!==l.type&&In(!1);var d=o.map((function(e){var o=s(e,i),c=o.x,d=o.y,p=o.value,f=o.errorVal;if(!f)return null;var g,m,y=[];if(Array.isArray(f)){var v=Bp(f,2);g=v[0],m=v[1]}else g=m=f;if("vertical"===n){var b=l.scale,x=d+t,w=x+r,k=x-r,S=b(p-g),C=b(p+m);y.push({x1:C,y1:w,x2:C,y2:k}),y.push({x1:S,y1:x,x2:C,y2:x}),y.push({x1:S,y1:w,x2:S,y2:k})}else if("horizontal"===n){var I=u.scale,E=c+t,T=E-r,_=E+r,N=I(p-g),A=I(p+m);y.push({x1:T,y1:A,x2:_,y2:A}),y.push({x1:E,y1:N,x2:E,y2:A}),y.push({x1:T,y1:N,x2:_,y2:N})}return a.createElement($n,zp({className:"recharts-errorBar",key:"bar-".concat(y.map((function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)})))},h),y.map((function(e){return a.createElement("line",zp({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))})))}));return a.createElement($n,{className:"recharts-errorBars"},d)}}],r&&Vp(n.prototype,r),i&&Vp(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(a.Component);function Jp(e){return Jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(e)}function Zp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ef(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zp(Object(n),!0).forEach((function(t){tf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tf(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Jp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Jp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jp(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Xp(Qp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),Xp(Qp,"displayName","ErrorBar");var nf=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,i=e.legendContent,o=rn(t,Di);if(!o)return null;var a,s=Di.defaultProps,l=void 0!==s?ef(ef({},s),o.props):{};return a=o.props&&o.props.payload?o.props&&o.props.payload:"children"===i?(n||[]).reduce((function(e,t){var n=t.item,r=t.props,i=r.sectors||r.data||[];return e.concat(i.map((function(e){return{type:o.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(n||[]).map((function(e){var t=e.item,n=t.type.defaultProps,r=void 0!==n?ef(ef({},n),t.props):{},i=r.dataKey,o=r.name,a=r.legendType;return{inactive:r.hide,dataKey:i,type:l.iconType||a||"square",color:df(t),value:o||i,payload:r}})),ef(ef(ef({},l),Di.getWithHeight(o,r)),{},{payload:a,item:o})};function rf(e){return rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(e)}function of(e){return function(e){if(Array.isArray(e))return af(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return af(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return af(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function af(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sf(Object(n),!0).forEach((function(t){uf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uf(e,t,n){return t=function(e){var t=function(e,t){if("object"!=rf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rf(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cf(e,t,n){return Pt()(e)||Pt()(t)?n:It(t)?bt()(e,t,n):Mt()(t)?t(e):n}function hf(e,t,n,r){var i=ap()(e,(function(e){return cf(e,t)}));if("number"===n){var o=i.filter((function(e){return Ct(e)||parseFloat(e)}));return o.length?[ip()(o),np()(o)]:[1/0,-1/0]}return(r?i.filter((function(e){return!Pt()(e)})):i).map((function(e){return It(e)||e instanceof Date?e:""}))}var df=function(e){var t,n,r=e.type.displayName,i=null!==(t=e.type)&&void 0!==t&&t.defaultProps?lf(lf({},e.type.defaultProps),e.props):e.props,o=i.stroke,a=i.fill;switch(r){case"Line":n=o;break;case"Area":case"Radar":n=o&&"none"!==o?o:a;break;default:n=a}return n},pf=function(e,t,n,r,i){var o=nn(t.props.children,Qp).filter((function(e){return function(e,t,n){return!!Pt()(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===n?"xAxis"===t:"y"!==n||"yAxis"===t)}(r,i,e.props.direction)}));if(o&&o.length){var a=o.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var r=cf(t,n);if(Pt()(r))return e;var i=Array.isArray(r)?[ip()(r),np()(r)]:[r,r],o=a.reduce((function(e,n){var r=cf(t,n,0),o=i[0]-Math.abs(Array.isArray(r)?r[0]:r),a=i[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(o,e[0]),Math.max(a,e[1])]}),[1/0,-1/0]);return[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}),[1/0,-1/0])}return null},ff=function(e,t,n,r,i){var o=t.map((function(t){var o=t.props.dataKey;return"number"===n&&o&&pf(e,t,o,r)||hf(e,o,n,i)}));if("number"===n)return o.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var a={};return o.reduce((function(e,t){for(var n=0,r=t.length;n<r;n++)a[t[n]]||(a[t[n]]=!0,e.push(t[n]));return e}),[])},gf=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},mf=function(e,t,n,r){if(r)return e.map((function(e){return e.coordinate}));var i,o,a=e.map((function(e){return e.coordinate===t&&(i=!0),e.coordinate===n&&(o=!0),e.coordinate}));return i||a.push(t),o||a.push(n),a},yf=function(e,t,n){if(!e)return null;var r=e.scale,i=e.duplicateDomain,o=e.type,a=e.range,s="scaleBand"===e.realScaleType?r.bandwidth()/2:2,l=(t||n)&&"category"===o&&r.bandwidth?r.bandwidth()/s:0;return l="angleAxis"===e.axisType&&(null===a||void 0===a?void 0:a.length)>=2?2*kt(a[0]-a[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=i?i.indexOf(e):e;return{coordinate:r(t)+l,value:e,offset:l}})).filter((function(e){return!yt()(e.coordinate)})):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:r(e)+l,value:e,index:t,offset:l}})):r.ticks&&!n?r.ticks(e.tickCount).map((function(e){return{coordinate:r(e)+l,value:e,offset:l}})):r.domain().map((function(e,t){return{coordinate:r(e)+l,value:i?i[e]:e,index:t,offset:l}}))},vf=new WeakMap,bf=function(e,t){if("function"!==typeof t)return e;vf.has(e)||vf.set(e,new WeakMap);var n=vf.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},xf=1e-4,wf={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0,a=0;a<t;++a){var s=yt()(e[a][n][1])?e[a][n][0]:e[a][n][1];s>=0?(e[a][n][0]=i,e[a][n][1]=i+s,i=e[a][n][1]):(e[a][n][0]=o,e[a][n][1]=o+s,o=e[a][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,i,o=0,a=e[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}Yd(e,t)}},none:Yd,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=e[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}Yd(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,l=0,u=0;s<i;++s){for(var c=e[t[s]],h=c[a][1]||0,d=(h-(c[a-1][1]||0))/2,p=0;p<s;++p){var f=e[t[p]];d+=(f[a][1]||0)-(f[a-1][1]||0)}l+=h,u+=d*h}n[a-1][1]+=n[a-1][0]=o,l&&(o-=u/l)}n[a-1][1]+=n[a-1][0]=o,Yd(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0;o<t;++o){var a=yt()(e[o][n][1])?e[o][n][0]:e[o][n][1];a>=0?(e[o][n][0]=i,e[o][n][1]=i+a,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}}},kf=function(e,t,n){var r=t.map((function(e){return e.props.dataKey})),i=wf[n],o=function(){var e=Hr([]),t=Jd,n=Yd,r=Zd;function i(i){var o,a,s=Array.from(e.apply(this,arguments),ep),l=s.length,u=-1;for(const e of i)for(o=0,++u;o<l;++o)(s[o][u]=[0,+r(e,s[o].key,u,i)]).data=e;for(o=0,a=Qd(t(s));o<l;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(t){return arguments.length?(e="function"===typeof t?t:Hr(Array.from(t)),i):e},i.value=function(e){return arguments.length?(r="function"===typeof e?e:Hr(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?Jd:"function"===typeof e?e:Hr(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?Yd:e,i):n},i}().keys(r).value((function(e,t){return+cf(e,t,0)})).order(Jd).offset(i);return o(e)};function Sf(e){var t=e.axis,n=e.ticks,r=e.bandSize,i=e.entry,o=e.index,a=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Pt()(i[t.dataKey])){var s=Ot(n,"value",i[t.dataKey]);if(s)return s.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=cf(i,Pt()(a)?t.dataKey:a);return Pt()(l)?null:t.scale(l)}var Cf=function(e){var t=e.axis,n=e.ticks,r=e.offset,i=e.bandSize,o=e.entry,a=e.index;if("category"===t.type)return n[a]?n[a].coordinate+r:null;var s=cf(o,t.dataKey,t.domain[a]);return Pt()(s)?null:t.scale(s)-i/2+r},If=function(e,t,n){return Object.keys(e).reduce((function(r,i){var o=e[i].stackedData.reduce((function(e,r){var i=r.slice(t,n+1).reduce((function(e,t){return[ip()(t.concat([e[0]]).filter(Ct)),np()(t.concat([e[1]]).filter(Ct))]}),[1/0,-1/0]);return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]}),[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},Ef=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Tf=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_f=function(e,t,n){if(Mt()(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(Ct(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(Ef.test(e[0])){var i=+Ef.exec(e[0])[1];r[0]=t[0]-i}else Mt()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(Ct(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(Tf.test(e[1])){var o=+Tf.exec(e[1])[1];r[1]=t[1]+o}else Mt()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},Nf=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Sn()(t,(function(e){return e.coordinate})),o=1/0,a=1,s=i.length;a<s;a++){var l=i[a],u=i[a-1];o=Math.min((l.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},Af=function(e,t,n){return e&&e.length?lp()(e,bt()(n,"type.defaultProps.domain"))?t:e:t},Of=function(e,t){var n=e.type.defaultProps?lf(lf({},e.type.defaultProps),e.props):e.props,r=n.dataKey,i=n.name,o=n.unit,a=n.formatter,s=n.tooltipType,l=n.chartType,u=n.hide;return lf(lf({},ln(e,!1)),{},{dataKey:r,unit:o,formatter:a,name:i||r,color:df(e),value:cf(t,r),type:s,payload:t,chartType:l,hide:u})};function Rf(e){return Rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(e)}function $f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$f(Object(n),!0).forEach((function(t){Df(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Df(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Rf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rf(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mf=["Webkit","Moz","O","ms"];function Ff(e){return Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ff(e)}function Lf(){return Lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lf.apply(this,arguments)}function jf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jf(Object(n),!0).forEach((function(t){Hf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qf(r.key),r)}}function Wf(e,t,n){return t=Vf(t),function(e,t){if(t&&("object"===Ff(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Uf()?Reflect.construct(t,n||[],Vf(e).constructor):t.apply(e,n))}function Uf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Uf=function(){return!!e})()}function Vf(e){return Vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vf(e)}function Gf(e,t){return Gf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gf(e,t)}function Hf(e,t,n){return(t=qf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qf(e){var t=function(e,t){if("object"!=Ff(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ff(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ff(t)?t:t+""}var Kf=function(e){return e.changedTouches&&!!e.changedTouches.length},Xf=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Hf(n=Wf(this,t,[e]),"handleDrag",(function(e){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(e):n.state.isSlideMoving&&n.handleSlideDrag(e)})),Hf(n,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleDrag(e.changedTouches[0])})),Hf(n,"handleDragEnd",(function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var e=n.props,t=e.endIndex,r=e.onDragEnd,i=e.startIndex;null===r||void 0===r||r({endIndex:t,startIndex:i})})),n.detachDragEndListener()})),Hf(n,"handleLeaveWrapper",(function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))})),Hf(n,"handleEnterSlideOrTraveller",(function(){n.setState({isTextActive:!0})})),Hf(n,"handleLeaveSlideOrTraveller",(function(){n.setState({isTextActive:!1})})),Hf(n,"handleSlideDragStart",(function(e){var t=Kf(e)?e.changedTouches[0]:e;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),n.attachDragEndListener()})),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gf(e,t)}(t,e),n=t,r=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var n=e.startX,r=e.endX,i=this.state.scaleValues,o=this.props,a=o.gap,s=o.data.length-1,l=Math.min(n,r),u=Math.max(n,r),c=t.getIndexInRange(i,l),h=t.getIndexInRange(i,u);return{startIndex:c-c%a,endIndex:h===s?s:h-h%a}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,i=t.dataKey,o=cf(n[e],i,e);return Mt()(r)?r(o,e):o}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,i=t.endX,o=this.props,a=o.x,s=o.width,l=o.travellerWidth,u=o.startIndex,c=o.endIndex,h=o.onChange,d=e.pageX-n;d>0?d=Math.min(d,a+s-l-i,a+s-l-r):d<0&&(d=Math.max(d,a-r,a-i));var p=this.getIndex({startX:r+d,endX:i+d});p.startIndex===u&&p.endIndex===c||!h||h(p),this.setState({startX:r+d,endX:i+d,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=Kf(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,n=t.brushMoveStartX,r=t.movingTravellerId,i=t.endX,o=t.startX,a=this.state[r],s=this.props,l=s.x,u=s.width,c=s.travellerWidth,h=s.onChange,d=s.gap,p=s.data,f={startX:this.state.startX,endX:this.state.endX},g=e.pageX-n;g>0?g=Math.min(g,l+u-c-a):g<0&&(g=Math.max(g,l-a)),f[r]=a+g;var m=this.getIndex(f),y=m.startIndex,v=m.endIndex;this.setState(Hf(Hf({},r,a+g),"brushMoveStartX",e.pageX),(function(){h&&function(){var e=p.length-1;return"startX"===r&&(i>o?y%d===0:v%d===0)||i<o&&v===e||"endX"===r&&(i>o?v%d===0:y%d===0)||i>o&&v===e}()&&h(m)}))}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var n=this,r=this.state,i=r.scaleValues,o=r.startX,a=r.endX,s=this.state[t],l=i.indexOf(s);if(-1!==l){var u=l+e;if(!(-1===u||u>=i.length)){var c=i[u];"startX"===t&&c>=a||"endX"===t&&c<=o||this.setState(Hf({},t,c),(function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))}))}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.fill,s=e.stroke;return a.createElement("rect",{stroke:s,fill:o,x:t,y:n,width:r,height:i})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.data,s=e.children,l=e.padding,u=a.Children.only(s);return u?a.cloneElement(u,{x:t,y:n,width:r,height:i,margin:l,compact:!0,data:o}):null}},{key:"renderTravellerLayer",value:function(e,n){var r,i,o=this,s=this.props,l=s.y,u=s.travellerWidth,c=s.height,h=s.traveller,d=s.ariaLabel,p=s.data,f=s.startIndex,g=s.endIndex,m=Math.max(e,this.props.x),y=zf(zf({},ln(this.props,!1)),{},{x:m,y:l,width:u,height:c}),v=d||"Min value: ".concat(null===(r=p[f])||void 0===r?void 0:r.name,", Max value: ").concat(null===(i=p[g])||void 0===i?void 0:i.name);return a.createElement($n,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),o.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,n))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,y))}},{key:"renderSlide",value:function(e,t){var n=this.props,r=n.y,i=n.height,o=n.stroke,s=n.travellerWidth,l=Math.min(e,t)+s,u=Math.max(Math.abs(t-e)-s,0);return a.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:o,fillOpacity:.2,x:l,y:r,width:u,height:i})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,n=e.endIndex,r=e.y,i=e.height,o=e.travellerWidth,s=e.stroke,l=this.state,u=l.startX,c=l.endX,h={pointerEvents:"none",fill:s};return a.createElement($n,{className:"recharts-brush-texts"},a.createElement(Zs,Lf({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,c)-5,y:r+i/2},h),this.getTextOfTick(t)),a.createElement(Zs,Lf({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,c)+o+5,y:r+i/2},h),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,r=e.children,i=e.x,o=e.y,s=e.width,l=e.height,u=e.alwaysShowText,c=this.state,h=c.startX,d=c.endX,p=c.isTextActive,f=c.isSlideMoving,g=c.isTravellerMoving,m=c.isTravellerFocused;if(!t||!t.length||!Ct(i)||!Ct(o)||!Ct(s)||!Ct(l)||s<=0||l<=0)return null;var y=ct("recharts-brush",n),v=1===a.Children.count(r),b=function(e,t){if(!e)return null;var n=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),r=Mf.reduce((function(e,r){return Pf(Pf({},e),{},Df({},r+n,t))}),{});return r[e]=t,r}("userSelect","none");return a.createElement($n,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),v&&this.renderPanorama(),this.renderSlide(h,d),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(d,"endX"),(p||f||g||m||u)&&this.renderText())}}],i=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.stroke,s=Math.floor(n+i/2)-1;return a.createElement(a.Fragment,null,a.createElement("rect",{x:t,y:n,width:r,height:i,fill:o,stroke:"none"}),a.createElement("line",{x1:t+1,y1:s,x2:t+r-1,y2:s,fill:"none",stroke:"#fff"}),a.createElement("line",{x1:t+1,y1:s+2,x2:t+r-1,y2:s+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,n){return a.isValidElement(e)?a.cloneElement(e,n):Mt()(e)?e(n):t.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,i=e.x,o=e.travellerWidth,a=e.updateId,s=e.startIndex,l=e.endIndex;if(n!==t.prevData||a!==t.prevUpdateId)return zf({prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,i=e.x,o=e.width,a=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,l=ms().domain(wn()(0,s)).range([i,i+o-a]),u=l.domain().map((function(e){return l(e)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:u}}({data:n,width:r,x:i,travellerWidth:o,startIndex:s,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||i!==t.prevX||o!==t.prevTravellerWidth)){t.scale.range([i,i+r-o]);var u=t.scale.domain().map((function(e){return t.scale(e)}));return{prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:u}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var i=Math.floor((n+r)/2);e[i]>t?r=i:n=i}return t>=e[r]?r:n}}],r&&Bf(n.prototype,r),i&&Bf(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(a.PureComponent);function Yf(e){return Yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yf(e)}function Qf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qf(Object(n),!0).forEach((function(t){Zf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zf(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Yf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yf(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Hf(Xf,"displayName","Brush"),Hf(Xf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var eg=Math.PI/180,tg=function(e){return 180*e/Math.PI},ng=function(e,t,n,r){return{x:e+Math.cos(-eg*r)*n,y:t+Math.sin(-eg*r)*n}},rg=function(e,t){var n=e.x,r=e.y,i=t.cx,o=t.cy,a=function(e,t){var n=e.x,r=e.y,i=t.x,o=t.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-o,2))}({x:n,y:r},{x:i,y:o});if(a<=0)return{radius:a};var s=(n-i)/a,l=Math.acos(s);return r>o&&(l=2*Math.PI-l),{radius:a,angle:tg(l),angleInRadian:l}},ig=function(e,t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),o=Math.floor(r/360);return e+360*Math.min(i,o)},og=function(e,t){var n=e.x,r=e.y,i=rg({x:n,y:r},t),o=i.radius,a=i.angle,s=t.innerRadius,l=t.outerRadius;if(o<s||o>l)return!1;if(0===o)return!0;var u,c=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:t-360*o,endAngle:n-360*o}}(t),h=c.startAngle,d=c.endAngle,p=a;if(h<=d){for(;p>d;)p-=360;for(;p<h;)p+=360;u=p>=h&&p<=d}else{for(;p>h;)p-=360;for(;p<d;)p+=360;u=p>=d&&p<=h}return u?Jf(Jf({},t),{},{radius:o,angle:ig(p,t)}):null};function ag(e){return ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(e)}var sg=["offset"];function lg(e){return function(e){if(Array.isArray(e))return ug(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ug(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ug(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ug(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cg(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hg(Object(n),!0).forEach((function(t){pg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pg(e,t,n){return t=function(e){var t=function(e,t){if("object"!=ag(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ag(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ag(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fg(){return fg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fg.apply(this,arguments)}var gg=function(e,t,n){var r,i,o=e.position,s=e.viewBox,l=e.offset,u=e.className,c=s,h=c.cx,d=c.cy,p=c.innerRadius,f=c.outerRadius,g=c.startAngle,m=c.endAngle,y=c.clockWise,v=(p+f)/2,b=function(e,t){return kt(t-e)*Math.min(Math.abs(t-e),360)}(g,m),x=b>=0?1:-1;"insideStart"===o?(r=g+x*l,i=y):"insideEnd"===o?(r=m-x*l,i=!y):"end"===o&&(r=m+x*l,i=y),i=b<=0?i:!i;var w=ng(h,d,v,r),k=ng(h,d,v,r+359*(i?1:-1)),S="M".concat(w.x,",").concat(w.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(i?0:1,",\n    ").concat(k.x,",").concat(k.y),C=Pt()(e.id)?Tt("recharts-radial-line-"):e.id;return a.createElement("text",fg({},n,{dominantBaseline:"central",className:ct("recharts-radial-bar-label",u)}),a.createElement("defs",null,a.createElement("path",{id:C,d:S})),a.createElement("textPath",{xlinkHref:"#".concat(C)},t))};function mg(e){var t,n=e.offset,r=dg({offset:void 0===n?5:n},cg(e,sg)),i=r.viewBox,o=r.position,s=r.value,l=r.children,u=r.content,c=r.className,h=void 0===c?"":c,d=r.textBreakAll;if(!i||Pt()(s)&&Pt()(l)&&!(0,a.isValidElement)(u)&&!Mt()(u))return null;if((0,a.isValidElement)(u))return(0,a.cloneElement)(u,r);if(Mt()(u)){if(t=(0,a.createElement)(u,r),(0,a.isValidElement)(t))return t}else t=function(e){var t=e.value,n=e.formatter,r=Pt()(e.children)?t:e.children;return Mt()(n)?n(r):r}(r);var p=function(e){return"cx"in e&&Ct(e.cx)}(i),f=ln(r,!0);if(p&&("insideStart"===o||"insideEnd"===o||"end"===o))return gg(r,t,f);var g=p?function(e){var t=e.viewBox,n=e.offset,r=e.position,i=t,o=i.cx,a=i.cy,s=i.innerRadius,l=i.outerRadius,u=(i.startAngle+i.endAngle)/2;if("outside"===r){var c=ng(o,a,l+n,u),h=c.x;return{x:h,y:c.y,textAnchor:h>=o?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var d=ng(o,a,(s+l)/2,u);return{x:d.x,y:d.y,textAnchor:"middle",verticalAnchor:"middle"}}(r):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,i=e.position,o=t,a=o.x,s=o.y,l=o.width,u=o.height,c=u>=0?1:-1,h=c*r,d=c>0?"end":"start",p=c>0?"start":"end",f=l>=0?1:-1,g=f*r,m=f>0?"end":"start",y=f>0?"start":"end";if("top"===i)return dg(dg({},{x:a+l/2,y:s-c*r,textAnchor:"middle",verticalAnchor:d}),n?{height:Math.max(s-n.y,0),width:l}:{});if("bottom"===i)return dg(dg({},{x:a+l/2,y:s+u+h,textAnchor:"middle",verticalAnchor:p}),n?{height:Math.max(n.y+n.height-(s+u),0),width:l}:{});if("left"===i){var v={x:a-g,y:s+u/2,textAnchor:m,verticalAnchor:"middle"};return dg(dg({},v),n?{width:Math.max(v.x-n.x,0),height:u}:{})}if("right"===i){var b={x:a+l+g,y:s+u/2,textAnchor:y,verticalAnchor:"middle"};return dg(dg({},b),n?{width:Math.max(n.x+n.width-b.x,0),height:u}:{})}var x=n?{width:l,height:u}:{};return"insideLeft"===i?dg({x:a+g,y:s+u/2,textAnchor:y,verticalAnchor:"middle"},x):"insideRight"===i?dg({x:a+l-g,y:s+u/2,textAnchor:m,verticalAnchor:"middle"},x):"insideTop"===i?dg({x:a+l/2,y:s+h,textAnchor:"middle",verticalAnchor:p},x):"insideBottom"===i?dg({x:a+l/2,y:s+u-h,textAnchor:"middle",verticalAnchor:d},x):"insideTopLeft"===i?dg({x:a+g,y:s+h,textAnchor:y,verticalAnchor:p},x):"insideTopRight"===i?dg({x:a+l-g,y:s+h,textAnchor:m,verticalAnchor:p},x):"insideBottomLeft"===i?dg({x:a+g,y:s+u-h,textAnchor:y,verticalAnchor:d},x):"insideBottomRight"===i?dg({x:a+l-g,y:s+u-h,textAnchor:m,verticalAnchor:d},x):Lt()(i)&&(Ct(i.x)||St(i.x))&&(Ct(i.y)||St(i.y))?dg({x:a+_t(i.x,l),y:s+_t(i.y,u),textAnchor:"end",verticalAnchor:"end"},x):dg({x:a+l/2,y:s+u/2,textAnchor:"middle",verticalAnchor:"middle"},x)}(r);return a.createElement(Zs,fg({className:ct("recharts-label",h)},f,g,{breakAll:d}),t)}mg.displayName="Label";var yg=function(e){var t=e.cx,n=e.cy,r=e.angle,i=e.startAngle,o=e.endAngle,a=e.r,s=e.radius,l=e.innerRadius,u=e.outerRadius,c=e.x,h=e.y,d=e.top,p=e.left,f=e.width,g=e.height,m=e.clockWise,y=e.labelViewBox;if(y)return y;if(Ct(f)&&Ct(g)){if(Ct(c)&&Ct(h))return{x:c,y:h,width:f,height:g};if(Ct(d)&&Ct(p))return{x:d,y:p,width:f,height:g}}return Ct(c)&&Ct(h)?{x:c,y:h,width:0,height:0}:Ct(t)&&Ct(n)?{cx:t,cy:n,startAngle:i||r||0,endAngle:o||r||0,innerRadius:l||0,outerRadius:u||s||a||0,clockWise:m}:e.viewBox?e.viewBox:{}};mg.parseViewBox=yg,mg.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=yg(e),o=nn(r,mg).map((function(e,n){return(0,a.cloneElement)(e,{viewBox:t||i,key:"label-".concat(n)})}));if(!n)return o;var s=function(e,t){return e?!0===e?a.createElement(mg,{key:"label-implicit",viewBox:t}):It(e)?a.createElement(mg,{key:"label-implicit",viewBox:t,value:e}):(0,a.isValidElement)(e)?e.type===mg?(0,a.cloneElement)(e,{key:"label-implicit",viewBox:t}):a.createElement(mg,{key:"label-implicit",content:e,viewBox:t}):Mt()(e)?a.createElement(mg,{key:"label-implicit",content:e,viewBox:t}):Lt()(e)?a.createElement(mg,fg({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||i);return[s].concat(lg(o))};var vg=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},bg=n(1733),xg=n.n(bg),wg=n(7002),kg=n.n(wg),Sg=function(e){return null};Sg.displayName="Cell";var Cg=n(4065),Ig=n.n(Cg);function Eg(e){return Eg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(e)}var Tg=["valueAccessor"],_g=["data","dataKey","clockWise","id","textBreakAll"];function Ng(e){return function(e){if(Array.isArray(e))return Ag(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ag(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ag(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ag(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Og(){return Og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Og.apply(this,arguments)}function Rg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rg(Object(n),!0).forEach((function(t){Pg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pg(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Eg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Eg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Eg(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dg(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Mg=function(e){return Array.isArray(e.value)?Ig()(e.value):e.value};function Fg(e){var t=e.valueAccessor,n=void 0===t?Mg:t,r=Dg(e,Tg),i=r.data,o=r.dataKey,s=r.clockWise,l=r.id,u=r.textBreakAll,c=Dg(r,_g);return i&&i.length?a.createElement($n,{className:"recharts-label-list"},i.map((function(e,t){var r=Pt()(o)?n(e,t):cf(e&&e.payload,o),i=Pt()(l)?{}:{id:"".concat(l,"-").concat(t)};return a.createElement(mg,Og({},ln(e,!0),c,i,{parentViewBox:e.parentViewBox,value:r,textBreakAll:u,viewBox:mg.parseViewBox(Pt()(s)?e:$g($g({},e),{},{clockWise:s})),key:"label-".concat(t),index:t}))}))):null}Fg.displayName="LabelList",Fg.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=nn(e.children,Fg).map((function(e,n){return(0,a.cloneElement)(e,{data:t,key:"labelList-".concat(n)})}));return n?[function(e,t){return e?!0===e?a.createElement(Fg,{key:"labelList-implicit",data:t}):a.isValidElement(e)||Mt()(e)?a.createElement(Fg,{key:"labelList-implicit",data:t,content:e}):Lt()(e)?a.createElement(Fg,Og({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t)].concat(Ng(r)):r};var Lg=n(2322),jg=n.n(Lg),zg=n(6361),Bg=n.n(zg);function Wg(e){return Wg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wg(e)}function Ug(){return Ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ug.apply(this,arguments)}function Vg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Gg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hg(Object(n),!0).forEach((function(t){Kg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kg(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Wg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wg(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xg=function(e,t,n,r,i){var o,a=n-r;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+n,",").concat(t),o+="L ".concat(e+n-a/2,",").concat(t+i),o+="L ".concat(e+n-a/2-r,",").concat(t+i),o+="L ".concat(e,",").concat(t," Z")},Yg={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Qg=function(e){var t=qg(qg({},Yg),e),n=(0,a.useRef)(),r=Vg((0,a.useState)(-1),2),i=r[0],o=r[1];(0,a.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&o(e)}catch(t){}}),[]);var s=t.x,l=t.y,u=t.upperWidth,c=t.lowerWidth,h=t.height,d=t.className,p=t.animationEasing,f=t.animationDuration,g=t.animationBegin,m=t.isUpdateAnimationActive;if(s!==+s||l!==+l||u!==+u||c!==+c||h!==+h||0===u&&0===c||0===h)return null;var y=ct("recharts-trapezoid",d);return m?a.createElement(qa,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:h,x:s,y:l},to:{upperWidth:u,lowerWidth:c,height:h,x:s,y:l},duration:f,animationEasing:p,isActive:m},(function(e){var r=e.upperWidth,o=e.lowerWidth,s=e.height,l=e.x,u=e.y;return a.createElement(qa,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:f,easing:p},a.createElement("path",Ug({},ln(t,!0),{className:y,d:Xg(l,u,r,o,s),ref:n})))})):a.createElement("g",null,a.createElement("path",Ug({},ln(t,!0),{className:y,d:Xg(s,l,u,c,h)})))};function Jg(e){return Jg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jg(e)}function Zg(){return Zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zg.apply(this,arguments)}function em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?em(Object(n),!0).forEach((function(t){nm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):em(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nm(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Jg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Jg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jg(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rm=function(e){var t=e.cx,n=e.cy,r=e.radius,i=e.angle,o=e.sign,a=e.isExternal,s=e.cornerRadius,l=e.cornerIsExternal,u=s*(a?1:-1)+r,c=Math.asin(s/u)/eg,h=l?i:i+o*c,d=l?i-o*c:i;return{center:ng(t,n,u,h),circleTangency:ng(t,n,r,h),lineTangency:ng(t,n,u*Math.cos(c*eg),d),theta:c}},im=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.startAngle,a=function(e,t){return kt(t-e)*Math.min(Math.abs(t-e),359.999)}(o,e.endAngle),s=o+a,l=ng(t,n,i,o),u=ng(t,n,i,s),c="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(a)>180),",").concat(+(o>s),",\n    ").concat(u.x,",").concat(u.y,"\n  ");if(r>0){var h=ng(t,n,r,o),d=ng(t,n,r,s);c+="L ".concat(d.x,",").concat(d.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(a)>180),",").concat(+(o<=s),",\n            ").concat(h.x,",").concat(h.y," Z")}else c+="L ".concat(t,",").concat(n," Z");return c},om={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},am=function(e){var t=tm(tm({},om),e),n=t.cx,r=t.cy,i=t.innerRadius,o=t.outerRadius,s=t.cornerRadius,l=t.forceCornerRadius,u=t.cornerIsExternal,c=t.startAngle,h=t.endAngle,d=t.className;if(o<i||c===h)return null;var p,f=ct("recharts-sector",d),g=o-i,m=_t(s,g,0,!0);return p=m>0&&Math.abs(c-h)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,s=e.cornerIsExternal,l=e.startAngle,u=e.endAngle,c=kt(u-l),h=rm({cx:t,cy:n,radius:i,angle:l,sign:c,cornerRadius:o,cornerIsExternal:s}),d=h.circleTangency,p=h.lineTangency,f=h.theta,g=rm({cx:t,cy:n,radius:i,angle:u,sign:-c,cornerRadius:o,cornerIsExternal:s}),m=g.circleTangency,y=g.lineTangency,v=g.theta,b=s?Math.abs(l-u):Math.abs(l-u)-f-v;if(b<0)return a?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):im({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:u});var x="M ".concat(p.x,",").concat(p.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(d.x,",").concat(d.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(c<0),",").concat(m.x,",").concat(m.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(y.x,",").concat(y.y,"\n  ");if(r>0){var w=rm({cx:t,cy:n,radius:r,angle:l,sign:c,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),k=w.circleTangency,S=w.lineTangency,C=w.theta,I=rm({cx:t,cy:n,radius:r,angle:u,sign:-c,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),E=I.circleTangency,T=I.lineTangency,_=I.theta,N=s?Math.abs(l-u):Math.abs(l-u)-C-_;if(N<0&&0===o)return"".concat(x,"L").concat(t,",").concat(n,"Z");x+="L".concat(T.x,",").concat(T.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(E.x,",").concat(E.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(N>180),",").concat(+(c>0),",").concat(k.x,",").concat(k.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(S.x,",").concat(S.y,"Z")}else x+="L".concat(t,",").concat(n,"Z");return x}({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(m,g/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:h}):im({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:c,endAngle:h}),a.createElement("path",Zg({},ln(t,!0),{className:f,d:p,role:"img"}))},sm=["option","shapeType","propTransformer","activeClassName","isActive"];function lm(e){return lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lm(e)}function um(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cm(Object(n),!0).forEach((function(t){dm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dm(e,t,n){return t=function(e){var t=function(e,t){if("object"!=lm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lm(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pm(e,t){return hm(hm({},t),e)}function fm(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return a.createElement(is,n);case"trapezoid":return a.createElement(Qg,n);case"sector":return a.createElement(am,n);case"symbols":if(function(e){return"symbols"===e}(t))return a.createElement(ui,n);break;default:return null}}function gm(e){var t,n=e.option,r=e.shapeType,i=e.propTransformer,o=void 0===i?pm:i,s=e.activeClassName,l=void 0===s?"recharts-active-shape":s,u=e.isActive,c=um(e,sm);if((0,a.isValidElement)(n))t=(0,a.cloneElement)(n,hm(hm({},c),function(e){return(0,a.isValidElement)(e)?e.props:e}(n)));else if(Mt()(n))t=n(c);else if(jg()(n)&&!Bg()(n)){var h=o(n,c);t=a.createElement(fm,{shapeType:r,elementProps:h})}else{var d=c;t=a.createElement(fm,{shapeType:r,elementProps:d})}return u?a.createElement($n,{className:l},t):t}function mm(e,t){return null!=t&&"trapezoids"in e.props}function ym(e,t){return null!=t&&"sectors"in e.props}function vm(e,t){return null!=t&&"points"in e.props}function bm(e,t){var n,r,i=e.x===(null===t||void 0===t||null===(n=t.labelViewBox)||void 0===n?void 0:n.x)||e.x===t.x,o=e.y===(null===t||void 0===t||null===(r=t.labelViewBox)||void 0===r?void 0:r.y)||e.y===t.y;return i&&o}function xm(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function wm(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function km(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=function(e,t){var n;return mm(e,t)?n="trapezoids":ym(e,t)?n="sectors":vm(e,t)&&(n="points"),n}(n,t),o=function(e,t){var n,r;return mm(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:ym(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:vm(e,t)?t.payload:{}}(n,t),a=r.filter((function(e,r){var a=lp()(o,e),s=n.props[i].filter((function(e){var r=function(e,t){var n;return mm(e,t)?n=bm:ym(e,t)?n=xm:vm(e,t)&&(n=wm),n}(n,t);return r(e,t)})),l=n.props[i].indexOf(s[s.length-1]);return a&&r===l}));return r.indexOf(a[a.length-1])}var Sm=["x","y"];function Cm(e){return Cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cm(e)}function Im(){return Im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Im.apply(this,arguments)}function Em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Em(Object(n),!0).forEach((function(t){_m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Em(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _m(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Cm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Cm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cm(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nm(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Am(e,t){var n=e.x,r=e.y,i=Nm(e,Sm),o="".concat(n),a=parseInt(o,10),s="".concat(r),l=parseInt(s,10),u="".concat(t.height||i.height),c=parseInt(u,10),h="".concat(t.width||i.width),d=parseInt(h,10);return Tm(Tm(Tm(Tm(Tm({},t),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:c,width:d,name:t.name,radius:t.radius})}function Om(e){return a.createElement(gm,Im({shapeType:"rectangle",propTransformer:Am,activeClassName:"recharts-active-bar"},e))}var Rm,$m=["value","background"];function Pm(e){return Pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pm(e)}function Dm(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Mm(){return Mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mm.apply(this,arguments)}function Fm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fm(Object(n),!0).forEach((function(t){Vm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gm(r.key),r)}}function zm(e,t,n){return t=Wm(t),function(e,t){if(t&&("object"===Pm(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Bm()?Reflect.construct(t,n||[],Wm(e).constructor):t.apply(e,n))}function Bm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bm=function(){return!!e})()}function Wm(e){return Wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wm(e)}function Um(e,t){return Um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Um(e,t)}function Vm(e,t,n){return(t=Gm(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gm(e){var t=function(e,t){if("object"!=Pm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pm(t)?t:t+""}var Hm=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Vm(e=zm(this,t,[].concat(r)),"state",{isAnimationFinished:!1}),Vm(e,"id",Tt("recharts-bar-")),Vm(e,"handleAnimationEnd",(function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),t&&t()})),Vm(e,"handleAnimationStart",(function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),t&&t()})),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Um(e,t)}(t,e),n=t,r=[{key:"renderRectanglesStatically",value:function(e){var t=this,n=this.props,r=n.shape,i=n.dataKey,o=n.activeIndex,s=n.activeBar,l=ln(this.props,!1);return e&&e.map((function(e,n){var u=n===o,c=u?s:r,h=Lm(Lm(Lm({},l),e),{},{isActive:u,option:c,index:n,dataKey:i,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return a.createElement($n,Mm({className:"recharts-bar-rectangle"},Ht(t.props,e,n),{key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value)}),a.createElement(Om,h))}))}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,n=t.data,r=t.layout,i=t.isAnimationActive,o=t.animationBegin,s=t.animationDuration,l=t.animationEasing,u=t.animationId,c=this.state.prevData;return a.createElement(qa,{begin:o,duration:s,isActive:i,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(t){var i=t.t,o=n.map((function(e,t){var n=c&&c[t];if(n){var o=At(n.x,e.x),a=At(n.y,e.y),s=At(n.width,e.width),l=At(n.height,e.height);return Lm(Lm({},e),{},{x:o(i),y:a(i),width:s(i),height:l(i)})}if("horizontal"===r){var u=At(0,e.height)(i);return Lm(Lm({},e),{},{y:e.y+e.height-u,height:u})}var h=At(0,e.width)(i);return Lm(Lm({},e),{},{width:h})}));return a.createElement($n,null,e.renderRectanglesStatically(o))}))}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,n=e.isAnimationActive,r=this.state.prevData;return!(n&&t&&t.length)||r&&lp()(r,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,n=t.data,r=t.dataKey,i=t.activeIndex,o=ln(this.props.background,!1);return n.map((function(t,n){t.value;var s=t.background,l=Dm(t,$m);if(!s)return null;var u=Lm(Lm(Lm(Lm(Lm({},l),{},{fill:"#eee"},s),o),Ht(e.props,t,n)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:r,index:n,className:"recharts-bar-background-rectangle"});return a.createElement(Om,Mm({key:"background-bar-".concat(n),option:e.props.background,isActive:n===i},u))}))}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.data,i=n.xAxis,o=n.yAxis,s=n.layout,l=nn(n.children,Qp);if(!l)return null;var u="vertical"===s?r[0].height/2:r[0].width/2,c=function(e,t){var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:cf(e,t)}},h={clipPath:e?"url(#clipPath-".concat(t,")"):null};return a.createElement($n,h,l.map((function(e){return a.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:r,xAxis:i,yAxis:o,layout:s,offset:u,dataPointFormatter:c})})))}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.data,r=e.className,i=e.xAxis,o=e.yAxis,s=e.left,l=e.top,u=e.width,c=e.height,h=e.isAnimationActive,d=e.background,p=e.id;if(t||!n||!n.length)return null;var f=this.state.isAnimationFinished,g=ct("recharts-bar",r),m=i&&i.allowDataOverflow,y=o&&o.allowDataOverflow,v=m||y,b=Pt()(p)?this.id:p;return a.createElement($n,{className:g},m||y?a.createElement("defs",null,a.createElement("clipPath",{id:"clipPath-".concat(b)},a.createElement("rect",{x:m?s:s-u/2,y:y?l:l-c/2,width:m?u:2*u,height:y?c:2*c}))):null,a.createElement($n,{className:"recharts-bar-rectangles",clipPath:v?"url(#clipPath-".concat(b,")"):null},d?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(v,b),(!h||f)&&Fg.renderCallByParent(this.props,n))}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],r&&jm(n.prototype,r),i&&jm(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(a.PureComponent);function qm(e){return qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qm(e)}function Km(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jm(r.key),r)}}function Xm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ym(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xm(Object(n),!0).forEach((function(t){Qm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qm(e,t,n){return(t=Jm(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jm(e){var t=function(e,t){if("object"!=qm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qm(t)?t:t+""}Rm=Hm,Vm(Hm,"displayName","Bar"),Vm(Hm,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ar.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),Vm(Hm,"getComposedData",(function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,o=e.xAxis,a=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,c=e.dataStartIndex,h=e.displayedData,d=e.offset,p=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null}(r,n);if(!p)return null;var f=t.layout,g=n.type.defaultProps,m=void 0!==g?Lm(Lm({},g),n.props):n.props,y=m.dataKey,v=m.children,b=m.minPointSize,x="horizontal"===f?a:o,w=u?x.scale.domain():null,k=function(e){var t=e.numericAxis,n=t.scale.domain();if("number"===t.type){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]}({numericAxis:x}),S=nn(v,Sg),C=h.map((function(e,t){var r,h,d,g,m,v;u?r=function(e,t){if(!t||2!==t.length||!Ct(t[0])||!Ct(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Ct(e[0])||e[0]<n)&&(i[0]=n),(!Ct(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i}(u[c+t],w):(r=cf(e,y),Array.isArray(r)||(r=[k,r]));var x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n,r){if("number"===typeof e)return e;var i="number"===typeof n;return i?e(n,r):(i||In(!1),t)}}(b,Rm.defaultProps.minPointSize)(r[1],t);if("horizontal"===f){var C,I=[a.scale(r[0]),a.scale(r[1])],E=I[0],T=I[1];h=Cf({axis:o,ticks:s,bandSize:i,offset:p.offset,entry:e,index:t}),d=null!==(C=null!==T&&void 0!==T?T:E)&&void 0!==C?C:void 0,g=p.size;var _=E-T;if(m=Number.isNaN(_)?0:_,v={x:h,y:a.y,width:g,height:a.height},Math.abs(x)>0&&Math.abs(m)<Math.abs(x)){var N=kt(m||x)*(Math.abs(x)-Math.abs(m));d-=N,m+=N}}else{var A=[o.scale(r[0]),o.scale(r[1])],O=A[0],R=A[1];if(h=O,d=Cf({axis:a,ticks:l,bandSize:i,offset:p.offset,entry:e,index:t}),g=R-O,m=p.size,v={x:o.x,y:d,width:o.width,height:m},Math.abs(x)>0&&Math.abs(g)<Math.abs(x))g+=kt(g||x)*(Math.abs(x)-Math.abs(g))}return Lm(Lm(Lm({},e),{},{x:h,y:d,width:g,height:m,value:u?r:r[1],payload:e,background:v},S&&S[t]&&S[t].props),{},{tooltipPayload:[Of(n,e)],tooltipPosition:{x:h+g/2,y:d+m/2}})}));return Lm({data:C,layout:f},d)}));var Zm=function(e,t){var n=e.x,r=e.y,i=t.x,o=t.y;return{x:Math.min(n,i),y:Math.min(r,o),width:Math.abs(i-n),height:Math.abs(o-r)}},ey=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&Km(t.prototype,n),r&&Km(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();Qm(ey,"EPS",1e-4);var ty=function(e){var t=Object.keys(e).reduce((function(t,n){return Ym(Ym({},t),{},Qm({},n,ey.create(e[n])))}),{});return Ym(Ym({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return xg()(e,(function(e,n){return t[n].apply(e,{bandAware:r,position:i})}))},isInRange:function(e){return kg()(e,(function(e,n){return t[n].isInRange(e)}))}})};function ny(){return ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ny.apply(this,arguments)}function ry(e){return ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ry(e)}function iy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iy(Object(n),!0).forEach((function(t){hy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ay(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dy(r.key),r)}}function sy(e,t,n){return t=uy(t),function(e,t){if(t&&("object"===ry(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ly()?Reflect.construct(t,n||[],uy(e).constructor):t.apply(e,n))}function ly(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ly=function(){return!!e})()}function uy(e){return uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uy(e)}function cy(e,t){return cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cy(e,t)}function hy(e,t,n){return(t=dy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dy(e){var t=function(e,t){if("object"!=ry(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ry(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ry(t)?t:t+""}var py=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sy(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cy(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this.props,n=e.x,r=e.y,i=e.r,o=e.alwaysShow,s=e.clipPathId,l=It(n),u=It(r);if(Rt(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!u)return null;var c=function(e){var t=e.x,n=e.y,r=e.xAxis,i=e.yAxis,o=ty({x:r.scale,y:i.scale}),a=o.apply({x:t,y:n},{bandAware:!0});return vg(e,"discard")&&!o.isInRange(a)?null:a}(this.props);if(!c)return null;var h=c.x,d=c.y,p=this.props,f=p.shape,g=p.className,m=oy(oy({clipPath:vg(this.props,"hidden")?"url(#".concat(s,")"):void 0},ln(this.props,!0)),{},{cx:h,cy:d});return a.createElement($n,{className:ct("recharts-reference-dot",g)},t.renderDot(f,m),mg.renderCallByParent(this.props,{x:h-i,y:d-i,width:2*i,height:2*i}))}}],r&&ay(n.prototype,r),i&&ay(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(a.Component);hy(py,"displayName","ReferenceDot"),hy(py,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),hy(py,"renderDot",(function(e,t){return a.isValidElement(e)?a.cloneElement(e,t):Mt()(e)?e(t):a.createElement(Fi,ny({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))}));var fy=n(4597),gy=n.n(fy),my=n(8990),yy=n.n(my),vy=n(5797),by=n.n(vy)()((function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}}),(function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}));var xy=(0,a.createContext)(void 0),wy=(0,a.createContext)(void 0),ky=(0,a.createContext)(void 0),Sy=(0,a.createContext)({}),Cy=(0,a.createContext)(void 0),Iy=(0,a.createContext)(0),Ey=(0,a.createContext)(0),Ty=function(e){var t=e.state,n=t.xAxisMap,r=t.yAxisMap,i=t.offset,o=e.clipPathId,s=e.children,l=e.width,u=e.height,c=by(i);return a.createElement(xy.Provider,{value:n},a.createElement(wy.Provider,{value:r},a.createElement(Sy.Provider,{value:i},a.createElement(ky.Provider,{value:c},a.createElement(Cy.Provider,{value:o},a.createElement(Iy.Provider,{value:u},a.createElement(Ey.Provider,{value:l},s)))))))};var _y=function(e){var t=(0,a.useContext)(xy);null==t&&In(!1);var n=t[e];return null==n&&In(!1),n},Ny=function(e){var t=(0,a.useContext)(wy);null==t&&In(!1);var n=t[e];return null==n&&In(!1),n},Ay=function(){return(0,a.useContext)(Ey)},Oy=function(){return(0,a.useContext)(Iy)};function Ry(e){return Ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ry(e)}function $y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,By(r.key),r)}}function Py(e,t,n){return t=My(t),function(e,t){if(t&&("object"===Ry(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Dy()?Reflect.construct(t,n||[],My(e).constructor):t.apply(e,n))}function Dy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dy=function(){return!!e})()}function My(e){return My=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},My(e)}function Fy(e,t){return Fy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fy(e,t)}function Ly(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ly(Object(n),!0).forEach((function(t){zy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ly(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zy(e,t,n){return(t=By(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function By(e){var t=function(e,t){if("object"!=Ry(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ry(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ry(t)?t:t+""}function Wy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Uy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vy.apply(this,arguments)}function Gy(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxisId,o=e.yAxisId,s=e.shape,l=e.className,u=e.alwaysShow,c=(0,a.useContext)(Cy),h=_y(i),d=Ny(o),p=(0,a.useContext)(ky);if(!c||!p)return null;Rt(void 0===u,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=function(e,t,n,r,i,o,a,s,l){var u=i.x,c=i.y,h=i.width,d=i.height;if(n){var p=l.y,f=e.y.apply(p,{position:o});if(vg(l,"discard")&&!e.y.isInRange(f))return null;var g=[{x:u+h,y:f},{x:u,y:f}];return"left"===s?g.reverse():g}if(t){var m=l.x,y=e.x.apply(m,{position:o});if(vg(l,"discard")&&!e.x.isInRange(y))return null;var v=[{x:y,y:c+d},{x:y,y:c}];return"top"===a?v.reverse():v}if(r){var b=l.segment.map((function(t){return e.apply(t,{position:o})}));return vg(l,"discard")&&gy()(b,(function(t){return!e.isInRange(t)}))?null:b}return null}(ty({x:h.scale,y:d.scale}),It(t),It(n),r&&2===r.length,p,e.position,h.orientation,d.orientation,e);if(!f)return null;var g=Wy(f,2),m=g[0],y=m.x,v=m.y,b=g[1],x=b.x,w=b.y,k=jy(jy({clipPath:vg(e,"hidden")?"url(#".concat(c,")"):void 0},ln(e,!0)),{},{x1:y,y1:v,x2:x,y2:w});return a.createElement($n,{className:ct("recharts-reference-line",l)},function(e,t){return a.isValidElement(e)?a.cloneElement(e,t):Mt()(e)?e(t):a.createElement("line",Vy({},t,{className:"recharts-reference-line-line"}))}(s,k),mg.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2;return Zm({x:t,y:n},{x:r,y:i})}({x1:y,y1:v,x2:x,y2:w})))}var Hy=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Py(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fy(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.createElement(Gy,this.props)}}])&&$y(n.prototype,r),i&&$y(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(a.Component);function qy(){return qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qy.apply(this,arguments)}function Ky(e){return Ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ky(e)}function Xy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xy(Object(n),!0).forEach((function(t){nv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rv(r.key),r)}}function Jy(e,t,n){return t=ev(t),function(e,t){if(t&&("object"===Ky(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Zy()?Reflect.construct(t,n||[],ev(e).constructor):t.apply(e,n))}function Zy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zy=function(){return!!e})()}function ev(e){return ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ev(e)}function tv(e,t){return tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tv(e,t)}function nv(e,t,n){return(t=rv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rv(e){var t=function(e,t){if("object"!=Ky(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ky(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ky(t)?t:t+""}zy(Hy,"displayName","ReferenceLine"),zy(Hy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var iv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Jy(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tv(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this.props,n=e.x1,r=e.x2,i=e.y1,o=e.y2,s=e.className,l=e.alwaysShow,u=e.clipPathId;Rt(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=It(n),h=It(r),d=It(i),p=It(o),f=this.props.shape;if(!c&&!h&&!d&&!p&&!f)return null;var g=function(e,t,n,r,i){var o=i.x1,a=i.x2,s=i.y1,l=i.y2,u=i.xAxis,c=i.yAxis;if(!u||!c)return null;var h=ty({x:u.scale,y:c.scale}),d={x:e?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(s,{position:"start"}):h.y.rangeMin},p={x:t?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:r?h.y.apply(l,{position:"end"}):h.y.rangeMax};return!vg(i,"discard")||h.isInRange(d)&&h.isInRange(p)?Zm(d,p):null}(c,h,d,p,this.props);if(!g&&!f)return null;var m=vg(this.props,"hidden")?"url(#".concat(u,")"):void 0;return a.createElement($n,{className:ct("recharts-reference-area",s)},t.renderRect(f,Yy(Yy({clipPath:m},ln(this.props,!0)),g)),mg.renderCallByParent(this.props,g))}}],r&&Qy(n.prototype,r),i&&Qy(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(a.Component);function ov(e){return function(e){if(Array.isArray(e))return av(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return av(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return av(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function av(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}nv(iv,"displayName","ReferenceArea"),nv(iv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),nv(iv,"renderRect",(function(e,t){return a.isValidElement(e)?a.cloneElement(e,t):Mt()(e)?e(t):a.createElement(is,qy({},t,{className:"recharts-reference-area-rect"}))}));var sv=function(e,t,n,r,i){var o=nn(e,Hy),a=nn(e,py),s=[].concat(ov(o),ov(a)),l=nn(e,iv),u="".concat(r,"Id"),c=r[0],h=t;if(s.length&&(h=s.reduce((function(e,t){if(t.props[u]===n&&vg(t.props,"extendDomain")&&Ct(t.props[c])){var r=t.props[c];return[Math.min(e[0],r),Math.max(e[1],r)]}return e}),h)),l.length){var d="".concat(c,"1"),p="".concat(c,"2");h=l.reduce((function(e,t){if(t.props[u]===n&&vg(t.props,"extendDomain")&&Ct(t.props[d])&&Ct(t.props[p])){var r=t.props[d],i=t.props[p];return[Math.min(e[0],r,i),Math.max(e[1],r,i)]}return e}),h)}return i&&i.length&&(h=i.reduce((function(e,t){return Ct(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),h)),h},lv=n(7283),uv=new(n.n(lv)()),cv="recharts.syncMouseEvents";function hv(e){return hv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hv(e)}function dv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fv(r.key),r)}}function pv(e,t,n){return(t=fv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fv(e){var t=function(e,t){if("object"!=hv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hv(t)?t:t+""}var gv=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),pv(this,"activeIndex",0),pv(this,"coordinateList",[]),pv(this,"layout","horizontal")},t=[{key:"setDetails",value:function(e){var t,n=e.coordinateList,r=void 0===n?null:n,i=e.container,o=void 0===i?null:i,a=e.layout,s=void 0===a?null:a,l=e.offset,u=void 0===l?null:l,c=e.mouseHandlerCallback,h=void 0===c?null:c;this.coordinateList=null!==(t=null!==r&&void 0!==r?r:this.coordinateList)&&void 0!==t?t:[],this.container=null!==o&&void 0!==o?o:this.container,this.layout=null!==s&&void 0!==s?s:this.layout,this.offset=null!==u&&void 0!==u?u:this.offset,this.mouseHandlerCallback=null!==h&&void 0!==h?h:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,i=n.y,o=n.height,a=this.coordinateList[this.activeIndex].coordinate,s=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,u=r+a+s,c=i+this.offset.top+o/2+l;this.mouseHandlerCallback({pageX:u,pageY:c})}}}],t&&dv(e.prototype,t),n&&dv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function mv(){}function yv(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function vv(e){this._context=e}function bv(e){this._context=e}function xv(e){this._context=e}vv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yv(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},bv.prototype={areaStart:mv,areaEnd:mv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:yv(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},xv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:yv(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class wv{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function kv(e){this._context=e}function Sv(e){this._context=e}function Cv(e){return new Sv(e)}function Iv(e){return e<0?-1:1}function Ev(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Iv(o)+Iv(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Tv(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function _v(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function Nv(e){this._context=e}function Av(e){this._context=new Ov(e)}function Ov(e){this._context=e}function Rv(e){this._context=e}function $v(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function Pv(e,t){this._context=e,this._t=t}function Dv(e){return e[0]}function Mv(e){return e[1]}function Fv(e,t){var n=Hr(!0),r=null,i=Cv,o=null,a=Zr(s);function s(s){var l,u,c,h=(s=Qd(s)).length,d=!1;for(null==r&&(o=i(c=a())),l=0;l<=h;++l)!(l<h&&n(u=s[l],l,s))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(u,l,s),+t(u,l,s));if(c)return o=null,c+""||null}return e="function"===typeof e?e:void 0===e?Dv:Hr(e),t="function"===typeof t?t:void 0===t?Mv:Hr(t),s.x=function(t){return arguments.length?(e="function"===typeof t?t:Hr(+t),s):e},s.y=function(e){return arguments.length?(t="function"===typeof e?e:Hr(+e),s):t},s.defined=function(e){return arguments.length?(n="function"===typeof e?e:Hr(!!e),s):n},s.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),s):i},s.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),s):r},s}function Lv(e,t,n){var r=null,i=Hr(!0),o=null,a=Cv,s=null,l=Zr(u);function u(u){var c,h,d,p,f,g=(u=Qd(u)).length,m=!1,y=new Array(g),v=new Array(g);for(null==o&&(s=a(f=l())),c=0;c<=g;++c){if(!(c<g&&i(p=u[c],c,u))===m)if(m=!m)h=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=c-1;d>=h;--d)s.point(y[d],v[d]);s.lineEnd(),s.areaEnd()}m&&(y[c]=+e(p,c,u),v[c]=+t(p,c,u),s.point(r?+r(p,c,u):y[c],n?+n(p,c,u):v[c]))}if(f)return s=null,f+""||null}function c(){return Fv().defined(i).curve(a).context(o)}return e="function"===typeof e?e:void 0===e?Dv:Hr(+e),t="function"===typeof t?t:Hr(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?Mv:Hr(+n),u.x=function(t){return arguments.length?(e="function"===typeof t?t:Hr(+t),r=null,u):e},u.x0=function(t){return arguments.length?(e="function"===typeof t?t:Hr(+t),u):e},u.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Hr(+e),u):r},u.y=function(e){return arguments.length?(t="function"===typeof e?e:Hr(+e),n=null,u):t},u.y0=function(e){return arguments.length?(t="function"===typeof e?e:Hr(+e),u):t},u.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:Hr(+e),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(e){return arguments.length?(i="function"===typeof e?e:Hr(!!e),u):i},u.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),u):a},u.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),u):o},u}function jv(e){return jv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jv(e)}function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zv.apply(this,arguments)}function Bv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bv(Object(n),!0).forEach((function(t){Uv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uv(e,t,n){return t=function(e){var t=function(e,t){if("object"!=jv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jv(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}kv.prototype={areaStart:mv,areaEnd:mv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Sv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Nv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_v(this,this._t0,Tv(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,_v(this,Tv(this,n=Ev(this,e,t)),n);break;default:_v(this,this._t0,n=Ev(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Av.prototype=Object.create(Nv.prototype)).point=function(e,t){Nv.prototype.point.call(this,t,e)},Ov.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},Rv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=$v(e),i=$v(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Pv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Vv={curveBasisClosed:function(e){return new bv(e)},curveBasisOpen:function(e){return new xv(e)},curveBasis:function(e){return new vv(e)},curveBumpX:function(e){return new wv(e,!0)},curveBumpY:function(e){return new wv(e,!1)},curveLinearClosed:function(e){return new kv(e)},curveLinear:Cv,curveMonotoneX:function(e){return new Nv(e)},curveMonotoneY:function(e){return new Av(e)},curveNatural:function(e){return new Rv(e)},curveStep:function(e){return new Pv(e,.5)},curveStepAfter:function(e){return new Pv(e,1)},curveStepBefore:function(e){return new Pv(e,0)}},Gv=function(e){return e.x===+e.x&&e.y===+e.y},Hv=function(e){return e.x},qv=function(e){return e.y},Kv=function(e){var t,n=e.type,r=void 0===n?"linear":n,i=e.points,o=void 0===i?[]:i,a=e.baseLine,s=e.layout,l=e.connectNulls,u=void 0!==l&&l,c=function(e,t){if(Mt()(e))return e;var n="curve".concat(Sr()(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?Vv[n]||Cv:Vv["".concat(n).concat("vertical"===t?"Y":"X")]}(r,s),h=u?o.filter((function(e){return Gv(e)})):o;if(Array.isArray(a)){var d=u?a.filter((function(e){return Gv(e)})):a,p=h.map((function(e,t){return Wv(Wv({},e),{},{base:d[t]})}));return(t="vertical"===s?Lv().y(qv).x1(Hv).x0((function(e){return e.base.x})):Lv().x(Hv).y1(qv).y0((function(e){return e.base.y}))).defined(Gv).curve(c),t(p)}return(t="vertical"===s&&Ct(a)?Lv().y(qv).x1(Hv).x0(a):Ct(a)?Lv().x(Hv).y1(qv).y0(a):Fv().x(Hv).y(qv)).defined(Gv).curve(c),t(h)},Xv=function(e){var t=e.className,n=e.points,r=e.path,i=e.pathRef;if((!n||!n.length)&&!r)return null;var o=n&&n.length?Kv(e):r;return a.createElement("path",zv({},ln(e,!1),Gt(e),{className:ct("recharts-curve",t),d:o,ref:i}))};function Yv(e){return Yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yv(e)}var Qv=["x","y","top","left","width","height","className"];function Jv(){return Jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jv.apply(this,arguments)}function Zv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eb(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Yv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yv(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tb(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var nb=function(e,t,n,r,i,o){return"M".concat(e,",").concat(i,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n)},rb=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.top,s=void 0===o?0:o,l=e.left,u=void 0===l?0:l,c=e.width,h=void 0===c?0:c,d=e.height,p=void 0===d?0:d,f=e.className,g=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zv(Object(n),!0).forEach((function(t){eb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({x:n,y:i,top:s,left:u,width:h,height:p},tb(e,Qv));return Ct(n)&&Ct(i)&&Ct(h)&&Ct(p)&&Ct(s)&&Ct(u)?a.createElement("path",Jv({},ln(g,!0),{className:ct("recharts-cross",f),d:nb(n,i,h,p,s,u)})):null};function ib(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,o=e.endAngle;return{points:[ng(t,n,r,i),ng(t,n,r,o)],cx:t,cy:n,radius:r,startAngle:i,endAngle:o}}function ob(e,t,n){var r,i,o,a;if("horizontal"===e)o=r=t.x,i=n.top,a=n.top+n.height;else if("vertical"===e)a=i=t.y,r=n.left,o=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return ib(t);var s=t.cx,l=t.cy,u=t.innerRadius,c=t.outerRadius,h=t.angle,d=ng(s,l,u,h),p=ng(s,l,c,h);r=d.x,i=d.y,o=p.x,a=p.y}return[{x:r,y:i},{x:o,y:a}]}function ab(e){return ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ab(e)}function sb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sb(Object(n),!0).forEach((function(t){ub(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ub(e,t,n){return t=function(e){var t=function(e,t){if("object"!=ab(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ab(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ab(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cb(e){var t,n,r,i=e.element,o=e.tooltipEventType,s=e.isActive,l=e.activeCoordinate,u=e.activePayload,c=e.offset,h=e.activeTooltipIndex,d=e.tooltipAxisBandSize,p=e.layout,f=e.chartName,g=null!==(t=i.props.cursor)&&void 0!==t?t:null===(n=i.type.defaultProps)||void 0===n?void 0:n.cursor;if(!i||!g||!s||!l||"ScatterChart"!==f&&"axis"!==o)return null;var m=Xv;if("ScatterChart"===f)r=l,m=rb;else if("BarChart"===f)r=function(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-i,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(p,l,c,d),m=is;else if("radial"===p){var y=ib(l),v=y.cx,b=y.cy,x=y.radius;r={cx:v,cy:b,startAngle:y.startAngle,endAngle:y.endAngle,innerRadius:x,outerRadius:x},m=am}else r={points:ob(p,l,c)},m=Xv;var w=lb(lb(lb(lb({stroke:"#ccc",pointerEvents:"none"},c),r),ln(g,!1)),{},{payload:u,payloadIndex:h,className:ct("recharts-tooltip-cursor",g.className)});return(0,a.isValidElement)(g)?(0,a.cloneElement)(g,w):(0,a.createElement)(m,w)}var hb=["item"],db=["children","className","width","height","style","compact","title","desc"];function pb(e){return pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pb(e)}function fb(){return fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fb.apply(this,arguments)}function gb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||Sb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mb(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function yb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_b(r.key),r)}}function vb(e,t,n){return t=xb(t),function(e,t){if(t&&("object"===pb(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bb()?Reflect.construct(t,n||[],xb(e).constructor):t.apply(e,n))}function bb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bb=function(){return!!e})()}function xb(e){return xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xb(e)}function wb(e,t){return wb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wb(e,t)}function kb(e){return function(e){if(Array.isArray(e))return Cb(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Sb(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sb(e,t){if(e){if("string"===typeof e)return Cb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cb(e,t):void 0}}function Cb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ib(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ib(Object(n),!0).forEach((function(t){Tb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ib(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tb(e,t,n){return(t=_b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _b(e){var t=function(e,t){if("object"!=pb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pb(t)?t:t+""}var Nb={xAxis:["bottom","top"],yAxis:["left","right"]},Ab={width:"100%",height:"100%"},Ob={x:0,y:0};function Rb(e){return e}var $b=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,i=t.dataEndIndex,o=(null!==n&&void 0!==n?n:[]).reduce((function(e,t){var n=t.props.data;return n&&n.length?[].concat(kb(e),kb(n)):e}),[]);return o.length>0?o:e&&e.length&&Ct(r)&&Ct(i)?e.slice(r,i+1):[]};function Pb(e){return"number"===e?[0,"auto"]:void 0}var Db=function(e,t,n,r){var i=e.graphicalItems,o=e.tooltipAxis,a=$b(t,e);return n<0||!i||!i.length||n>=a.length?null:i.reduce((function(i,s){var l,u,c=null!==(l=s.props.data)&&void 0!==l?l:t;(c&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(c=c.slice(e.dataStartIndex,e.dataEndIndex+1)),o.dataKey&&!o.allowDuplicatedCategory)?u=Ot(void 0===c?a:c,o.dataKey,r):u=c&&c[n]||a[n];return u?[].concat(kb(i),[Of(s,u)]):i}),[])},Mb=function(e,t,n,r){var i=r||{x:e.chartX,y:e.chartY},o=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(i,n),a=e.orderedTooltipTicks,s=e.tooltipAxis,l=e.tooltipTicks,u=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,a=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;if(a<=1)return 0;if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var s=i.range,l=0;l<a;l++){var u=l>0?r[l-1].coordinate:r[a-1].coordinate,c=r[l].coordinate,h=l>=a-1?r[0].coordinate:r[l+1].coordinate,d=void 0;if(kt(c-u)!==kt(h-c)){var p=[];if(kt(h-c)===kt(s[1]-s[0])){d=h;var f=c+s[1]-s[0];p[0]=Math.min(f,(f+u)/2),p[1]=Math.max(f,(f+u)/2)}else{d=u;var g=h+s[1]-s[0];p[0]=Math.min(c,(g+c)/2),p[1]=Math.max(c,(g+c)/2)}var m=[Math.min(c,(d+c)/2),Math.max(c,(d+c)/2)];if(e>m[0]&&e<=m[1]||e>=p[0]&&e<=p[1]){o=r[l].index;break}}else{var y=Math.min(u,h),v=Math.max(u,h);if(e>(y+c)/2&&e<=(v+c)/2){o=r[l].index;break}}}else for(var b=0;b<a;b++)if(0===b&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b>0&&b<a-1&&e>(n[b].coordinate+n[b-1].coordinate)/2&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b===a-1&&e>(n[b].coordinate+n[b-1].coordinate)/2){o=n[b].index;break}return o}(o,a,l,s);if(u>=0&&l){var c=l[u]&&l[u].value,h=Db(e,t,u,c),d=function(e,t,n,r){var i=t.find((function(e){return e&&e.index===n}));if(i){if("horizontal"===e)return{x:i.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:i.coordinate};if("centric"===e){var o=i.coordinate,a=r.radius;return Eb(Eb(Eb({},r),ng(r.cx,r.cy,a,o)),{},{angle:o,radius:a})}var s=i.coordinate,l=r.angle;return Eb(Eb(Eb({},r),ng(r.cx,r.cy,s,l)),{},{angle:l,radius:s})}return Ob}(n,a,u,i);return{activeTooltipIndex:u,activeLabel:c,activePayload:h,activeCoordinate:d}}return null},Fb=function(e,t){var n=t.axes,r=t.graphicalItems,i=t.axisType,o=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,u=e.layout,c=e.children,h=e.stackOffset,d=gf(u,i);return n.reduce((function(t,n){var p,f=void 0!==n.type.defaultProps?Eb(Eb({},n.type.defaultProps),n.props):n.props,g=f.type,m=f.dataKey,y=f.allowDataOverflow,v=f.allowDuplicatedCategory,b=f.scale,x=f.ticks,w=f.includeHidden,k=f[o];if(t[k])return t;var S,C,I,E=$b(e.data,{graphicalItems:r.filter((function(e){var t;return(o in e.props?e.props[o]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[o])===k})),dataStartIndex:s,dataEndIndex:l}),T=E.length;(function(e,t,n){if("number"===n&&!0===t&&Array.isArray(e)){var r=null===e||void 0===e?void 0:e[0],i=null===e||void 0===e?void 0:e[1];if(r&&i&&Ct(r)&&Ct(i))return!0}return!1})(f.domain,y,g)&&(S=_f(f.domain,null,y),!d||"number"!==g&&"auto"===b||(I=hf(E,m,"category")));var _=Pb(g);if(!S||0===S.length){var N,A=null!==(N=f.domain)&&void 0!==N?N:_;if(m){if(S=hf(E,m,g),"category"===g&&d){var O=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(S);v&&O?(C=S,S=wn()(0,T)):v||(S=Af(A,S,n).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(kb(e),[t])}),[]))}else if("category"===g)S=v?S.filter((function(e){return""!==e&&!Pt()(e)})):Af(A,S,n).reduce((function(e,t){return e.indexOf(t)>=0||""===t||Pt()(t)?e:[].concat(kb(e),[t])}),[]);else if("number"===g){var R=function(e,t,n,r,i){var o=t.map((function(t){return pf(e,t,n,i,r)})).filter((function(e){return!Pt()(e)}));return o&&o.length?o.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(E,r.filter((function(e){var t,n,r=o in e.props?e.props[o]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[o],i="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===k&&(w||!i)})),m,i,u);R&&(S=R)}!d||"number"!==g&&"auto"===b||(I=hf(E,m,"category"))}else S=d?wn()(0,T):a&&a[k]&&a[k].hasStack&&"number"===g?"expand"===h?[0,1]:If(a[k].stackGroups,s,l):ff(E,r.filter((function(e){var t=o in e.props?e.props[o]:e.type.defaultProps[o],n="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===k&&(w||!n)})),g,u,!0);if("number"===g)S=sv(c,S,k,i,x),A&&(S=_f(A,S,y));else if("category"===g&&A){var $=A;S.every((function(e){return $.indexOf(e)>=0}))&&(S=$)}}return Eb(Eb({},t),{},Tb({},k,Eb(Eb({},f),{},{axisType:i,domain:S,categoricalDomain:I,duplicateDomain:C,originalDomain:null!==(p=f.domain)&&void 0!==p?p:_,isCategorical:d,layout:u})))}),{})},Lb=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,i=t.AxisComp,o=t.graphicalItems,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,u=e.children,c="".concat(r,"Id"),h=nn(u,i),d={};return h&&h.length?d=Fb(e,{axes:h,graphicalItems:o,axisType:r,axisIdKey:c,stackGroups:a,dataStartIndex:s,dataEndIndex:l}):o&&o.length&&(d=function(e,t){var n=t.graphicalItems,r=t.Axis,i=t.axisType,o=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,u=e.layout,c=e.children,h=$b(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:l}),d=h.length,p=gf(u,i),f=-1;return n.reduce((function(e,t){var g,m=(void 0!==t.type.defaultProps?Eb(Eb({},t.type.defaultProps),t.props):t.props)[o],y=Pb("number");return e[m]?e:(f++,p?g=wn()(0,d):a&&a[m]&&a[m].hasStack?(g=If(a[m].stackGroups,s,l),g=sv(c,g,m,i)):(g=_f(y,ff(h,n.filter((function(e){var t,n,r=o in e.props?e.props[o]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[o],i="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===m&&!i})),"number",u),r.defaultProps.allowDataOverflow),g=sv(c,g,m,i)),Eb(Eb({},e),{},Tb({},m,Eb(Eb({axisType:i},r.defaultProps),{},{hide:!0,orientation:bt()(Nb,"".concat(i,".").concat(f%2),null),domain:g,originalDomain:y,isCategorical:p,layout:u}))))}),{})}(e,{Axis:i,graphicalItems:o,axisType:r,axisIdKey:c,stackGroups:a,dataStartIndex:s,dataEndIndex:l})),d},jb=function(e){var t=e.children,n=e.defaultShowTooltip,r=rn(t,Xf),i=0,o=0;return e.data&&0!==e.data.length&&(o=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(i=r.props.startIndex),r.props.endIndex>=0&&(o=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},zb=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Bb=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),i=void 0===r?{}:r,o=e.yAxisMap,a=void 0===o?{}:o,s=n.width,l=n.height,u=n.children,c=n.margin||{},h=rn(u,Xf),d=rn(u,Di),p=Object.keys(a).reduce((function(e,t){var n=a[t],r=n.orientation;return n.mirror||n.hide?e:Eb(Eb({},e),{},Tb({},r,e[r]+n.width))}),{left:c.left||0,right:c.right||0}),f=Object.keys(i).reduce((function(e,t){var n=i[t],r=n.orientation;return n.mirror||n.hide?e:Eb(Eb({},e),{},Tb({},r,bt()(e,"".concat(r))+n.height))}),{top:c.top||0,bottom:c.bottom||0}),g=Eb(Eb({},f),p),m=g.bottom;h&&(g.bottom+=h.props.height||Xf.defaultProps.height),d&&t&&(g=function(e,t,n,r){var i=n.children,o=n.width,a=n.margin,s=o-(a.left||0)-(a.right||0),l=nf({children:i,legendWidth:s});if(l){var u=r||{},c=u.width,h=u.height,d=l.align,p=l.verticalAlign,f=l.layout;if(("vertical"===f||"horizontal"===f&&"middle"===p)&&"center"!==d&&Ct(e[d]))return lf(lf({},e),{},uf({},d,e[d]+(c||0)));if(("horizontal"===f||"vertical"===f&&"center"===d)&&"middle"!==p&&Ct(e[p]))return lf(lf({},e),{},uf({},p,e[p]+(h||0)))}return e}(g,0,n,t));var y=s-g.left-g.right,v=l-g.top-g.bottom;return Eb(Eb({brushBottom:m},g),{},{width:Math.max(y,0),height:Math.max(v,0)})},Wb=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},Ub=["type","layout","connectNulls","ref"],Vb=["key"];function Gb(e){return Gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gb(e)}function Hb(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function qb(){return qb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qb.apply(this,arguments)}function Kb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kb(Object(n),!0).forEach((function(t){rx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yb(e){return function(e){if(Array.isArray(e))return Qb(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Qb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qb(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ix(r.key),r)}}function Zb(e,t,n){return t=tx(t),function(e,t){if(t&&("object"===Gb(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ex()?Reflect.construct(t,n||[],tx(e).constructor):t.apply(e,n))}function ex(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ex=function(){return!!e})()}function tx(e){return tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tx(e)}function nx(e,t){return nx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nx(e,t)}function rx(e,t,n){return(t=ix(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ix(e){var t=function(e,t){if("object"!=Gb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Gb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gb(t)?t:t+""}var ox=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return rx(e=Zb(this,t,[].concat(r)),"state",{isAnimationFinished:!0,totalLength:0}),rx(e,"generateSimpleStrokeDasharray",(function(e,t){return"".concat(t,"px ").concat(e-t,"px")})),rx(e,"getStrokeDasharray",(function(n,r,i){var o=i.reduce((function(e,t){return e+t}));if(!o)return e.generateSimpleStrokeDasharray(r,n);for(var a=Math.floor(n/o),s=n%o,l=r-n,u=[],c=0,h=0;c<i.length;h+=i[c],++c)if(h+i[c]>s){u=[].concat(Yb(i.slice(0,c)),[s-h]);break}var d=u.length%2===0?[0,l]:[l];return[].concat(Yb(t.repeat(i,a)),Yb(u),d).map((function(e){return"".concat(e,"px")})).join(", ")})),rx(e,"id",Tt("recharts-line-")),rx(e,"pathRef",(function(t){e.mainCurve=t})),rx(e,"handleAnimationEnd",(function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()})),rx(e,"handleAnimationStart",(function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()})),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nx(e,t)}(t,e),n=t,r=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.points,i=n.xAxis,o=n.yAxis,s=n.layout,l=nn(n.children,Qp);if(!l)return null;var u=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:cf(e.payload,t)}},c={clipPath:e?"url(#clipPath-".concat(t,")"):null};return a.createElement($n,c,l.map((function(e){return a.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:r,xAxis:i,yAxis:o,layout:s,dataPointFormatter:u})})))}},{key:"renderDots",value:function(e,n,r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.dot,s=i.points,l=i.dataKey,u=ln(this.props,!1),c=ln(o,!0),h=s.map((function(e,n){var r=Xb(Xb(Xb({key:"dot-".concat(n),r:3},u),c),{},{value:e.value,dataKey:l,cx:e.x,cy:e.y,index:n,payload:e.payload});return t.renderDotItem(o,r)})),d={clipPath:e?"url(#clipPath-".concat(n?"":"dots-").concat(r,")"):null};return a.createElement($n,qb({className:"recharts-line-dots",key:"dots"},d),h)}},{key:"renderCurveStatically",value:function(e,t,n,r){var i=this.props,o=i.type,s=i.layout,l=i.connectNulls,u=(i.ref,Hb(i,Ub)),c=Xb(Xb(Xb({},ln(u,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(n,")"):null,points:e},r),{},{type:o,layout:s,connectNulls:l});return a.createElement(Xv,qb({},c,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var n=this,r=this.props,i=r.points,o=r.strokeDasharray,s=r.isAnimationActive,l=r.animationBegin,u=r.animationDuration,c=r.animationEasing,h=r.animationId,d=r.animateNewValues,p=r.width,f=r.height,g=this.state,m=g.prevPoints,y=g.totalLength;return a.createElement(qa,{begin:l,duration:u,isActive:s,easing:c,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(r){var a=r.t;if(m){var s=m.length/i.length,l=i.map((function(e,t){var n=Math.floor(t*s);if(m[n]){var r=m[n],i=At(r.x,e.x),o=At(r.y,e.y);return Xb(Xb({},e),{},{x:i(a),y:o(a)})}if(d){var l=At(2*p,e.x),u=At(f/2,e.y);return Xb(Xb({},e),{},{x:l(a),y:u(a)})}return Xb(Xb({},e),{},{x:e.x,y:e.y})}));return n.renderCurveStatically(l,e,t)}var u,c=At(0,y)(a);if(o){var h="".concat(o).split(/[,\s]+/gim).map((function(e){return parseFloat(e)}));u=n.getStrokeDasharray(c,y,h)}else u=n.generateSimpleStrokeDasharray(y,c);return n.renderCurveStatically(i,e,t,{strokeDasharray:u})}))}},{key:"renderCurve",value:function(e,t){var n=this.props,r=n.points,i=n.isAnimationActive,o=this.state,a=o.prevPoints,s=o.totalLength;return i&&r&&r.length&&(!a&&s>0||!lp()(a,r))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(r,e,t)}},{key:"render",value:function(){var e,t=this.props,n=t.hide,r=t.dot,i=t.points,o=t.className,s=t.xAxis,l=t.yAxis,u=t.top,c=t.left,h=t.width,d=t.height,p=t.isAnimationActive,f=t.id;if(n||!i||!i.length)return null;var g=this.state.isAnimationFinished,m=1===i.length,y=ct("recharts-line",o),v=s&&s.allowDataOverflow,b=l&&l.allowDataOverflow,x=v||b,w=Pt()(f)?this.id:f,k=null!==(e=ln(r,!1))&&void 0!==e?e:{r:3,strokeWidth:2},S=k.r,C=void 0===S?3:S,I=k.strokeWidth,E=void 0===I?2:I,T=(function(e){return e&&"object"===Yt(e)&&"clipDot"in e}(r)?r:{}).clipDot,_=void 0===T||T,N=2*C+E;return a.createElement($n,{className:y},v||b?a.createElement("defs",null,a.createElement("clipPath",{id:"clipPath-".concat(w)},a.createElement("rect",{x:v?c:c-h/2,y:b?u:u-d/2,width:v?h:2*h,height:b?d:2*d})),!_&&a.createElement("clipPath",{id:"clipPath-dots-".concat(w)},a.createElement("rect",{x:c-N/2,y:u-N/2,width:h+N,height:d+N}))):null,!m&&this.renderCurve(x,w),this.renderErrorBar(x,w),(m||r)&&this.renderDots(x,_,w),(!p||g)&&Fg.renderCallByParent(this.props,i))}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var n=e.length%2!==0?[].concat(Yb(e),[0]):e,r=[],i=0;i<t;++i)r=[].concat(Yb(r),Yb(n));return r}},{key:"renderDotItem",value:function(e,t){var n;if(a.isValidElement(e))n=a.cloneElement(e,t);else if(Mt()(e))n=e(t);else{var r=t.key,i=Hb(t,Vb),o=ct("recharts-line-dot","boolean"!==typeof e?e.className:"");n=a.createElement(Fi,qb({key:r},i,{className:o}))}return n}}],r&&Jb(n.prototype,r),i&&Jb(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(a.PureComponent);function ax(e,t,n){if(t<1)return[];if(1===t&&void 0===n)return e;for(var r=[],i=0;i<e.length;i+=t){if(void 0!==n&&!0!==n(e[i]))return;r.push(e[i])}return r}function sx(e,t,n){return function(e){var t=e.width,n=e.height,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),i=r*Math.PI/180,o=Math.atan(n/t),a=i>o&&i<Math.PI-o?n/Math.sin(i):t/Math.cos(i);return Math.abs(a)}({width:e.width+t.width,height:e.height+t.height},n)}function lx(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-i)<=0}function ux(e){return ux="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ux(e)}function cx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cx(Object(n),!0).forEach((function(t){dx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dx(e,t,n){return t=function(e){var t=function(e,t){if("object"!=ux(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ux(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ux(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function px(e,t,n){var r=e.tick,i=e.ticks,o=e.viewBox,a=e.minTickGap,s=e.orientation,l=e.interval,u=e.tickFormatter,c=e.unit,h=e.angle;if(!i||!i.length||!r)return[];if(Ct(l)||ar.isSsr)return function(e,t){return ax(e,t+1)}(i,"number"===typeof l&&Ct(l)?l:0);var d=[],p="top"===s||"bottom"===s?"width":"height",f=c&&"width"===p?Cs(c,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=function(e,r){var i=Mt()(u)?u(e.value,r):e.value;return"width"===p?sx(Cs(i,{fontSize:t,letterSpacing:n}),f,h):Cs(i,{fontSize:t,letterSpacing:n})[p]},m=i.length>=2?kt(i[1].coordinate-i[0].coordinate):1,y=function(e,t,n){var r="width"===n,i=e.x,o=e.y,a=e.width,s=e.height;return 1===t?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}(o,m,p);return"equidistantPreserveStart"===l?function(e,t,n,r,i){for(var o,a=(r||[]).slice(),s=t.start,l=t.end,u=0,c=1,h=s,d=function(){var t=null===r||void 0===r?void 0:r[u];if(void 0===t)return{v:ax(r,c)};var o,a=u,d=function(){return void 0===o&&(o=n(t,a)),o},p=t.coordinate,f=0===u||lx(e,p,d,h,l);f||(u=0,h=s,c+=1),f&&(h=p+e*(d()/2+i),u+=c)};c<=a.length;)if(o=d())return o.v;return[]}(m,y,g,i,a):(d="preserveStart"===l||"preserveStartEnd"===l?function(e,t,n,r,i,o){var a=(r||[]).slice(),s=a.length,l=t.start,u=t.end;if(o){var c=r[s-1],h=n(c,s-1),d=e*(c.coordinate+e*h/2-u);a[s-1]=c=hx(hx({},c),{},{tickCoord:d>0?c.coordinate-d*e:c.coordinate}),lx(e,c.tickCoord,(function(){return h}),l,u)&&(u=c.tickCoord-e*(h/2+i),a[s-1]=hx(hx({},c),{},{isShow:!0}))}for(var p=o?s-1:s,f=function(t){var r,o=a[t],s=function(){return void 0===r&&(r=n(o,t)),r};if(0===t){var c=e*(o.coordinate-e*s()/2-l);a[t]=o=hx(hx({},o),{},{tickCoord:c<0?o.coordinate-c*e:o.coordinate})}else a[t]=o=hx(hx({},o),{},{tickCoord:o.coordinate});lx(e,o.tickCoord,s,l,u)&&(l=o.tickCoord+e*(s()/2+i),a[t]=hx(hx({},o),{},{isShow:!0}))},g=0;g<p;g++)f(g);return a}(m,y,g,i,a,"preserveStartEnd"===l):function(e,t,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=t.start,l=t.end,u=function(t){var r,u=o[t],c=function(){return void 0===r&&(r=n(u,t)),r};if(t===a-1){var h=e*(u.coordinate+e*c()/2-l);o[t]=u=hx(hx({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate})}else o[t]=u=hx(hx({},u),{},{tickCoord:u.coordinate});lx(e,u.tickCoord,c,s,l)&&(l=u.tickCoord-e*(c()/2+i),o[t]=hx(hx({},u),{},{isShow:!0}))},c=a-1;c>=0;c--)u(c);return o}(m,y,g,i,a),d.filter((function(e){return e.isShow})))}rx(ox,"displayName","Line"),rx(ox,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ar.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),rx(ox,"getComposedData",(function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,a=e.dataKey,s=e.bandSize,l=e.displayedData,u=e.offset,c=t.layout,h=l.map((function(e,t){var l=cf(e,a);return"horizontal"===c?{x:Sf({axis:n,ticks:i,bandSize:s,entry:e,index:t}),y:Pt()(l)?null:r.scale(l),value:l,payload:e}:{x:Pt()(l)?null:n.scale(l),y:Sf({axis:r,ticks:o,bandSize:s,entry:e,index:t}),value:l,payload:e}}));return Xb({points:h,layout:c},u)}));var fx=["viewBox"],gx=["viewBox"],mx=["ticks"];function yx(e){return yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yx(e)}function vx(){return vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vx.apply(this,arguments)}function bx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bx(Object(n),!0).forEach((function(t){Tx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wx(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function kx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_x(r.key),r)}}function Sx(e,t,n){return t=Ix(t),function(e,t){if(t&&("object"===yx(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Cx()?Reflect.construct(t,n||[],Ix(e).constructor):t.apply(e,n))}function Cx(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cx=function(){return!!e})()}function Ix(e){return Ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ix(e)}function Ex(e,t){return Ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ex(e,t)}function Tx(e,t,n){return(t=_x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _x(e){var t=function(e,t){if("object"!=yx(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yx(t)?t:t+""}var Nx=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Sx(this,t,[e])).state={fontSize:"",letterSpacing:""},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ex(e,t)}(t,e),n=t,r=[{key:"shouldComponentUpdate",value:function(e,t){var n=e.viewBox,r=wx(e,fx),i=this.props,o=i.viewBox,a=wx(i,gx);return!jt(n,o)||!jt(r,a)||!jt(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,n,r,i,o,a,s=this.props,l=s.x,u=s.y,c=s.width,h=s.height,d=s.orientation,p=s.tickSize,f=s.mirror,g=s.tickMargin,m=f?-1:1,y=e.tickSize||p,v=Ct(e.tickCoord)?e.tickCoord:e.coordinate;switch(d){case"top":t=n=e.coordinate,a=(r=(i=u+ +!f*h)-m*y)-m*g,o=v;break;case"left":r=i=e.coordinate,o=(t=(n=l+ +!f*c)-m*y)-m*g,a=v;break;case"right":r=i=e.coordinate,o=(t=(n=l+ +f*c)+m*y)+m*g,a=v;break;default:t=n=e.coordinate,a=(r=(i=u+ +f*h)+m*y)+m*g,o=v}return{line:{x1:t,y1:r,x2:n,y2:i},tick:{x:o,y:a}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.orientation,s=e.mirror,l=e.axisLine,u=xx(xx(xx({},ln(this.props,!1)),ln(l,!1)),{},{fill:"none"});if("top"===o||"bottom"===o){var c=+("top"===o&&!s||"bottom"===o&&s);u=xx(xx({},u),{},{x1:t,y1:n+c*i,x2:t+r,y2:n+c*i})}else{var h=+("left"===o&&!s||"right"===o&&s);u=xx(xx({},u),{},{x1:t+h*r,y1:n,x2:t+h*r,y2:n+i})}return a.createElement("line",vx({},u,{className:ct("recharts-cartesian-axis-line",bt()(l,"className"))}))}},{key:"renderTicks",value:function(e,n,r){var i=this,o=this.props,s=o.tickLine,l=o.stroke,u=o.tick,c=o.tickFormatter,h=o.unit,d=px(xx(xx({},this.props),{},{ticks:e}),n,r),p=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),g=ln(this.props,!1),m=ln(u,!1),y=xx(xx({},g),{},{fill:"none"},ln(s,!1)),v=d.map((function(e,n){var r=i.getTickLineCoord(e),o=r.line,v=r.tick,b=xx(xx(xx(xx({textAnchor:p,verticalAnchor:f},g),{},{stroke:"none",fill:l},m),v),{},{index:n,payload:e,visibleTicksCount:d.length,tickFormatter:c});return a.createElement($n,vx({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},Ht(i.props,e,n)),s&&a.createElement("line",vx({},y,o,{className:ct("recharts-cartesian-axis-tick-line",bt()(s,"className"))})),u&&t.renderTickItem(u,b,"".concat(Mt()(c)?c(e.value,n):e.value).concat(h||"")))}));return a.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var e=this,t=this.props,n=t.axisLine,r=t.width,i=t.height,o=t.ticksGenerator,s=t.className;if(t.hide)return null;var l=this.props,u=l.ticks,c=wx(l,mx),h=u;return Mt()(o)&&(h=u&&u.length>0?o(this.props):o(c)),r<=0||i<=0||!h||!h.length?null:a.createElement($n,{className:ct("recharts-cartesian-axis",s),ref:function(t){e.layerReference=t}},n&&this.renderAxisLine(),this.renderTicks(h,this.state.fontSize,this.state.letterSpacing),mg.renderCallByParent(this.props))}}],i=[{key:"renderTickItem",value:function(e,t,n){return a.isValidElement(e)?a.cloneElement(e,t):Mt()(e)?e(t):a.createElement(Zs,vx({},t,{className:"recharts-cartesian-axis-tick-value"}),n)}}],r&&kx(n.prototype,r),i&&kx(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(a.Component);function Ax(e){return Ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ax(e)}function Ox(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fx(r.key),r)}}function Rx(e,t,n){return t=Px(t),function(e,t){if(t&&("object"===Ax(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$x()?Reflect.construct(t,n||[],Px(e).constructor):t.apply(e,n))}function $x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($x=function(){return!!e})()}function Px(e){return Px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Px(e)}function Dx(e,t){return Dx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dx(e,t)}function Mx(e,t,n){return(t=Fx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fx(e){var t=function(e,t){if("object"!=Ax(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ax(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ax(t)?t:t+""}function Lx(){return Lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lx.apply(this,arguments)}function jx(e){var t=e.xAxisId,n=Ay(),r=Oy(),i=_y(t);return null==i?null:a.createElement(Nx,Lx({},i,{className:ct("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(e){return yf(e,!0)}}))}Tx(Nx,"displayName","CartesianAxis"),Tx(Nx,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var zx=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Rx(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dx(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.createElement(jx,this.props)}}])&&Ox(n.prototype,r),i&&Ox(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(a.Component);function Bx(e){return Bx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bx(e)}function Wx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kx(r.key),r)}}function Ux(e,t,n){return t=Gx(t),function(e,t){if(t&&("object"===Bx(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Vx()?Reflect.construct(t,n||[],Gx(e).constructor):t.apply(e,n))}function Vx(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vx=function(){return!!e})()}function Gx(e){return Gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gx(e)}function Hx(e,t){return Hx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hx(e,t)}function qx(e,t,n){return(t=Kx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kx(e){var t=function(e,t){if("object"!=Bx(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Bx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bx(t)?t:t+""}function Xx(){return Xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xx.apply(this,arguments)}Mx(zx,"displayName","XAxis"),Mx(zx,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var Yx=function(e){var t=e.yAxisId,n=Ay(),r=Oy(),i=Ny(t);return null==i?null:a.createElement(Nx,Xx({},i,{className:ct("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(e){return yf(e,!0)}}))},Qx=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ux(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hx(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.createElement(Yx,this.props)}}])&&Wx(n.prototype,r),i&&Wx(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(a.Component);qx(Qx,"displayName","YAxis"),qx(Qx,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var Jx=function(e){var t=e.chartName,n=e.GraphicalChild,r=e.defaultTooltipEventType,i=void 0===r?"axis":r,o=e.validateTooltipEventTypes,s=void 0===o?["axis"]:o,l=e.axisComponents,u=e.legendContent,c=e.formatAxisMap,h=e.defaultProps,d=function(e,t){var n=t.graphicalItems,r=t.stackGroups,i=t.offset,o=t.updateId,a=t.dataStartIndex,s=t.dataEndIndex,u=e.barSize,c=e.layout,h=e.barGap,d=e.barCategoryGap,p=e.maxBarSize,f=zb(c),g=f.numericAxisName,m=f.cateAxisName,y=function(e){return!(!e||!e.length)&&e.some((function(e){var t=Jt(e&&e.type);return t&&t.indexOf("Bar")>=0}))}(n),v=[];return n.forEach((function(n,f){var b=$b(e.data,{graphicalItems:[n],dataStartIndex:a,dataEndIndex:s}),x=void 0!==n.type.defaultProps?Eb(Eb({},n.type.defaultProps),n.props):n.props,w=x.dataKey,k=x.maxBarSize,S=x["".concat(g,"Id")],C=x["".concat(m,"Id")],I=l.reduce((function(e,n){var r=t["".concat(n.axisType,"Map")],i=x["".concat(n.axisType,"Id")];r&&r[i]||"zAxis"===n.axisType||In(!1);var o=r[i];return Eb(Eb({},e),{},Tb(Tb({},n.axisType,o),"".concat(n.axisType,"Ticks"),yf(o)))}),{}),E=I[m],T=I["".concat(m,"Ticks")],_=r&&r[S]&&r[S].hasStack&&function(e,t){var n,r=(null!==(n=e.type)&&void 0!==n&&n.defaultProps?lf(lf({},e.type.defaultProps),e.props):e.props).stackId;if(It(r)){var i=t[r];if(i){var o=i.items.indexOf(e);return o>=0?i.stackedData[o]:null}}return null}(n,r[S].stackGroups),N=Jt(n.type).indexOf("Bar")>=0,A=Nf(E,T),O=[],R=y&&function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,i=void 0===r?{}:r;if(!i)return{};for(var o={},a=Object.keys(i),s=0,l=a.length;s<l;s++)for(var u=i[a[s]].stackGroups,c=Object.keys(u),h=0,d=c.length;h<d;h++){var p=u[c[h]],f=p.items,g=p.cateAxisId,m=f.filter((function(e){return Jt(e.type).indexOf("Bar")>=0}));if(m&&m.length){var y=m[0].type.defaultProps,v=void 0!==y?lf(lf({},y),m[0].props):m[0].props,b=v.barSize,x=v[g];o[x]||(o[x]=[]);var w=Pt()(b)?t:b;o[x].push({item:m[0],stackList:m.slice(1),barSize:Pt()(w)?void 0:_t(w,n,0)})}}return o}({barSize:u,stackGroups:r,totalSize:Wb(I,m)});if(N){var $,P,D=Pt()(k)?p:k,M=null!==($=null!==(P=Nf(E,T,!0))&&void 0!==P?P:D)&&void 0!==$?$:0;O=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,i=e.sizeList,o=void 0===i?[]:i,a=e.maxBarSize,s=o.length;if(s<1)return null;var l,u=_t(t,r,0,!0),c=[];if(o[0].barSize===+o[0].barSize){var h=!1,d=r/s,p=o.reduce((function(e,t){return e+t.barSize||0}),0);(p+=(s-1)*u)>=r&&(p-=(s-1)*u,u=0),p>=r&&d>0&&(h=!0,p=s*(d*=.9));var f={offset:((r-p)/2|0)-u,size:0};l=o.reduce((function(e,t){var n={item:t.item,position:{offset:f.offset+f.size+u,size:h?d:t.barSize}},r=[].concat(of(e),[n]);return f=r[r.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:f})})),r}),c)}else{var g=_t(n,r,0,!0);r-2*g-(s-1)*u<=0&&(u=0);var m=(r-2*g-(s-1)*u)/s;m>1&&(m>>=0);var y=a===+a?Math.min(m,a):m;l=o.reduce((function(e,t,n){var r=[].concat(of(e),[{item:t.item,position:{offset:g+(m+u)*n+(m-y)/2,size:y}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:r[r.length-1].position})})),r}),c)}return l}({barGap:h,barCategoryGap:d,bandSize:M!==A?M:A,sizeList:R[C],maxBarSize:D}),M!==A&&(O=O.map((function(e){return Eb(Eb({},e),{},{position:Eb(Eb({},e.position),{},{offset:e.position.offset-M/2})})})))}var F=n&&n.type&&n.type.getComposedData;F&&v.push({props:Eb(Eb({},F(Eb(Eb({},I),{},{displayedData:b,props:e,dataKey:w,item:n,bandSize:A,barPosition:O,offset:i,stackedData:_,layout:c,dataStartIndex:a,dataEndIndex:s}))),{},Tb(Tb(Tb({key:n.key||"item-".concat(f)},g,I[g]),m,I[m]),"animationId",o)),childIndex:dn(n,e.children),item:n})})),v},p=function(e,r){var i=e.props,o=e.dataStartIndex,a=e.dataEndIndex,s=e.updateId;if(!on({props:i}))return null;var u=i.children,h=i.layout,p=i.stackOffset,f=i.data,g=i.reverseStackOrder,m=zb(h),y=m.numericAxisName,v=m.cateAxisName,b=nn(u,n),x=function(e,t,n,r,i,o){if(!e)return null;var a=(o?t.reverse():t).reduce((function(e,t){var i,o=null!==(i=t.type)&&void 0!==i&&i.defaultProps?lf(lf({},t.type.defaultProps),t.props):t.props,a=o.stackId;if(o.hide)return e;var s=o[n],l=e[s]||{hasStack:!1,stackGroups:{}};if(It(a)){var u=l.stackGroups[a]||{numericAxisId:n,cateAxisId:r,items:[]};u.items.push(t),l.hasStack=!0,l.stackGroups[a]=u}else l.stackGroups[Tt("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return lf(lf({},e),{},uf({},s,l))}),{});return Object.keys(a).reduce((function(t,o){var s=a[o];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce((function(t,o){var a=s.stackGroups[o];return lf(lf({},t),{},uf({},o,{numericAxisId:n,cateAxisId:r,items:a.items,stackedData:kf(e,a.items,i)}))}),{})),lf(lf({},t),{},uf({},o,s))}),{})}(f,b,"".concat(y,"Id"),"".concat(v,"Id"),p,g),w=l.reduce((function(e,t){var n="".concat(t.axisType,"Map");return Eb(Eb({},e),{},Tb({},n,Lb(i,Eb(Eb({},t),{},{graphicalItems:b,stackGroups:t.axisType===y&&x,dataStartIndex:o,dataEndIndex:a}))))}),{}),k=Bb(Eb(Eb({},w),{},{props:i,graphicalItems:b}),null===r||void 0===r?void 0:r.legendBBox);Object.keys(w).forEach((function(e){w[e]=c(i,w[e],k,e.replace("Map",""),t)}));var S=function(e){var t=Nt(e),n=yf(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Sn()(n,(function(e){return e.coordinate})),tooltipAxis:t,tooltipAxisBandSize:Nf(t,n)}}(w["".concat(v,"Map")]),C=d(i,Eb(Eb({},w),{},{dataStartIndex:o,dataEndIndex:a,updateId:s,graphicalItems:b,stackGroups:x,offset:k}));return Eb(Eb({formattedGraphicalItems:C,graphicalItems:b,offset:k,stackGroups:x},S),w)},f=function(e){function n(e){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Tb(o=vb(this,n,[e]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Tb(o,"accessibilityManager",new gv),Tb(o,"handleLegendBBoxUpdate",(function(e){if(e){var t=o.state,n=t.dataStartIndex,r=t.dataEndIndex,i=t.updateId;o.setState(Eb({legendBBox:e},p({props:o.props,dataStartIndex:n,dataEndIndex:r,updateId:i},Eb(Eb({},o.state),{},{legendBBox:e}))))}})),Tb(o,"handleReceiveSyncEvent",(function(e,t,n){if(o.props.syncId===e){if(n===o.eventEmitterSymbol&&"function"!==typeof o.props.syncMethod)return;o.applySyncEvent(t)}})),Tb(o,"handleBrushChange",(function(e){var t=e.startIndex,n=e.endIndex;if(t!==o.state.dataStartIndex||n!==o.state.dataEndIndex){var r=o.state.updateId;o.setState((function(){return Eb({dataStartIndex:t,dataEndIndex:n},p({props:o.props,dataStartIndex:t,dataEndIndex:n,updateId:r},o.state))})),o.triggerSyncEvent({dataStartIndex:t,dataEndIndex:n})}})),Tb(o,"handleMouseEnter",(function(e){var t=o.getMouseInfo(e);if(t){var n=Eb(Eb({},t),{},{isTooltipActive:!0});o.setState(n),o.triggerSyncEvent(n);var r=o.props.onMouseEnter;Mt()(r)&&r(n,e)}})),Tb(o,"triggeredAfterMouseMove",(function(e){var t=o.getMouseInfo(e),n=t?Eb(Eb({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};o.setState(n),o.triggerSyncEvent(n);var r=o.props.onMouseMove;Mt()(r)&&r(n,e)})),Tb(o,"handleItemMouseEnter",(function(e){o.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))})),Tb(o,"handleItemMouseLeave",(function(){o.setState((function(){return{isTooltipActive:!1}}))})),Tb(o,"handleMouseMove",(function(e){e.persist(),o.throttleTriggeredAfterMouseMove(e)})),Tb(o,"handleMouseLeave",(function(e){o.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};o.setState(t),o.triggerSyncEvent(t);var n=o.props.onMouseLeave;Mt()(n)&&n(t,e)})),Tb(o,"handleOuterEvent",(function(e){var t,n=function(e){var t=e&&e.type;return t&&Qt[t]?Qt[t]:null}(e),r=bt()(o.props,"".concat(n));n&&Mt()(r)&&r(null!==(t=/.*touch.*/i.test(n)?o.getMouseInfo(e.changedTouches[0]):o.getMouseInfo(e))&&void 0!==t?t:{},e)})),Tb(o,"handleClick",(function(e){var t=o.getMouseInfo(e);if(t){var n=Eb(Eb({},t),{},{isTooltipActive:!0});o.setState(n),o.triggerSyncEvent(n);var r=o.props.onClick;Mt()(r)&&r(n,e)}})),Tb(o,"handleMouseDown",(function(e){var t=o.props.onMouseDown;Mt()(t)&&t(o.getMouseInfo(e),e)})),Tb(o,"handleMouseUp",(function(e){var t=o.props.onMouseUp;Mt()(t)&&t(o.getMouseInfo(e),e)})),Tb(o,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.throttleTriggeredAfterMouseMove(e.changedTouches[0])})),Tb(o,"handleTouchStart",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.handleMouseDown(e.changedTouches[0])})),Tb(o,"handleTouchEnd",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.handleMouseUp(e.changedTouches[0])})),Tb(o,"triggerSyncEvent",(function(e){void 0!==o.props.syncId&&uv.emit(cv,o.props.syncId,e,o.eventEmitterSymbol)})),Tb(o,"applySyncEvent",(function(e){var t=o.props,n=t.layout,r=t.syncMethod,i=o.state.updateId,a=e.dataStartIndex,s=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)o.setState(Eb({dataStartIndex:a,dataEndIndex:s},p({props:o.props,dataStartIndex:a,dataEndIndex:s,updateId:i},o.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,u=e.chartY,c=e.activeTooltipIndex,h=o.state,d=h.offset,f=h.tooltipTicks;if(!d)return;if("function"===typeof r)c=r(f,e);else if("value"===r){c=-1;for(var g=0;g<f.length;g++)if(f[g].value===e.activeLabel){c=g;break}}var m=Eb(Eb({},d),{},{x:d.left,y:d.top}),y=Math.min(l,m.x+m.width),v=Math.min(u,m.y+m.height),b=f[c]&&f[c].value,x=Db(o.state,o.props.data,c),w=f[c]?{x:"horizontal"===n?f[c].coordinate:y,y:"horizontal"===n?v:f[c].coordinate}:Ob;o.setState(Eb(Eb({},e),{},{activeLabel:b,activeCoordinate:w,activePayload:x,activeTooltipIndex:c}))}else o.setState(e)})),Tb(o,"renderCursor",(function(e){var n,r=o.state,i=r.isTooltipActive,s=r.activeCoordinate,l=r.activePayload,u=r.offset,c=r.activeTooltipIndex,h=r.tooltipAxisBandSize,d=o.getTooltipEventType(),p=null!==(n=e.props.active)&&void 0!==n?n:i,f=o.props.layout,g=e.key||"_recharts-cursor";return a.createElement(cb,{key:g,activeCoordinate:s,activePayload:l,activeTooltipIndex:c,chartName:t,element:e,isActive:p,layout:f,offset:u,tooltipAxisBandSize:h,tooltipEventType:d})})),Tb(o,"renderPolarAxis",(function(e,t,n){var r=bt()(e,"type.axisType"),i=bt()(o.state,"".concat(r,"Map")),s=e.type.defaultProps,l=void 0!==s?Eb(Eb({},s),e.props):e.props,u=i&&i[l["".concat(r,"Id")]];return(0,a.cloneElement)(e,Eb(Eb({},u),{},{className:ct(r,u.className),key:e.key||"".concat(t,"-").concat(n),ticks:yf(u,!0)}))})),Tb(o,"renderPolarGrid",(function(e){var t=e.props,n=t.radialLines,r=t.polarAngles,i=t.polarRadius,s=o.state,l=s.radiusAxisMap,u=s.angleAxisMap,c=Nt(l),h=Nt(u),d=h.cx,p=h.cy,f=h.innerRadius,g=h.outerRadius;return(0,a.cloneElement)(e,{polarAngles:Array.isArray(r)?r:yf(h,!0).map((function(e){return e.coordinate})),polarRadius:Array.isArray(i)?i:yf(c,!0).map((function(e){return e.coordinate})),cx:d,cy:p,innerRadius:f,outerRadius:g,key:e.key||"polar-grid",radialLines:n})})),Tb(o,"renderLegend",(function(){var e=o.state.formattedGraphicalItems,t=o.props,n=t.children,r=t.width,i=t.height,s=o.props.margin||{},l=r-(s.left||0)-(s.right||0),c=nf({children:n,formattedGraphicalItems:e,legendWidth:l,legendContent:u});if(!c)return null;var h=c.item,d=mb(c,hb);return(0,a.cloneElement)(h,Eb(Eb({},d),{},{chartWidth:r,chartHeight:i,margin:s,onBBoxUpdate:o.handleLegendBBoxUpdate}))})),Tb(o,"renderTooltip",(function(){var e,t=o.props,n=t.children,r=t.accessibilityLayer,i=rn(n,wr);if(!i)return null;var s=o.state,l=s.isTooltipActive,u=s.activeCoordinate,c=s.activePayload,h=s.activeLabel,d=s.offset,p=null!==(e=i.props.active)&&void 0!==e?e:l;return(0,a.cloneElement)(i,{viewBox:Eb(Eb({},d),{},{x:d.left,y:d.top}),active:p,label:h,payload:p?c:[],coordinate:u,accessibilityLayer:r})})),Tb(o,"renderBrush",(function(e){var t=o.props,n=t.margin,r=t.data,i=o.state,s=i.offset,l=i.dataStartIndex,u=i.dataEndIndex,c=i.updateId;return(0,a.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:bf(o.handleBrushChange,e.props.onChange),data:r,x:Ct(e.props.x)?e.props.x:s.left,y:Ct(e.props.y)?e.props.y:s.top+s.height+s.brushBottom-(n.bottom||0),width:Ct(e.props.width)?e.props.width:s.width,startIndex:l,endIndex:u,updateId:"brush-".concat(c)})})),Tb(o,"renderReferenceElement",(function(e,t,n){if(!e)return null;var r=o.clipPathId,i=o.state,s=i.xAxisMap,l=i.yAxisMap,u=i.offset,c=e.type.defaultProps||{},h=e.props,d=h.xAxisId,p=void 0===d?c.xAxisId:d,f=h.yAxisId,g=void 0===f?c.yAxisId:f;return(0,a.cloneElement)(e,{key:e.key||"".concat(t,"-").concat(n),xAxis:s[p],yAxis:l[g],viewBox:{x:u.left,y:u.top,width:u.width,height:u.height},clipPathId:r})})),Tb(o,"renderActivePoints",(function(e){var t=e.item,r=e.activePoint,i=e.basePoint,o=e.childIndex,a=e.isRange,s=[],l=t.props.key,u=void 0!==t.item.type.defaultProps?Eb(Eb({},t.item.type.defaultProps),t.item.props):t.item.props,c=u.activeDot,h=Eb(Eb({index:o,dataKey:u.dataKey,cx:r.x,cy:r.y,r:4,fill:df(t.item),strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},ln(c,!1)),Gt(c));return s.push(n.renderActiveDot(c,h,"".concat(l,"-activePoint-").concat(o))),i?s.push(n.renderActiveDot(c,Eb(Eb({},h),{},{cx:i.x,cy:i.y}),"".concat(l,"-basePoint-").concat(o))):a&&s.push(null),s})),Tb(o,"renderGraphicChild",(function(e,t,n){var r=o.filterFormatItem(e,t,n);if(!r)return null;var i=o.getTooltipEventType(),s=o.state,l=s.isTooltipActive,u=s.tooltipAxis,c=s.activeTooltipIndex,h=s.activeLabel,d=rn(o.props.children,wr),p=r.props,f=p.points,g=p.isRange,m=p.baseLine,y=void 0!==r.item.type.defaultProps?Eb(Eb({},r.item.type.defaultProps),r.item.props):r.item.props,v=y.activeDot,b=y.hide,x=y.activeBar,w=y.activeShape,k=Boolean(!b&&l&&d&&(v||x||w)),S={};"axis"!==i&&d&&"click"===d.props.trigger?S={onClick:bf(o.handleItemMouseEnter,e.props.onClick)}:"axis"!==i&&(S={onMouseLeave:bf(o.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:bf(o.handleItemMouseEnter,e.props.onMouseEnter)});var C=(0,a.cloneElement)(e,Eb(Eb({},r.props),S));if(k){if(!(c>=0)){var I,E=(null!==(I=o.getItemByXY(o.state.activeCoordinate))&&void 0!==I?I:{graphicalItem:C}).graphicalItem,T=E.item,_=void 0===T?e:T,N=E.childIndex,A=Eb(Eb(Eb({},r.props),S),{},{activeIndex:N});return[(0,a.cloneElement)(_,A),null,null]}var O,R;if(u.dataKey&&!u.allowDuplicatedCategory){var $="function"===typeof u.dataKey?function(e){return"function"===typeof u.dataKey?u.dataKey(e.payload):null}:"payload.".concat(u.dataKey.toString());O=Ot(f,$,h),R=g&&m&&Ot(m,$,h)}else O=null===f||void 0===f?void 0:f[c],R=g&&m&&m[c];if(w||x){var P=void 0!==e.props.activeIndex?e.props.activeIndex:c;return[(0,a.cloneElement)(e,Eb(Eb(Eb({},r.props),S),{},{activeIndex:P})),null,null]}if(!Pt()(O))return[C].concat(kb(o.renderActivePoints({item:r,activePoint:O,basePoint:R,childIndex:c,isRange:g})))}return g?[C,null,null]:[C,null]})),Tb(o,"renderCustomized",(function(e,t,n){return(0,a.cloneElement)(e,Eb(Eb({key:"recharts-customized-".concat(n)},o.props),o.state))})),Tb(o,"renderMap",{CartesianGrid:{handler:Rb,once:!0},ReferenceArea:{handler:o.renderReferenceElement},ReferenceLine:{handler:Rb},ReferenceDot:{handler:o.renderReferenceElement},XAxis:{handler:Rb},YAxis:{handler:Rb},Brush:{handler:o.renderBrush,once:!0},Bar:{handler:o.renderGraphicChild},Line:{handler:o.renderGraphicChild},Area:{handler:o.renderGraphicChild},Radar:{handler:o.renderGraphicChild},RadialBar:{handler:o.renderGraphicChild},Scatter:{handler:o.renderGraphicChild},Pie:{handler:o.renderGraphicChild},Funnel:{handler:o.renderGraphicChild},Tooltip:{handler:o.renderCursor,once:!0},PolarGrid:{handler:o.renderPolarGrid,once:!0},PolarAngleAxis:{handler:o.renderPolarAxis},PolarRadiusAxis:{handler:o.renderPolarAxis},Customized:{handler:o.renderCustomized}}),o.clipPathId="".concat(null!==(r=e.id)&&void 0!==r?r:Tt("recharts"),"-clip"),o.throttleTriggeredAfterMouseMove=dt()(o.triggeredAfterMouseMove,null!==(i=e.throttleDelay)&&void 0!==i?i:1e3/60),o.state={},o}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wb(e,t)}(n,e),r=n,o=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,n=e.data,r=e.height,i=e.layout,o=rn(t,wr);if(o){var a=o.props.defaultIndex;if(!("number"!==typeof a||a<0||a>this.state.tooltipTicks.length)){var s=this.state.tooltipTicks[a]&&this.state.tooltipTicks[a].value,l=Db(this.state,n,a,s),u=this.state.tooltipTicks[a].coordinate,c=(this.state.offset.top+r)/2,h="horizontal"===i?{x:u,y:c}:{y:u,x:c},d=this.state.formattedGraphicalItems.find((function(e){return"Scatter"===e.item.type.name}));d&&(h=Eb(Eb({},h),d.props.points[a].tooltipPosition),l=d.props.points[a].tooltipPayload);var p={activeTooltipIndex:a,isTooltipActive:!0,activeLabel:s,activePayload:l,activeCoordinate:h};this.setState(p),this.renderCursor(o),this.accessibilityManager.setIndex(a)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}}),null):null;var n,r}},{key:"componentDidUpdate",value:function(e){un([rn(e.children,wr)],[rn(this.props.children,wr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=rn(this.props.children,wr);if(e&&"boolean"===typeof e.props.shared){var t=e.props.shared?"axis":"item";return s.indexOf(t)>=0?t:i}return i}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n=this.container,r=n.getBoundingClientRect(),i={top:(t=r).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},o={chartX:Math.round(e.pageX-i.left),chartY:Math.round(e.pageY-i.top)},a=r.width/n.offsetWidth||1,s=this.inRange(o.chartX,o.chartY,a);if(!s)return null;var l=this.state,u=l.xAxisMap,c=l.yAxisMap;if("axis"!==this.getTooltipEventType()&&u&&c){var h=Nt(u).scale,d=Nt(c).scale,p=h&&h.invert?h.invert(o.chartX):null,f=d&&d.invert?d.invert(o.chartY):null;return Eb(Eb({},o),{},{xValue:p,yValue:f})}var g=Mb(this.state,this.props.data,this.props.layout,s);return g?Eb(Eb({},o),g):null}},{key:"inRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,i=e/n,o=t/n;if("horizontal"===r||"vertical"===r){var a=this.state.offset;return i>=a.left&&i<=a.left+a.width&&o>=a.top&&o<=a.top+a.height?{x:i,y:o}:null}var s=this.state,l=s.angleAxisMap,u=s.radiusAxisMap;if(l&&u){var c=Nt(l);return og({x:i,y:o},c)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=rn(e,wr),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}),Eb(Eb({},Gt(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){uv.on(cv,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){uv.removeListener(cv,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,i=0,o=r.length;i<o;i++){var a=r[i];if(a.item===e||a.props.key===e.key||t===Jt(a.item.type)&&n===a.childIndex)return a}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,n=t.left,r=t.top,i=t.height,o=t.width;return a.createElement("defs",null,a.createElement("clipPath",{id:e},a.createElement("rect",{x:n,y:r,height:i,width:o})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=gb(t,2),r=n[0],i=n[1];return Eb(Eb({},e),{},Tb({},r,i.scale))}),{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=gb(t,2),r=n[0],i=n[1];return Eb(Eb({},e),{},Tb({},r,i.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,n=t.formattedGraphicalItems,r=t.activeItem;if(n&&n.length)for(var i=0,o=n.length;i<o;i++){var a=n[i],s=a.props,l=a.item,u=void 0!==l.type.defaultProps?Eb(Eb({},l.type.defaultProps),l.props):l.props,c=Jt(l.type);if("Bar"===c){var h=(s.data||[]).find((function(t){return ns(e,t)}));if(h)return{graphicalItem:a,payload:h}}else if("RadialBar"===c){var d=(s.data||[]).find((function(t){return og(e,t)}));if(d)return{graphicalItem:a,payload:d}}else if(mm(a,r)||ym(a,r)||vm(a,r)){var p=km({graphicalItem:a,activeTooltipItem:r,itemData:u.data}),f=void 0===u.activeIndex?p:u.activeIndex;return{graphicalItem:Eb(Eb({},a),{},{childIndex:f}),payload:vm(a,r)?u.data[p]:a.props.data[p]}}}return null}},{key:"render",value:function(){var e=this;if(!on(this))return null;var t,n,r=this.props,i=r.children,o=r.className,s=r.width,l=r.height,u=r.style,c=r.compact,h=r.title,d=r.desc,p=mb(r,db),f=ln(p,!1);if(c)return a.createElement(Ty,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},a.createElement(Nn,fb({},f,{width:s,height:l,title:h,desc:d}),this.renderClipPath(),hn(i,this.renderMap)));this.props.accessibilityLayer&&(f.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,f.role=null!==(n=this.props.role)&&void 0!==n?n:"application",f.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},f.onFocus=function(){e.accessibilityManager.focus()});var g=this.parseEventsOfWrapper();return a.createElement(Ty,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},a.createElement("div",fb({className:ct("recharts-wrapper",o),style:Eb({position:"relative",cursor:"default",width:s,height:l},u)},g,{ref:function(t){e.container=t}}),a.createElement(Nn,fb({},f,{width:s,height:l,title:h,desc:d,style:Ab}),this.renderClipPath(),hn(i,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],o&&yb(r.prototype,o),l&&yb(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,l}(a.Component);return Tb(f,"displayName",t),Tb(f,"defaultProps",Eb({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Tb(f,"getDerivedStateFromProps",(function(e,t){var n=e.dataKey,r=e.data,i=e.children,o=e.width,a=e.height,s=e.layout,l=e.stackOffset,u=e.margin,c=t.dataStartIndex,h=t.dataEndIndex;if(void 0===t.updateId){var d=jb(e);return Eb(Eb(Eb({},d),{},{updateId:0},p(Eb(Eb({props:e},d),{},{updateId:0}),t)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:a,prevLayout:s,prevStackOffset:l,prevMargin:u,prevChildren:i})}if(n!==t.prevDataKey||r!==t.prevData||o!==t.prevWidth||a!==t.prevHeight||s!==t.prevLayout||l!==t.prevStackOffset||!jt(u,t.prevMargin)){var f=jb(e),g={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},m=Eb(Eb({},Mb(t,r,s)),{},{updateId:t.updateId+1}),y=Eb(Eb(Eb({},f),g),m);return Eb(Eb(Eb({},y),p(Eb({props:e},y),t)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:a,prevLayout:s,prevStackOffset:l,prevMargin:u,prevChildren:i})}if(!un(i,t.prevChildren)){var v,b,x,w,k=rn(i,Xf),S=k&&null!==(v=null===(b=k.props)||void 0===b?void 0:b.startIndex)&&void 0!==v?v:c,C=k&&null!==(x=null===(w=k.props)||void 0===w?void 0:w.endIndex)&&void 0!==x?x:h,I=S!==c||C!==h,E=!Pt()(r)&&!I?t.updateId:t.updateId+1;return Eb(Eb({updateId:E},p(Eb(Eb({props:e},t),{},{updateId:E,dataStartIndex:S,dataEndIndex:C}),t)),{},{prevChildren:i,dataStartIndex:S,dataEndIndex:C})}return null})),Tb(f,"renderActiveDot",(function(e,t,n){var r;return r=(0,a.isValidElement)(e)?(0,a.cloneElement)(e,t):Mt()(e)?e(t):a.createElement(Fi,t),a.createElement($n,{className:"recharts-active-dot",key:n},r)})),function(e){return a.createElement(f,e)}}({chartName:"LineChart",GraphicalChild:ox,axisComponents:[{axisType:"xAxis",AxisComp:zx},{axisType:"yAxis",AxisComp:Qx}],formatAxisMap:function(t,n,r,i,o){var a=t.width,s=t.height,l=t.layout,u=t.children,c=Object.keys(n),h={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},d=!!rn(u,Hm);return c.reduce((function(a,s){var u,c,p,f,g,m=n[s],y=m.orientation,v=m.domain,b=m.padding,x=void 0===b?{}:b,w=m.mirror,k=m.reversed,S="".concat(y).concat(w?"Mirror":"");if("number"===m.type&&("gap"===m.padding||"no-gap"===m.padding)){var C=v[1]-v[0],I=1/0,E=m.categoricalDomain.sort();if(E.forEach((function(e,t){t>0&&(I=Math.min((e||0)-(E[t-1]||0),I))})),Number.isFinite(I)){var T=I/C,_="vertical"===m.layout?r.height:r.width;if("gap"===m.padding&&(u=T*_/2),"no-gap"===m.padding){var N=_t(t.barCategoryGap,T*_),A=T*_/2;u=A-N-(A-N)/_*N}}}c="xAxis"===i?[r.left+(x.left||0)+(u||0),r.left+r.width-(x.right||0)-(u||0)]:"yAxis"===i?"horizontal"===l?[r.top+r.height-(x.bottom||0),r.top+(x.top||0)]:[r.top+(x.top||0)+(u||0),r.top+r.height-(x.bottom||0)-(u||0)]:m.range,k&&(c=[c[1],c[0]]);var O=function(t,n,r){var i=t.scale,o=t.type,a=t.layout,s=t.axisType;if("auto"===i)return"radial"===a&&"radiusAxis"===s?{scale:fs(),realScaleType:"band"}:"radial"===a&&"angleAxis"===s?{scale:Lu(),realScaleType:"linear"}:"category"===o&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:ms(),realScaleType:"point"}:"category"===o?{scale:fs(),realScaleType:"band"}:{scale:Lu(),realScaleType:"linear"};if(gt()(i)){var l="scale".concat(Sr()(i));return{scale:(e[l]||ms)(),realScaleType:e[l]?l:"point"}}return Mt()(i)?{scale:i}:{scale:ms(),realScaleType:"point"}}(m,o,d),R=O.scale,$=O.realScaleType;R.domain(v).range(c),function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-xf,o=Math.max(r[0],r[1])+xf,a=e(t[0]),s=e(t[n-1]);(a<i||a>o||s<i||s>o)&&e.domain([t[0],t[n-1]])}}(R);var P=function(e,t){var n=t.realScaleType,r=t.type,i=t.tickCount,o=t.originalDomain,a=t.allowDecimals,s=n||t.scale;if("auto"!==s&&"linear"!==s)return null;if(i&&"number"===r&&o&&("auto"===o[0]||"auto"===o[1])){var l=e.domain();if(!l.length)return null;var u=Mp(l,i,a);return e.domain([ip()(u),np()(u)]),{niceTicks:u}}if(i&&"number"===r){var c=e.domain();return{niceTicks:Fp(c,i,a)}}return null}(R,Ym(Ym({},m),{},{realScaleType:$}));"xAxis"===i?(g="top"===y&&!w||"bottom"===y&&w,p=r.left,f=h[S]-g*m.height):"yAxis"===i&&(g="left"===y&&!w||"right"===y&&w,p=h[S]-g*m.width,f=r.top);var D=Ym(Ym(Ym({},m),P),{},{realScaleType:$,x:p,y:f,scale:R,width:"xAxis"===i?r.width:m.width,height:"yAxis"===i?r.height:m.height});return D.bandSize=Nf(D,P),m.hide||"xAxis"!==i?m.hide||(h[S]+=(g?-1:1)*D.width):h[S]+=(g?-1:1)*D.height,Ym(Ym({},a),{},Qm({},s,D))}),{})}}),Zx=["x1","y1","x2","y2","key"],ew=["offset"];function tw(e){return tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tw(e)}function nw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nw(Object(n),!0).forEach((function(t){iw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iw(e,t,n){return t=function(e){var t=function(e,t){if("object"!=tw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tw(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ow(){return ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ow.apply(this,arguments)}function aw(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var sw=function(e){var t=e.fill;if(!t||"none"===t)return null;var n=e.fillOpacity,r=e.x,i=e.y,o=e.width,s=e.height;return a.createElement("rect",{x:r,y:i,width:o,height:s,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function lw(e,t){var n;if(a.isValidElement(e))n=a.cloneElement(e,t);else if(Mt()(e))n=e(t);else{var r=t.x1,i=t.y1,o=t.x2,s=t.y2,l=t.key,u=aw(t,Zx),c=ln(u,!1),h=(c.offset,aw(c,ew));n=a.createElement("line",ow({},h,{x1:r,y1:i,x2:o,y2:s,fill:"none",key:l}))}return n}function uw(e){var t=e.x,n=e.width,r=e.horizontal,i=void 0===r||r,o=e.horizontalPoints;if(!i||!o||!o.length)return null;var s=o.map((function(r,o){var a=rw(rw({},e),{},{x1:t,y1:r,x2:t+n,y2:r,key:"line-".concat(o),index:o});return lw(i,a)}));return a.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function cw(e){var t=e.y,n=e.height,r=e.vertical,i=void 0===r||r,o=e.verticalPoints;if(!i||!o||!o.length)return null;var s=o.map((function(r,o){var a=rw(rw({},e),{},{x1:r,y1:t,x2:r,y2:t+n,key:"line-".concat(o),index:o});return lw(i,a)}));return a.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function hw(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,o=e.width,s=e.height,l=e.horizontalPoints,u=e.horizontal;if(!(void 0===u||u)||!t||!t.length)return null;var c=l.map((function(e){return Math.round(e+i-i)})).sort((function(e,t){return e-t}));i!==c[0]&&c.unshift(0);var h=c.map((function(e,l){var u=!c[l+1]?i+s-e:c[l+1]-e;if(u<=0)return null;var h=l%t.length;return a.createElement("rect",{key:"react-".concat(l),y:e,x:r,height:u,width:o,stroke:"none",fill:t[h],fillOpacity:n,className:"recharts-cartesian-grid-bg"})}));return a.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function dw(e){var t=e.vertical,n=void 0===t||t,r=e.verticalFill,i=e.fillOpacity,o=e.x,s=e.y,l=e.width,u=e.height,c=e.verticalPoints;if(!n||!r||!r.length)return null;var h=c.map((function(e){return Math.round(e+o-o)})).sort((function(e,t){return e-t}));o!==h[0]&&h.unshift(0);var d=h.map((function(e,t){var n=!h[t+1]?o+l-e:h[t+1]-e;if(n<=0)return null;var c=t%r.length;return a.createElement("rect",{key:"react-".concat(t),x:e,y:s,width:n,height:u,stroke:"none",fill:r[c],fillOpacity:i,className:"recharts-cartesian-grid-bg"})}));return a.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var pw=function(e,t){var n=e.xAxis,r=e.width,i=e.height,o=e.offset;return mf(px(rw(rw(rw({},Nx.defaultProps),n),{},{ticks:yf(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),o.left,o.left+o.width,t)},fw=function(e,t){var n=e.yAxis,r=e.width,i=e.height,o=e.offset;return mf(px(rw(rw(rw({},Nx.defaultProps),n),{},{ticks:yf(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),o.top,o.top+o.height,t)},gw={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function mw(e){var t,n,r,i,o,s,l=Ay(),u=Oy(),c=(0,a.useContext)(Sy),h=rw(rw({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:gw.stroke,fill:null!==(n=e.fill)&&void 0!==n?n:gw.fill,horizontal:null!==(r=e.horizontal)&&void 0!==r?r:gw.horizontal,horizontalFill:null!==(i=e.horizontalFill)&&void 0!==i?i:gw.horizontalFill,vertical:null!==(o=e.vertical)&&void 0!==o?o:gw.vertical,verticalFill:null!==(s=e.verticalFill)&&void 0!==s?s:gw.verticalFill,x:Ct(e.x)?e.x:c.left,y:Ct(e.y)?e.y:c.top,width:Ct(e.width)?e.width:c.width,height:Ct(e.height)?e.height:c.height}),d=h.x,p=h.y,f=h.width,g=h.height,m=h.syncWithTicks,y=h.horizontalValues,v=h.verticalValues,b=function(){var e=(0,a.useContext)(xy);return Nt(e)}(),x=function(){var e=(0,a.useContext)(wy);return yy()(e,(function(e){return kg()(e.domain,Number.isFinite)}))||Nt(e)}();if(!Ct(f)||f<=0||!Ct(g)||g<=0||!Ct(d)||d!==+d||!Ct(p)||p!==+p)return null;var w=h.verticalCoordinatesGenerator||pw,k=h.horizontalCoordinatesGenerator||fw,S=h.horizontalPoints,C=h.verticalPoints;if((!S||!S.length)&&Mt()(k)){var I=y&&y.length,E=k({yAxis:x?rw(rw({},x),{},{ticks:I?y:x.ticks}):void 0,width:l,height:u,offset:c},!!I||m);Rt(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(tw(E),"]")),Array.isArray(E)&&(S=E)}if((!C||!C.length)&&Mt()(w)){var T=v&&v.length,_=w({xAxis:b?rw(rw({},b),{},{ticks:T?v:b.ticks}):void 0,width:l,height:u,offset:c},!!T||m);Rt(Array.isArray(_),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(tw(_),"]")),Array.isArray(_)&&(C=_)}return a.createElement("g",{className:"recharts-cartesian-grid"},a.createElement(sw,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height}),a.createElement(uw,ow({},h,{offset:c,horizontalPoints:S,xAxis:b,yAxis:x})),a.createElement(cw,ow({},h,{offset:c,verticalPoints:C,xAxis:b,yAxis:x})),a.createElement(hw,ow({},h,{horizontalPoints:S})),a.createElement(dw,ow({},h,{verticalPoints:C})))}mw.displayName="CartesianGrid";const yw=!1,vw=!1,bw="${JSCORE_VERSION}",xw=function(e,t){if(!e)throw ww(t)},ww=function(e){return new Error("Firebase Database ("+bw+") INTERNAL ASSERT FAILED: "+e)},kw=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Sw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,u=t>>2,c=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;s||(d=64,o||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(kw(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const s=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==s)throw new Cw;const l=t<<2|o>>4;if(r.push(l),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Cw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Iw=function(e){const t=kw(e);return Sw.encodeByteArray(t,!0)},Ew=function(e){return Iw(e).replace(/\./g,"")},Tw=function(e){try{return Sw.decodeString(e,!0)}catch(ie){console.error("base64Decode failed: ",ie)}return null};function _w(e){return Nw(void 0,e)}function Nw(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Nw(e[n],t[n]));return e}const Aw=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ow=()=>{try{return Aw()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAMXGdN7KPADMrjsSzQ34petfqgwMemM_g",REACT_APP_Things_Speak_Read_key:"5U2YJLA0KF45NB6C",REACT_APP_Things_Speak_Write_Key:"BD0ETD9Q5UN4013P"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(ie){return}const t=e&&Tw(e[1]);return t&&JSON.parse(t)})()}catch(ie){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ie}`)}},Rw=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Ow())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},$w=()=>{var e;return null===(e=Ow())||void 0===e?void 0:e.config};class Pw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Dw(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ew(JSON.stringify({alg:"none",type:"JWT"})),Ew(JSON.stringify(o)),""].join(".")}function Mw(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Fw(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mw())}function Lw(){return!0===yw||!0===vw}function jw(){return!function(){var e;const t=null===(e=Ow())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(ie){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zw(){try{return"object"===typeof indexedDB}catch(ie){return!1}}function Bw(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(bI){t(bI)}}))}class Ww extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ww.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uw.prototype.create)}}class Uw{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Vw,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new Ww(n,o,t)}}const Vw=/\{\$([^}]+)}/g;function Gw(e){return JSON.parse(e)}function Hw(e){return JSON.stringify(e)}const qw=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=Gw(Tw(o[0])||""),n=Gw(Tw(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(ie){}return{header:t,claims:n,data:r,signature:i}};function Kw(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xw(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Yw(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Qw(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Jw(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(Zw(n)&&Zw(o)){if(!Jw(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Zw(e){return null!==e&&"object"===typeof e}class ek{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let c=0;c<16;c++)n[c]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let c=0;c<16;c++)n[c]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let c=16;c<80;c++){const e=n[c-3]^n[c-8]^n[c-14]^n[c-16];n[c]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],a=this.chain_[1],s=this.chain_[2],l=this.chain_[3],u=this.chain_[4];for(let c=0;c<80;c++){c<40?c<20?(r=l^a&(s^l),i=1518500249):(r=a^s^l,i=1859775393):c<60?(r=a&s|l&(a|s),i=2400959708):(r=a^s^l,i=3395469782);const e=(o<<5|o>>>27)+r+u+i+n[c]&4294967295;u=l,l=s,s=4294967295&(a<<30|a>>>2),a=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function tk(e,t){return`${e} failed: ${t} argument `}const nk=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function rk(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function ik(e){return e&&e._delegate?e._delegate:e}class ok{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ak="[DEFAULT]";class sk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Pw;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(ie){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(ie){if(r)return null;throw ie}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ak})}catch(ie){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(ie){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ak;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ak;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ak;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lk(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ak;return this.component?this.component.multipleInstances?e:ak:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function lk(e){return e===ak?void 0:e}class uk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ck=[];var hk;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(hk||(hk={}));const dk={debug:hk.DEBUG,verbose:hk.VERBOSE,info:hk.INFO,warn:hk.WARN,error:hk.ERROR,silent:hk.SILENT},pk=hk.INFO,fk={[hk.DEBUG]:"log",[hk.VERBOSE]:"log",[hk.INFO]:"info",[hk.WARN]:"warn",[hk.ERROR]:"error"},gk=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=fk[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...o)};class mk{constructor(e){this.name=e,this._logLevel=pk,this._logHandler=gk,this._userLogHandler=null,ck.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in hk))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?dk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,hk.DEBUG,...t),this._logHandler(this,hk.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,hk.VERBOSE,...t),this._logHandler(this,hk.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,hk.INFO,...t),this._logHandler(this,hk.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,hk.WARN,...t),this._logHandler(this,hk.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,hk.ERROR,...t),this._logHandler(this,hk.ERROR,...t)}}let yk,vk;const bk=new WeakMap,xk=new WeakMap,wk=new WeakMap,kk=new WeakMap,Sk=new WeakMap;let Ck={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return xk.get(e);if("objectStoreNames"===t)return e.objectStoreNames||wk.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tk(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ik(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(vk||(vk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(_k(this),n),Tk(bk.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Tk(e.apply(_k(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(_k(this),t,...r);return wk.set(o,t.sort?t.sort():[t]),Tk(o)}}function Ek(e){return"function"===typeof e?Ik(e):(e instanceof IDBTransaction&&function(e){if(xk.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));xk.set(e,t)}(e),((e,t)=>t.some((t=>e instanceof t)))(e,yk||(yk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ck):e)}function Tk(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Tk(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&bk.set(t,e)})).catch((()=>{})),Sk.set(t,e),t}(e);if(kk.has(e))return kk.get(e);const t=Ek(e);return t!==e&&(kk.set(e,t),Sk.set(t,e)),t}const _k=e=>Sk.get(e);function Nk(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=Tk(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(Tk(a.result),e.oldVersion,e.newVersion,Tk(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}const Ak=["get","getKey","getAll","getAllKeys","count"],Ok=["put","add","delete","clear"],Rk=new Map;function $k(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Rk.get(t))return Rk.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ok.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ak.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return Rk.set(t,o),o}Ck=(e=>({...e,get:(t,n,r)=>$k(t,n)||e.get(t,n,r),has:(t,n)=>!!$k(t,n)||e.has(t,n)}))(Ck);class Pk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Dk="@firebase/app",Mk="0.10.12",Fk=new mk("@firebase/app"),Lk="@firebase/app-compat",jk="@firebase/analytics-compat",zk="@firebase/analytics",Bk="@firebase/app-check-compat",Wk="@firebase/app-check",Uk="@firebase/auth",Vk="@firebase/auth-compat",Gk="@firebase/database",Hk="@firebase/data-connect",qk="@firebase/database-compat",Kk="@firebase/functions",Xk="@firebase/functions-compat",Yk="@firebase/installations",Qk="@firebase/installations-compat",Jk="@firebase/messaging",Zk="@firebase/messaging-compat",eS="@firebase/performance",tS="@firebase/performance-compat",nS="@firebase/remote-config",rS="@firebase/remote-config-compat",iS="@firebase/storage",oS="@firebase/storage-compat",aS="@firebase/firestore",sS="@firebase/vertexai-preview",lS="@firebase/firestore-compat",uS="firebase",cS="[DEFAULT]",hS={[Dk]:"fire-core",[Lk]:"fire-core-compat",[zk]:"fire-analytics",[jk]:"fire-analytics-compat",[Wk]:"fire-app-check",[Bk]:"fire-app-check-compat",[Uk]:"fire-auth",[Vk]:"fire-auth-compat",[Gk]:"fire-rtdb",[Hk]:"fire-data-connect",[qk]:"fire-rtdb-compat",[Kk]:"fire-fn",[Xk]:"fire-fn-compat",[Yk]:"fire-iid",[Qk]:"fire-iid-compat",[Jk]:"fire-fcm",[Zk]:"fire-fcm-compat",[eS]:"fire-perf",[tS]:"fire-perf-compat",[nS]:"fire-rc",[rS]:"fire-rc-compat",[iS]:"fire-gcs",[oS]:"fire-gcs-compat",[aS]:"fire-fst",[lS]:"fire-fst-compat",[sS]:"fire-vertex","fire-js":"fire-js",[uS]:"fire-js-all"},dS=new Map,pS=new Map,fS=new Map;function gS(e,t){try{e.container.addComponent(t)}catch(ie){Fk.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,ie)}}function mS(e){const t=e.name;if(fS.has(t))return Fk.debug(`There were multiple attempts to register component ${t}.`),!1;fS.set(t,e);for(const n of dS.values())gS(n,e);for(const n of pS.values())gS(n,e);return!0}function yS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const vS=new Uw("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class bS{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ok("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vS.create("app-deleted",{appName:this._name})}}const xS="10.14.0";function wS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:cS,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw vS.create("bad-app-name",{appName:String(i)});if(n||(n=$w()),!n)throw vS.create("no-options");const o=dS.get(i);if(o){if(Jw(n,o.options)&&Jw(r,o.config))return o;throw vS.create("duplicate-app",{appName:i})}const a=new uk(i);for(const l of fS.values())a.addComponent(l);const s=new bS(n,r,a);return dS.set(i,s),s}function kS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cS;const t=dS.get(e);if(!t&&e===cS&&$w())return wS();if(!t)throw vS.create("no-app",{appName:e});return t}function SS(e,t,n){var r;let i=null!==(r=hS[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Fk.warn(e.join(" "))}mS(new ok(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const CS="firebase-heartbeat-store";let IS=null;function ES(){return IS||(IS=Nk("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(CS)}catch(ie){console.warn(ie)}}}).catch((e=>{throw vS.create("idb-open",{originalErrorMessage:e.message})}))),IS}async function TS(e,t){try{const n=(await ES()).transaction(CS,"readwrite"),r=n.objectStore(CS);await r.put(t,_S(e)),await n.done}catch(ie){if(ie instanceof Ww)Fk.warn(ie.message);else{const t=vS.create("idb-set",{originalErrorMessage:null===ie||void 0===ie?void 0:ie.message});Fk.warn(t.message)}}}function _S(e){return`${e.name}!${e.options.appId}`}class NS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new OS(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=AS();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(ie){Fk.warn(ie)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=AS(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),RS(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),RS(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ew(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(ie){return Fk.warn(ie),""}}}function AS(){return(new Date).toISOString().substring(0,10)}class OS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!zw()&&Bw().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ES()).transaction(CS),n=await t.objectStore(CS).get(_S(e));return await t.done,n}catch(ie){if(ie instanceof Ww)Fk.warn(ie.message);else{const t=vS.create("idb-get",{originalErrorMessage:null===ie||void 0===ie?void 0:ie.message});Fk.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return TS(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return TS(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function RS(e){return Ew(JSON.stringify({version:2,heartbeats:e})).length}var $S;$S="",mS(new ok("platform-logger",(e=>new Pk(e)),"PRIVATE")),mS(new ok("heartbeat",(e=>new NS(e)),"PRIVATE")),SS(Dk,Mk,$S),SS(Dk,Mk,"esm2017"),SS("fire-js","");SS("firebase","10.14.0","app");const PS="@firebase/installations",DS="0.6.9",MS=1e4,FS=`w:${DS}`,LS="FIS_v2",jS=36e5,zS=new Uw("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function BS(e){return e instanceof Ww&&e.code.includes("request-failed")}function WS(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function US(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function VS(e,t){const n=(await t.json()).error;return zS.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function GS(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function HS(e,t){let{refreshToken:n}=t;const r=GS(e);return r.append("Authorization",function(e){return`${LS} ${e}`}(n)),r}async function qS(e){const t=await e();return t.status>=500&&t.status<600?e():t}function KS(e){return new Promise((t=>{setTimeout(t,e)}))}const XS=/^[cdef][\w-]{21}$/;function YS(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=function(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}(e);return t.substr(0,22)}(e);return XS.test(t)?t:""}catch(e){return""}}function QS(e){return`${e.appName}!${e.appId}`}const JS=new Map;function ZS(e,t){const n=QS(e);eC(n,t),function(e,t){const n=nC();n&&n.postMessage({key:e,fid:t});rC()}(n,t)}function eC(e,t){const n=JS.get(e);if(n)for(const r of n)r(t)}let tC=null;function nC(){return!tC&&"BroadcastChannel"in self&&(tC=new BroadcastChannel("[Firebase] FID Change"),tC.onmessage=e=>{eC(e.data.key,e.data.fid)}),tC}function rC(){0===JS.size&&tC&&(tC.close(),tC=null)}const iC="firebase-installations-store";let oC=null;function aC(){return oC||(oC=Nk("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(iC)}})),oC}async function sC(e,t){const n=QS(e),r=(await aC()).transaction(iC,"readwrite"),i=r.objectStore(iC),o=await i.get(n);return await i.put(t,n),await r.done,o&&o.fid===t.fid||ZS(e,t.fid),t}async function lC(e){const t=QS(e),n=(await aC()).transaction(iC,"readwrite");await n.objectStore(iC).delete(t),await n.done}async function uC(e,t){const n=QS(e),r=(await aC()).transaction(iC,"readwrite"),i=r.objectStore(iC),o=await i.get(n),a=t(o);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||o&&o.fid===a.fid||ZS(e,a.fid),a}async function cC(e){let t;const n=await uC(e.appConfig,(n=>{const r=function(e){const t=e||{fid:YS(),registrationStatus:0};return pC(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(zS.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const o=WS(n),a=GS(n),s=r.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:LS,appId:n.appId,sdkVersion:FS},u={method:"POST",headers:a,body:JSON.stringify(l)},c=await qS((()=>fetch(o,u)));if(c.ok){const e=await c.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:US(e.authToken)}}throw await VS("Create Installation",c)}(e,t);return sC(e.appConfig,n)}catch(ie){throw BS(ie)&&409===ie.customData.serverCode?await lC(e.appConfig):await sC(e.appConfig,{fid:t.fid,registrationStatus:0}),ie}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:hC(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function hC(e){let t=await dC(e.appConfig);for(;1===t.registrationStatus;)await KS(100),t=await dC(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await cC(e);return n||t}return t}function dC(e){return uC(e,(e=>{if(!e)throw zS.create("installation-not-found");return pC(e)}))}function pC(e){return 1===(t=e).registrationStatus&&t.registrationTime+MS<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function fC(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${WS(e)}/${n}/authTokens:generate`}(n,t),o=HS(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const s={installation:{sdkVersion:FS,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(s)},u=await qS((()=>fetch(i,l)));if(u.ok){return US(await u.json())}throw await VS("Generate Auth Token",u)}async function gC(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await uC(e.appConfig,(r=>{if(!yC(r))throw zS.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+jS}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await mC(e.appConfig);for(;1===n.authToken.requestStatus;)await KS(100),n=await mC(e.appConfig);const r=n.authToken;return 0===r.requestStatus?gC(e,t):r}(e,n),r;{if(!navigator.onLine)throw zS.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await fC(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await sC(e.appConfig,r),n}catch(ie){if(!BS(ie)||401!==ie.customData.serverCode&&404!==ie.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await sC(e.appConfig,n)}else await lC(e.appConfig);throw ie}}(e,n),n}}));return t?await t:r.authToken}function mC(e){return uC(e,(e=>{if(!yC(e))throw zS.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+MS<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function yC(e){return void 0!==e&&2===e.registrationStatus}async function vC(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await cC(e);t&&await t}(n);return(await gC(n,t)).token}function bC(e){return zS.create("missing-app-config-values",{valueName:e})}const xC="installations",wC=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw bC("App Configuration");if(!e.name)throw bC("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw bC(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:yS(t,"heartbeat"),_delete:()=>Promise.resolve()}},kC=e=>{const t=yS(e.getProvider("app").getImmediate(),xC).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await cC(t);return r?r.catch(console.error):gC(t).catch(console.error),n.fid}(t),getToken:e=>vC(t,e)}};mS(new ok(xC,wC,"PUBLIC")),mS(new ok("installations-internal",kC,"PRIVATE")),SS(PS,DS),SS(PS,DS,"esm2017");const SC="analytics",CC="https://www.googletagmanager.com/gtag/js",IC=new mk("@firebase/analytics"),EC=new Uw("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function TC(e){if(!e.startsWith(CC)){const t=EC.create("invalid-gtag-resource",{gtagURL:e});return IC.warn(t.message),""}return e}function _C(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function NC(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:TC}),r=document.createElement("script"),i=`${CC}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function AC(e,t,n,r){return async function(i){try{for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let o=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await _C(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){o=[];break}o.push(i)}}0===o.length&&(o=Object.values(t)),await Promise.all(o),e("event",r,i||{})}catch(ie){IC.error(ie)}}(e,t,n,r,i)}else if("config"===i){const[i,o]=a;await async function(e,t,n,r,i,o){const a=r[i];try{if(a)await t[a];else{const e=(await _C(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(ie){IC.error(ie)}e("config",i,o)}(e,t,n,r,i,o)}else if("consent"===i){const[t,n]=a;e("consent",t,n)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(ie){IC.error(ie)}}}const OC=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function RC(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function $C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:OC,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw EC.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw EC.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new DC;return setTimeout((async()=>{s.abort()}),void 0!==n?n:6e4),PC({appId:r,apiKey:i,measurementId:o},a,s,t)}async function PC(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:OC;var a;const{appId:s,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(o),r(EC.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(ie){if(l)return IC.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===ie||void 0===ie?void 0:ie.message}]`),{appId:s,measurementId:l};throw ie}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:RC(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(o,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(s){}throw EC.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return o.deleteThrottleMetadata(s),t}catch(ie){const r=ie;if(!function(e){if(!(e instanceof Ww)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(o.deleteThrottleMetadata(s),l)return IC.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===r||void 0===r?void 0:r.message}]`),{appId:s,measurementId:l};throw ie}const u=503===Number(null===(a=null===r||void 0===r?void 0:r.customData)||void 0===a?void 0:a.httpStatus)?rk(i,o.intervalMillis,30):rk(i,o.intervalMillis),c={throttleEndTimeMillis:Date.now()+u,backoffCount:i+1};return o.setThrottleMetadata(s,c),IC.debug(`Calling attemptFetch again in ${u} millis`),PC(e,c,n,o)}}class DC{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let MC,FC;function LC(e){FC=e}function jC(e){MC=e}async function zC(e,t,n,r,i,o,a){var s;const l=$C(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&IC.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>IC.error(e))),t.push(l);const u=async function(){if(!zw())return IC.warn(EC.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Bw()}catch(ie){return IC.warn(EC.create("indexeddb-unavailable",{errorInfo:null===ie||void 0===ie?void 0:ie.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[c,h]=await Promise.all([l,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(CC)&&n.src.includes(e))return n;return null})(o)||NC(o,c.measurementId),FC&&(i("consent","default",FC),LC(void 0)),i("js",new Date);const d=null!==(s=null===a||void 0===a?void 0:a.config)&&void 0!==s?s:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",c.measurementId,d),MC&&(i("set",MC),jC(void 0)),c.measurementId}class BC{constructor(e){this.app=e}_delete(){return delete WC[this.app.options.appId],Promise.resolve()}}let WC={},UC=[];const VC={};let GC,HC,qC="dataLayer",KC="gtag",XC=!1;function YC(){const e=[];if(function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=EC.create("invalid-analytics-context",{errorInfo:t});IC.warn(n.message)}}function QC(e,t,n){YC();const r=e.options.appId;if(!r)throw EC.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw EC.create("no-api-key");IC.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=WC[r])throw EC.create("already-exists",{id:r});if(!XC){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(qC);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=AC(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(WC,UC,VC,qC,KC);HC=e,GC=t,XC=!0}WC[r]=zC(e,UC,VC,t,GC,qC,n);return new BC(e)}function JC(e,t,n,r){e=ik(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(HC,WC[e.app.options.appId],t,n,r).catch((e=>IC.error(e)))}const ZC="@firebase/analytics",eI="0.10.8";mS(new ok(SC,((e,t)=>{let{options:n}=t;return QC(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),mS(new ok("analytics-internal",(function(e){try{const t=e.getProvider(SC).getImmediate();return{logEvent:(e,n,r)=>JC(t,e,n,r)}}catch(ie){throw EC.create("interop-component-reg-failed",{reason:ie})}}),"PRIVATE")),SS(ZC,eI),SS(ZC,eI,"esm2017");const tI="@firebase/database",nI="1.0.8";let rI="";function iI(e){rI=e}class oI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Hw(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Gw(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class aI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Kw(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const sI=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new oI(t)}}catch(ie){}return new aI},lI=sI("localStorage"),uI=sI("sessionStorage"),cI=new mk("@firebase/database"),hI=function(){let e=1;return function(){return e++}}(),dI=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,xw(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ek;n.update(t);const r=n.digest();return Sw.encodeByteArray(r)},pI=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=pI.apply(null,n):e+="object"===typeof n?Hw(n):n,e+=" "}return e};let fI=null,gI=!0;const mI=function(e,t){xw(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(cI.logLevel=hk.VERBOSE,fI=cI.log.bind(cI),t&&uI.set("logging_enabled",!0)):"function"===typeof e?fI=e:(fI=null,uI.remove("logging_enabled"))},yI=function(){if(!0===gI&&(gI=!1,null===fI&&!0===uI.get("logging_enabled")&&mI(!0)),fI){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=pI.apply(null,t);fI(r)}},vI=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];yI(e,...n)}},bI=function(){const e="FIREBASE INTERNAL ERROR: "+pI(...arguments);cI.error(e)},xI=function(){const e=`FIREBASE FATAL ERROR: ${pI(...arguments)}`;throw cI.error(e),new Error(e)},wI=function(){const e="FIREBASE WARNING: "+pI(...arguments);cI.warn(e)},kI=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},SI="[MIN_NAME]",CI="[MAX_NAME]",II=function(e,t){if(e===t)return 0;if(e===SI||t===CI)return-1;if(t===SI||e===CI)return 1;{const n=$I(e),r=$I(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},EI=function(e,t){return e===t?0:e<t?-1:1},TI=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Hw(t))},_I=function(e){if("object"!==typeof e||null===e)return Hw(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Hw(t[r]),n+=":",n+=_I(e[t[r]]);return n+="}",n},NI=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function AI(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const OI=function(e){xw(!kI(e),"Invalid JSON number");const t=1023;let n,r,i,o,a;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=o+t,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const s=[];for(a=52;a;a-=1)s.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);s.push(n?1:0),s.reverse();const l=s.join("");let u="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()};const RI=new RegExp("^-?(0*)\\d{1,10}$"),$I=function(e){if(RI.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},PI=function(e){try{e()}catch(ie){setTimeout((()=>{const t=ie.stack||"";throw wI("Exception was thrown by user callback.",t),ie}),Math.floor(0))}},DI=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class MI{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){wI(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class FI{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(yI("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',wI(e)}}class LI{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}LI.OWNER="owner";const jI="5",zI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,BI="ac",WI="websocket",UI="long_polling";class VI{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=s,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=lI.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&lI.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function GI(e,t,n){let r;if(xw("string"===typeof t,"typeof type must == string"),xw("object"===typeof n,"typeof params must == object"),t===WI)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==UI)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return AI(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class HI{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Kw(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return _w(this.counters_)}}const qI={},KI={};function XI(e){const t=e.toString();return qI[t]||(qI[t]=new HI),qI[t]}class YI{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&PI((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const QI="start";class JI{constructor(e,t,n,r,i,o,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vI(e),this.stats_=XI(t),this.urlFn=e=>(this.appCheckToken&&(e[BI]=this.appCheckToken),GI(t,UI,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new YI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Lw()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new ZI((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o,a,s,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===QI)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[QI]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=jI,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[BI]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&zI.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){JI.forceAllow_=!0}static forceDisallow(){JI.forceDisallow_=!0}static isAvailable(){return!Lw()&&(!!JI.forceAllow_||!JI.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Hw(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Iw(t),r=NI(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Lw())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Hw(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ZI{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Lw())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=hI(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ZI.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(ie){yI("frame writing exception"),ie.stack&&yI(ie.stack),yI(ie)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||yI("No IE domain setting required")}catch(ie){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Lw()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{yI("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(ie){}}),Math.floor(1))}}let eE=null;"undefined"!==typeof MozWebSocket?eE=MozWebSocket:"undefined"!==typeof WebSocket&&(eE=WebSocket);class tE{constructor(e,t,n,r,i,o,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vI(this.connId),this.stats_=XI(t),this.connURL=tE.connectionURL_(t,o,a,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={};return o.v=jI,!Lw()&&"undefined"!==typeof location&&location.hostname&&zI.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[BI]=r),i&&(o.p=i),GI(e,WI,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,lI.set("previous_websocket_failure",!0);try{let e;if(Lw()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${jI}/${rI}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAMXGdN7KPADMrjsSzQ34petfqgwMemM_g",REACT_APP_Things_Speak_Read_key:"5U2YJLA0KF45NB6C",REACT_APP_Things_Speak_Write_Key:"BD0ETD9Q5UN4013P"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new eE(this.connURL,[],e)}catch(ie){this.log_("Error instantiating WebSocket.");const t=ie.message||ie.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){tE.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==eE&&!tE.forceDisallow_}static previouslyFailed(){return lI.isInMemoryStorage||!0===lI.get("previous_websocket_failure")}markConnectionHealthy(){lI.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Gw(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(xw(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Hw(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=NI(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(ie){this.log_("Exception thrown from WebSocket.send():",ie.message||ie.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}tE.responsesRequiredToBeHealthy=2,tE.healthyTimeout=3e4;class nE{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[JI,tE]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=tE&&tE.isAvailable();let n=t&&!tE.previouslyFailed();if(e.webSocketOnly&&(t||wI("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[tE];else{const e=this.transports_=[];for(const t of nE.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);nE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}nE.globalTransportInitialized_=!1;class rE{constructor(e,t,n,r,i,o,a,s,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vI("c:"+this.id+":"),this.transportManager_=new nE(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=DI((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=TI("t",e),n=TI("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=TI("t",e),n=TI("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=TI("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?bI("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bI("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),jI!==n&&wI("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),DI((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):DI((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(lI.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class iE{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class oE{constructor(e){this.allowedEvents_=e,this.listeners_={},xw(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){xw(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class aE extends oE{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Fw()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new aE}getInitialEvent(e){return xw("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class sE{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function lE(){return new sE("")}function uE(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function cE(e){return e.pieces_.length-e.pieceNum_}function hE(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new sE(e.pieces_,t)}function dE(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function pE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function fE(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new sE(t,0)}function gE(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof sE)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new sE(n,0)}function mE(e){return e.pieceNum_>=e.pieces_.length}function yE(e,t){const n=uE(e),r=uE(t);if(null===n)return t;if(n===r)return yE(hE(e),hE(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function vE(e,t){if(cE(e)!==cE(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function bE(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(cE(e)>cE(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class xE{constructor(e,t){this.errorPrefix_=t,this.parts_=pE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=nk(this.parts_[n]);wE(this)}}function wE(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+kE(e))}function kE(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class SE extends oE{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new SE}getInitialEvent(e){return xw("visible"===e,"Unknown event type: "+e),[this.visible_]}}const CE=1e3;class IE extends iE{constructor(e,t,n,r,i,o,a,s){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=s,this.id=IE.nextPersistentConnectionId_++,this.log_=vI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=CE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,s&&!Lw())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");SE.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&aE.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Hw(i)),xw(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Pw,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),xw(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),xw(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,a=i.s;IE.warnOnListenWarnings_(o,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==a&&this.removeListen_(n,r),e.onComplete&&e.onComplete(a,o))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&Kw(e,"w")){const n=Xw(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();wI(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=qw(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=qw(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),xw(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Hw(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):bI("Unrecognized action received from server: "+Hw(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){xw(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=CE,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=CE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=CE),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+IE.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const s=function(){a?a.close():(o=!0,n())},l=function(e){xw(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:s,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[s,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?yI("getToken() completed but was canceled"):(yI("getToken() completed. Creating connection."),this.authToken_=s&&s.accessToken,this.appCheckToken_=l&&l.token,a=new rE(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{wI(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(bI){this.log_("Failed to get token: "+bI),o||(this.repoInfo_.nodeAdmin&&wI(bI),s())}}}interrupt(e){yI("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){yI("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Yw(this.interruptReasons_)&&(this.reconnectDelay_=CE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>_I(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new sE(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){yI("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){yI("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Lw()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+rI.replace(/\./g,"-")]=1,Fw()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=aE.getInstance().currentlyOnline();return Yw(this.interruptReasons_)&&e}}IE.nextPersistentConnectionId_=0,IE.nextConnectionId_=0;class EE{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new EE(e,t)}}class TE{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new EE(SI,e),r=new EE(SI,t);return 0!==this.compare(n,r)}minPost(){return EE.MIN}}let _E;class NE extends TE{static get __EMPTY_NODE(){return _E}static set __EMPTY_NODE(e){_E=e}compare(e,t){return II(e.name,t.name)}isDefinedOn(e){throw ww("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return EE.MIN}maxPost(){return new EE(CI,_E)}makePost(e,t){return xw("string"===typeof e,"KeyIndex indexValue must always be a string."),new EE(e,_E)}toString(){return".key"}}const AE=new NE;class OE{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class RE{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:RE.RED,this.left=null!=r?r:$E.EMPTY_NODE,this.right=null!=i?i:$E.EMPTY_NODE}copy(e,t,n,r,i){return new RE(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return $E.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return $E.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,RE.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,RE.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}RE.RED=!0,RE.BLACK=!1;class $E{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$E.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new $E(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,RE.BLACK,null,null))}remove(e){return new $E(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,RE.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new OE(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new OE(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new OE(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new OE(this.root_,null,this.comparator_,!0,e)}}function PE(e,t){return II(e.name,t.name)}function DE(e,t){return II(e,t)}let ME;$E.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new RE(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const FE=function(e){return"number"===typeof e?"number:"+OI(e):"string:"+e},LE=function(e){if(e.isLeafNode()){const t=e.val();xw("string"===typeof t||"number"===typeof t||"object"===typeof t&&Kw(t,".sv"),"Priority must be a string or number.")}else xw(e===ME||e.isEmpty(),"priority of unexpected type.");xw(e===ME||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let jE,zE,BE;class WE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WE.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,xw(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),LE(this.priorityNode_)}static set __childrenNodeConstructor(e){jE=e}static get __childrenNodeConstructor(){return jE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new WE(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:WE.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return mE(e)?this:".priority"===uE(e)?this.priorityNode_:WE.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:WE.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=uE(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(xw(".priority"!==n||1===cE(e),".priority must be the last token in a path"),this.updateImmediateChild(n,WE.__childrenNodeConstructor.EMPTY_NODE.updateChild(hE(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+FE(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?OI(this.value_):this.value_,this.lazyHash_=dI(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===WE.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof WE.__childrenNodeConstructor?-1:(xw(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=WE.VALUE_TYPE_ORDER.indexOf(t),i=WE.VALUE_TYPE_ORDER.indexOf(n);return xw(r>=0,"Unknown leaf type: "+t),xw(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}WE.VALUE_TYPE_ORDER=["object","boolean","number","string"];const UE=new class extends TE{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?II(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return EE.MIN}maxPost(){return new EE(CI,new WE("[PRIORITY-POST]",BE))}makePost(e,t){const n=zE(e);return new EE(t,new WE("[PRIORITY-POST]",n))}toString(){return".priority"}},VE=Math.log(2);class GE{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/VE,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const HE=function(e,t,n,r){e.sort(t);const i=function(t,r){const o=r-t;let a,s;if(0===o)return null;if(1===o)return a=e[t],s=n?n(a):a,new RE(s,a.node,RE.BLACK,null,null);{const l=parseInt(o/2,10)+t,u=i(t,l),c=i(l+1,r);return a=e[l],s=n?n(a):a,new RE(s,a.node,RE.BLACK,u,c)}},o=function(t){let r=null,o=null,a=e.length;const s=function(t,r){const o=a-t,s=a;a-=t;const u=i(o+1,s),c=e[o],h=n?n(c):c;l(new RE(h,c.node,r,null,u))},l=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?s(r,RE.BLACK):(s(r,RE.BLACK),s(r,RE.RED))}return o}(new GE(e.length));return new $E(r||t,o)};let qE;const KE={};class XE{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return xw(KE&&UE,"ChildrenNode.ts has not been loaded"),qE=qE||new XE({".priority":KE},{".priority":UE}),qE}get(e){const t=Xw(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof $E?t:null}hasIndex(e){return Kw(this.indexSet_,e.toString())}addIndex(e,t){xw(e!==AE,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(EE.Wrap);let o,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();o=r?HE(n,e.getCompare()):KE;const s=e.toString(),l=Object.assign({},this.indexSet_);l[s]=e;const u=Object.assign({},this.indexes_);return u[s]=o,new XE(u,l)}addToIndexes(e,t){const n=Qw(this.indexes_,((n,r)=>{const i=Xw(this.indexSet_,r);if(xw(i,"Missing index implementation for "+r),n===KE){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(EE.Wrap);let o=r.getNext();for(;o;)o.name!==e.name&&n.push(o),o=r.getNext();return n.push(e),HE(n,i.getCompare())}return KE}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new EE(e.name,r))),i.insert(e,e.node)}}));return new XE(n,this.indexSet_)}removeFromIndexes(e,t){const n=Qw(this.indexes_,(n=>{if(n===KE)return n;{const r=t.get(e.name);return r?n.remove(new EE(e.name,r)):n}}));return new XE(n,this.indexSet_)}}let YE;class QE{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&LE(this.priorityNode_),this.children_.isEmpty()&&xw(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return YE||(YE=new QE(new $E(DE),null,XE.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||YE}updatePriority(e){return this.children_.isEmpty()?this:new QE(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?YE:t}}getChild(e){const t=uE(e);return null===t?this:this.getImmediateChild(t).getChild(hE(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(xw(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new EE(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const o=r.isEmpty()?YE:this.priorityNode_;return new QE(r,o,i)}}updateChild(e,t){const n=uE(e);if(null===n)return t;{xw(".priority"!==uE(e)||1===cE(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(hE(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(UE,((o,a)=>{t[o]=a.val(e),n++,i&&QE.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+FE(this.getPriority().val())+":"),this.forEachChild(UE,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":dI(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new EE(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new EE(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new EE(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,EE.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,EE.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===JE?-1:0}withIndex(e){if(e===AE||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new QE(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===AE||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(UE),n=t.getIterator(UE);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===AE?null:this.indexMap_.get(e.toString())}}QE.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const JE=new class extends QE{constructor(){super(new $E(DE),QE.EMPTY_NODE,XE.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return QE.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(EE,{MIN:{value:new EE(SI,QE.EMPTY_NODE)},MAX:{value:new EE(CI,JE)}}),NE.__EMPTY_NODE=QE.EMPTY_NODE,WE.__childrenNodeConstructor=QE,ME=JE,function(e){BE=e}(JE);function ZE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return QE.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),xw(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new WE(e,ZE(t))}if(e instanceof Array){let n=QE.EMPTY_NODE;return AI(e,((t,r)=>{if(Kw(e,t)&&"."!==t.substring(0,1)){const e=ZE(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(ZE(t))}{const n=[];let r=!1;if(AI(e,((e,t)=>{if("."!==e.substring(0,1)){const i=ZE(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new EE(e,i)))}})),0===n.length)return QE.EMPTY_NODE;const i=HE(n,PE,(e=>e.name),DE);if(r){const e=HE(n,UE.getCompare());return new QE(i,ZE(t),new XE({".priority":e},{".priority":UE}))}return new QE(i,ZE(t),XE.Default)}}!function(e){zE=e}(ZE);class eT extends TE{constructor(e){super(),this.indexPath_=e,xw(!mE(e)&&".priority"!==uE(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?II(e.name,t.name):i}makePost(e,t){const n=ZE(e),r=QE.EMPTY_NODE.updateChild(this.indexPath_,n);return new EE(t,r)}maxPost(){const e=QE.EMPTY_NODE.updateChild(this.indexPath_,JE);return new EE(CI,e)}toString(){return pE(this.indexPath_,0).join("/")}}const tT=new class extends TE{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?II(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return EE.MIN}maxPost(){return EE.MAX}makePost(e,t){const n=ZE(e);return new EE(t,n)}toString(){return".value"}};function nT(e){return{type:"value",snapshotNode:e}}function rT(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function iT(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function oT(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class aT{constructor(e){this.index_=e}updateChild(e,t,n,r,i,o){xw(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(iT(t,a)):xw(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(rT(t,n)):o.trackChildChange(oT(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(UE,((e,r)=>{t.hasChild(e)||n.trackChildChange(iT(e,r))})),t.isLeafNode()||t.forEachChild(UE,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(oT(t,r,i))}else n.trackChildChange(rT(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?QE.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class sT{constructor(e){this.indexedFilter_=new aT(e.getIndex()),this.index_=e.getIndex(),this.startPost_=sT.getStartPost_(e),this.endPost_=sT.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,o){return this.matches(new EE(t,n))||(n=QE.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=QE.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(QE.EMPTY_NODE);const i=this;return t.forEachChild(UE,((e,t)=>{i.matches(new EE(e,t))||(r=r.updateImmediateChild(e,QE.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class lT{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new sT(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,o){return this.rangedFilter_.matches(new EE(t,n))||(n=QE.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=QE.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=QE.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(QE.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,QE.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let o;if(this.reverse_){const e=this.index_.getCompare();o=(t,n)=>e(n,t)}else o=this.index_.getCompare();const a=e;xw(a.numChildren()===this.limit_,"");const s=new EE(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(s);if(a.hasChild(t)){const e=a.getImmediateChild(t);let c=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=c&&(c.name===t||a.hasChild(c.name));)c=r.getChildAfterChild(this.index_,c,this.reverse_);const h=null==c?1:o(c,s);if(u&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(oT(t,n,e)),a.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(iT(t,e));const n=a.updateImmediateChild(t,QE.EMPTY_NODE);return null!=c&&this.rangedFilter_.matches(c)?(null!=i&&i.trackChildChange(rT(c.name,c.node)),n.updateImmediateChild(c.name,c.node)):n}}return n.isEmpty()?e:u&&o(l,s)>=0?(null!=i&&(i.trackChildChange(iT(l.name,l.node)),i.trackChildChange(rT(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(l.name,QE.EMPTY_NODE)):e}}class uT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=UE}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return xw(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return xw(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:SI}hasEnd(){return this.endSet_}getIndexEndValue(){return xw(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return xw(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:CI}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return xw(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===UE}copy(){const e=new uT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function cT(e){const t={};if(e.isDefault())return t;let n;if(e.index_===UE?n="$priority":e.index_===tT?n="$value":e.index_===AE?n="$key":(xw(e.index_ instanceof eT,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Hw(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Hw(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Hw(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Hw(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Hw(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function hT(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==UE&&(t.i=e.index_.toString()),t}class dT extends iE{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=vI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(xw(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=dT.getListenId_(e,n),a={};this.listens_[o]=a;const s=cT(e._queryParams);this.restRequest_(i+".json",s,((e,t)=>{let s=t;if(404===e&&(s=null,e=null),null===e&&this.onDataUpdate_(i,s,!1,n),Xw(this.listens_,o)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=dT.getListenId_(e,t);delete this.listens_[n]}get(e){const t=cT(e._queryParams),n=e._path.toString(),r=new Pw;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,o]=r;i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}(t);this.log_("Sending REST request for "+a);const s=new XMLHttpRequest;s.onreadystatechange=()=>{if(n&&4===s.readyState){this.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);let e=null;if(s.status>=200&&s.status<300){try{e=Gw(s.responseText)}catch(ie){wI("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,e)}else 401!==s.status&&404!==s.status&&wI("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()}))}}class pT{constructor(){this.rootNode_=QE.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function fT(){return{value:null,children:new Map}}function gT(e,t,n){if(mE(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=uE(t);e.children.has(r)||e.children.set(r,fT());gT(e.children.get(r),t=hE(t),n)}}function mT(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{mT(r,new sE(t.toString()+"/"+e),n)}))}class yT{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&AI(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class vT{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new yT(e);const n=1e4+2e4*Math.random();DI(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;AI(e,((e,r)=>{r>0&&Kw(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),DI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var bT;function xT(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(bT||(bT={}));class wT{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=bT.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(mE(this.path)){if(null!=this.affectedTree.value)return xw(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new sE(e));return new wT(lE(),t,this.revert)}}return xw(uE(this.path)===e,"operationForChild called for unrelated child."),new wT(hE(this.path),this.affectedTree,this.revert)}}class kT{constructor(e,t){this.source=e,this.path=t,this.type=bT.LISTEN_COMPLETE}operationForChild(e){return mE(this.path)?new kT(this.source,lE()):new kT(this.source,hE(this.path))}}class ST{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=bT.OVERWRITE}operationForChild(e){return mE(this.path)?new ST(this.source,lE(),this.snap.getImmediateChild(e)):new ST(this.source,hE(this.path),this.snap)}}class CT{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=bT.MERGE}operationForChild(e){if(mE(this.path)){const t=this.children.subtree(new sE(e));return t.isEmpty()?null:t.value?new ST(this.source,lE(),t.value):new CT(this.source,lE(),t)}return xw(uE(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new CT(this.source,hE(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class IT{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(mE(e))return this.isFullyInitialized()&&!this.filtered_;const t=uE(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class ET{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function TT(e,t,n,r,i,o){const a=r.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw ww("Should only compare child_ events.");const r=new EE(t.childName,t.snapshotNode),i=new EE(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),a.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function _T(e,t){return{eventCache:e,serverCache:t}}function NT(e,t,n,r){return _T(new IT(t,n,r),e.serverCache)}function AT(e,t,n,r){return _T(e.eventCache,new IT(t,n,r))}function OT(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function RT(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let $T;class PT{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:($T||($T=new $E(EI)),$T);this.value=e,this.children=t}static fromObject(e){let t=new PT(null);return AI(e,((e,n)=>{t=t.set(new sE(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:lE(),value:this.value};if(mE(e))return null;{const n=uE(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(hE(e),t);if(null!=i){return{path:gE(new sE(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(mE(e))return this;{const t=uE(e),n=this.children.get(t);return null!==n?n.subtree(hE(e)):new PT(null)}}set(e,t){if(mE(e))return new PT(t,this.children);{const n=uE(e),r=(this.children.get(n)||new PT(null)).set(hE(e),t),i=this.children.insert(n,r);return new PT(this.value,i)}}remove(e){if(mE(e))return this.children.isEmpty()?new PT(null):new PT(null,this.children);{const t=uE(e),n=this.children.get(t);if(n){const r=n.remove(hE(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new PT(null):new PT(this.value,i)}return this}}get(e){if(mE(e))return this.value;{const t=uE(e),n=this.children.get(t);return n?n.get(hE(e)):null}}setTree(e,t){if(mE(e))return t;{const n=uE(e),r=(this.children.get(n)||new PT(null)).setTree(hE(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new PT(this.value,i)}}fold(e){return this.fold_(lE(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(gE(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,lE(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(mE(e))return null;{const r=uE(e),i=this.children.get(r);return i?i.findOnPath_(hE(e),gE(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,lE(),t)}foreachOnPath_(e,t,n){if(mE(e))return this;{this.value&&n(t,this.value);const r=uE(e),i=this.children.get(r);return i?i.foreachOnPath_(hE(e),gE(t,r),n):new PT(null)}}foreach(e){this.foreach_(lE(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(gE(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class DT{constructor(e){this.writeTree_=e}static empty(){return new DT(new PT(null))}}function MT(e,t,n){if(mE(t))return new DT(new PT(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const a=yE(i,t);return o=o.updateChild(a,n),new DT(e.writeTree_.set(i,o))}{const r=new PT(n),i=e.writeTree_.setTree(t,r);return new DT(i)}}}function FT(e,t,n){let r=e;return AI(n,((e,n)=>{r=MT(r,gE(t,e),n)})),r}function LT(e,t){if(mE(t))return DT.empty();{const n=e.writeTree_.setTree(t,new PT(null));return new DT(n)}}function jT(e,t){return null!=zT(e,t)}function zT(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(yE(n.path,t)):null}function BT(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(UE,((e,n)=>{t.push(new EE(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new EE(e,n.value))})),t}function WT(e,t){if(mE(t))return e;{const n=zT(e,t);return new DT(null!=n?new PT(n):e.writeTree_.subtree(t))}}function UT(e){return e.writeTree_.isEmpty()}function VT(e,t){return GT(lE(),e.writeTree_,t)}function GT(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(xw(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=GT(gE(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(gE(e,".priority"),r)),n}}function HT(e,t){return o_(t,e)}function qT(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));xw(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&KT(t,r.path)?i=!1:bE(r.path,t.path)&&(o=!0)),a--}if(i){if(o)return function(e){e.visibleWrites=YT(e.allWrites,XT,lE()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=LT(e.visibleWrites,r.path);else{AI(r.children,(t=>{e.visibleWrites=LT(e.visibleWrites,gE(r.path,t))}))}return!0}return!1}function KT(e,t){if(e.snap)return bE(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&bE(gE(e.path,n),t))return!0;return!1}function XT(e){return e.visible}function YT(e,t,n){let r=DT.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const e=o.path;let t;if(o.snap)bE(n,e)?(t=yE(n,e),r=MT(r,t,o.snap)):bE(e,n)&&(t=yE(e,n),r=MT(r,lE(),o.snap.getChild(t)));else{if(!o.children)throw ww("WriteRecord should have .snap or .children");if(bE(n,e))t=yE(n,e),r=FT(r,t,o.children);else if(bE(e,n))if(t=yE(e,n),mE(t))r=FT(r,lE(),o.children);else{const e=Xw(o.children,uE(t));if(e){const n=e.getChild(hE(t));r=MT(r,lE(),n)}}}}}return r}function QT(e,t,n,r,i){if(r||i){const o=WT(e.visibleWrites,t);if(!i&&UT(o))return n;if(i||null!=n||jT(o,lE())){const o=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(bE(e.path,t)||bE(t,e.path))};return VT(YT(e.allWrites,o,t),n||QE.EMPTY_NODE)}return null}{const r=zT(e.visibleWrites,t);if(null!=r)return r;{const r=WT(e.visibleWrites,t);if(UT(r))return n;if(null!=n||jT(r,lE())){return VT(r,n||QE.EMPTY_NODE)}return null}}}function JT(e,t,n,r){return QT(e.writeTree,e.treePath,t,n,r)}function ZT(e,t){return function(e,t,n){let r=QE.EMPTY_NODE;const i=zT(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(UE,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=WT(e.visibleWrites,t);return n.forEachChild(UE,((e,t)=>{const n=VT(WT(i,new sE(e)),t);r=r.updateImmediateChild(e,n)})),BT(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return BT(WT(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function e_(e,t,n,r){return function(e,t,n,r,i){xw(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=gE(t,n);if(jT(e.visibleWrites,o))return null;{const t=WT(e.visibleWrites,o);return UT(t)?i.getChild(n):VT(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function t_(e,t){return function(e,t){return zT(e.visibleWrites,t)}(e.writeTree,gE(e.treePath,t))}function n_(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){let s;const l=WT(e.visibleWrites,t),u=zT(l,lE());if(null!=u)s=u;else{if(null==n)return[];s=VT(l,n)}if(s=s.withIndex(a),s.isEmpty()||s.isLeafNode())return[];{const e=[],t=a.getCompare(),n=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,o)}function r_(e,t,n){return function(e,t,n,r){const i=gE(t,n),o=zT(e.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n))return VT(WT(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function i_(e,t){return o_(gE(e.treePath,t),e.writeTree)}function o_(e,t){return{treePath:e,writeTree:t}}class a_{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;xw("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),xw(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,oT(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,iT(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,rT(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw ww("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,oT(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const s_=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class l_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new IT(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return r_(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:RT(this.viewCache_),i=n_(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function u_(e,t,n,r,i){const o=new a_;let a,s;if(n.type===bT.OVERWRITE){const l=n;l.source.fromUser?a=d_(e,t,l.path,l.snap,r,i,o):(xw(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered()&&!mE(l.path),a=h_(e,t,l.path,l.snap,r,i,s,o))}else if(n.type===bT.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,r,i,o,a){let s=t;return r.foreach(((r,l)=>{const u=gE(n,r);p_(t,uE(u))&&(s=d_(e,s,u,l,i,o,a))})),r.foreach(((r,l)=>{const u=gE(n,r);p_(t,uE(u))||(s=d_(e,s,u,l,i,o,a))})),s}(e,t,l.path,l.children,r,i,o):(xw(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered(),a=g_(e,t,l.path,l.children,r,i,s,o))}else if(n.type===bT.ACK_USER_WRITE){const s=n;a=s.revert?function(e,t,n,r,i,o){let a;if(null!=t_(r,n))return t;{const s=new l_(r,t,i),l=t.eventCache.getNode();let u;if(mE(n)||".priority"===uE(n)){let n;if(t.serverCache.isFullyInitialized())n=JT(r,RT(t));else{const e=t.serverCache.getNode();xw(e instanceof QE,"serverChildren would be complete if leaf node"),n=ZT(r,e)}u=e.filter.updateFullNode(l,n,o)}else{const i=uE(n);let c=r_(r,i,t.serverCache);null==c&&t.serverCache.isCompleteForChild(i)&&(c=l.getImmediateChild(i)),u=null!=c?e.filter.updateChild(l,i,c,hE(n),s,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,QE.EMPTY_NODE,hE(n),s,o):l,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=JT(r,RT(t)),a.isLeafNode()&&(u=e.filter.updateFullNode(u,a,o)))}return a=t.serverCache.isFullyInitialized()||null!=t_(r,lE()),NT(t,u,a,e.filter.filtersNodes())}}(e,t,s.path,r,i,o):function(e,t,n,r,i,o,a){if(null!=t_(i,n))return t;const s=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(mE(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return h_(e,t,n,l.getNode().getChild(n),i,o,s,a);if(mE(n)){let r=new PT(null);return l.getNode().forEachChild(AE,((e,t)=>{r=r.set(new sE(e),t)})),g_(e,t,n,r,i,o,s,a)}return t}{let u=new PT(null);return r.foreach(((e,t)=>{const r=gE(n,e);l.isCompleteForPath(r)&&(u=u.set(e,l.getNode().getChild(r)))})),g_(e,t,n,u,i,o,s,a)}}(e,t,s.path,s.affectedTree,r,i,o)}else{if(n.type!==bT.LISTEN_COMPLETE)throw ww("Unknown operation type: "+n.type);a=function(e,t,n,r,i){const o=t.serverCache,a=AT(t,o.getNode(),o.isFullyInitialized()||mE(n),o.isFiltered());return c_(e,a,n,r,s_,i)}(e,t,n.path,r,o)}const l=o.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=OT(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(nT(OT(t)))}}(t,a,l),{viewCache:a,changes:l}}function c_(e,t,n,r,i,o){const a=t.eventCache;if(null!=t_(r,n))return t;{let s,l;if(mE(n))if(xw(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=RT(t),i=ZT(r,n instanceof QE?n:QE.EMPTY_NODE);s=e.filter.updateFullNode(t.eventCache.getNode(),i,o)}else{const n=JT(r,RT(t));s=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const u=uE(n);if(".priority"===u){xw(1===cE(n),"Can't have a priority with additional path components");const i=a.getNode();l=t.serverCache.getNode();const o=e_(r,n,i,l);s=null!=o?e.filter.updatePriority(i,o):a.getNode()}else{const c=hE(n);let h;if(a.isCompleteForChild(u)){l=t.serverCache.getNode();const e=e_(r,n,a.getNode(),l);h=null!=e?a.getNode().getImmediateChild(u).updateChild(c,e):a.getNode().getImmediateChild(u)}else h=r_(r,u,t.serverCache);s=null!=h?e.filter.updateChild(a.getNode(),u,h,c,i,o):a.getNode()}}return NT(t,s,a.isFullyInitialized()||mE(n),e.filter.filtersNodes())}}function h_(e,t,n,r,i,o,a,s){const l=t.serverCache;let u;const c=a?e.filter:e.filter.getIndexedFilter();if(mE(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),e,null)}else{const e=uE(n);if(!l.isCompleteForPath(n)&&cE(n)>1)return t;const i=hE(n),o=l.getNode().getImmediateChild(e).updateChild(i,r);u=".priority"===e?c.updatePriority(l.getNode(),o):c.updateChild(l.getNode(),e,o,i,s_,null)}const h=AT(t,u,l.isFullyInitialized()||mE(n),c.filtersNodes());return c_(e,h,n,i,new l_(i,h,o),s)}function d_(e,t,n,r,i,o,a){const s=t.eventCache;let l,u;const c=new l_(i,t,o);if(mE(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=NT(t,u,!0,e.filter.filtersNodes());else{const i=uE(n);if(".priority"===i)u=e.filter.updatePriority(t.eventCache.getNode(),r),l=NT(t,u,s.isFullyInitialized(),s.isFiltered());else{const o=hE(n),u=s.getNode().getImmediateChild(i);let h;if(mE(o))h=r;else{const e=c.getCompleteChild(i);h=null!=e?".priority"===dE(o)&&e.getChild(fE(o)).isEmpty()?e:e.updateChild(o,r):QE.EMPTY_NODE}if(u.equals(h))l=t;else{l=NT(t,e.filter.updateChild(s.getNode(),i,h,o,c,a),s.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function p_(e,t){return e.eventCache.isCompleteForChild(t)}function f_(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function g_(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,u=t;l=mE(n)?r:new PT(null).setTree(n,r);const c=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(c.hasChild(n)){const l=f_(0,t.serverCache.getNode().getImmediateChild(n),r);u=h_(e,u,new sE(n),l,i,o,a,s)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!c.hasChild(n)&&!l){const l=f_(0,t.serverCache.getNode().getImmediateChild(n),r);u=h_(e,u,new sE(n),l,i,o,a,s)}})),u}class m_{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new aT(n.getIndex()),i=(o=n).loadsAllData()?new aT(o.getIndex()):o.hasLimit()?new lT(o):new sT(o);var o;this.processor_=function(e){return{filter:e}}(i);const a=t.serverCache,s=t.eventCache,l=r.updateFullNode(QE.EMPTY_NODE,a.getNode(),null),u=i.updateFullNode(QE.EMPTY_NODE,s.getNode(),null),c=new IT(l,a.isFullyInitialized(),r.filtersNodes()),h=new IT(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=_T(h,c),this.eventGenerator_=new ET(this.query_)}get query(){return this.query_}}function y_(e,t){const n=RT(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!mE(t)&&!n.getImmediateChild(uE(t)).isEmpty())?n.getChild(t):null}function v_(e){return 0===e.eventRegistrations_.length}function b_(e,t,n){const r=[];if(n){xw(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function x_(e,t,n,r){t.type===bT.MERGE&&null!==t.source.queryId&&(xw(RT(e.viewCache_),"We should always have a full cache before handling merges"),xw(OT(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=u_(e.processor_,i,t,n,r);var a,s;return a=e.processor_,s=o.viewCache,xw(s.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),xw(s.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),xw(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,w_(e,o.changes,o.viewCache.eventCache.getNode(),null)}function w_(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],o=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),TT(e,i,"child_removed",t,r,n),TT(e,i,"child_added",t,r,n),TT(e,i,"child_moved",o,r,n),TT(e,i,"child_changed",t,r,n),TT(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let k_,S_;class C_{constructor(){this.views=new Map}}function I_(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return xw(null!=o,"SyncTree gave us an op for an invalid query."),x_(o,t,n,r)}{let i=[];for(const o of e.views.values())i=i.concat(x_(o,t,n,r));return i}}function E_(e,t,n,r,i){const o=t._queryIdentifier,a=e.views.get(o);if(!a){let e=JT(n,i?r:null),o=!1;e?o=!0:r instanceof QE?(e=ZT(n,r),o=!1):(e=QE.EMPTY_NODE,o=!1);const a=_T(new IT(e,o,!1),new IT(r,i,!1));return new m_(t,a)}return a}function T_(e,t,n,r,i,o){const a=E_(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(UE,((e,t)=>{r.push(rT(e,t))}));return n.isFullyInitialized()&&r.push(nT(n.getNode())),w_(e,r,n.getNode(),t)}(a,n)}function __(e,t,n,r){const i=t._queryIdentifier,o=[];let a=[];const s=$_(e);if("default"===i)for(const[l,u]of e.views.entries())a=a.concat(b_(u,n,r)),v_(u)&&(e.views.delete(l),u.query._queryParams.loadsAllData()||o.push(u.query));else{const t=e.views.get(i);t&&(a=a.concat(b_(t,n,r)),v_(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||o.push(t.query)))}return s&&!$_(e)&&o.push(new(xw(k_,"Reference.ts has not been loaded"),k_)(t._repo,t._path)),{removed:o,events:a}}function N_(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function A_(e,t){let n=null;for(const r of e.views.values())n=n||y_(r,t);return n}function O_(e,t){if(t._queryParams.loadsAllData())return P_(e);{const n=t._queryIdentifier;return e.views.get(n)}}function R_(e,t){return null!=O_(e,t)}function $_(e){return null!=P_(e)}function P_(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let D_=1;class M_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new PT(null),this.pendingWriteTree_={visibleWrites:DT.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function F_(e,t,n,r,i){return function(e,t,n,r,i){xw(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=MT(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?V_(e,new ST({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function L_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(qT(e.pendingWriteTree_,t)){let t=new PT(null);return null!=r.snap?t=t.set(lE(),!0):AI(r.children,(e=>{t=t.set(new sE(e),!0)})),V_(e,new wT(r.path,t,n))}return[]}function j_(e,t,n){return V_(e,new ST({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function z_(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=t._path,a=e.syncPointTree_.get(o);let s=[];if(a&&("default"===t._queryIdentifier||R_(a,t))){const l=__(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(o));const u=l.removed;if(s=l.events,!i){const n=-1!==u.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(o,((e,t)=>$_(t)));if(n&&!i){const t=e.syncPointTree_.subtree(o);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&$_(t)){return[P_(t)]}{let e=[];return t&&(e=N_(t)),AI(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,o=q_(e,r);e.listenProvider_.startListening(Z_(i),K_(e,i),o.hashFn,o.onComplete)}}}if(!i&&u.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(Z_(t),n)}else u.forEach((t=>{const n=e.queryToTagMap.get(X_(t));e.listenProvider_.stopListening(Z_(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=X_(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,u)}return s}function B_(e,t,n,r){const i=Y_(e,r);if(null!=i){const r=Q_(i),o=r.path,a=r.queryId,s=yE(o,t);return J_(e,o,new ST(xT(a),s,n))}return[]}function W_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let o=null,a=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=yE(e,i);o=o||A_(t,n),a=a||$_(t)}));let s,l=e.syncPointTree_.get(i);if(l?(a=a||$_(l),o=o||A_(l,lE())):(l=new C_,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=o)s=!0;else{s=!1,o=QE.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=A_(t,lE());n&&(o=o.updateImmediateChild(e,n))}))}const u=R_(l,t);if(!u&&!t._queryParams.loadsAllData()){const n=X_(t);xw(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=D_++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let c=T_(l,t,n,HT(e.pendingWriteTree_,i),o,s);if(!u&&!a&&!r){const n=O_(l,t);c=c.concat(function(e,t,n){const r=t._path,i=K_(e,t),o=q_(e,n),a=e.listenProvider_.startListening(Z_(t),i,o.hashFn,o.onComplete),s=e.syncPointTree_.subtree(r);if(i)xw(!$_(s.value),"If we're adding a query, it shouldn't be shadowed");else{const t=s.fold(((e,t,n)=>{if(!mE(e)&&t&&$_(t))return[P_(t).query];{let e=[];return t&&(e=e.concat(N_(t).map((e=>e.query)))),AI(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Z_(r),K_(e,r))}}return a}(e,t,n))}return c}function U_(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=A_(n,yE(e,t));if(r)return r}));return QT(r,t,i,n,!0)}function V_(e,t){return G_(t,e.syncPointTree_,null,HT(e.pendingWriteTree_,lE()))}function G_(e,t,n,r){if(mE(e.path))return H_(e,t,n,r);{const i=t.get(lE());null==n&&null!=i&&(n=A_(i,lE()));let o=[];const a=uE(e.path),s=e.operationForChild(a),l=t.children.get(a);if(l&&s){const e=n?n.getImmediateChild(a):null,t=i_(r,a);o=o.concat(G_(s,l,e,t))}return i&&(o=o.concat(I_(i,e,r,n))),o}}function H_(e,t,n,r){const i=t.get(lE());null==n&&null!=i&&(n=A_(i,lE()));let o=[];return t.children.inorderTraversal(((t,i)=>{const a=n?n.getImmediateChild(t):null,s=i_(r,t),l=e.operationForChild(t);l&&(o=o.concat(H_(l,i,a,s)))})),i&&(o=o.concat(I_(i,e,r,n))),o}function q_(e,t){const n=t.query,r=K_(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||QE.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=Y_(e,n);if(r){const n=Q_(r),i=n.path,o=n.queryId,a=yE(i,t);return J_(e,i,new kT(xT(o),a))}return[]}(e,n._path,r):function(e,t){return V_(e,new kT({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return z_(e,n,null,r)}}}}function K_(e,t){const n=X_(t);return e.queryToTagMap.get(n)}function X_(e){return e._path.toString()+"$"+e._queryIdentifier}function Y_(e,t){return e.tagToQueryMap.get(t)}function Q_(e){const t=e.indexOf("$");return xw(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new sE(e.substr(0,t))}}function J_(e,t,n){const r=e.syncPointTree_.get(t);xw(r,"Missing sync point for query tag that we're tracking");return I_(r,n,HT(e.pendingWriteTree_,t),null)}function Z_(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(xw(S_,"Reference.ts has not been loaded"),S_)(e._repo,e._path):e}class eN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new eN(t)}node(){return this.node_}}class tN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=gE(this.path_,e);return new tN(this.syncTree_,t)}node(){return U_(this.syncTree_,this.path_)}}const nN=function(e,t,n){return e&&"object"===typeof e?(xw(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?rN(e[".sv"],t,n):"object"===typeof e[".sv"]?iN(e[".sv"],t):void xw(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},rN=function(e,t,n){if("timestamp"===e)return n.timestamp;xw(!1,"Unexpected server value: "+e)},iN=function(e,t,n){e.hasOwnProperty("increment")||xw(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&xw(!1,"Unexpected increment value: "+r);const i=t.node();if(xw(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!==typeof o?r:o+r},oN=function(e,t,n,r){return sN(t,new tN(n,e),r)},aN=function(e,t,n){return sN(e,new eN(t),n)};function sN(e,t,n){const r=e.getPriority().val(),i=nN(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,o=nN(r.getValue(),t,n);return o!==r.getValue()||i!==r.getPriority().val()?new WE(o,ZE(i)):e}{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new WE(i))),r.forEachChild(UE,((e,r)=>{const i=sN(r,t.getImmediateChild(e),n);i!==r&&(o=o.updateImmediateChild(e,i))})),o}}class lN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function uN(e,t){let n=t instanceof sE?t:new sE(t),r=e,i=uE(n);for(;null!==i;){const e=Xw(r.node.children,i)||{children:{},childCount:0};r=new lN(i,r,e),n=hE(n),i=uE(n)}return r}function cN(e){return e.node.value}function hN(e,t){e.node.value=t,mN(e)}function dN(e){return e.node.childCount>0}function pN(e,t){AI(e.node.children,((n,r)=>{t(new lN(n,e,r))}))}function fN(e,t,n,r){n&&!r&&t(e),pN(e,(e=>{fN(e,t,!0,r)})),n&&r&&t(e)}function gN(e){return new sE(null===e.parent?e.name:gN(e.parent)+"/"+e.name)}function mN(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===cN(e)&&!dN(e)}(n),i=Kw(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,mN(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,mN(e))}(e.parent,e.name,e)}const yN=/[\[\].#$\/\u0000-\u001F\u007F]/,vN=/[\[\].#$\u0000-\u001F\u007F]/,bN=10485760,xN=function(e){return"string"===typeof e&&0!==e.length&&!yN.test(e)},wN=function(e){return"string"===typeof e&&0!==e.length&&!vN.test(e)},kN=function(e,t,n,r){r&&void 0===t||SN(tk(e,"value"),t,n)},SN=function(e,t,n){const r=n instanceof sE?new xE(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+kE(r));if("function"===typeof t)throw new Error(e+"contains a function "+kE(r)+" with contents = "+t.toString());if(kI(t))throw new Error(e+"contains "+t.toString()+" "+kE(r));if("string"===typeof t&&t.length>bN/3&&nk(t)>bN)throw new Error(e+"contains a string greater than "+bN+" utf8 bytes "+kE(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(AI(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!xN(t)))throw new Error(e+" contains an invalid key ("+t+") "+kE(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=nk(t),wE(e)}(r,t),SN(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=nk(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+kE(r)+" in addition to actual children.")}},CN=function(e,t,n,r){if((!r||void 0!==n)&&!wN(n))throw new Error(tk(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},IN=function(e,t){if(".info"===uE(t))throw new Error(e+" failed = Can't modify data under /.info/")},EN=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!xN(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),wN(e)}(n))throw new Error(tk(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class TN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function _N(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null===n||vE(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function NN(e,t,n){_N(e,n),ON(e,(e=>vE(e,t)))}function AN(e,t,n){_N(e,n),ON(e,(e=>bE(e,t)||bE(t,e)))}function ON(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(RN(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function RN(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();fI&&yI("event: "+n.toString()),PI(r)}}}const $N="repo_interrupt";class PN{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new TN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=fT(),this.transactionQueueTree_=new lN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function DN(e,t,n){if(e.stats_=XI(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new dT(e.repoInfo_,((t,n,r,i)=>{LN(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>jN(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Hw(n)}catch(ie){throw new Error("Invalid authOverride provided: "+ie)}}e.persistentConnection_=new IE(e.repoInfo_,t,((t,n,r,i)=>{LN(e,t,n,r,i)}),(t=>{jN(e,t)}),(t=>{!function(e,t){AI(t,((t,n)=>{zN(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return KI[n]||(KI[n]=t()),KI[n]}(e.repoInfo_,(()=>new vT(e.stats_,e.server_))),e.infoData_=new pT,e.infoSyncTree_=new M_({startListening:(t,n,r,i)=>{let o=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=j_(e.infoSyncTree_,t._path,a),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),zN(e,"connected",!1),e.serverSyncTree_=new M_({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const o=i(n,r);AN(e.eventQueue_,t._path,o)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function MN(e){const t=e.infoData_.getNode(new sE(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function FN(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:MN(e)})}function LN(e,t,n,r,i){e.dataUpdateCount++;const o=new sE(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=Qw(n,(e=>ZE(e)));a=function(e,t,n,r){const i=Y_(e,r);if(i){const r=Q_(i),o=r.path,a=r.queryId,s=yE(o,t),l=PT.fromObject(n);return J_(e,o,new CT(xT(a),s,l))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=ZE(n);a=B_(e.serverSyncTree_,o,t,i)}else if(r){const t=Qw(n,(e=>ZE(e)));a=function(e,t,n){const r=PT.fromObject(n);return V_(e,new CT({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=ZE(n);a=j_(e.serverSyncTree_,o,t)}let s=o;a.length>0&&(s=XN(e,o)),AN(e.eventQueue_,s,a)}function jN(e,t){zN(e,"connected",t),!1===t&&function(e){GN(e,"onDisconnectEvents");const t=FN(e),n=fT();mT(e.onDisconnect_,lE(),((r,i)=>{const o=oN(r,i,e.serverSyncTree_,t);gT(n,r,o)}));let r=[];mT(n,lE(),((t,n)=>{r=r.concat(j_(e.serverSyncTree_,t,n));const i=eA(e,t);XN(e,i)})),e.onDisconnect_=fT(),AN(e.eventQueue_,lE(),r)}(e)}function zN(e,t,n){const r=new sE("/.info/"+t),i=ZE(n);e.infoData_.updateSnapshot(r,i);const o=j_(e.infoSyncTree_,r,i);AN(e.eventQueue_,r,o)}function BN(e){return e.nextWriteId_++}function WN(e,t,n,r,i){GN(e,"set",{path:t.toString(),value:n,priority:r});const o=FN(e),a=ZE(n,r),s=U_(e.serverSyncTree_,t),l=aN(a,s,o),u=BN(e),c=F_(e.serverSyncTree_,t,l,u,!0);_N(e.eventQueue_,c),e.server_.put(t.toString(),a.val(!0),((n,r)=>{const o="ok"===n;o||wI("set at "+t+" failed: "+n);const a=L_(e.serverSyncTree_,u,!o);AN(e.eventQueue_,t,a),HN(e,i,n,r)}));const h=eA(e,t);XN(e,h),AN(e.eventQueue_,h,[])}function UN(e,t,n){let r;r=".info"===uE(t._path)?z_(e.infoSyncTree_,t,n):z_(e.serverSyncTree_,t,n),NN(e.eventQueue_,t._path,r)}function VN(e){e.persistentConnection_&&e.persistentConnection_.interrupt($N)}function GN(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];yI(t,...r)}function HN(e,t,n,r){t&&PI((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const o=new Error(i);o.code=e,t(o)}}))}function qN(e,t,n){return U_(e.serverSyncTree_,t,n)||QE.EMPTY_NODE}function KN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||ZN(e,t),cN(t)){const n=QN(e,t);xw(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=qN(e,t,r);let o=i;const a=i.hash();for(let u=0;u<n.length;u++){const e=n[u];xw(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=yE(t,e.path);o=o.updateChild(r,e.currentOutputSnapshotRaw)}const s=o.val(!0),l=t;e.server_.put(l.toString(),s,(r=>{GN(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(L_(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();ZN(e,uN(e.transactionQueueTree_,t)),KN(e,e.transactionQueueTree_),AN(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)PI(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{wI("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}XN(e,t)}}),a)}(e,gN(t),n)}else dN(t)&&pN(t,(t=>{KN(e,t)}))}function XN(e,t){const n=YN(e,t),r=gN(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter((e=>0===e.status)),a=o.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const o=t[l],u=yE(n,o.path);let c,h=!1;if(xw(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)h=!0,c=o.abortReason,i=i.concat(L_(e.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=25)h=!0,c="maxretry",i=i.concat(L_(e.serverSyncTree_,o.currentWriteId,!0));else{const n=qN(e,o.path,a);o.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){SN("transaction failed: Data returned ",r,o.path);let t=ZE(r);"object"===typeof r&&null!=r&&Kw(r,".priority")||(t=t.updatePriority(n.getPriority()));const s=o.currentWriteId,l=FN(e),u=aN(t,n,l);o.currentOutputSnapshotRaw=t,o.currentOutputSnapshotResolved=u,o.currentWriteId=BN(e),a.splice(a.indexOf(s),1),i=i.concat(F_(e.serverSyncTree_,o.path,u,o.currentWriteId,o.applyLocally)),i=i.concat(L_(e.serverSyncTree_,s,!0))}else h=!0,c="nodata",i=i.concat(L_(e.serverSyncTree_,o.currentWriteId,!0))}AN(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,s=t[l].unwatcher,setTimeout(s,Math.floor(0)),t[l].onComplete&&("nodata"===c?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(c),!1,null)))))}var s;ZN(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)PI(r[l]);KN(e,e.transactionQueueTree_)}(e,QN(e,n),r),r}function YN(e,t){let n,r=e.transactionQueueTree_;for(n=uE(t);null!==n&&void 0===cN(r);)r=uN(r,n),n=uE(t=hE(t));return r}function QN(e,t){const n=[];return JN(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function JN(e,t,n){const r=cN(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);pN(t,(t=>{JN(e,t,n)}))}function ZN(e,t){const n=cN(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,hN(t,n.length>0?n:void 0)}pN(t,(t=>{ZN(e,t)}))}function eA(e,t){const n=gN(YN(e,t)),r=uN(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{tA(e,t)})),tA(e,r),fN(r,(t=>{tA(e,t)})),n}function tA(e,t){const n=cN(t);if(n){const r=[];let i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(xw(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):(xw(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(L_(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?hN(t,void 0):n.length=o+1,AN(e.eventQueue_,gN(t),i);for(let e=0;e<r.length;e++)PI(r[e])}}const nA=function(e,t){const n=rA(e),r=n.namespace;"firebase.com"===n.domain&&xI(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||xI("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&wI("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new VI(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new sE(n.pathString)}},rA=function(e){let t="",n="",r="",i="",o="",a=!0,s="https",l=443;if("string"===typeof e){let u=e.indexOf("//");u>=0&&(s=e.substring(0,u-1),e=e.substring(u+2));let c=e.indexOf("/");-1===c&&(c=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(ie){}t+="/"+e}return t}(e.substring(c,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):wI(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));u=t.indexOf(":"),u>=0?(a="https"===s||"wss"===s,l=parseInt(t.substring(u+1),10)):u=t.length;const p=t.slice(0,u);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),o=r}"ns"in d&&(o=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},iA="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class oA{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Hw(this.snapshot.exportVal())}}class aA{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class sA{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return xw(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class lA{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return mE(this._path)?null:dE(this._path)}get ref(){return new uA(this._repo,this._path)}get _queryIdentifier(){const e=hT(this._queryParams),t=_I(e);return"{}"===t?"default":t}get _queryObject(){return hT(this._queryParams)}isEqual(e){if(!((e=ik(e))instanceof lA))return!1;const t=this._repo===e._repo,n=vE(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class uA extends lA{constructor(e,t){super(e,t,new uT,!1)}get parent(){const e=fE(this._path);return null===e?null:new uA(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class cA{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new sE(e),n=dA(this.ref,e);return new cA(this._node.getChild(t),n,UE)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new cA(n,dA(this.ref,t),UE))))}hasChild(e){const t=new sE(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function hA(e,t){return(e=ik(e))._checkNotDeleted("ref"),void 0!==t?dA(e._root,t):e._root}function dA(e,t){var n,r,i,o;return null===uE((e=ik(e))._path)?(n="child",r="path",o=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),CN(n,r,i,o)):CN("child","path",t,!1),new uA(e._repo,gE(e._path,t))}function pA(e,t){e=ik(e),IN("set",e._path),kN("set",t,e._path,!1);const n=new Pw;return WN(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}class fA{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new oA("value",this,new cA(e.snapshotNode,new uA(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new aA(this,e,t):null}matches(e){return e instanceof fA&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class gA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new aA(this,e,t):null}createEvent(e,t){xw(null!=e.childName,"Child events should have a childName.");const n=dA(new uA(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new oA(e.type,this,new cA(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof gA&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function mA(e,t,n,r,i){let o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{UN(e._repo,e,s),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const a=new sA(n,o||void 0),s="value"===t?new fA(a):new gA(t,a);return function(e,t,n){let r;r=".info"===uE(t._path)?W_(e.infoSyncTree_,t,n):W_(e.serverSyncTree_,t,n),NN(e.eventQueue_,t._path,r)}(e._repo,e,s),()=>UN(e._repo,e,s)}function yA(e,t,n,r){return mA(e,"value",t,n,r)}!function(e){xw(!k_,"__referenceConstructor has already been defined"),k_=e}(uA),function(e){xw(!S_,"__referenceConstructor has already been defined"),S_=e}(uA);const vA={};let bA=!1;function xA(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||xI("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),yI("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a,s,l=nA(o,i),u=l.repoInfo;"undefined"!==typeof process&&(s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAMXGdN7KPADMrjsSzQ34petfqgwMemM_g",REACT_APP_Things_Speak_Read_key:"5U2YJLA0KF45NB6C",REACT_APP_Things_Speak_Write_Key:"BD0ETD9Q5UN4013P"}.FIREBASE_DATABASE_EMULATOR_HOST),s?(a=!0,o=`http://${s}?ns=${u.namespace}`,l=nA(o,i),u=l.repoInfo):a=!l.repoInfo.secure;const c=i&&a?new LI(LI.OWNER):new FI(e.name,e.options,t);EN("Invalid Firebase Database URL",l),mE(l.path)||xI("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=vA[t.name];i||(i={},vA[t.name]=i);let o=i[e.toURLString()];o&&xI("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new PN(e,bA,n,r),i[e.toURLString()]=o,o}(u,e,c,new MI(e.name,n));return new wA(h,e)}class wA{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(DN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new uA(this._repo,lE())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=vA[t];n&&n[e.key]===e||xI(`Database ${t}(${e.repoInfo_}) has already been deleted.`),VN(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&xI("Cannot call "+e+" on a deleted database.")}}IE.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},IE.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){iI(xS),mS(new ok("database",((e,t)=>{let{instanceIdentifier:n}=t;return xA(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),SS(tI,nI,e),SS(tI,nI,"esm2017")}();var kA,SA="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},CA={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],a=t+(o^n&(i^o))+r[0]+3614090360&4294967295;a=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(a<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((o=(t=n+((a=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=o+((a=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,a=0;a<t;){if(0==o)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,i),o=0;break}}else for(;a<t;)if(i[o++]=e[a++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return s;if(0>e)return d(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var s=o(0),l=o(1),u=o(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function p(e,t){return e.add(d(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(c(t))throw Error("division by zero");if(c(e))return new g(s,s);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),o=v(r,1);for(r=v(r,2),n=v(n,2);!c(r);){var u=o.add(r);0>=u.l(e)&&(i=i.add(n),o=u),r=v(r,1),n=v(n,1)}return t=p(e,i.j(t)),new g(i,t)}for(i=s;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(o=a(n)).j(t);h(u)||0<u.l(e);)u=(o=a(n-=r)).j(t);c(o)&&(o=l),i=i.add(o),e=p(e,u)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,o=[],a=0;a<i;a++)o[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,o=((0<(n=p(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=p(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,o=0;o<=t;o++){var a=i+(65535&this.i(o))+(65535&e.i(o)),s=(a>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);i=s>>>16,a&=65535,s&=65535,n[o]=s<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return s;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<e.g.length;o++){var l=this.i(i)>>>16,p=65535&this.i(i),g=e.i(o)>>>16,m=65535&e.i(o);n[2*i+2*o]+=p*m,f(n,2*i+2*o),n[2*i+2*o+1]+=l*m,f(n,2*i+2*o+1),n[2*i+2*o+1]+=p*g,f(n,2*i+2*o+1),n[2*i+2*o+2]+=l*g,f(n,2*i+2*o+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,CA.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=s,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),u=parseInt(t.substring(o,o+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(u))):i=(i=i.j(r)).add(a(u))}return i},kA=CA.Integer=r}).apply("undefined"!==typeof SA?SA:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var IA,EA,TA,_A,NA,AA,OA,RA,$A="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},PA={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof $A&&$A];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout((()=>{throw e}),0)}function C(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var I=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new E),(e=>e.reset()));class E{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,_=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=I.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(O)}};var O=()=>{for(var e;e=C();){try{e.h.call(e.g)}catch(Te){S(Te)}var t=I;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_=!1};function R(){this.s=this.s,this.C=this.C}function $(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},$.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(Te){}return e}();function D(e,t){if($.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(he){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&D.aa.h.call(this)}}h(D,$);var M={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),L=0;function j(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++L,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function W(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function U(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=U(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new j(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var V="closure_lm_"+(1e6*Math.random()|0),G={};function H(e,t,n,r,i){if(r&&r.once)return K(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)H(e,t[o],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,a(r)?!!r.capture:!!r,i):q(e,t,n,!1,r,i)}function q(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[V]=l=new B(e)),(n=l.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)K(e,t[o],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,a(r)?!!r.capture:!!r,i):q(e,t,n,!0,r,i)}function X(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)X(e,t[o],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=U(o=e.g[t],n,r,i))&&(z(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=U(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])W(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(W(n,e),0==n.h&&(n.src=null,t[V]=null)):z(e)}}}function Q(e){return e in G?G[e]:G[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new D(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[V])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new $(t,e);else if(t instanceof $)t.target=t.target||e;else{var i=t;w(t=new $(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=oe(a,r,!0,t)&&i}if(i=oe(a=t.g=e,r,!0,t)&&i,i=oe(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=oe(a=t.g=n[o],r,!1,t)&&i}function oe(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.da&&a.capture==n){var s=a.listener,l=a.ha||a.src;a.fa&&W(e.i,a),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}function ae(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function se(e){e.g=ae((()=>{e.g=null,e.i&&(e.i=!1,se(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){X(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)z(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class le extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ue(e){R.call(this),this.h=e,this.g={}}h(ue,R);var ce=[];function de(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}ue.prototype.N=function(){ue.aa.N.call(this),de(this)},ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pe=i.JSON.stringify,fe=i.JSON.parse,ge=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function me(){}function ye(e){return e.h||(e.h=e.i())}function be(){}me.prototype.h=null;var xe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function we(){$.call(this,"d")}function Se(){$.call(this,"c")}h(we,$),h(Se,$);var Ce={},Ie=null;function Ee(){return Ie=Ie||new ne}function _e(e){$.call(this,Ce.La,e)}function Ne(e){const t=Ee();re(t,new _e(t))}function Ae(e,t){$.call(this,Ce.STAT_EVENT,e),this.stat=t}function Oe(e){const t=Ee();re(t,new Ae(t,e))}function Re(e,t){$.call(this,Ce.Ma,e),this.size=t}function $e(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Pe(){this.g=!0}function De(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return pe(n)}catch(ke){return t}}(e,n)+(r?" "+r:"")}))}Ce.La="serverreachability",h(_e,$),Ce.STAT_EVENT="statevent",h(Ae,$),Ce.Ma="timingevent",h(Re,$),Pe.prototype.xa=function(){this.g=!1},Pe.prototype.info=function(){};var Me,Fe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Le={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function je(){}function ze(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ue(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Be}function Be(){this.i=null,this.g="",this.h=!1}h(je,me),je.prototype.g=function(){return new XMLHttpRequest},je.prototype.i=function(){return{}},Me=new je;var We={},Ue={};function Ve(e,t,n){e.L=1,e.v=mt(ht(t)),e.m=n,e.P=!0,Ge(e,null)}function Ge(e,t){e.F=Date.now(),Ke(e),e.A=ht(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Nt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Be,e.g=yn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new le(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var o=0;o<i.length;o++){var a=H(n,i[o],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ne(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var u=s[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+u+"&":a+(c+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function He(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?We:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function Ke(e){e.S=Date.now()+e.I,Xe(e,e.I)}function Xe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=$e(u(e.ba,e),t)}function Ye(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Qe(e){0==e.j.G||e.J||dn(e.j,e)}function Je(e){Ye(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,de(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ze(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||it(n.h,e)))if(!e.K&&it(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;hn(n),en(n)}ln(n),Oe(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=$e(u(n.Za,n),6e3));if(1>=rt(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else fn(n,11)}else if((e.K||n.g==e)&&hn(n),!f(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(ot(o,o.h),o.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,gt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=mn(r,r.J?r.ia:null,r.W),a.K){at(r.h,a);var s=a,l=r.L;l&&(s.I=l),s.B&&(Ye(s),Ke(s)),r.g=a}else sn(r);0<n.i.length&&nn(n)}else"stop"!=u[0]&&"close"!=u[0]||fn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?fn(n,7):Zt(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}Ne()}catch(c){}}ze.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Xt(e)?t.j():this.Y(e)},ze.prototype.Y=function(e){try{if(e==this.g)e:{const d=Xt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Yt(this.g)))){this.J||4!=d||7==t||Ne(),Ye(this);var n=this.g.Z();this.X=n;t:if(He(this)){var r=Yt(this.g);e="";var o=r.length,a=4==Xt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Je(this),Qe(this);var s="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Oe(12),Je(this),Qe(this);break e}De(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ze(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<s.length;){if(e=qe(this,s),e==Ue){4==d&&(this.s=4,Oe(14),n=!1),De(this.i,this.l,null,"[Incomplete Response]");break}if(e==We){this.s=4,Oe(15),De(this.i,this.l,s,"[Invalid Chunk]"),n=!1;break}De(this.i,this.l,e,null),Ze(this,e)}if(He(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=s.length||this.h.h||(this.s=1,Oe(16),n=!1),this.o=this.o&&n,n){if(0<s.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),un(h),h.M=!0,Oe(11))}}else De(this.i,this.l,s,"[Invalid Chunked Response]"),Je(this),Qe(this)}else De(this.i,this.l,s,null),Ze(this,s);4==d&&Je(this),this.o&&!this.J&&(4==d?dn(this.j,this):(this.o=!1,Ke(this)))}else(function(e){const t={};e=(e.g&&2<=Xt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=k(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),Je(this),Qe(this)}}}catch(d){}},ze.prototype.cancel=function(){this.J=!0,Je(this)},ze.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ne(),Oe(17)),Je(this),this.s=2,Qe(this)):Xe(this,this.S-e)};var et=class{constructor(e,t){this.g=e,this.map=t}};function tt(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function rt(e){return e.h?1:e.g?e.g.size:0}function it(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ot(e,t){e.g?e.g.add(t):e.h=t}function at(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function st(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function lt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}tt.prototype.cancel=function(){if(this.i=st(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ct(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ct){this.h=e.h,dt(this,e.j),this.o=e.o,this.g=e.g,pt(this,e.s),this.l=e.l;var t=e.i,n=new It;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ft(this,n),this.m=e.m}else e&&(t=String(e).match(ut))?(this.h=!1,dt(this,t[1]||"",!0),this.o=yt(t[2]||""),this.g=yt(t[3]||"",!0),pt(this,t[4]),this.l=yt(t[5]||"",!0),ft(this,t[6]||"",!0),this.m=yt(t[7]||"")):(this.h=!1,this.i=new It(null,this.h))}function ht(e){return new ct(e)}function dt(e,t,n){e.j=n?yt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function pt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ft(e,t,n){t instanceof It?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Tt(this,t),Nt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=vt(t,St)),e.i=new It(t,e.h))}function gt(e,t,n){e.i.set(t,n)}function mt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function yt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function vt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,bt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function bt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ct.prototype.toString=function(){var e=[],t=this.j;t&&e.push(vt(t,xt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(vt(t,xt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(vt(n,"/"==n.charAt(0)?kt:wt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",vt(n,Ct)),e.join("")};var xt=/[#\/\?@]/g,wt=/[#\?:]/g,kt=/[#\?]/g,St=/[#\?@]/g,Ct=/#/g;function It(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Tt(e,t){Et(e),t=At(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _t(e,t){return Et(e),t=At(e,t),e.g.has(t)}function Nt(e,t,n){Tt(e,t),0<n.length&&(e.i=null,e.g.set(At(e,t),d(n)),e.h+=n.length)}function At(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ot(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(he){}}function Rt(){this.g=new ge}function $t(e,t,n){const r=n||"";try{lt(e,(function(e,n){let i=e;a(e)&&(i=pe(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(ie){throw t.push(r+"type="+encodeURIComponent("_badmap")),ie}}function Pt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Dt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Mt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ft(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Lt(e)}function Lt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function jt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function zt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=jt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):gt(e,t,n))}function Bt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=It.prototype).add=function(e,t){Et(this),this.i=null,e=At(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"===typeof e)_t(this,e)&&(t=t.concat(this.g.get(At(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,_t(this,e=At(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=o;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},h(Pt,me),Pt.prototype.g=function(){return new Dt(this.l,this.j)},Pt.prototype.i=function(e){return function(){return e}}({}),h(Dt,ne),(e=Dt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Lt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ft(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Lt(this)),this.g&&(this.readyState=3,Lt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ft(this):Lt(this),3==this.readyState&&Mt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ft(this))},e.Qa=function(e){this.g&&(this.response=e,Ft(this))},e.ga=function(){this.g&&Ft(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Dt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Bt,ne);var Wt=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Gt(e),qt(e)}function Gt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Ht(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Xt(e)||2!=e.Z()))if(e.u&&4==Xt(e))ae(e.Ea,0,e);else if(re(e,"readystatechange"),4==Xt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var a=String(e.D).match(ut)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),o=!Wt.test(a?a.toLowerCase():"")}n=o}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var s=2<Xt(e)?e.g.statusText:""}catch(ke){s=""}e.l=s+" ["+e.Z()+"]",Gt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Kt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(ie){}}}function Kt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Xt(e){return e.g?e.g.readyState:0}function Yt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ve){return null}}function Qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Jt(e){this.Aa=0,this.i=[],this.j=new Pe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qt("baseRetryDelayMs",5e3,e),this.cb=Qt("retryDelaySeedMs",1e4,e),this.Wa=Qt("forwardChannelMaxRetries",2,e),this.wa=Qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new tt(e&&e.concurrentRequestLimit),this.Da=new Rt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Zt(e){if(tn(e),3==e.G){var t=e.U++,n=ht(e.I);if(gt(n,"SID",e.K),gt(n,"RID",t),gt(n,"TYPE","terminate"),on(e,n),(t=new ze(e,e.j,t)).L=2,t.v=mt(ht(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=yn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ke(t)}gn(e)}function en(e){e.g&&(un(e),e.g.cancel(),e.g=null)}function tn(e){en(e),e.u&&(i.clearTimeout(e.u),e.u=null),hn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function nn(e){if(!nt(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||A(),_||(T(),_=!0),N.add(t,e),e.B=0}}function rn(e,t){var n;n=t?t.l:e.U++;const r=ht(e.I);gt(r,"SID",e.K),gt(r,"RID",n),gt(r,"AID",e.T),on(e,r),e.m&&e.o&&zt(r,e.m,e.o),n=new ze(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=an(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ot(e.h,n),Ve(n,r,t)}function on(e,t){e.H&&v(e.H,(function(e,n){gt(t,n,e)})),e.l&&lt({},(function(e,n){gt(t,n,e)}))}function an(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let s=0;s<n;s++){let n=i[s].g;const l=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),a=!1;else try{$t(l,e,"req"+n+"_")}catch(o){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function sn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||A(),_||(T(),_=!0),N.add(t,e),e.v=0}}function ln(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=$e(u(e.Fa,e),pn(e,e.v)),e.v++,!0)}function un(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function cn(e){e.g=new ze(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ht(e.qa);gt(t,"RID","rpc"),gt(t,"SID",e.K),gt(t,"AID",e.T),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&gt(t,"TO",e.ja),gt(t,"TYPE","xmlhttp"),on(e,t),e.m&&e.o&&zt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=mt(ht(t)),n.m=null,n.P=!0,Ge(n,e)}function hn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function dn(e,t){var n=null;if(e.g==t){hn(e),un(e),e.g=null;var r=2}else{if(!it(e.h,t))return;n=t.D,at(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new Re(r,n)),nn(e)}else sn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(rt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=$e(u(e.Ga,e,t),pn(e,e.B)),e.B++,!0))}(e,t)||2==r&&ln(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:fn(e,5);break;case 4:fn(e,10);break;case 3:fn(e,6);break;default:fn(e,2)}}function pn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function fn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new ct(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||dt(r,"https"),mt(r),t?function(e,t){const n=new Pe;if(i.Image){const r=new Image;r.onload=c(Ot,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Ot,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Ot,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Ot,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Pe;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ot(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ot(0,0,!0,t):Ot(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ot(0,0,!1,t)}))}(r.toString(),n)}else Oe(2);e.G=0,e.l&&e.l.sa(t),gn(e),tn(e)}function gn(e){if(e.G=0,e.ka=[],e.l){const t=st(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function mn(e,t,n){var r=n instanceof ct?ht(n):new ct(n);if(""!=r.g)t&&(r.g=t+"."+r.g),pt(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var a=new ct(null);r&&dt(a,r),t&&(a.g=t),o&&pt(a,o),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&gt(r,n,t),gt(r,"VER",e.la),on(e,r),r}function yn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Bt(new Pt({eb:n})):new Bt(e.pa)).Ha(e.J),t}function vn(){}function bn(){}function xn(e,t){ne.call(this),this.g=new Jt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Sn(this)}function wn(e){we.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function kn(){Se.call(this),this.status=1}function Sn(e){this.g=e}(e=Bt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Me.g(),this.v=this.o?ye(this.o):ye(Me),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(he){return void Vt(this,he)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kt(this),this.u=!0,this.g.send(e),this.u=!1}catch(he){Vt(this,he)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Bt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ht(this):this.bb())},e.bb=function(){Ht(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fe(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Jt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Oe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=mn(this,null,this.W),nn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new ze(this,this.j,e);let o=this.o;if(this.S&&(o?(o=b(o),w(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=an(this,i,t),gt(n=ht(this.I),"RID",e),gt(n,"CVER",22),this.D&&gt(n,"X-HTTP-Session-Id",this.D),on(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(jt(o)))+"&"+t:this.m&&zt(n,this.m,o)),ot(this.h,i),this.Ua&&gt(n,"TYPE","init"),this.P?(gt(n,"$req",t),gt(n,"SID","null"),i.T=!0,Ve(i,n,null)):Ve(i,n,t),this.G=2}}else 3==this.G&&(e?rn(this,e):0==this.i.length||nt(this.h)||rn(this))},e.Fa=function(){if(this.u=null,cn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=$e(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),en(this),cn(this))},e.Za=function(){null!=this.C&&(this.C=null,en(this),ln(this),Oe(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=vn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},bn.prototype.g=function(e,t){return new xn(e,t)},h(xn,ne),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Zt(this.g)},xn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=pe(e),e=n);t.i.push(new et(t.Ya++,e)),3==t.G&&nn(t)},xn.prototype.N=function(){this.g.l=null,delete this.j,Zt(this.g),delete this.g,xn.aa.N.call(this)},h(wn,we),h(kn,Se),h(Sn,vn),Sn.prototype.ua=function(){re(this.g,"a")},Sn.prototype.ta=function(e){re(this.g,new wn(e))},Sn.prototype.sa=function(e){re(this.g,new kn)},Sn.prototype.ra=function(){re(this.g,"b")},bn.prototype.createWebChannel=bn.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,RA=PA.createWebChannelTransport=function(){return new bn},OA=PA.getStatEventTarget=function(){return Ee()},AA=PA.Event=Ce,NA=PA.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fe.NO_ERROR=0,Fe.TIMEOUT=8,Fe.HTTP_ERROR=6,_A=PA.ErrorCode=Fe,Le.COMPLETE="complete",TA=PA.EventType=Le,be.EventType=xe,xe.OPEN="a",xe.CLOSE="b",xe.ERROR="c",xe.MESSAGE="d",ne.prototype.listen=ne.prototype.K,EA=PA.WebChannel=be,PA.FetchXmlHttpFactory=Pt,Bt.prototype.listenOnce=Bt.prototype.L,Bt.prototype.getLastError=Bt.prototype.Ka,Bt.prototype.getLastErrorCode=Bt.prototype.Ba,Bt.prototype.getStatus=Bt.prototype.Z,Bt.prototype.getResponseJson=Bt.prototype.Oa,Bt.prototype.getResponseText=Bt.prototype.oa,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Ha,IA=PA.XhrIo=Bt}).apply("undefined"!==typeof $A?$A:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const DA="@firebase/firestore";class MA{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}MA.UNAUTHENTICATED=new MA(null),MA.GOOGLE_CREDENTIALS=new MA("google-credentials-uid"),MA.FIRST_PARTY=new MA("first-party-uid"),MA.MOCK_USER=new MA("mock-user");let FA="10.14.0";const LA=new mk("@firebase/firestore");function jA(){return LA.logLevel}function zA(e){if(LA.logLevel<=hk.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(UA);LA.debug(`Firestore (${FA}): ${e}`,...i)}}function BA(e){if(LA.logLevel<=hk.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(UA);LA.error(`Firestore (${FA}): ${e}`,...i)}}function WA(e){if(LA.logLevel<=hk.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(UA);LA.warn(`Firestore (${FA}): ${e}`,...i)}}function UA(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function VA(){const e=`FIRESTORE (${FA}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw BA(e),new Error(e)}function GA(e,t){e||VA()}function HA(e,t){return e}const qA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class KA extends Ww{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class XA{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class YA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(MA.UNAUTHENTICATED)))}shutdown(){}}class JA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ZA{constructor(e){this.t=e,this.currentUser=MA.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){GA(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new XA;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new XA,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{zA("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(zA("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new XA)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(zA("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(GA("string"==typeof t.accessToken),new YA(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return GA(null===e||"string"==typeof e),new MA(e)}}class eO{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=MA.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tO{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new eO(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(MA.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){GA(void 0===this.o);const n=e=>{null!=e.error&&zA("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,zA("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{zA("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):zA("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(GA("string"==typeof e.token),this.R=e.token,new nO(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function iO(e,t){return e<t?-1:e>t?1:0}function oO(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class aO{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new KA(qA.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new KA(qA.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new KA(qA.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new KA(qA.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return aO.fromMillis(Date.now())}static fromDate(e){return aO.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new aO(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?iO(this.nanoseconds,e.nanoseconds):iO(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class sO{constructor(e){this.timestamp=e}static fromTimestamp(e){return new sO(e)}static min(){return new sO(new aO(0,0))}static max(){return new sO(new aO(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class lO{constructor(e,t,n){void 0===t?t=0:t>e.length&&VA(),void 0===n?n=e.length-t:n>e.length-t&&VA(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===lO.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lO?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class uO extends lO{construct(e,t,n){return new uO(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new KA(qA.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new uO(e)}static emptyPath(){return new uO([])}}const cO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hO extends lO{construct(e,t,n){return new hO(e,t,n)}static isValidIdentifier(e){return cO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hO.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hO(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new KA(qA.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new KA(qA.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new KA(qA.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new KA(qA.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hO(t)}static emptyPath(){return new hO([])}}class dO{constructor(e){this.path=e}static fromPath(e){return new dO(uO.fromString(e))}static fromName(e){return new dO(uO.fromString(e).popFirst(5))}static empty(){return new dO(uO.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===uO.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return uO.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dO(new uO(e.slice()))}}class pO{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}pO.UNKNOWN_ID=-1;function fO(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=sO.fromTimestamp(1e9===r?new aO(n+1,0):new aO(n,r));return new mO(i,dO.empty(),t)}function gO(e){return new mO(e.readTime,e.key,-1)}class mO{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new mO(sO.min(),dO.empty(),-1)}static max(){return new mO(sO.max(),dO.empty(),-1)}}function yO(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=dO.comparator(e.documentKey,t.documentKey),0!==n?n:iO(e.largestBatchId,t.largestBatchId))}class vO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}class bO{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&VA(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new bO(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof bO?t:bO.resolve(t)}catch(e){return bO.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):bO.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):bO.reject(t)}static resolve(e){return new bO(((t,n)=>{t(e)}))}static reject(e){return new bO(((t,n)=>{n(e)}))}static waitFor(e){return new bO(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=bO.resolve(!1);for(const n of e)t=t.next((e=>e?bO.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new bO(((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next((e=>{o[l]=e,++a,a===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new bO(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function xO(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wO(e){return"IndexedDbTransactionError"===e.name}class kO{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function SO(e){return null==e}function CO(e){return 0===e&&1/e==-1/0}kO.oe=-1;const IO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],EO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],TO=EO,_O=[...TO,"indexConfiguration","indexState","indexEntries"];function NO(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function AO(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function OO(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class RO{constructor(e,t){this.comparator=e,this.root=t||PO.EMPTY}insert(e,t){return new RO(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,PO.BLACK,null,null))}remove(e){return new RO(this.comparator,this.root.remove(e,this.comparator).copy(null,null,PO.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $O(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $O(this.root,e,this.comparator,!1)}getReverseIterator(){return new $O(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $O(this.root,e,this.comparator,!0)}}class $O{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class PO{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:PO.RED,this.left=null!=r?r:PO.EMPTY,this.right=null!=i?i:PO.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new PO(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return PO.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return PO.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,PO.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,PO.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw VA();if(this.right.isRed())throw VA();const e=this.left.check();if(e!==this.right.check())throw VA();return e+(this.isRed()?0:1)}}PO.EMPTY=null,PO.RED=!0,PO.BLACK=!1,PO.EMPTY=new class{constructor(){this.size=0}get key(){throw VA()}get value(){throw VA()}get color(){throw VA()}get left(){throw VA()}get right(){throw VA()}copy(e,t,n,r,i){return this}insert(e,t,n){return new PO(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class DO{constructor(e){this.comparator=e,this.data=new RO(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new MO(this.data.getIterator())}getIteratorFrom(e){return new MO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof DO))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new DO(this.comparator);return t.data=e,t}}class MO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class FO{constructor(e){this.fields=e,e.sort(hO.comparator)}static empty(){return new FO([])}unionWith(e){let t=new DO(hO.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new FO(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oO(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class LO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jO{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new LO("Invalid base64 string: "+e):e}}(e);return new jO(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new jO(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return iO(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jO.EMPTY_BYTE_STRING=new jO("");const zO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function BO(e){if(GA(!!e),"string"==typeof e){let t=0;const n=zO.exec(e);if(GA(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:WO(e.seconds),nanos:WO(e.nanos)}}function WO(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function UO(e){return"string"==typeof e?jO.fromBase64String(e):jO.fromUint8Array(e)}function VO(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function GO(e){const t=e.mapValue.fields.__previous_value__;return VO(t)?GO(t):t}function HO(e){const t=BO(e.mapValue.fields.__local_write_time__.timestampValue);return new aO(t.seconds,t.nanos)}class qO{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qO("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qO&&e.projectId===this.projectId&&e.database===this.database}}const KO={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function XO(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?VO(e)?4:lR(e)?9007199254740991:aR(e)?10:11:VA()}function YO(e,t){if(e===t)return!0;const n=XO(e);if(n!==XO(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return HO(e).isEqual(HO(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=BO(e.timestampValue),r=BO(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return UO(e.bytesValue).isEqual(UO(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return WO(e.geoPointValue.latitude)===WO(t.geoPointValue.latitude)&&WO(e.geoPointValue.longitude)===WO(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return WO(e.integerValue)===WO(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=WO(e.doubleValue),r=WO(t.doubleValue);return n===r?CO(n)===CO(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return oO(e.arrayValue.values||[],t.arrayValue.values||[],YO);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(NO(n)!==NO(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!YO(n[i],r[i])))return!1;return!0}(e,t);default:return VA()}}function QO(e,t){return void 0!==(e.values||[]).find((e=>YO(e,t)))}function JO(e,t){if(e===t)return 0;const n=XO(e),r=XO(t);if(n!==r)return iO(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return iO(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=WO(e.integerValue||e.doubleValue),r=WO(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ZO(e.timestampValue,t.timestampValue);case 4:return ZO(HO(e),HO(t));case 5:return iO(e.stringValue,t.stringValue);case 6:return function(e,t){const n=UO(e),r=UO(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=iO(n[i],r[i]);if(0!==e)return e}return iO(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=iO(WO(e.latitude),WO(t.latitude));return 0!==n?n:iO(WO(e.longitude),WO(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return eR(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,o;const a=e.fields||{},s=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,u=null===(r=s.value)||void 0===r?void 0:r.arrayValue,c=iO((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(o=null==u?void 0:u.values)||void 0===o?void 0:o.length)||0);return 0!==c?c:eR(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===KO.mapValue&&t===KO.mapValue)return 0;if(e===KO.mapValue)return 1;if(t===KO.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=iO(r[a],o[a]);if(0!==e)return e;const t=JO(n[r[a]],i[o[a]]);if(0!==t)return t}return iO(r.length,o.length)}(e.mapValue,t.mapValue);default:throw VA()}}function ZO(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return iO(e,t);const n=BO(e),r=BO(t),i=iO(n.seconds,r.seconds);return 0!==i?i:iO(n.nanos,r.nanos)}function eR(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=JO(n[i],r[i]);if(e)return e}return iO(n.length,r.length)}function tR(e){return nR(e)}function nR(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=BO(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return UO(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return dO.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=nR(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${nR(e.fields[i])}`;return n+"}"}(e.mapValue):VA()}function rR(e){return!!e&&"integerValue"in e}function iR(e){return!!e&&"arrayValue"in e}function oR(e){return!!e&&"mapValue"in e}function aR(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function sR(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return AO(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=sR(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=sR(e.arrayValue.values[n]);return t}return Object.assign({},e)}function lR(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class uR{constructor(e){this.value=e}static empty(){return new uR({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!oR(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sR(t)}setAll(e){let t=hO.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=sR(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());oR(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return YO(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];oR(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){AO(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new uR(sR(this.value))}}class cR{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new cR(e,0,sO.min(),sO.min(),sO.min(),uR.empty(),0)}static newFoundDocument(e,t,n,r){return new cR(e,1,t,sO.min(),n,r,0)}static newNoDocument(e,t){return new cR(e,2,t,sO.min(),sO.min(),uR.empty(),0)}static newUnknownDocument(e,t){return new cR(e,3,t,sO.min(),sO.min(),uR.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(sO.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=uR.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=uR.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sO.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof cR&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cR(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hR{constructor(e,t){this.position=e,this.inclusive=t}}function dR(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?dO.comparator(dO.fromName(a.referenceValue),n.key):JO(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function pR(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!YO(e.position[n],t.position[n]))return!1;return!0}class fR{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function gR(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class mR{}class yR extends mR{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new IR(e,t,n):"array-contains"===t?new NR(e,n):"in"===t?new AR(e,n):"not-in"===t?new OR(e,n):"array-contains-any"===t?new RR(e,n):new yR(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ER(e,n):new TR(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(JO(t,this.value)):null!==t&&XO(this.value)===XO(t)&&this.matchesComparison(JO(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return VA()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vR extends mR{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new vR(e,t)}matches(e){return bR(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bR(e){return"and"===e.op}function xR(e){return wR(e)&&bR(e)}function wR(e){for(const t of e.filters)if(t instanceof vR)return!1;return!0}function kR(e){if(e instanceof yR)return e.field.canonicalString()+e.op.toString()+tR(e.value);if(xR(e))return e.filters.map((e=>kR(e))).join(",");{const t=e.filters.map((e=>kR(e))).join(",");return`${e.op}(${t})`}}function SR(e,t){return e instanceof yR?function(e,t){return t instanceof yR&&e.op===t.op&&e.field.isEqual(t.field)&&YO(e.value,t.value)}(e,t):e instanceof vR?function(e,t){return t instanceof vR&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&SR(n,t.filters[r])),!0)}(e,t):void VA()}function CR(e){return e instanceof yR?function(e){return`${e.field.canonicalString()} ${e.op} ${tR(e.value)}`}(e):e instanceof vR?function(e){return e.op.toString()+" {"+e.getFilters().map(CR).join(" ,")+"}"}(e):"Filter"}class IR extends yR{constructor(e,t,n){super(e,t,n),this.key=dO.fromName(n.referenceValue)}matches(e){const t=dO.comparator(e.key,this.key);return this.matchesComparison(t)}}class ER extends yR{constructor(e,t){super(e,"in",t),this.keys=_R("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class TR extends yR{constructor(e,t){super(e,"not-in",t),this.keys=_R("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _R(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>dO.fromName(e.referenceValue)))}class NR extends yR{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return iR(t)&&QO(t.arrayValue,this.value)}}class AR extends yR{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&QO(this.value.arrayValue,t)}}class OR extends yR{constructor(e,t){super(e,"not-in",t)}matches(e){if(QO(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!QO(this.value.arrayValue,t)}}class RR extends yR{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!iR(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>QO(this.value.arrayValue,e)))}}class $R{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function PR(e){return new $R(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function DR(e){const t=HA(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>kR(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),SO(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>tR(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>tR(e))).join(",")),t.ue=e}return t.ue}function MR(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!gR(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!SR(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!pR(e.startAt,t.startAt)&&pR(e.endAt,t.endAt)}class FR{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function LR(e,t,n,r,i,o,a,s){return new FR(e,t,n,r,i,o,a,s)}function jR(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function zR(e){return null!==e.collectionGroup}function BR(e){const t=HA(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new DO(hO.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new fR(r,n))})),e.has(hO.keyField().canonicalString())||t.ce.push(new fR(hO.keyField(),n))}return t.ce}function WR(e){const t=HA(e);return t.le||(t.le=UR(t,BR(e))),t.le}function UR(e,t){if("F"===e.limitType)return PR(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new fR(e.field,t)}));const n=e.endAt?new hR(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new hR(e.startAt.position,e.startAt.inclusive):null;return PR(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function VR(e,t,n){return new FR(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function GR(e,t){return MR(WR(e),WR(t))&&e.limitType===t.limitType}function HR(e){return`${DR(WR(e))}|lt:${e.limitType}`}function qR(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>CR(e))).join(", ")}]`),SO(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>tR(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>tR(e))).join(",")),`Target(${t})`}(WR(e))}; limitType=${e.limitType})`}function KR(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):dO.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of BR(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=dR(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,BR(e),t))&&!(e.endAt&&!function(e,t,n){const r=dR(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,BR(e),t))}(e,t)}function XR(e){return(t,n)=>{let r=!1;for(const i of BR(e)){const e=YR(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function YR(e,t,n){const r=e.field.isKeyField()?dO.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?JO(r,i):VA()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return VA()}}class QR{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){AO(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return OO(this.inner)}size(){return this.innerSize}}const JR=new RO(dO.comparator);function ZR(){return JR}const e$=new RO(dO.comparator);function t$(){let e=e$;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function n$(e){let t=e$;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function r$(){return o$()}function i$(){return o$()}function o$(){return new QR((e=>e.toString()),((e,t)=>e.isEqual(t)))}new RO(dO.comparator);const a$=new DO(dO.comparator);function s$(){let e=a$;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const l$=new DO(iO);function u$(){return l$}function c$(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:CO(t)?"-0":t}}function h$(e){return{integerValue:""+e}}class d${constructor(){this._=void 0}}function p$(e,t,n){return e instanceof m$?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&VO(t)&&(t=GO(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof y$?v$(e,t):e instanceof b$?x$(e,t):function(e,t){const n=g$(e,t),r=k$(n)+k$(e.Pe);return rR(n)&&rR(e.Pe)?h$(r):c$(e.serializer,r)}(e,t)}function f$(e,t,n){return e instanceof y$?v$(e,t):e instanceof b$?x$(e,t):n}function g$(e,t){return e instanceof w$?function(e){return rR(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class m$ extends d${}class y$ extends d${constructor(e){super(),this.elements=e}}function v$(e,t){const n=S$(t);for(const r of e.elements)n.some((e=>YO(e,r)))||n.push(r);return{arrayValue:{values:n}}}class b$ extends d${constructor(e){super(),this.elements=e}}function x$(e,t){let n=S$(t);for(const r of e.elements)n=n.filter((e=>!YO(e,r)));return{arrayValue:{values:n}}}class w$ extends d${constructor(e,t){super(),this.serializer=e,this.Pe=t}}function k$(e){return WO(e.integerValue||e.doubleValue)}function S$(e){return iR(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class C${constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new C$}static exists(e){return new C$(void 0,e)}static updateTime(e){return new C$(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function I$(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class E${}function T$(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new M$(e.key,C$.none()):new O$(e.key,e.data,C$.none());{const n=e.data,r=uR.empty();let i=new DO(hO.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new R$(e.key,r,new FO(i.toArray()),C$.none())}}function _$(e,t,n){e instanceof O$?function(e,t,n){const r=e.value.clone(),i=P$(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof R$?function(e,t,n){if(!I$(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=P$(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll($$(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function N$(e,t,n,r){return e instanceof O$?function(e,t,n,r){if(!I$(e.precondition,t))return n;const i=e.value.clone(),o=D$(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof R$?function(e,t,n,r){if(!I$(e.precondition,t))return n;const i=D$(e.fieldTransforms,r,t),o=t.data;return o.setAll($$(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return I$(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function A$(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&oO(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof y$&&t instanceof y$||e instanceof b$&&t instanceof b$?oO(e.elements,t.elements,YO):e instanceof w$&&t instanceof w$?YO(e.Pe,t.Pe):e instanceof m$&&t instanceof m$}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class O$ extends E${constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class R$ extends E${constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function $$(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function P$(e,t,n){const r=new Map;GA(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,f$(a,s,n[i]))}return r}function D$(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,p$(e,o,t))}return r}class M$ extends E${constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F${constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&_$(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=N$(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=N$(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=i$();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=T$(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(sO.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),s$())}isEqual(e){return this.batchId===e.batchId&&oO(this.mutations,e.mutations,((e,t)=>A$(e,t)))&&oO(this.baseMutations,e.baseMutations,((e,t)=>A$(e,t)))}}class L${constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}var j$,z$;function B$(e){if(void 0===e)return BA("GRPC error has no .code"),qA.UNKNOWN;switch(e){case j$.OK:return qA.OK;case j$.CANCELLED:return qA.CANCELLED;case j$.UNKNOWN:return qA.UNKNOWN;case j$.DEADLINE_EXCEEDED:return qA.DEADLINE_EXCEEDED;case j$.RESOURCE_EXHAUSTED:return qA.RESOURCE_EXHAUSTED;case j$.INTERNAL:return qA.INTERNAL;case j$.UNAVAILABLE:return qA.UNAVAILABLE;case j$.UNAUTHENTICATED:return qA.UNAUTHENTICATED;case j$.INVALID_ARGUMENT:return qA.INVALID_ARGUMENT;case j$.NOT_FOUND:return qA.NOT_FOUND;case j$.ALREADY_EXISTS:return qA.ALREADY_EXISTS;case j$.PERMISSION_DENIED:return qA.PERMISSION_DENIED;case j$.FAILED_PRECONDITION:return qA.FAILED_PRECONDITION;case j$.ABORTED:return qA.ABORTED;case j$.OUT_OF_RANGE:return qA.OUT_OF_RANGE;case j$.UNIMPLEMENTED:return qA.UNIMPLEMENTED;case j$.DATA_LOSS:return qA.DATA_LOSS;default:return VA()}}(z$=j$||(j$={}))[z$.OK=0]="OK",z$[z$.CANCELLED=1]="CANCELLED",z$[z$.UNKNOWN=2]="UNKNOWN",z$[z$.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",z$[z$.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",z$[z$.NOT_FOUND=5]="NOT_FOUND",z$[z$.ALREADY_EXISTS=6]="ALREADY_EXISTS",z$[z$.PERMISSION_DENIED=7]="PERMISSION_DENIED",z$[z$.UNAUTHENTICATED=16]="UNAUTHENTICATED",z$[z$.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",z$[z$.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",z$[z$.ABORTED=10]="ABORTED",z$[z$.OUT_OF_RANGE=11]="OUT_OF_RANGE",z$[z$.UNIMPLEMENTED=12]="UNIMPLEMENTED",z$[z$.INTERNAL=13]="INTERNAL",z$[z$.UNAVAILABLE=14]="UNAVAILABLE",z$[z$.DATA_LOSS=15]="DATA_LOSS";new kA([4294967295,4294967295],0);Error;class W${constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function U$(e){return GA(!!e),sO.fromTimestamp(function(e){const t=BO(e);return new aO(t.seconds,t.nanos)}(e))}function V$(e,t){const n=function(e){return new uO(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function G$(e){const t=uO.fromString(e);return GA(Q$(t)),t}function H$(e){const t=G$(e);return 4===t.length?uO.emptyPath():q$(t)}function q$(e){return GA(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function K$(e){let t=H$(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){GA(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=X$(e);return t instanceof vR&&xR(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new fR(Y$(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,SO(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new hR(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new hR(n,t)}(n.endAt)),LR(t,i,a,o,s,"F",l,u)}function X$(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Y$(e.unaryFilter.field);return yR.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Y$(e.unaryFilter.field);return yR.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Y$(e.unaryFilter.field);return yR.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Y$(e.unaryFilter.field);return yR.create(i,"!=",{nullValue:"NULL_VALUE"});default:return VA()}}(e):void 0!==e.fieldFilter?function(e){return yR.create(Y$(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return VA()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return vR.create(e.compositeFilter.filters.map((e=>X$(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return VA()}}(e.compositeFilter.op))}(e):VA()}function Y$(e){return hO.fromServerFormat(e.fieldPath)}function Q$(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class J${constructor(e){this.ct=e}}function Z$(e){const t=K$({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?VR(t,t.limit,"L"):t}class eP{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(WO(e.integerValue));else if("doubleValue"in e){const n=WO(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),CO(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=BO(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(UO(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?lR(e)?this.dt(t,Number.MAX_SAFE_INTEGER):aR(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):VA()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const o="value",a=(null===(r=null===(n=i[o].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(WO(a)),this.Vt(o,t),this.Tt(i[o],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),dO.fromName(e).path.forEach((e=>{this.dt(t,60),this.Dt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}eP.vt=new eP;class tP{constructor(){this.un=new nP}addToCollectionParentIndex(e,t){return this.un.add(t),bO.resolve()}getCollectionParents(e,t){return bO.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return bO.resolve()}deleteFieldIndex(e,t){return bO.resolve()}deleteAllFieldIndexes(e){return bO.resolve()}createTargetIndexes(e,t){return bO.resolve()}getDocumentsMatchingTarget(e,t){return bO.resolve(null)}getIndexType(e,t){return bO.resolve(0)}getFieldIndexes(e,t){return bO.resolve([])}getNextCollectionGroupToUpdate(e){return bO.resolve(null)}getMinOffset(e,t){return bO.resolve(mO.min())}getMinOffsetFromCollectionGroup(e,t){return bO.resolve(mO.min())}updateCollectionGroup(e,t,n){return bO.resolve()}updateIndexEntries(e,t){return bO.resolve()}}class nP{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new DO(uO.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new DO(uO.comparator)).toArray()}}new Uint8Array(0);class rP{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new rP(e,rP.DEFAULT_COLLECTION_PERCENTILE,rP.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}rP.DEFAULT_COLLECTION_PERCENTILE=10,rP.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rP.DEFAULT=new rP(41943040,rP.DEFAULT_COLLECTION_PERCENTILE,rP.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rP.DISABLED=new rP(-1,0,0);class iP{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new iP(0)}static kn(){return new iP(-1)}}class oP{constructor(){this.changes=new QR((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cR.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?bO.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class aP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class sP{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&N$(n.mutation,e,FO.empty(),aO.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,s$()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s$();const r=r$();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=t$();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=r$();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,s$())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ZR();const o=o$(),a=o$();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof R$)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),N$(a.mutation,t,a.mutation.getFieldMask(),aO.now())):o.set(t.key,FO.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new aP(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=o$();let r=new RO(((e,t)=>e-t)),i=s$();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||FO.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||s$()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,u=i$();l.forEach((e=>{if(!i.has(e)){const r=T$(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,s,u))}return bO.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return dO.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):bO.resolve(r$());let a=-1,s=i;return o.next((t=>bO.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?bO.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,s$()))).next((e=>({batchId:a,changes:n$(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new dO(t)).next((e=>{let t=t$();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=t$();return this.indexManager.getCollectionParents(e,i).next((a=>bO.forEach(a,(a=>{const s=function(e,t){return new FR(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,cR.newInvalidDocument(r)))}));let n=t$();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&N$(o.mutation,r,FO.empty(),aO.now()),KR(t,r)&&(n=n.insert(e,r))})),n}))}}class lP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return bO.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:U$(e.createTime)}}(t)),bO.resolve()}getNamedQuery(e,t){return bO.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Z$(e.bundledQuery),readTime:U$(e.readTime)}}(t)),bO.resolve()}}class uP{constructor(){this.overlays=new RO(dO.comparator),this.Ir=new Map}getOverlay(e,t){return bO.resolve(this.overlays.get(t))}getOverlays(e,t){const n=r$();return bO.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),bO.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),bO.resolve()}getOverlaysForCollection(e,t,n){const r=r$(),i=t.length+1,o=new dO(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return bO.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new RO(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=r$(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=r$(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return bO.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new L$(t,n));let i=this.Ir.get(t);void 0===i&&(i=s$(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class cP{constructor(){this.sessionToken=jO.EMPTY_BYTE_STRING}getSessionToken(e){return bO.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,bO.resolve()}}class hP{constructor(){this.Tr=new DO(dP.Er),this.dr=new DO(dP.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new dP(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new dP(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new dO(new uO([])),n=new dP(t,e),r=new dP(t,e+1),i=[];return this.dr.forEachInRange([n,r],(e=>{this.Vr(e),i.push(e.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new dO(new uO([])),n=new dP(t,e),r=new dP(t,e+1);let i=s$();return this.dr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new dP(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class dP{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return dO.comparator(e.key,t.key)||iO(e.wr,t.wr)}static Ar(e,t){return iO(e.wr,t.wr)||dO.comparator(e.key,t.key)}}class pP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new DO(dP.Er)}checkEmpty(e){return bO.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new F$(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new dP(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return bO.resolve(o)}lookupMutationBatch(e,t){return bO.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return bO.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return bO.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return bO.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new dP(t,0),r=new dP(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],(e=>{const t=this.Dr(e.wr);i.push(t)})),bO.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new DO(iO);return t.forEach((e=>{const t=new dP(e,0),r=new dP(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],(e=>{n=n.add(e.wr)}))})),bO.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;dO.isDocumentKey(i)||(i=i.child(""));const o=new dP(new dO(i),0);let a=new DO(iO);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)}),o),bO.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){GA(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return bO.forEach(t.mutations,(r=>{const i=new dP(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new dP(t,0),r=this.br.firstAfterOrEqual(n);return bO.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,bO.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fP{constructor(e){this.Mr=e,this.docs=new RO(dO.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return bO.resolve(n?n.document.mutableCopy():cR.newInvalidDocument(t))}getEntries(e,t){let n=ZR();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():cR.newInvalidDocument(e))})),bO.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ZR();const o=t.path,a=new dO(o.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||yO(gO(a),n)<=0||(r.has(a.key)||KR(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return bO.resolve(i)}getAllFromCollectionGroup(e,t,n,r){VA()}Or(e,t){return bO.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new gP(this)}getSize(e){return bO.resolve(this.size)}}class gP extends oP{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)})),bO.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class mP{constructor(e){this.persistence=e,this.Nr=new QR((e=>DR(e)),MR),this.lastRemoteSnapshotVersion=sO.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hP,this.targetCount=0,this.kr=iP.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),bO.resolve()}getLastRemoteSnapshotVersion(e){return bO.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bO.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),bO.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),bO.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new iP(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,bO.resolve()}updateTargetData(e,t){return this.Kn(t),bO.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,bO.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach(((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),bO.waitFor(i).next((()=>r))}getTargetCount(e){return bO.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return bO.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),bO.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),bO.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),bO.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return bO.resolve(n)}containsKey(e,t){return bO.resolve(this.Br.containsKey(t))}}class yP{constructor(e,t){this.qr={},this.overlays={},this.Qr=new kO(0),this.Kr=!1,this.Kr=!0,this.$r=new cP,this.referenceDelegate=e(this),this.Ur=new mP(this),this.indexManager=new tP,this.remoteDocumentCache=function(e){return new fP(e)}((e=>this.referenceDelegate.Wr(e))),this.serializer=new J$(t),this.Gr=new lP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new pP(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){zA("MemoryPersistence","Starting transaction:",e);const r=new vP(this.Qr.next());return this.referenceDelegate.zr(),n(r).next((e=>this.referenceDelegate.jr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Hr(e,t){return bO.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class vP extends vO{constructor(e){super(),this.currentSequenceNumber=e}}class bP{constructor(e){this.persistence=e,this.Jr=new hP,this.Yr=null}static Zr(e){return new bP(e)}get Xr(){if(this.Yr)return this.Yr;throw VA()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),bO.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),bO.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),bO.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bO.forEach(this.Xr,(n=>{const r=dO.fromPath(n);return this.ei(e,r).next((e=>{e||t.removeEntry(r,sO.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return bO.or([()=>bO.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class xP{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=s$(),r=s$();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new xP(e,t.fromCache,n,r)}}class wP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=jw()?8:xO(Mw())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Zi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new wP;return this.Xi(e,t,n).next((r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)}))})).next((()=>i.result))}es(e,t,n,r){return n.documentReadCount<this.ji?(jA()<=hk.DEBUG&&zA("QueryEngine","SDK will not create cache indexes for query:",qR(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),bO.resolve()):(jA()<=hk.DEBUG&&zA("QueryEngine","Query:",qR(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(jA()<=hk.DEBUG&&zA("QueryEngine","The SDK decides to create cache indexes for query:",qR(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,WR(t))):bO.resolve())}Yi(e,t){if(jR(t))return bO.resolve(null);let n=WR(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=VR(t,null,"F"),n=WR(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=s$(...r);return this.Ji.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.ts(t,r);return this.ns(t,o,i,n.readTime)?this.Yi(e,VR(t,null,"F")):this.rs(e,o,t,n)}))))})))))}Zi(e,t,n,r){return jR(t)||r.isEqual(sO.min())?bO.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const o=this.ts(t,i);return this.ns(t,o,n,r)?bO.resolve(null):(jA()<=hk.DEBUG&&zA("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qR(t)),this.rs(e,o,t,fO(r,-1)).next((e=>e)))}))}ts(e,t){let n=new DO(XR(e));return t.forEach(((t,r)=>{KR(e,r)&&(n=n.add(r))})),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return jA()<=hk.DEBUG&&zA("QueryEngine","Using full collection scan to execute query:",qR(t)),this.Ji.getDocumentsMatchingQuery(e,t,mO.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class SP{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new RO(iO),this._s=new QR((e=>DR(e)),MR),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function CP(e,t,n,r){return new SP(e,t,n,r)}async function IP(e,t){const n=HA(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let a=s$();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({hs:e,removedBatchIds:i,addedBatchIds:o})))}))}))}class EP{constructor(){this.activeTargetIds=u$()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TP{constructor(){this.so=new EP,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new EP,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _P{_o(e){}shutdown(){}}class NP{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){zA("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){zA("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let AP=null;function OP(){return null===AP?AP=268435456+Math.round(2147483648*Math.random()):AP++,"0x"+AP.toString(16)}const RP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $P{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const PP="WebChannelConnection";class DP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const o=OP(),a=this.xo(e,t.toUriEncodedString());zA("RestConnection",`Sending RPC '${e}' ${o}:`,a,n);const s={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(s,r,i),this.No(e,a,s,n).then((t=>(zA("RestConnection",`Received RPC '${e}' ${o}: `,t),t)),(t=>{throw WA("RestConnection",`RPC '${e}' ${o} failed with error: `,t,"url: ",a,"request:",n),t}))}Lo(e,t,n,r,i,o){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+FA,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=RP[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=OP();return new Promise(((o,a)=>{const s=new IA;s.setWithCredentials(!0),s.listenOnce(TA.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case _A.NO_ERROR:const t=s.getResponseJson();zA(PP,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),o(t);break;case _A.TIMEOUT:zA(PP,`RPC '${e}' ${i} timed out`),a(new KA(qA.DEADLINE_EXCEEDED,"Request time out"));break;case _A.HTTP_ERROR:const n=s.getStatus();if(zA(PP,`RPC '${e}' ${i} failed with status:`,n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(qA).indexOf(t)>=0?t:qA.UNKNOWN}(t.status);a(new KA(e,t.message))}else a(new KA(qA.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new KA(qA.UNAVAILABLE,"Connection failed."));break;default:VA()}}finally{zA(PP,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);zA(PP,`RPC '${e}' ${i} sending request:`,r),s.send(t,"POST",l,n,15)}))}Bo(e,t,n){const r=OP(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=RA(),a=OA(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Oo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const u=i.join("");zA(PP,`Creating RPC '${e}' stream ${r}: ${u}`,s);const c=o.createWebChannel(u,s);let h=!1,d=!1;const p=new $P({Io:t=>{d?zA(PP,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(zA(PP,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),zA(PP,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},To:()=>c.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(c,EA.EventType.OPEN,(()=>{d||(zA(PP,`RPC '${e}' stream ${r} transport opened.`),p.yo())})),f(c,EA.EventType.CLOSE,(()=>{d||(d=!0,zA(PP,`RPC '${e}' stream ${r} transport closed`),p.So())})),f(c,EA.EventType.ERROR,(t=>{d||(d=!0,WA(PP,`RPC '${e}' stream ${r} transport errored:`,t),p.So(new KA(qA.UNAVAILABLE,"The operation could not be completed")))})),f(c,EA.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];GA(!!i);const o=i,a=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){zA(PP,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=j$[e];if(void 0!==t)return B$(t)}(t),i=a.message;void 0===n&&(n=qA.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,p.So(new KA(n,i)),c.close()}else zA(PP,`RPC '${e}' stream ${r} received:`,i),p.bo(i)}})),f(a,AA.STAT_EVENT,(t=>{t.stat===NA.PROXY?zA(PP,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===NA.NOPROXY&&zA(PP,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.wo()}),0),p}}function MP(){return"undefined"!=typeof document?document:null}function FP(e){return new W$(e,!0)}class LP{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&zA("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class jP extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new KA(qA.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,a]=i;return this.connection.Mo(e,V$(t,n),r,o,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===qA.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new KA(qA.UNKNOWN,e.toString())}))}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[a,s]=o;return this.connection.Lo(e,V$(t,n),r,a,s,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===qA.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new KA(qA.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class zP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(BA(t),this.D_=!1):zA("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class BP{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((e=>{n.enqueueAndForget((async()=>{VP(this)&&(zA("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=HA(e);t.L_.add(4),await UP(t),t.q_.set("Unknown"),t.L_.delete(4),await WP(t)}(this))}))})),this.q_=new zP(n,r)}}async function WP(e){if(VP(e))for(const t of e.B_)await t(!0)}async function UP(e){for(const t of e.B_)await t(!1)}function VP(e){return 0===HA(e).L_.size}async function GP(e,t){const n=HA(e);t?(n.L_.delete(2),await WP(n)):t||(n.L_.add(2),await UP(n),n.q_.set("Unknown"))}class HP{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new XA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new HP(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new KA(qA.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class qP{constructor(){this.queries=KP(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=HA(e),r=n.queries;n.queries=KP(),r.forEach(((e,n)=>{for(const r of n.j_)r.onError(t)}))}(this,new KA(qA.ABORTED,"Firestore shutting down"))}}function KP(){return new QR((e=>HR(e)),GR)}function XP(e){e.Y_.forEach((e=>{e.next()}))}var YP,QP;(QP=YP||(YP={})).ea="default",QP.Cache="cache";class JP{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new QR((e=>HR(e)),GR),this.Ma=new Map,this.xa=new Set,this.Oa=new RO(dO.comparator),this.Na=new Map,this.La=new hP,this.Ba={},this.ka=new Map,this.qa=iP.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function ZP(e,t,n){const r=HA(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach(((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=HA(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)})),r&&XP(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function eD(e,t,n){const r=HA(e),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach(((e,s)=>{a.push(r.Ka(s,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=xP.Wi(s.targetId,e);o.push(t)}})))})),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=HA(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>bO.forEach(t,(t=>bO.forEach(t.$i,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>bO.forEach(t.Ui,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!wO(e))throw e;zA("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,o))}async function tD(e,t){const n=HA(e);if(!n.currentUser.isEqual(t)){zA("SyncEngine","User change. New user:",t.toKey());const e=await IP(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach((e=>{e.forEach((e=>{e.reject(new KA(qA.CANCELLED,t))}))})),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await eD(n,e.hs)}}class nD{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=FP(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return CP(this.persistence,new kP,e.initialUser,this.serializer)}Ga(e){return new yP(bP.Zr,this.serializer)}Wa(e){return new TP}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nD.provider={build:()=>new nD};class rD{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ZP(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=tD.bind(null,this.syncEngine),await GP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new qP}createDatastore(e){const t=FP(e.databaseInfo.databaseId),n=function(e){return new DP(e)}(e.databaseInfo);return function(e,t,n,r){return new jP(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new BP(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>ZP(this.syncEngine,e,0)),NP.D()?new NP:new _P)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new JP(e,t,n,r,i,o);return a&&(s.Qa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=HA(e);zA("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await UP(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}rD.provider={build:()=>new rD};function iD(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const oD=new Map;function aD(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":VA()}function sD(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new KA(qA.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=aD(e);throw new KA(qA.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class lD{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new KA(qA.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new KA(qA.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new KA(qA.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iD(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new KA(qA.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new KA(qA.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new KA(qA.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uD{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lD({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new KA(qA.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new KA(qA.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lD(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new QA;switch(e.type){case"firstParty":return new tO(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new KA(qA.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=oD.get(e);t&&(zA("ComponentProvider","Removing Datastore"),oD.delete(e),t.terminate())}(this),Promise.resolve()}}class cD{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new LP(this,"async_queue_retry"),this.Vu=()=>{const e=MP();e&&zA("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=MP();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=MP();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new XA;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(ie){if(!wO(ie))throw ie;zA("AsyncQueue","Operation failed with retryable error: "+ie)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw BA("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=HP.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(r),r}fu(){this.Eu&&VA()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class hD extends uD{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new cD,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cD(e),this._firestoreClient=void 0,await e}}}new RegExp("[~\\*/\\[\\]]");new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){FA=e}(xS),mS(new ok("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),a=new hD(new ZA(e.getProvider("auth-internal")),new rO(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new KA(qA.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qO(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),SS(DA,"4.7.3",e),SS(DA,"4.7.3","esm2017")}();const dD=wS({apiKey:"AIzaSyAMXGdN7KPADMrjsSzQ34petfqgwMemM_g",authDomain:"smartfreezer-ad72d.firebaseapp.com",projectId:"smartfreezer-ad72d",storageBucket:"smartfreezer-ad72d.appspot.com",messagingSenderId:"525905401819",appId:"1:525905401819:web:ab81063cb7426f105439fe",measurementId:"G-4G2HPNTBEY"}),pD=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kS();e=ik(e);const t=yS(e,SC);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=yS(e,SC);if(n.isInitialized()){const e=n.getImmediate();if(Jw(t,n.getOptions()))return e;throw EC.create("already-initialized")}const r=n.initialize({options:t})}(e)}(dD),function(e,t){const n="string"==typeof e?e:t||"(default)",r=yS("object"==typeof e?e:kS(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Rw("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=sD(e,uD))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==a&&WA("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=MA.MOCK_USER;else{t=Dw(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new KA(qA.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new MA(o)}e._authCredentials=new JA(new YA(t,n))}}(r,...e)}}(dD),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kS(),t=arguments.length>1?arguments[1]:void 0;const n=yS(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Rw("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=ik(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&xI("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&xI('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new LI(LI.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Dw(r.mockUserToken,e.app.options.projectId);o=new LI(t)}!function(e,t,n,r){e.repoInfo_=new VI(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,o)}(n,...e)}return n}());function fD(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if("components"===i||"slots"===i)n[i]={...e[i],...n[i]};else if("componentsProps"===i||"slotProps"===i){const r=e[i],o=t[i];if(o)if(r){n[i]={...o};for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const t=e;n[i][t]=fD(r[t],o[t])}}else n[i]=o;else n[i]=r||{}}else void 0===n[i]&&(n[i]=e[i])}return n}function gD(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};for(const i in e){const o=e[i];let a="",s=!0;for(let e=0;e<o.length;e+=1){const r=o[e];r&&(a+=(!0===s?"":" ")+t(r),s=!1,n&&n[r]&&(a+=" "+n[r]))}r[i]=a}return r}function mD(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const yD=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))};function vD(e){return yD(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function bD(e){if(e.type)return e;if("#"===e.charAt(0))return bD(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(mD(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(mD(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}const xD=(e,t)=>{try{return(e=>{const t=bD(e);return t.values.slice(0,3).map(((e,n)=>t.type.includes("hsl")&&0!==n?`${e}%`:e)).join(" ")})(e)}catch(bI){return e}};function wD(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=t.includes("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function kD(e){e=bD(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let s="rgb";const l=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",l.push(t[3])),wD({type:s,values:l})}function SD(e){let t="hsl"===(e=bD(e)).type||"hsla"===e.type?bD(kD(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function CD(e,t){return e=bD(e),t=vD(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,wD(e)}function ID(e,t,n){try{return CD(e,t)}catch(bI){return e}}function ED(e,t){if(e=bD(e),t=vD(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return wD(e)}function TD(e,t,n){try{return ED(e,t)}catch(bI){return e}}function _D(e,t){if(e=bD(e),t=vD(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return wD(e)}function ND(e,t,n){try{return _D(e,t)}catch(bI){return e}}function AD(e,t,n){try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return SD(e)>.5?ED(e,t):_D(e,t)}(e,t)}catch(bI){return e}}const OD=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},RD=e=>OD(e)&&"classes"!==e;function $D(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var PD=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,DD=$D((function(e){return PD.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var MD=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(ie){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),FD=Math.abs,LD=String.fromCharCode,jD=Object.assign;function zD(e){return e.trim()}function BD(e,t,n){return e.replace(t,n)}function WD(e,t){return e.indexOf(t)}function UD(e,t){return 0|e.charCodeAt(t)}function VD(e,t,n){return e.slice(t,n)}function GD(e){return e.length}function HD(e){return e.length}function qD(e,t){return t.push(e),e}var KD=1,XD=1,YD=0,QD=0,JD=0,ZD="";function eM(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:KD,column:XD,length:a,return:""}}function tM(e,t){return jD(eM("",null,null,"",null,null,0),e,{length:-e.length},t)}function nM(){return JD=QD>0?UD(ZD,--QD):0,XD--,10===JD&&(XD=1,KD--),JD}function rM(){return JD=QD<YD?UD(ZD,QD++):0,XD++,10===JD&&(XD=1,KD++),JD}function iM(){return UD(ZD,QD)}function oM(){return QD}function aM(e,t){return VD(ZD,e,t)}function sM(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function lM(e){return KD=XD=1,YD=GD(ZD=e),QD=0,[]}function uM(e){return ZD="",e}function cM(e){return zD(aM(QD-1,pM(91===e?e+2:40===e?e+1:e)))}function hM(e){for(;(JD=iM())&&JD<33;)rM();return sM(e)>2||sM(JD)>3?"":" "}function dM(e,t){for(;--t&&rM()&&!(JD<48||JD>102||JD>57&&JD<65||JD>70&&JD<97););return aM(e,oM()+(t<6&&32==iM()&&32==rM()))}function pM(e){for(;rM();)switch(JD){case e:return QD;case 34:case 39:34!==e&&39!==e&&pM(JD);break;case 40:41===e&&pM(e);break;case 92:rM()}return QD}function fM(e,t){for(;rM()&&e+JD!==57&&(e+JD!==84||47!==iM()););return"/*"+aM(t,QD-1)+"*"+LD(47===e?e:rM())}function gM(e){for(;!sM(iM());)rM();return aM(e,QD)}var mM="-ms-",yM="-moz-",vM="-webkit-",bM="comm",xM="rule",wM="decl",kM="@keyframes";function SM(e,t){for(var n="",r=HD(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function CM(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case wM:return e.return=e.return||e.value;case bM:return"";case kM:return e.return=e.value+"{"+SM(e.children,r)+"}";case xM:e.value=e.props.join(",")}return GD(n=SM(e.children,r))?e.return=e.value+"{"+n+"}":""}function IM(e){return function(t){t.root||(t=t.return)&&e(t)}}function EM(e){return uM(TM("",null,null,null,[""],e=lM(e),0,[0],e))}function TM(e,t,n,r,i,o,a,s,l){for(var u=0,c=0,h=a,d=0,p=0,f=0,g=1,m=1,y=1,v=0,b="",x=i,w=o,k=r,S=b;m;)switch(f=v,v=rM()){case 40:if(108!=f&&58==UD(S,h-1)){-1!=WD(S+=BD(cM(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:S+=cM(v);break;case 9:case 10:case 13:case 32:S+=hM(f);break;case 92:S+=dM(oM()-1,7);continue;case 47:switch(iM()){case 42:case 47:qD(NM(fM(rM(),oM()),t,n),l);break;default:S+="/"}break;case 123*g:s[u++]=GD(S)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+c:-1==y&&(S=BD(S,/\f/g,"")),p>0&&GD(S)-h&&qD(p>32?AM(S+";",r,n,h-1):AM(BD(S," ","")+";",r,n,h-2),l);break;case 59:S+=";";default:if(qD(k=_M(S,t,n,u,c,i,s,b,x=[],w=[],h),o),123===v)if(0===c)TM(S,t,k,k,x,o,h,s,w);else switch(99===d&&110===UD(S,3)?100:d){case 100:case 108:case 109:case 115:TM(e,k,k,r&&qD(_M(e,k,k,0,0,i,s,b,i,x=[],h),w),i,w,h,s,r?x:w);break;default:TM(S,k,k,k,[""],w,0,s,w)}}u=c=p=0,g=y=1,b=S="",h=a;break;case 58:h=1+GD(S),p=f;default:if(g<1)if(123==v)--g;else if(125==v&&0==g++&&125==nM())continue;switch(S+=LD(v),v*g){case 38:y=c>0?1:(S+="\f",-1);break;case 44:s[u++]=(GD(S)-1)*y,y=1;break;case 64:45===iM()&&(S+=cM(rM())),d=iM(),c=h=GD(b=S+=gM(oM())),v++;break;case 45:45===f&&2==GD(S)&&(g=0)}}return o}function _M(e,t,n,r,i,o,a,s,l,u,c){for(var h=i-1,d=0===i?o:[""],p=HD(d),f=0,g=0,m=0;f<r;++f)for(var y=0,v=VD(e,h+1,h=FD(g=a[f])),b=e;y<p;++y)(b=zD(g>0?d[y]+" "+v:BD(v,/&\f/g,d[y])))&&(l[m++]=b);return eM(e,t,n,0===i?xM:s,l,u,c)}function NM(e,t,n){return eM(e,t,n,bM,LD(JD),VD(e,2,-2),0)}function AM(e,t,n,r){return eM(e,t,n,wM,VD(e,0,r),VD(e,r+1,-1),r)}var OM=function(e,t,n){for(var r=0,i=0;r=i,i=iM(),38===r&&12===i&&(t[n]=1),!sM(i);)rM();return aM(e,QD)},RM=function(e,t){return uM(function(e,t){var n=-1,r=44;do{switch(sM(r)){case 0:38===r&&12===iM()&&(t[n]=1),e[n]+=OM(QD-1,t,n);break;case 2:e[n]+=cM(r);break;case 4:if(44===r){e[++n]=58===iM()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=LD(r)}}while(r=rM());return e}(lM(e),t))},$M=new WeakMap,PM=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||$M.get(n))&&!r){$M.set(e,!0);for(var i=[],o=RM(t,i),a=n.props,s=0,l=0;s<o.length;s++)for(var u=0;u<a.length;u++,l++)e.props[l]=i[s]?o[s].replace(/&\f/g,a[u]):a[u]+" "+o[s]}}},DM=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function MM(e,t){switch(function(e,t){return 45^UD(e,0)?(((t<<2^UD(e,0))<<2^UD(e,1))<<2^UD(e,2))<<2^UD(e,3):0}(e,t)){case 5103:return vM+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return vM+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return vM+e+yM+e+mM+e+e;case 6828:case 4268:return vM+e+mM+e+e;case 6165:return vM+e+mM+"flex-"+e+e;case 5187:return vM+e+BD(e,/(\w+).+(:[^]+)/,vM+"box-$1$2"+mM+"flex-$1$2")+e;case 5443:return vM+e+mM+"flex-item-"+BD(e,/flex-|-self/,"")+e;case 4675:return vM+e+mM+"flex-line-pack"+BD(e,/align-content|flex-|-self/,"")+e;case 5548:return vM+e+mM+BD(e,"shrink","negative")+e;case 5292:return vM+e+mM+BD(e,"basis","preferred-size")+e;case 6060:return vM+"box-"+BD(e,"-grow","")+vM+e+mM+BD(e,"grow","positive")+e;case 4554:return vM+BD(e,/([^-])(transform)/g,"$1"+vM+"$2")+e;case 6187:return BD(BD(BD(e,/(zoom-|grab)/,vM+"$1"),/(image-set)/,vM+"$1"),e,"")+e;case 5495:case 3959:return BD(e,/(image-set\([^]*)/,vM+"$1$`$1");case 4968:return BD(BD(e,/(.+:)(flex-)?(.*)/,vM+"box-pack:$3"+mM+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+vM+e+e;case 4095:case 3583:case 4068:case 2532:return BD(e,/(.+)-inline(.+)/,vM+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(GD(e)-1-t>6)switch(UD(e,t+1)){case 109:if(45!==UD(e,t+4))break;case 102:return BD(e,/(.+:)(.+)-([^]+)/,"$1"+vM+"$2-$3$1"+yM+(108==UD(e,t+3)?"$3":"$2-$3"))+e;case 115:return~WD(e,"stretch")?MM(BD(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==UD(e,t+1))break;case 6444:switch(UD(e,GD(e)-3-(~WD(e,"!important")&&10))){case 107:return BD(e,":",":"+vM)+e;case 101:return BD(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+vM+(45===UD(e,14)?"inline-":"")+"box$3$1"+vM+"$2$3$1"+mM+"$2box$3")+e}break;case 5936:switch(UD(e,t+11)){case 114:return vM+e+mM+BD(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return vM+e+mM+BD(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return vM+e+mM+BD(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return vM+e+mM+e+e}return e}var FM=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case wM:e.return=MM(e.value,e.length);break;case kM:return SM([tM(e,{value:BD(e.value,"@","@"+vM)})],r);case xM:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return SM([tM(e,{props:[BD(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return SM([tM(e,{props:[BD(t,/:(plac\w+)/,":"+vM+"input-$1")]}),tM(e,{props:[BD(t,/:(plac\w+)/,":-moz-$1")]}),tM(e,{props:[BD(t,/:(plac\w+)/,mM+"input-$1")]})],r)}return""}))}}],LM=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,i,o=e.stylisPlugins||FM,a={},s=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;s.push(e)}));var l,u=[PM,DM],c=[CM,IM((function(e){l.insert(e)}))],h=function(e){var t=HD(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}(u.concat(o,c));i=function(e,t,n,r){l=n,function(e){SM(EM(e),h)}(e?e+"{"+t.styles+"}":t.styles),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new MD({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:i};return d.sheet.hydrate(s),d};var jM={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},zM=/[A-Z]|^ms/g,BM=/_EMO_([^_]+?)_([^]*?)_EMO_/g,WM=function(e){return 45===e.charCodeAt(1)},UM=function(e){return null!=e&&"boolean"!==typeof e},VM=$D((function(e){return WM(e)?e:e.replace(zM,"-$&").toLowerCase()})),GM=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(BM,(function(e,t,n){return qM={name:t,styles:n,next:qM},t}))}return 1===jM[e]||WM(e)||"number"!==typeof t||0===t?t:t+"px"};function HM(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return qM={name:i.name,styles:i.styles,next:qM},i.name;var o=n;if(void 0!==o.styles){var a=o.next;if(void 0!==a)for(;void 0!==a;)qM={name:a.name,styles:a.styles,next:qM},a=a.next;return o.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=HM(e,t,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a){var s=a;null!=t&&void 0!==t[s]?r+=o+"{"+t[s]+"}":UM(s)&&(r+=VM(o)+":"+GM(o,s)+";")}else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var l=HM(e,t,a);switch(o){case"animation":case"animationName":r+=VM(o)+":"+l+";";break;default:r+=o+"{"+l+"}"}}else for(var u=0;u<a.length;u++)UM(a[u])&&(r+=VM(o)+":"+GM(o,a[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var s=qM,l=n(e);return qM=s,HM(e,t,l)}}var u=n;if(null==t)return u;var c=t[u];return void 0!==c?c:u}var qM,KM=/label:\s*([^\s;{]+)\s*(;|$)/g;function XM(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";qM=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=HM(n,t,o)):i+=o[0];for(var a=1;a<e.length;a++){if(i+=HM(n,t,e[a]),r)i+=o[a]}KM.lastIndex=0;for(var s,l="";null!==(s=KM.exec(i));)l+="-"+s[1];var u=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:u,styles:i,next:qM}}var YM=!!s.useInsertionEffect&&s.useInsertionEffect,QM=YM||function(e){return e()},JM=YM||a.useLayoutEffect,ZM=a.createContext("undefined"!==typeof HTMLElement?LM({key:"css"}):null),eF=(ZM.Provider,function(e){return(0,a.forwardRef)((function(t,n){var r=(0,a.useContext)(ZM);return e(t,r,n)}))}),tF=a.createContext({});var nF=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},rF=function(e,t,n){nF(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}},iF=DD,oF=function(e){return"theme"!==e},aF=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?iF:oF},sF=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},lF=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return nF(t,n,r),QM((function(){return rF(t,n,r)})),null},uF=function e(t,n){var r,i,o=t.__emotion_real===t,s=o&&t.__emotion_base||t;void 0!==n&&(r=n.label,i=n.target);var l=sF(t,n,o),u=l||aF(s),c=!u("as");return function(){var h=arguments,d=o&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&d.push("label:"+r+";"),null==h[0]||void 0===h[0].raw)d.push.apply(d,h);else{d.push(h[0][0]);for(var p=h.length,f=1;f<p;f++)d.push(h[f],h[0][f])}var g=eF((function(e,t,n){var r=c&&e.as||s,o="",h=[],p=e;if(null==e.theme){for(var f in p={},e)p[f]=e[f];p.theme=a.useContext(tF)}"string"===typeof e.className?o=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}(t.registered,h,e.className):null!=e.className&&(o=e.className+" ");var g=XM(d.concat(h),t.registered,p);o+=t.key+"-"+g.name,void 0!==i&&(o+=" "+i);var m=c&&void 0===l?aF(r):u,y={};for(var v in e)c&&"as"===v||m(v)&&(y[v]=e[v]);return y.className=o,n&&(y.ref=n),a.createElement(a.Fragment,null,a.createElement(lF,{cache:t,serialized:g,isStringTag:"string"===typeof r}),a.createElement(r,y))}));return g.displayName=void 0!==r?r:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=s,g.__emotion_styles=d,g.__emotion_forwardProp=l,Object.defineProperty(g,"toString",{value:function(){return"."+i}}),g.withComponent=function(t,r){return e(t,ha({},n,r,{shouldForwardProp:sF(g,r,!0)})).apply(void 0,d)},g}}.bind();function cF(e,t){return uF(e,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){uF[e]=uF(e)}));function hF(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function dF(e){if(!hF(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=dF(e[n])})),t}function pF(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const r=n.clone?{...e}:e;return hF(e)&&hF(t)&&Object.keys(t).forEach((i=>{hF(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&hF(e[i])?r[i]=pF(e[i],t[i],n):n.clone?r[i]=hF(t[i])?dF(t[i]):t[i]:r[i]=t[i]})),r}function fF(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=e,o=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>({...e,[t.key]:t.val})),{})})(t),a=Object.keys(o);function s(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function l(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-r/100}${n})`}function u(e,i){const o=a.indexOf(i);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==o&&"number"===typeof t[a[o]]?t[a[o]]:i)-r/100}${n})`}return{keys:a,values:o,up:s,down:l,between:u,only:function(e){return a.indexOf(e)+1<a.length?u(e,a[a.indexOf(e)+1]):s(e)},not:function(e){const t=a.indexOf(e);return 0===t?s(a[1]):t===a.length-1?l(a[t]):u(e,a[a.indexOf(e)+1]).replace("@media","@media not all and")},unit:n,...i}}const gF={borderRadius:4},mF={xs:0,sm:600,md:900,lg:1200,xl:1536},yF={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${mF[e]}px)`},vF={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:mF[t]||t;return"number"===typeof n&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function bF(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||yF;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||yF;return Object.keys(t).reduce(((i,o)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith(`@${e}`)))||!!t.match(/^@\d/))}(e.keys,o)){const e=function(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return e.containerQueries(i).up(o)}(r.containerQueries?r:vF,o);e&&(i[e]=n(t[o],o))}else if(Object.keys(e.values||mF).includes(o)){i[e.up(o)]=n(t[o],o)}else{const e=o;i[e]=t[e]}return i}),{})}return n(t)}function xF(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.keys?.reduce(((t,n)=>(t[e.up(n)]={},t)),{});return t||{}}function wF(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function kF(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(i);if(0===o.length)return t;let a;return o.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[a],a=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[a],a=n):e[n]=t,e)),{})}function SF(e){if("string"!==typeof e)throw new Error(mD(7));return e.charAt(0).toUpperCase()+e.slice(1)}function CF(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function IF(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:CF(e,n)||i,t&&(r=t(r,i,e)),r}const EF=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,o=e=>{if(null==e[t])return null;const o=e[t],a=CF(e.theme,r)||{};return bF(e,o,(e=>{let r=IF(a,i,e);return e===r&&"string"===typeof e&&(r=IF(a,i,`${t}${"default"===e?"":SF(e)}`,e)),!1===n?r:{[n]:r}}))};return o.propTypes={},o.filterProps=[t],o};const TF=function(e,t){return t?pF(e,t,{clone:!1}):e};const _F={m:"margin",p:"padding"},NF={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},AF={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},OF=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!AF[e])return[e];e=AF[e]}const[t,n]=e.split(""),r=_F[t],i=NF[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),RF=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],$F=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],PF=[...RF,...$F];function DF(e,t,n,r){const i=CF(e,t,!0)??n;return"number"===typeof i||"string"===typeof i?e=>"string"===typeof e?e:"string"===typeof i?`calc(${e} * ${i})`:i*e:Array.isArray(i)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=i[t];return e>=0?n:"number"===typeof n?-n:`-${n}`}:"function"===typeof i?i:()=>{}}function MF(e){return DF(e,"spacing",8)}function FF(e,t){return"string"===typeof t||null==t?t:e(t)}function LF(e,t,n,r){if(!t.includes(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=FF(t,n),e)),{})}(OF(n),r);return bF(e,e[n],i)}function jF(e,t){const n=MF(e.theme);return Object.keys(e).map((r=>LF(e,t,r,n))).reduce(TF,{})}function zF(e){return jF(e,RF)}function BF(e){return jF(e,$F)}function WF(e){return jF(e,PF)}zF.propTypes={},zF.filterProps=RF,BF.propTypes={},BF.filterProps=$F,WF.propTypes={},WF.filterProps=PF;function UF(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:MF({spacing:e});if(e.mui)return e;const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}const VF=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?TF(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};function GF(e){return"number"!==typeof e?e:`${e}px solid`}function HF(e,t){return EF({prop:e,themeKey:"borders",transform:t})}const qF=HF("border",GF),KF=HF("borderTop",GF),XF=HF("borderRight",GF),YF=HF("borderBottom",GF),QF=HF("borderLeft",GF),JF=HF("borderColor"),ZF=HF("borderTopColor"),eL=HF("borderRightColor"),tL=HF("borderBottomColor"),nL=HF("borderLeftColor"),rL=HF("outline",GF),iL=HF("outlineColor"),oL=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=DF(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:FF(t,e)});return bF(e,e.borderRadius,n)}return null};oL.propTypes={},oL.filterProps=["borderRadius"];VF(qF,KF,XF,YF,QF,JF,ZF,eL,tL,nL,oL,rL,iL);const aL=e=>{if(void 0!==e.gap&&null!==e.gap){const t=DF(e.theme,"spacing",8),n=e=>({gap:FF(t,e)});return bF(e,e.gap,n)}return null};aL.propTypes={},aL.filterProps=["gap"];const sL=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=DF(e.theme,"spacing",8),n=e=>({columnGap:FF(t,e)});return bF(e,e.columnGap,n)}return null};sL.propTypes={},sL.filterProps=["columnGap"];const lL=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=DF(e.theme,"spacing",8),n=e=>({rowGap:FF(t,e)});return bF(e,e.rowGap,n)}return null};lL.propTypes={},lL.filterProps=["rowGap"];VF(aL,sL,lL,EF({prop:"gridColumn"}),EF({prop:"gridRow"}),EF({prop:"gridAutoFlow"}),EF({prop:"gridAutoColumns"}),EF({prop:"gridAutoRows"}),EF({prop:"gridTemplateColumns"}),EF({prop:"gridTemplateRows"}),EF({prop:"gridTemplateAreas"}),EF({prop:"gridArea"}));function uL(e,t){return"grey"===t?t:e}VF(EF({prop:"color",themeKey:"palette",transform:uL}),EF({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:uL}),EF({prop:"backgroundColor",themeKey:"palette",transform:uL}));function cL(e){return e<=1&&0!==e?100*e+"%":e}const hL=EF({prop:"width",transform:cL}),dL=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{const n=e.theme?.breakpoints?.values?.[t]||mF[t];return n?"px"!==e.theme?.breakpoints?.unit?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:cL(t)}};return bF(e,e.maxWidth,t)}return null};dL.filterProps=["maxWidth"];const pL=EF({prop:"minWidth",transform:cL}),fL=EF({prop:"height",transform:cL}),gL=EF({prop:"maxHeight",transform:cL}),mL=EF({prop:"minHeight",transform:cL}),yL=(EF({prop:"size",cssProperty:"width",transform:cL}),EF({prop:"size",cssProperty:"height",transform:cL}),VF(hL,dL,pL,fL,gL,mL,EF({prop:"boxSizing"})),{border:{themeKey:"borders",transform:GF},borderTop:{themeKey:"borders",transform:GF},borderRight:{themeKey:"borders",transform:GF},borderBottom:{themeKey:"borders",transform:GF},borderLeft:{themeKey:"borders",transform:GF},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:GF},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:oL},color:{themeKey:"palette",transform:uL},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:uL},backgroundColor:{themeKey:"palette",transform:uL},p:{style:BF},pt:{style:BF},pr:{style:BF},pb:{style:BF},pl:{style:BF},px:{style:BF},py:{style:BF},padding:{style:BF},paddingTop:{style:BF},paddingRight:{style:BF},paddingBottom:{style:BF},paddingLeft:{style:BF},paddingX:{style:BF},paddingY:{style:BF},paddingInline:{style:BF},paddingInlineStart:{style:BF},paddingInlineEnd:{style:BF},paddingBlock:{style:BF},paddingBlockStart:{style:BF},paddingBlockEnd:{style:BF},m:{style:zF},mt:{style:zF},mr:{style:zF},mb:{style:zF},ml:{style:zF},mx:{style:zF},my:{style:zF},margin:{style:zF},marginTop:{style:zF},marginRight:{style:zF},marginBottom:{style:zF},marginLeft:{style:zF},marginX:{style:zF},marginY:{style:zF},marginInline:{style:zF},marginInlineStart:{style:zF},marginInlineEnd:{style:zF},marginBlock:{style:zF},marginBlockStart:{style:zF},marginBlockEnd:{style:zF},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:aL},rowGap:{style:lL},columnGap:{style:sL},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:cL},maxWidth:{style:dL},minWidth:{transform:cL},height:{transform:cL},maxHeight:{transform:cL},minHeight:{transform:cL},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}}),vL=yL;const bL=function(){function e(e,t,n,r){const i={[e]:t,theme:n},o=r[e];if(!o)return{[e]:t};const{cssProperty:a=e,themeKey:s,transform:l,style:u}=o;if(null==t)return null;if("typography"===s&&"inherit"===t)return{[e]:t};const c=CF(n,s)||{};if(u)return u(i);return bF(i,t,(t=>{let n=IF(c,l,t);return t===n&&"string"===typeof t&&(n=IF(c,l,`${e}${"default"===t?"":SF(t)}`,t)),!1===a?n:{[a]:n}}))}return function t(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const o=i.unstable_sxConfig??vL;function a(n){let r=n;if("function"===typeof n)r=n(i);else if("object"!==typeof n)return n;if(!r)return null;const a=xF(i.breakpoints),s=Object.keys(a);let l=a;return Object.keys(r).forEach((n=>{const a=function(e,t){return"function"===typeof e?e(t):e}(r[n],i);if(null!==a&&void 0!==a)if("object"===typeof a)if(o[n])l=TF(l,e(n,a,i,o));else{const e=bF({theme:i},a,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,a)?l=TF(l,e):l[n]=t({sx:a,theme:i})}else l=TF(l,e(n,a,i,o))})),function(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{const n=/min-width:\s*([0-9.]+)/;return+(e.match(n)?.[1]||0)-+(t.match(n)?.[1]||0)}));return n.length?n.reduce(((e,n)=>{const r=t[n];return delete e[n],e[n]=r,e}),{...t}):t}(i,wF(s,l))}return Array.isArray(r)?r.map(a):a(r)}}();bL.filterProps=["sx"];const xL=bL;function wL(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||"function"!==typeof n.getColorSchemeSelector)return{};let r=n.getColorSchemeSelector(e);return"&"===r?t:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:t})}return n.palette.mode===e?t:{}}const kL=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:r,shape:i={},...o}=e;let a=pF({breakpoints:fF(t),direction:"ltr",components:{},palette:{mode:"light",...n},spacing:UF(r),shape:{...gF,...i}},o);a=function(e){const t=(e,t)=>e.replace("@media",t?`@container ${t}`:"@container");function n(n,r){n.up=function(){return t(e.breakpoints.up(...arguments),r)},n.down=function(){return t(e.breakpoints.down(...arguments),r)},n.between=function(){return t(e.breakpoints.between(...arguments),r)},n.only=function(){return t(e.breakpoints.only(...arguments),r)},n.not=function(){const n=t(e.breakpoints.not(...arguments),r);return n.includes("not all and")?n.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):n}}const r={},i=e=>(n(r,e),r);return n(i),{...e,containerQueries:i}}(a),a.applyStyles=wL;for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];return a=l.reduce(((e,t)=>pF(e,t)),a),a.unstable_sxConfig={...vL,...o?.unstable_sxConfig},a.unstable_sx=function(e){return xL({sx:e,theme:this})},a},SL=kL();function CL(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function IL(e,t,n){return function(e){for(const t in e)return!1;return!0}(t)?n:t[e]||t}const EL=Symbol("mui.processed_props");function TL(e,t,n){if(EL in e)return e[EL];const r={...e,theme:IL(t,e.theme,n)};return e[EL]=r,r[EL]=r,r}function _L(e){return e?(t,n)=>n[e]:null}function NL(e,t){const n="function"===typeof e?e(t):e;if(Array.isArray(n))return n.flatMap((e=>NL(e,t)));if(Array.isArray(n?.variants)){const{variants:e,...r}=n;let i,o=r;e:for(let n=0;n<e.length;n+=1){const r=e[n];if("function"===typeof r.props){if(i??={...t,...t.ownerState,ownerState:t.ownerState},!r.props(i))continue}else for(const e in r.props)if(t[e]!==r.props[e]&&t.ownerState?.[e]!==r.props[e])continue e;Array.isArray(o)||(o=[o]),"function"===typeof r.style?(i??={...t,...t.ownerState,ownerState:t.ownerState},o.push(r.style(i))):o.push(r.style)}return o}return n}function AL(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const OL={black:"#000",white:"#fff"},RL={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},$L={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},PL={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},DL={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},ML={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},FL={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},LL={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},jL={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:OL.white,default:OL.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},zL={text:{primary:OL.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:OL.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function BL(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=_D(e.main,i):"dark"===t&&(e.dark=ED(e.main,o)))}function WL(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=e,o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ML[200],light:ML[50],dark:ML[400]}:{main:ML[700],light:ML[400],dark:ML[800]}}(t),a=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:$L[200],light:$L[50],dark:$L[400]}:{main:$L[500],light:$L[300],dark:$L[700]}}(t),s=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:PL[500],light:PL[300],dark:PL[700]}:{main:PL[700],light:PL[400],dark:PL[800]}}(t),l=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:FL[400],light:FL[300],dark:FL[700]}:{main:FL[700],light:FL[500],dark:FL[900]}}(t),u=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:LL[400],light:LL[300],dark:LL[700]}:{main:LL[800],light:LL[500],dark:LL[900]}}(t),c=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:DL[400],light:DL[300],dark:DL[700]}:{main:"#ed6c02",light:DL[500],dark:DL[900]}}(t);function h(e){const t=function(e,t){const n=SD(e),r=SD(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,zL.text.primary)>=n?zL.text.primary:jL.text.primary;return t}const d=e=>{let{color:t,name:n,mainShade:i=500,lightShade:o=300,darkShade:a=700}=e;if(t={...t},!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(mD(11,n?` (${n})`:"",i));if("string"!==typeof t.main)throw new Error(mD(12,n?` (${n})`:"",JSON.stringify(t.main)));return BL(t,"light",o,r),BL(t,"dark",a,r),t.contrastText||(t.contrastText=h(t.main)),t},p={dark:zL,light:jL};return pF({common:{...OL},mode:t,primary:d({color:o,name:"primary"}),secondary:d({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:s,name:"error"}),warning:d({color:c,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:u,name:"success"}),grey:RL,contrastThreshold:n,getContrastText:h,augmentColor:d,tonalOffset:r,...p[t]},i)}function UL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r.length)return"";const o=r[0];return"string"!==typeof o||o.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, ${o}`:`, var(--${e?`${e}-`:""}${o}${t(...r.slice(1))})`}return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return`var(--${e?`${e}-`:""}${n}${t(...i)})`}}function VL(e){const t={};return Object.entries(e).forEach((e=>{const[n,r]=e;"object"===typeof r&&(t[n]=`${r.fontStyle?`${r.fontStyle} `:""}${r.fontVariant?`${r.fontVariant} `:""}${r.fontWeight?`${r.fontWeight} `:""}${r.fontStretch?`${r.fontStretch} `:""}${r.fontSize||""}${r.lineHeight?`/${r.lineHeight} `:""}${r.fontFamily||""}`)})),t}const GL=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=e;t.forEach(((e,o)=>{o===t.length-1?Array.isArray(i)?i[Number(e)]=n:i&&"object"===typeof i&&(i[e]=n):i&&"object"===typeof i&&(i[e]||(i[e]=r.includes(e)?[]:{}),i=i[e])}))};function HL(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},o={},a={};return((e,t,n)=>{!function e(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(r).forEach((r=>{let[a,s]=r;(!n||n&&!n([...i,a]))&&void 0!==s&&null!==s&&("object"===typeof s&&Object.keys(s).length>0?e(s,[...i,a],Array.isArray(s)?[...o,a]:o):t([...i,a],s,o))}))}(e)})(e,((e,t,s)=>{if(("string"===typeof t||"number"===typeof t)&&(!r||!r(e,t))){const r=`--${n?`${n}-`:""}${e.join("-")}`,l=((e,t)=>{if("number"===typeof t)return["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t)))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`;return t})(e,t);Object.assign(i,{[r]:l}),GL(o,e,`var(${r})`,s),GL(a,e,`var(${r}, ${l})`,s)}}),(e=>"vars"===e[0])),{css:i,vars:o,varsWithDefaults:a}}const qL=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:n=m,disableCssColorScheme:r,colorSchemeSelector:i}=t,{colorSchemes:o={},components:a,defaultColorScheme:s="light",...l}=e,{vars:u,css:c,varsWithDefaults:h}=HL(l,t);let d=h;const p={},{[s]:f,...g}=o;if(Object.entries(g||{}).forEach((e=>{let[n,r]=e;const{vars:i,css:o,varsWithDefaults:a}=HL(r,t);d=pF(d,a),p[n]={css:o,vars:i}})),f){const{css:e,vars:n,varsWithDefaults:r}=HL(f,t);d=pF(d,r),p[s]={css:e,vars:n}}function m(t,n){let r=i;if("class"===i&&(r=".%s"),"data"===i&&(r="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(r=`[${i}="%s"]`),t){if("media"===r){if(e.defaultColorScheme===t)return":root";const r=o[t]?.palette?.mode||t;return{[`@media (prefers-color-scheme: ${r})`]:{":root":n}}}if(r)return e.defaultColorScheme===t?`:root, ${r.replace("%s",String(t))}`:r.replace("%s",String(t))}return":root"}return{vars:d,generateThemeVars:()=>{let e={...u};return Object.entries(p).forEach((t=>{let[,{vars:n}]=t;e=pF(e,n)})),e},generateStyleSheets:()=>{const t=[],i=e.defaultColorScheme||"light";function a(e,n){Object.keys(n).length&&t.push("string"===typeof e?{[e]:{...n}}:e)}a(n(void 0,{...c}),c);const{[i]:s,...l}=p;if(s){const{css:e}=s,t=o[i]?.palette?.mode,l=!r&&t?{colorScheme:t,...e}:{...e};a(n(i,{...l}),l)}return Object.entries(l).forEach((e=>{let[t,{css:i}]=e;const s=o[t]?.palette?.mode,l=!r&&s?{colorScheme:s,...i}:{...i};a(n(t,{...l}),l)})),t}}};function KL(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function XL(e){return Math.round(1e5*e)/1e5}const YL={textTransform:"uppercase"},QL='"Roboto", "Helvetica", "Arial", sans-serif';function JL(e,t){const{fontFamily:n=QL,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:s=700,htmlFontSize:l=16,allVariants:u,pxToRem:c,...h}="function"===typeof t?t(e):t;const d=r/14,p=c||(e=>e/l*d+"rem"),f=(e,t,r,i,o)=>({fontFamily:n,fontWeight:e,fontSize:p(t),lineHeight:r,...n===QL?{letterSpacing:`${XL(i/t)}em`}:{},...o,...u}),g={h1:f(i,96,1.167,-1.5),h2:f(i,60,1.2,-.5),h3:f(o,48,1.167,0),h4:f(o,34,1.235,.25),h5:f(o,24,1.334,0),h6:f(a,20,1.6,.15),subtitle1:f(o,16,1.75,.15),subtitle2:f(a,14,1.57,.1),body1:f(o,16,1.5,.15),body2:f(o,14,1.43,.15),button:f(a,14,1.75,.4,YL),caption:f(o,12,1.66,.4),overline:f(o,12,2.66,1,YL),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return pF({htmlFontSize:l,pxToRem:p,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:s,...g},h,{clone:!1})}function ZL(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const ej=["none",ZL(0,2,1,-1,0,1,1,0,0,1,3,0),ZL(0,3,1,-2,0,2,2,0,0,1,5,0),ZL(0,3,3,-2,0,3,4,0,0,1,8,0),ZL(0,2,4,-1,0,4,5,0,0,1,10,0),ZL(0,3,5,-1,0,5,8,0,0,1,14,0),ZL(0,3,5,-1,0,6,10,0,0,1,18,0),ZL(0,4,5,-2,0,7,10,1,0,2,16,1),ZL(0,5,5,-3,0,8,10,1,0,3,14,2),ZL(0,5,6,-3,0,9,12,1,0,3,16,2),ZL(0,6,6,-3,0,10,14,1,0,4,18,3),ZL(0,6,7,-4,0,11,15,1,0,4,20,3),ZL(0,7,8,-4,0,12,17,2,0,5,22,4),ZL(0,7,8,-4,0,13,19,2,0,5,24,4),ZL(0,7,9,-4,0,14,21,2,0,5,26,4),ZL(0,8,9,-5,0,15,22,2,0,6,28,5),ZL(0,8,10,-5,0,16,24,2,0,6,30,5),ZL(0,8,11,-5,0,17,26,2,0,6,32,5),ZL(0,9,11,-5,0,18,28,2,0,7,34,6),ZL(0,9,12,-6,0,19,29,2,0,7,36,6),ZL(0,10,13,-6,0,20,31,3,0,8,38,7),ZL(0,10,13,-6,0,21,33,3,0,8,40,7),ZL(0,10,14,-6,0,22,35,3,0,8,42,7),ZL(0,11,14,-7,0,23,36,3,0,9,44,8),ZL(0,11,15,-7,0,24,38,3,0,9,46,8)],tj={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},nj={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function rj(e){return`${Math.round(e)}ms`}function ij(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function oj(e){const t={...tj,...e.easing},n={...nj,...e.duration};return{getAutoHeightDuration:ij,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:o=t.easeInOut,delay:a=0,...s}=r;return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof i?i:rj(i)} ${o} ${"string"===typeof a?a:rj(a)}`)).join(",")},...e,easing:t,duration:n}}const aj={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function sj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:n={},spacing:r,palette:i={},transitions:o={},typography:a={},shape:s,...l}=e;if(e.vars)throw new Error(mD(20));const u=WL(i),c=kL(e);let h=pF(c,{mixins:KL(c.breakpoints,n),palette:u,shadows:ej.slice(),typography:JL(u,a),transitions:oj(o),zIndex:{...aj}});h=pF(h,l);for(var d=arguments.length,p=new Array(d>1?d-1:0),f=1;f<d;f++)p[f-1]=arguments[f];return h=p.reduce(((e,t)=>pF(e,t)),h),h.unstable_sxConfig={...vL,...l?.unstable_sxConfig},h.unstable_sx=function(e){return xL({sx:e,theme:this})},h}const lj=sj;function uj(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}const cj=[...Array(25)].map(((e,t)=>{if(0===t)return"none";const n=uj(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`}));function hj(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function dj(e){return"dark"===e?cj:[]}function pj(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const fj=e=>[...[...Array(25)].map(((t,n)=>`--${e?`${e}-`:""}overlays-${n}`)),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],gj=e=>(t,n)=>{const r=e.colorSchemeSelector;let i=r;if("class"===r&&(i=".%s"),"data"===r&&(i="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(i=`[${r}="%s"]`),e.defaultColorScheme===t){if("dark"===t){const r={};return fj(e.cssVarPrefix).forEach((e=>{r[e]=n[e],delete n[e]})),"media"===i?{":root":n,"@media (prefers-color-scheme: dark)":{":root":r}}:i?{[i.replace("%s",t)]:r,[`:root, ${i.replace("%s",t)}`]:n}:{":root":{...n,...r}}}if(i&&"media"!==i)return`:root, ${i.replace("%s",String(t))}`}else if(t){if("media"===i)return{[`@media (prefers-color-scheme: ${String(t)})`]:{":root":n}};if(i)return i.replace("%s",String(t))}return":root"};function mj(e){return hF(e)||"undefined"===typeof e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)}function yj(){const e={...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return function e(t){const n=Object.entries(t);for(let r=0;r<n.length;r++){const[i,o]=n[r];!mj(o)||i.startsWith("unstable_")?delete t[i]:hF(o)&&(t[i]={...o},e(t[i]))}}(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ${JSON.stringify(e,null,2)};\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;`}function vj(e,t,n){!e[t]&&n&&(e[t]=n)}function bj(e){return e&&e.startsWith("hsl")?kD(e):e}function xj(e,t){`${t}Channel`in e||(e[`${t}Channel`]=xD(bj(e[t])))}const wj=e=>{try{return e()}catch(bI){}};function kj(e,t,n,r){if(!t)return;t=!0===t?{}:t;const i="dark"===r?"dark":"light";if(!n)return void(e[r]=function(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...i}=e,o=WL(t);return{palette:o,opacity:{...hj(o.mode),...n},overlays:r||dj(o.mode),...i}}({...t,palette:{mode:i,...t?.palette}}));const{palette:o,...a}=lj({...n,palette:{mode:i,...t?.palette}});return e[r]={...t,palette:o,opacity:{...hj(i),...t?.opacity},overlays:t?.overlays||dj(i)},a}function Sj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:o=pj,colorSchemeSelector:a=(t.light&&t.dark?"media":void 0),...s}=e,l=Object.keys(t)[0],u=n||(t.light&&"light"!==l?"light":l),c=function(){return UL(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")}(i),{[u]:h,light:d,dark:p,...f}=t,g={...f};let m=h;if(("dark"===u&&!("dark"in t)||"light"===u&&!("light"in t))&&(m=!0),!m)throw new Error(mD(21,u));const y=kj(g,m,s,u);d&&!g.light&&kj(g,d,void 0,"light"),p&&!g.dark&&kj(g,p,void 0,"dark");let v={defaultColorScheme:u,...y,cssVarPrefix:i,colorSchemeSelector:a,getCssVar:c,colorSchemes:g,font:{...VL(y.typography),...y.font},spacing:(b=s.spacing,"number"===typeof b?`${b}px`:"string"===typeof b||"function"===typeof b||Array.isArray(b)?b:"8px")};var b;Object.keys(v.colorSchemes).forEach((e=>{const t=v.colorSchemes[e].palette,n=e=>{const n=e.split("-"),r=n[1],i=n[2];return c(e,t[r][i])};if("light"===t.mode&&(vj(t.common,"background","#fff"),vj(t.common,"onBackground","#000")),"dark"===t.mode&&(vj(t.common,"background","#000"),vj(t.common,"onBackground","#fff")),function(e,t){t.forEach((t=>{e[t]||(e[t]={})}))}(t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),"light"===t.mode){vj(t.Alert,"errorColor",TD(t.error.light,.6)),vj(t.Alert,"infoColor",TD(t.info.light,.6)),vj(t.Alert,"successColor",TD(t.success.light,.6)),vj(t.Alert,"warningColor",TD(t.warning.light,.6)),vj(t.Alert,"errorFilledBg",n("palette-error-main")),vj(t.Alert,"infoFilledBg",n("palette-info-main")),vj(t.Alert,"successFilledBg",n("palette-success-main")),vj(t.Alert,"warningFilledBg",n("palette-warning-main")),vj(t.Alert,"errorFilledColor",wj((()=>t.getContrastText(t.error.main)))),vj(t.Alert,"infoFilledColor",wj((()=>t.getContrastText(t.info.main)))),vj(t.Alert,"successFilledColor",wj((()=>t.getContrastText(t.success.main)))),vj(t.Alert,"warningFilledColor",wj((()=>t.getContrastText(t.warning.main)))),vj(t.Alert,"errorStandardBg",ND(t.error.light,.9)),vj(t.Alert,"infoStandardBg",ND(t.info.light,.9)),vj(t.Alert,"successStandardBg",ND(t.success.light,.9)),vj(t.Alert,"warningStandardBg",ND(t.warning.light,.9)),vj(t.Alert,"errorIconColor",n("palette-error-main")),vj(t.Alert,"infoIconColor",n("palette-info-main")),vj(t.Alert,"successIconColor",n("palette-success-main")),vj(t.Alert,"warningIconColor",n("palette-warning-main")),vj(t.AppBar,"defaultBg",n("palette-grey-100")),vj(t.Avatar,"defaultBg",n("palette-grey-400")),vj(t.Button,"inheritContainedBg",n("palette-grey-300")),vj(t.Button,"inheritContainedHoverBg",n("palette-grey-A100")),vj(t.Chip,"defaultBorder",n("palette-grey-400")),vj(t.Chip,"defaultAvatarColor",n("palette-grey-700")),vj(t.Chip,"defaultIconColor",n("palette-grey-700")),vj(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),vj(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),vj(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),vj(t.LinearProgress,"primaryBg",ND(t.primary.main,.62)),vj(t.LinearProgress,"secondaryBg",ND(t.secondary.main,.62)),vj(t.LinearProgress,"errorBg",ND(t.error.main,.62)),vj(t.LinearProgress,"infoBg",ND(t.info.main,.62)),vj(t.LinearProgress,"successBg",ND(t.success.main,.62)),vj(t.LinearProgress,"warningBg",ND(t.warning.main,.62)),vj(t.Skeleton,"bg",`rgba(${n("palette-text-primaryChannel")} / 0.11)`),vj(t.Slider,"primaryTrack",ND(t.primary.main,.62)),vj(t.Slider,"secondaryTrack",ND(t.secondary.main,.62)),vj(t.Slider,"errorTrack",ND(t.error.main,.62)),vj(t.Slider,"infoTrack",ND(t.info.main,.62)),vj(t.Slider,"successTrack",ND(t.success.main,.62)),vj(t.Slider,"warningTrack",ND(t.warning.main,.62));const e=AD(t.background.default,.8);vj(t.SnackbarContent,"bg",e),vj(t.SnackbarContent,"color",wj((()=>t.getContrastText(e)))),vj(t.SpeedDialAction,"fabHoverBg",AD(t.background.paper,.15)),vj(t.StepConnector,"border",n("palette-grey-400")),vj(t.StepContent,"border",n("palette-grey-400")),vj(t.Switch,"defaultColor",n("palette-common-white")),vj(t.Switch,"defaultDisabledColor",n("palette-grey-100")),vj(t.Switch,"primaryDisabledColor",ND(t.primary.main,.62)),vj(t.Switch,"secondaryDisabledColor",ND(t.secondary.main,.62)),vj(t.Switch,"errorDisabledColor",ND(t.error.main,.62)),vj(t.Switch,"infoDisabledColor",ND(t.info.main,.62)),vj(t.Switch,"successDisabledColor",ND(t.success.main,.62)),vj(t.Switch,"warningDisabledColor",ND(t.warning.main,.62)),vj(t.TableCell,"border",ND(ID(t.divider,1),.88)),vj(t.Tooltip,"bg",ID(t.grey[700],.92))}if("dark"===t.mode){vj(t.Alert,"errorColor",ND(t.error.light,.6)),vj(t.Alert,"infoColor",ND(t.info.light,.6)),vj(t.Alert,"successColor",ND(t.success.light,.6)),vj(t.Alert,"warningColor",ND(t.warning.light,.6)),vj(t.Alert,"errorFilledBg",n("palette-error-dark")),vj(t.Alert,"infoFilledBg",n("palette-info-dark")),vj(t.Alert,"successFilledBg",n("palette-success-dark")),vj(t.Alert,"warningFilledBg",n("palette-warning-dark")),vj(t.Alert,"errorFilledColor",wj((()=>t.getContrastText(t.error.dark)))),vj(t.Alert,"infoFilledColor",wj((()=>t.getContrastText(t.info.dark)))),vj(t.Alert,"successFilledColor",wj((()=>t.getContrastText(t.success.dark)))),vj(t.Alert,"warningFilledColor",wj((()=>t.getContrastText(t.warning.dark)))),vj(t.Alert,"errorStandardBg",TD(t.error.light,.9)),vj(t.Alert,"infoStandardBg",TD(t.info.light,.9)),vj(t.Alert,"successStandardBg",TD(t.success.light,.9)),vj(t.Alert,"warningStandardBg",TD(t.warning.light,.9)),vj(t.Alert,"errorIconColor",n("palette-error-main")),vj(t.Alert,"infoIconColor",n("palette-info-main")),vj(t.Alert,"successIconColor",n("palette-success-main")),vj(t.Alert,"warningIconColor",n("palette-warning-main")),vj(t.AppBar,"defaultBg",n("palette-grey-900")),vj(t.AppBar,"darkBg",n("palette-background-paper")),vj(t.AppBar,"darkColor",n("palette-text-primary")),vj(t.Avatar,"defaultBg",n("palette-grey-600")),vj(t.Button,"inheritContainedBg",n("palette-grey-800")),vj(t.Button,"inheritContainedHoverBg",n("palette-grey-700")),vj(t.Chip,"defaultBorder",n("palette-grey-700")),vj(t.Chip,"defaultAvatarColor",n("palette-grey-300")),vj(t.Chip,"defaultIconColor",n("palette-grey-300")),vj(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),vj(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),vj(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),vj(t.LinearProgress,"primaryBg",TD(t.primary.main,.5)),vj(t.LinearProgress,"secondaryBg",TD(t.secondary.main,.5)),vj(t.LinearProgress,"errorBg",TD(t.error.main,.5)),vj(t.LinearProgress,"infoBg",TD(t.info.main,.5)),vj(t.LinearProgress,"successBg",TD(t.success.main,.5)),vj(t.LinearProgress,"warningBg",TD(t.warning.main,.5)),vj(t.Skeleton,"bg",`rgba(${n("palette-text-primaryChannel")} / 0.13)`),vj(t.Slider,"primaryTrack",TD(t.primary.main,.5)),vj(t.Slider,"secondaryTrack",TD(t.secondary.main,.5)),vj(t.Slider,"errorTrack",TD(t.error.main,.5)),vj(t.Slider,"infoTrack",TD(t.info.main,.5)),vj(t.Slider,"successTrack",TD(t.success.main,.5)),vj(t.Slider,"warningTrack",TD(t.warning.main,.5));const e=AD(t.background.default,.98);vj(t.SnackbarContent,"bg",e),vj(t.SnackbarContent,"color",wj((()=>t.getContrastText(e)))),vj(t.SpeedDialAction,"fabHoverBg",AD(t.background.paper,.15)),vj(t.StepConnector,"border",n("palette-grey-600")),vj(t.StepContent,"border",n("palette-grey-600")),vj(t.Switch,"defaultColor",n("palette-grey-300")),vj(t.Switch,"defaultDisabledColor",n("palette-grey-600")),vj(t.Switch,"primaryDisabledColor",TD(t.primary.main,.55)),vj(t.Switch,"secondaryDisabledColor",TD(t.secondary.main,.55)),vj(t.Switch,"errorDisabledColor",TD(t.error.main,.55)),vj(t.Switch,"infoDisabledColor",TD(t.info.main,.55)),vj(t.Switch,"successDisabledColor",TD(t.success.main,.55)),vj(t.Switch,"warningDisabledColor",TD(t.warning.main,.55)),vj(t.TableCell,"border",TD(ID(t.divider,1),.68)),vj(t.Tooltip,"bg",ID(t.grey[700],.92))}xj(t.background,"default"),xj(t.background,"paper"),xj(t.common,"background"),xj(t.common,"onBackground"),xj(t,"divider"),Object.keys(t).forEach((e=>{const n=t[e];n&&"object"===typeof n&&(n.main&&vj(t[e],"mainChannel",xD(bj(n.main))),n.light&&vj(t[e],"lightChannel",xD(bj(n.light))),n.dark&&vj(t[e],"darkChannel",xD(bj(n.dark))),n.contrastText&&vj(t[e],"contrastTextChannel",xD(bj(n.contrastText))),"text"===e&&(xj(t[e],"primary"),xj(t[e],"secondary")),"action"===e&&(n.active&&xj(t[e],"active"),n.selected&&xj(t[e],"selected")))}))}));for(var x=arguments.length,w=new Array(x>1?x-1:0),k=1;k<x;k++)w[k-1]=arguments[k];v=w.reduce(((e,t)=>pF(e,t)),v);const S={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:o,getSelector:gj(v)},{vars:C,generateThemeVars:I,generateStyleSheets:E}=qL(v,S);return v.vars=C,Object.entries(v.colorSchemes[v.defaultColorScheme]).forEach((e=>{let[t,n]=e;v[t]=n})),v.generateThemeVars=I,v.generateStyleSheets=E,v.generateSpacing=function(){return UF(s.spacing,MF(this))},v.getColorSchemeSelector=function(e){return function(t){return"media"===e?`@media (prefers-color-scheme: ${t})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${t}"] &`:"class"===e?`.${t} &`:"data"===e?`[data-${t}] &`:`${e.replace("%s",t)} &`:"&"}}(a),v.spacing=v.generateSpacing(),v.shouldSkipGeneratingVar=o,v.unstable_sxConfig={...vL,...s?.unstable_sxConfig},v.unstable_sx=function(e){return xL({sx:e,theme:this})},v.toRuntimeSource=yj,v}function Cj(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...!0!==n&&n,palette:WL({...!0===n?{}:n.palette,mode:t})})}function Ij(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:n=!1,colorSchemes:r=(t?void 0:{light:!0}),defaultColorScheme:i=t?.mode,...o}=e,a=i||"light",s=r?.[a],l={...r,...t?{[a]:{..."boolean"!==typeof s&&s,palette:t}}:void 0};for(var u=arguments.length,c=new Array(u>1?u-1:0),h=1;h<u;h++)c[h-1]=arguments[h];if(!1===n){if(!("colorSchemes"in e))return lj(e,...c);let n=t;"palette"in e||l[a]&&(!0!==l[a]?n=l[a].palette:"dark"===a&&(n={mode:"dark"}));const r=lj({...e,palette:n},...c);return r.defaultColorScheme=a,r.colorSchemes=l,"light"===r.palette.mode&&(r.colorSchemes.light={...!0!==l.light&&l.light,palette:r.palette},Cj(r,"dark",l.dark)),"dark"===r.palette.mode&&(r.colorSchemes.dark={...!0!==l.dark&&l.dark,palette:r.palette},Cj(r,"light",l.light)),r}return t||"light"in l||"light"!==a||(l.light=!0),Sj({...o,colorSchemes:l,defaultColorScheme:a,..."boolean"!==typeof n&&n},...c)}const Ej=Ij(),Tj="$$material",_j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=SL,rootShouldForwardProp:r=CL,slotShouldForwardProp:i=CL}=e,o=e=>xL(TL(e,t,n));return o.__mui_systemSx=!0,function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};((e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))})(e,(e=>e.filter((e=>!e?.__mui_systemSx))));const{name:s,slot:l,skipVariantsResolver:u,skipSx:c,overridesResolver:h=_L(AL(l)),...d}=a,p=void 0!==u?u:l&&"Root"!==l&&"root"!==l||!1,f=c||!1;let g=CL;"Root"===l||"root"===l?g=r:l?g=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(g=void 0);const m=cF(e,{shouldForwardProp:g,label:undefined,...d}),y=e=>"function"===typeof e&&e.__emotion_real!==e||hF(e)?r=>NL(e,TL(r,t,n)):e,v=function(r){let i=y(r);for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];const c=l?l.map(y):[];s&&h&&c.push((e=>{const r=IL(t,e.theme,n);if(!r.components||!r.components[s]||!r.components[s].styleOverrides)return null;const i=r.components[s].styleOverrides,o={},a=TL(e,t,n);for(const t in i)o[t]=NL(i[t],a);return h(e,o)})),s&&!p&&c.push((e=>{const r=IL(t,e.theme,n),i=r?.components?.[s]?.variants;return i?NL({variants:i},TL(e,t,n)):null})),f||c.push(o);const d=c.length-l.length;if(Array.isArray(r)&&d>0){const e=new Array(d).fill("");i=[...r,...e],i.raw=[...r.raw,...e]}const g=m(i,...c);return e.muiName&&(g.muiName=e.muiName),g};return m.withConfig&&(v.withConfig=m.withConfig),v}}({themeId:Tj,defaultTheme:Ej,rootShouldForwardProp:RD}),Nj=_j,Aj={theme:void 0};function Oj(e){let t,n;return r=>{let i=t;return void 0!==i&&r.theme===n||(Aj.theme=r.theme,i=e(Aj),t=i,n=r.theme),i}}var Rj=n(579);const $j=a.createContext(void 0);function Pj(e){let{props:t,name:n}=e;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const i=t.components[n];return i.defaultProps?fD(i.defaultProps,r):i.styleOverrides||i.variants?r:fD(i,r)}({props:t,name:n,theme:{components:a.useContext($j)}})}function Dj(e){return Pj(e)}function Mj(e){try{return e.matches(":focus-visible")}catch(bI){0}return!1}function Fj(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Lj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{Fj(t,e)}))}),t)}const jj=Lj,zj="undefined"!==typeof window?a.useLayoutEffect:a.useEffect;const Bj=function(e){const t=a.useRef(e);return zj((()=>{t.current=e})),a.useRef((function(){return(0,t.current)(...arguments)})).current},Wj=Bj,Uj={};function Vj(e,t){const n=a.useRef(Uj);return n.current===Uj&&(n.current=e(t)),n}class Gj{static create(){return new Gj}static use(){const e=Vj(Gj.create).current,[t,n]=a.useState(!1);return e.shouldMount=t,e.setShouldMount=n,a.useEffect(e.mountEffect,[t]),e}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=function(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n}(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&null!==this.ref.current&&(this.didMount=!0,this.mounted.resolve())};start(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.start(...t)))}stop(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.stop(...t)))}pulsate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.pulsate(...t)))}}const Hj=[];class qj{static create(){return new qj}currentId=null;start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Kj(){const e=Vj(qj.create).current;var t;return t=e.disposeEffect,a.useEffect(t,Hj),e}n(219);var Xj=eF((function(e,t){var n=XM([e.styles],void 0,a.useContext(tF)),r=a.useRef();return JM((function(){var e=t.key+"-global",i=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),o=!1,a=document.querySelector('style[data-emotion="'+e+" "+n.name+'"]');return t.sheet.tags.length&&(i.before=t.sheet.tags[0]),null!==a&&(o=!0,a.setAttribute("data-emotion",e),i.hydrate([a])),r.current=[i,o],function(){i.flush()}}),[t]),JM((function(){var e=r.current,i=e[0];if(e[1])e[1]=!1;else{if(void 0!==n.next&&rF(t,n.next,!0),i.tags.length){var o=i.tags[i.tags.length-1].nextElementSibling;i.before=o,i.flush()}t.insert("",n,i,!1)}}),[t,n.name]),null}));function Yj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return XM(t)}var Qj=function(){var e=Yj.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};const Jj=function(e){const{className:t,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:s,in:l,onExited:u,timeout:c}=e,[h,d]=a.useState(!1),p=ct(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),f={width:s,height:s,top:-s/2+o,left:-s/2+i},g=ct(n.child,h&&n.childLeaving,r&&n.childPulsate);return l||h||d(!0),a.useEffect((()=>{if(!l&&null!=u){const e=setTimeout(u,c);return()=>{clearTimeout(e)}}}),[u,l,c]),(0,Rj.jsx)("span",{className:p,style:f,children:(0,Rj.jsx)("span",{className:g})})},Zj=e=>e,ez=(()=>{let e=Zj;return{configure(t){e=t},generate:t=>e(t),reset(){e=Zj}}})(),tz=ez,nz={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function rz(e,t){const n=nz[t];return n?`${arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui"}-${n}`:`${tz.generate(e)}-${t}`}function iz(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return t.forEach((t=>{r[t]=rz(e,t,n)})),r}const oz=iz("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),az=Qj`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,sz=Qj`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,lz=Qj`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,uz=Nj("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),cz=Nj(Jj,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${oz.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${az};
    animation-duration: ${550}ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
  }

  &.${oz.ripplePulsate} {
    animation-duration: ${e=>{let{theme:t}=e;return t.transitions.duration.shorter}}ms;
  }

  & .${oz.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${oz.childLeaving} {
    opacity: 0;
    animation-name: ${sz};
    animation-duration: ${550}ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
  }

  & .${oz.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${lz};
    animation-duration: 2500ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,hz=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:o,...s}=n,[l,u]=a.useState([]),c=a.useRef(0),h=a.useRef(null);a.useEffect((()=>{h.current&&(h.current(),h.current=null)}),[l]);const d=a.useRef(!1),p=Kj(),f=a.useRef(null),g=a.useRef(null),m=a.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:o,cb:a}=e;u((e=>[...e,(0,Rj.jsx)(cz,{classes:{ripple:ct(i.ripple,oz.ripple),rippleVisible:ct(i.rippleVisible,oz.rippleVisible),ripplePulsate:ct(i.ripplePulsate,oz.ripplePulsate),child:ct(i.child,oz.child),childLeaving:ct(i.childLeaving,oz.childLeaving),childPulsate:ct(i.childPulsate,oz.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:o},c.current)])),c.current+=1,h.current=a}),[i]),y=a.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:i=!1,center:o=r||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===e?.type&&d.current)return void(d.current=!1);"touchstart"===e?.type&&(d.current=!0);const s=a?null:g.current,l=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let u,c,h;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)u=Math.round(l.width/2),c=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;u=Math.round(t-l.left),c=Math.round(n-l.top)}if(o)h=Math.sqrt((2*l.width**2+l.height**2)/3),h%2===0&&(h+=1);else{const e=2*Math.max(Math.abs((s?s.clientWidth:0)-u),u)+2,t=2*Math.max(Math.abs((s?s.clientHeight:0)-c),c)+2;h=Math.sqrt(e**2+t**2)}e?.touches?null===f.current&&(f.current=()=>{m({pulsate:i,rippleX:u,rippleY:c,rippleSize:h,cb:n})},p.start(80,(()=>{f.current&&(f.current(),f.current=null)}))):m({pulsate:i,rippleX:u,rippleY:c,rippleSize:h,cb:n})}),[r,m,p]),v=a.useCallback((()=>{y({},{pulsate:!0})}),[y]),b=a.useCallback(((e,t)=>{if(p.clear(),"touchend"===e?.type&&f.current)return f.current(),f.current=null,void p.start(0,(()=>{b(e,t)}));f.current=null,u((e=>e.length>0?e.slice(1):e)),h.current=t}),[p]);return a.useImperativeHandle(t,(()=>({pulsate:v,start:y,stop:b})),[v,y,b]),(0,Rj.jsx)(uz,{className:ct(oz.root,i.root,o),ref:g,...s,children:(0,Rj.jsx)(xa,{component:null,exit:!0,children:l})})})),dz=hz;function pz(e){return rz("MuiButtonBase",e)}const fz=iz("MuiButtonBase",["root","disabled","focusVisible"]),gz=Nj("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${fz.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),mz=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:o,className:s,component:l="button",disabled:u=!1,disableRipple:c=!1,disableTouchRipple:h=!1,focusRipple:d=!1,focusVisibleClassName:p,LinkComponent:f="a",onBlur:g,onClick:m,onContextMenu:y,onDragLeave:v,onFocus:b,onFocusVisible:x,onKeyDown:w,onKeyUp:k,onMouseDown:S,onMouseLeave:C,onMouseUp:I,onTouchEnd:E,onTouchMove:T,onTouchStart:_,tabIndex:N=0,TouchRippleProps:A,touchRippleRef:O,type:R,...$}=n,P=a.useRef(null),D=Gj.use(),M=jj(D.ref,O),[F,L]=a.useState(!1);u&&F&&L(!1),a.useImperativeHandle(r,(()=>({focusVisible:()=>{L(!0),P.current.focus()}})),[]);const j=D.shouldMount&&!c&&!u;function z(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return Wj((r=>{t&&t(r);return n||D[e](r),!0}))}a.useEffect((()=>{F&&d&&!c&&D.pulsate()}),[c,d,F,D]);const B=z("start",S),W=z("stop",y),U=z("stop",v),V=z("stop",I),G=z("stop",(e=>{F&&e.preventDefault(),C&&C(e)})),H=z("start",_),q=z("stop",E),K=z("stop",T),X=z("stop",(e=>{Mj(e.target)||L(!1),g&&g(e)}),!1),Y=Wj((e=>{P.current||(P.current=e.currentTarget),Mj(e.target)&&(L(!0),x&&x(e)),b&&b(e)})),Q=()=>{const e=P.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},J=Wj((e=>{d&&!e.repeat&&F&&" "===e.key&&D.stop(e,(()=>{D.start(e)})),e.target===e.currentTarget&&Q()&&" "===e.key&&e.preventDefault(),w&&w(e),e.target===e.currentTarget&&Q()&&"Enter"===e.key&&!u&&(e.preventDefault(),m&&m(e))})),Z=Wj((e=>{d&&" "===e.key&&F&&!e.defaultPrevented&&D.stop(e,(()=>{D.pulsate(e)})),k&&k(e),m&&e.target===e.currentTarget&&Q()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let ee=l;"button"===ee&&($.href||$.to)&&(ee=f);const te={};"button"===ee?(te.type=void 0===R?"button":R,te.disabled=u):($.href||$.to||(te.role="button"),u&&(te["aria-disabled"]=u));const ne=jj(t,P),re={...n,centerRipple:i,component:l,disabled:u,disableRipple:c,disableTouchRipple:h,focusRipple:d,tabIndex:N,focusVisible:F},ie=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o=gD({root:["root",t&&"disabled",n&&"focusVisible"]},pz,i);return n&&r&&(o.root+=` ${r}`),o})(re);return(0,Rj.jsxs)(gz,{as:ee,className:ct(ie.root,s),ownerState:re,onBlur:X,onClick:m,onContextMenu:W,onFocus:Y,onKeyDown:J,onKeyUp:Z,onMouseDown:B,onMouseLeave:G,onMouseUp:V,onDragLeave:U,onTouchEnd:q,onTouchMove:K,onTouchStart:H,ref:ne,tabIndex:u?-1:N,type:R,...te,...$,children:[o,j?(0,Rj.jsx)(dz,{ref:M,center:i,...A}):null]})})),yz=mz,vz=SF;function bz(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=>{let[,n]=t;return n&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||"string"!==typeof e[n])return!1;return!0}(n,e)}}function xz(e){return rz("MuiButton",e)}const wz=iz("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const kz=a.createContext({});const Sz=a.createContext(void 0),Cz=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Iz=Nj(yz,{shouldForwardProp:e=>RD(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${vz(n.color)}`],t[`size${vz(n.size)}`],t[`${n.variant}Size${vz(n.size)}`],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(Oj((e=>{let{theme:t}=e;const n="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],r="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${wz.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${wz.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${wz.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${wz.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(bz(["dark","contrastText"])).map((e=>{let[n]=e;return{props:{color:n},style:{"--variant-textColor":(t.vars||t).palette[n].main,"--variant-outlinedColor":(t.vars||t).palette[n].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.5)`:CD(t.palette[n].main,.5),"--variant-containedColor":(t.vars||t).palette[n].contrastText,"--variant-containedBg":(t.vars||t).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[n].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:CD(t.palette[n].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[n].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:CD(t.palette[n].main,t.palette.action.hoverOpacity)}}}}})),{props:{color:"inherit"},style:{"--variant-containedColor":t.vars?t.vars.palette.text.primary:t.palette.getContrastText?.(n),"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:CD(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:CD(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${wz.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${wz.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}}))),Ez=Nj("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${vz(n.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},...Cz]}),Tz=Nj("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${vz(n.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},...Cz]}),_z=a.forwardRef((function(e,t){const n=a.useContext(kz),r=a.useContext(Sz),i=Dj({props:fD(n,e),name:"MuiButton"}),{children:o,color:s="primary",component:l="button",className:u,disabled:c=!1,disableElevation:h=!1,disableFocusRipple:d=!1,endIcon:p,focusVisibleClassName:f,fullWidth:g=!1,size:m="medium",startIcon:y,type:v,variant:b="text",...x}=i,w={...i,color:s,component:l,disabled:c,disableElevation:h,disableFocusRipple:d,fullWidth:g,size:m,type:v,variant:b},k=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,classes:a}=e,s=gD({root:["root",o,`${o}${vz(t)}`,`size${vz(i)}`,`${o}Size${vz(i)}`,`color${vz(t)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${vz(i)}`],endIcon:["icon","endIcon",`iconSize${vz(i)}`]},xz,a);return{...a,...s}})(w),S=y&&(0,Rj.jsx)(Ez,{className:k.startIcon,ownerState:w,children:y}),C=p&&(0,Rj.jsx)(Tz,{className:k.endIcon,ownerState:w,children:p}),I=r||"";return(0,Rj.jsxs)(Iz,{ownerState:w,className:ct(n.className,k.root,u,I),component:l,disabled:c,focusRipple:!d,focusVisibleClassName:ct(k.focusVisible,f),ref:t,type:v,...x,classes:k,children:[S,o,C]})})),Nz=_z;function Az(e){return rz("MuiSvgIcon",e)}iz("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Oz=Nj("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${vz(n.color)}`],t[`fontSize${vz(n.fontSize)}`]]}})(Oj((e=>{let{theme:t}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars??t).palette?.[n]?.main}}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}}))),Rz=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiSvgIcon"}),{children:r,className:i,color:o="inherit",component:s="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:c=!1,titleAccess:h,viewBox:d="0 0 24 24",...p}=n,f=a.isValidElement(r)&&"svg"===r.type,g={...n,color:o,component:s,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:c,viewBox:d,hasSvgAsChild:f},m={};c||(m.viewBox=d);const y=(e=>{const{color:t,fontSize:n,classes:r}=e;return gD({root:["root","inherit"!==t&&`color${vz(t)}`,`fontSize${vz(n)}`]},Az,r)})(g);return(0,Rj.jsxs)(Oz,{as:s,className:ct(y.root,i),focusable:"false",color:u,"aria-hidden":!h||void 0,role:h?"img":void 0,ref:t,...m,...p,...f&&r.props,ownerState:g,children:[f?r.props.children:r,h?(0,Rj.jsx)("title",{children:h}):null]})}));Rz&&(Rz.muiName="SvgIcon");const $z=Rz;function Pz(e,t){function n(n,r){return(0,Rj.jsx)($z,{"data-testid":`${t}Icon`,ref:r,...n,children:e})}return n.muiName=$z.muiName,a.memo(a.forwardRef(n))}const Dz=Pz((0,Rj.jsx)("path",{d:"M16.01 7 16 3h-2v4h-4V3H8v4h-.01C7 6.99 6 7.99 6 8.99v5.49L9.5 18v3h5v-3l3.5-3.51v-5.5c0-1-1-2-1.99-1.99"}),"Power"),Mz=Pz((0,Rj.jsx)("path",{d:"M18 14.49V9c0-1-1.01-2.01-2-2V3h-2v4h-4V3H8v2.48l9.51 9.5zm-1.76 1.77L7.2 7.2l-.01.01L3.98 4 2.71 5.25l3.36 3.36C6.04 8.74 6 8.87 6 9v5.48L9.5 18v3h5v-3l.48-.48L19.45 22l1.26-1.28z"}),"PowerOff");let Fz=0;const Lz={...s}.useId;function jz(e){if(void 0!==Lz){const t=Lz();return e??t}return function(e){const[t,n]=a.useState(e),r=e||t;return a.useEffect((()=>{null==t&&(Fz+=1,n(`mui-${Fz}`))}),[t]),r}(e)}const zz=jz;function Bz(e){return rz("MuiCircularProgress",e)}iz("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Wz=44,Uz=Qj`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,Vz=Qj`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`,Gz="string"!==typeof Uz?Yj`
        animation: ${Uz} 1.4s linear infinite;
      `:null,Hz="string"!==typeof Vz?Yj`
        animation: ${Vz} 1.4s ease-in-out infinite;
      `:null,qz=Nj("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${vz(n.color)}`]]}})(Oj((e=>{let{theme:t}=e;return{display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Gz||{animation:`${Uz} 1.4s linear infinite`}},...Object.entries(t.palette).filter(bz()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}}))]}}))),Kz=Nj("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Xz=Nj("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${vz(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(Oj((e=>{let{theme:t}=e;return{stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink},style:Hz||{animation:`${Vz} 1.4s ease-in-out infinite`}}]}}))),Yz=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,size:a=40,style:s,thickness:l=3.6,value:u=0,variant:c="indeterminate",...h}=n,d={...n,color:i,disableShrink:o,size:a,thickness:l,value:u,variant:c},p=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e;return gD({root:["root",n,`color${vz(r)}`],svg:["svg"],circle:["circle",`circle${vz(n)}`,i&&"circleDisableShrink"]},Bz,t)})(d),f={},g={},m={};if("determinate"===c){const e=2*Math.PI*((Wz-l)/2);f.strokeDasharray=e.toFixed(3),m["aria-valuenow"]=Math.round(u),f.strokeDashoffset=`${((100-u)/100*e).toFixed(3)}px`,g.transform="rotate(-90deg)"}return(0,Rj.jsx)(qz,{className:ct(p.root,r),style:{width:a,height:a,...g,...s},ownerState:d,ref:t,role:"progressbar",...m,...h,children:(0,Rj.jsx)(Kz,{className:p.svg,ownerState:d,viewBox:"22 22 44 44",children:(0,Rj.jsx)(Xz,{className:p.circle,style:f,ownerState:d,cx:Wz,cy:Wz,r:(Wz-l)/2,fill:"none",strokeWidth:l})})})})),Qz=Yz;function Jz(e){return rz("MuiLoadingButton",e)}const Zz=iz("MuiLoadingButton",["root","label","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),eB=Nj(Nz,{shouldForwardProp:e=>(e=>"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e&&"classes"!==e)(e)||"classes"===e,name:"MuiLoadingButton",slot:"Root",overridesResolver:(e,t)=>[t.root,t.startIconLoadingStart&&{[`& .${Zz.startIconLoadingStart}`]:t.startIconLoadingStart},t.endIconLoadingEnd&&{[`& .${Zz.endIconLoadingEnd}`]:t.endIconLoadingEnd}]})(Oj((e=>{let{theme:t}=e;return{display:"inline-flex",[`& .${Zz.startIconLoadingStart}, & .${Zz.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0},variants:[{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${Zz.loading}`]:{color:"transparent"}}},{props:e=>{let{ownerState:t}=e;return"start"===t.loadingPosition&&t.fullWidth},style:{[`& .${Zz.startIconLoadingStart}, & .${Zz.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0,marginRight:-8}}},{props:e=>{let{ownerState:t}=e;return"end"===t.loadingPosition&&t.fullWidth},style:{[`& .${Zz.startIconLoadingStart}, & .${Zz.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0,marginLeft:-8}}}]}}))),tB=Nj("span",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.loadingIndicator,t[`loadingIndicator${vz(n.loadingPosition)}`]]}})(Oj((e=>{let{theme:t}=e;return{position:"absolute",visibility:"visible",display:"flex",variants:[{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:e=>{let{loadingPosition:t,ownerState:n}=e;return"start"===t&&"small"!==n.size},style:{left:14}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:e=>{let{loadingPosition:t,ownerState:n}=e;return"end"===t&&"small"!==n.size},style:{right:14}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:e=>{let{ownerState:t}=e;return"start"===t.loadingPosition&&t.fullWidth},style:{position:"relative",left:-10}},{props:e=>{let{ownerState:t}=e;return"end"===t.loadingPosition&&t.fullWidth},style:{position:"relative",right:-10}}]}}))),nB=Nj("span",{name:"MuiLoadingButton",slot:"Label",overridesResolver:(e,t)=>[t.label]})({display:"inherit",alignItems:"inherit",justifyContent:"inherit"}),rB=a.forwardRef((function(e,t){const n=Dj({props:fD(a.useContext(kz),e),name:"MuiLoadingButton"}),{children:r,disabled:i=!1,id:o,loading:s=!1,loadingIndicator:l,loadingPosition:u="center",variant:c="text",...h}=n,d=zz(o),p=l??(0,Rj.jsx)(Qz,{"aria-labelledby":d,color:"inherit",size:16}),f={...n,disabled:i,loading:s,loadingIndicator:p,loadingPosition:u,variant:c},g=(e=>{const{loading:t,loadingPosition:n,classes:r}=e,i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};for(const i in e){const o=e[i];let a="";for(let e=0;e<o.length;e+=1){const r=o[e];r&&(a+=t(r)+" ",n&&n[r]&&(a+=n[r]+" "))}r[i]=a}return r}({root:["root",t&&"loading"],label:["label"],startIcon:[t&&`startIconLoading${vz(n)}`],endIcon:[t&&`endIconLoading${vz(n)}`],loadingIndicator:["loadingIndicator",t&&`loadingIndicator${vz(n)}`]},Jz,r);return{...r,...i}})(f),m=s?(0,Rj.jsx)(tB,{className:g.loadingIndicator,ownerState:f,children:p}):null;return(0,Rj.jsxs)(eB,{disabled:i||s,id:d,ref:t,...h,variant:c,classes:g,ownerState:f,children:["end"===f.loadingPosition?(0,Rj.jsx)(nB,{className:g.label,children:r}):m,"end"===f.loadingPosition?m:(0,Rj.jsx)(nB,{className:g.label,children:r})]})})),iB=rB;const oB=function(e){return"string"===typeof e};const aB=function(e,t,n){return void 0===e||oB(e)?t:{...t,ownerState:{...t.ownerState,...n}}};const sB=function(e,t,n){return"function"===typeof e?e(t,n):e};const lB=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const uB=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const cB=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const e=ct(n?.className,o,i?.className,r?.className),t={...n?.style,...i?.style,...r?.style},a={...n,...i,...r};return e.length>0&&(a.className=e),Object.keys(t).length>0&&(a.style=t),{props:a,internalRef:void 0}}const a=lB({...i,...r}),s=uB(r),l=uB(i),u=t(a),c=ct(u?.className,n?.className,o,i?.className,r?.className),h={...u?.style,...n?.style,...i?.style,...r?.style},d={...u,...n,...l,...s};return c.length>0&&(d.className=c),Object.keys(h).length>0&&(d.style=h),{props:d,internalRef:u.ref}};function hB(e,t){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,getSlotOwnerState:a,internalForwardedProps:s,...l}=t,{component:u,slots:c={[e]:void 0},slotProps:h={[e]:void 0},...d}=o,p=c[e]||r,f=sB(h[e],i),{props:{component:g,...m},internalRef:y}=cB({className:n,...l,externalForwardedProps:"root"===e?d:void 0,externalSlotProps:f}),v=Lj(y,f?.ref,t.ref),b=a?a(m):{},x={...i,...b},w="root"===e?g||u:g,k=aB(p,{..."root"===e&&!u&&!c[e]&&s,..."root"!==e&&!c[e]&&s,...m,...w&&{as:w},ref:v},x);return Object.keys(b).forEach((e=>{delete k[e]})),[p,k]}const dB=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=a.useContext(tF);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},pB=kL();const fB=function(){return dB(arguments.length>0&&void 0!==arguments[0]?arguments[0]:pB)};function gB(){const e=fB(Ej);return e[Tj]||e}function mB(e){return rz("MuiPaper",e)}iz("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const yB=Nj("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})(Oj((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:e=>{let{ownerState:t}=e;return!t.square},style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}}))),vB=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiPaper"}),r=gB(),{className:i,component:o="div",elevation:a=1,square:s=!1,variant:l="elevation",...u}=n,c={...n,component:o,elevation:a,square:s,variant:l},h=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e;return gD({root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]},mB,i)})(c);return(0,Rj.jsx)(yB,{as:o,ownerState:c,className:ct(h.root,i),ref:t,...u,style:{..."elevation"===l&&{"--Paper-shadow":(r.vars||r).shadows[a],...r.vars&&{"--Paper-overlay":r.vars.overlays?.[a]},...!r.vars&&"dark"===r.palette.mode&&{"--Paper-overlay":`linear-gradient(${CD("#fff",uj(a))}, ${CD("#fff",uj(a))})`}},...u.style}})})),bB=vB;function xB(e){return rz("MuiAlert",e)}const wB=iz("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function kB(e){return rz("MuiIconButton",e)}const SB=iz("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),CB=Nj(yz,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${vz(n.color)}`],n.edge&&t[`edge${vz(n.edge)}`],t[`size${vz(n.size)}`]]}})(Oj((e=>{let{theme:t}=e;return{textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:{disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:CD(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]}})),Oj((e=>{let{theme:t}=e;return{variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(bz()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),...Object.entries(t.palette).filter(bz()).map((e=>{let[n]=e;return{props:{color:n,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${(t.vars||t).palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:CD((t.vars||t).palette[n].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${SB.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}}}))),IB=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:a="default",disabled:s=!1,disableFocusRipple:l=!1,disableRipple:u=!1,size:c="medium",...h}=n,d={...n,edge:r,color:a,disabled:s,disableFocusRipple:l,disableRipple:u,size:c},p=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:o}=e;return gD({root:["root",n&&"disabled","default"!==r&&`color${vz(r)}`,i&&`edge${vz(i)}`,`size${vz(o)}`]},kB,t)})(d);return(0,Rj.jsx)(CB,{className:ct(p.root,o),centerRipple:!0,focusRipple:!l,disabled:s,disableRipple:u,ref:t,...h,ownerState:d,children:i})})),EB=IB,TB=Pz((0,Rj.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),_B=Pz((0,Rj.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),NB=Pz((0,Rj.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),AB=Pz((0,Rj.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),OB=Pz((0,Rj.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),RB=Nj(bB,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${vz(n.color||n.severity)}`]]}})(Oj((e=>{let{theme:t}=e;const n="light"===t.palette.mode?ED:_D,r="light"===t.palette.mode?_D:ED;return{...t.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(bz(["light"])).map((e=>{let[i]=e;return{props:{colorSeverity:i,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${i}Color`]:n(t.palette[i].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${i}StandardBg`]:r(t.palette[i].light,.9),[`& .${wB.icon}`]:t.vars?{color:t.vars.palette.Alert[`${i}IconColor`]}:{color:t.palette[i].main}}}})),...Object.entries(t.palette).filter(bz(["light"])).map((e=>{let[r]=e;return{props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:n(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${wB.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}}})),...Object.entries(t.palette).filter(bz(["dark"])).map((e=>{let[n]=e;return{props:{colorSeverity:n,variant:"filled"},style:{fontWeight:t.typography.fontWeightMedium,...t.vars?{color:t.vars.palette.Alert[`${n}FilledColor`],backgroundColor:t.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:"dark"===t.palette.mode?t.palette[n].dark:t.palette[n].main,color:t.palette.getContrastText(t.palette[n].main)}}}}))]}}))),$B=Nj("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),PB=Nj("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),DB=Nj("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),MB={success:(0,Rj.jsx)(TB,{fontSize:"inherit"}),warning:(0,Rj.jsx)(_B,{fontSize:"inherit"}),error:(0,Rj.jsx)(NB,{fontSize:"inherit"}),info:(0,Rj.jsx)(AB,{fontSize:"inherit"})},FB=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiAlert"}),{action:r,children:i,className:o,closeText:a="Close",color:s,components:l={},componentsProps:u={},icon:c,iconMapping:h=MB,onClose:d,role:p="alert",severity:f="success",slotProps:g={},slots:m={},variant:y="standard",...v}=n,b={...n,color:s,severity:f,variant:y,colorSeverity:s||f},x=(e=>{const{variant:t,color:n,severity:r,classes:i}=e;return gD({root:["root",`color${vz(n||r)}`,`${t}${vz(n||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]},xB,i)})(b),w={slots:{closeButton:l.CloseButton,closeIcon:l.CloseIcon,...m},slotProps:{...u,...g}},[k,S]=hB("closeButton",{elementType:EB,externalForwardedProps:w,ownerState:b}),[C,I]=hB("closeIcon",{elementType:OB,externalForwardedProps:w,ownerState:b});return(0,Rj.jsxs)(RB,{role:p,elevation:0,ownerState:b,className:ct(x.root,o),ref:t,...v,children:[!1!==c?(0,Rj.jsx)($B,{ownerState:b,className:x.icon,children:c||h[f]||MB[f]}):null,(0,Rj.jsx)(PB,{ownerState:b,className:x.message,children:i}),null!=r?(0,Rj.jsx)(DB,{ownerState:b,className:x.action,children:r}):null,null==r&&d?(0,Rj.jsx)(DB,{ownerState:b,className:x.action,children:(0,Rj.jsx)(k,{size:"small","aria-label":a,title:a,color:"inherit",onClick:d,...S,children:(0,Rj.jsx)(C,{fontSize:"small",...I})})}):null]})})),LB=FB;function jB(e){const{sx:t,...n}=e,{systemProps:r,otherProps:i}=(e=>{const t={systemProps:{},otherProps:{}},n=e?.theme?.unstable_sxConfig??vL;return Object.keys(e).forEach((r=>{n[r]?t.systemProps[r]=e[r]:t.otherProps[r]=e[r]})),t})(n);let o;return o=Array.isArray(t)?[r,...t]:"function"===typeof t?function(){const e=t(...arguments);return hF(e)?{...r,...e}:r}:{...r,...t},{...i,sx:o}}function zB(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,Rj.jsx)(Xj,{styles:r})}const BB=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const i=fB(r),o="function"===typeof t?t(n&&i[n]||i):t;return(0,Rj.jsx)(zB,{styles:o})};const WB=function(e){return(0,Rj.jsx)(BB,{...e,defaultTheme:Ej,themeId:Tj})};function UB(e){return rz("MuiTypography",e)}iz("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const VB={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},GB=jB,HB=Nj("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${vz(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(Oj((e=>{let{theme:t}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter((e=>{let[t,n]=e;return"inherit"!==t&&n&&"object"===typeof n})).map((e=>{let[t,n]=e;return{props:{variant:t},style:n}})),...Object.entries(t.palette).filter(bz()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),...Object.entries(t.palette?.text||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[n]=e;return{props:{color:`text${vz(n)}`},style:{color:(t.vars||t).palette.text[n]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),qB={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},KB=a.forwardRef((function(e,t){const{color:n,...r}=Dj({props:e,name:"MuiTypography"}),i=GB({...r,...!VB[n]&&{color:n}}),{align:o="inherit",className:a,component:s,gutterBottom:l=!1,noWrap:u=!1,paragraph:c=!1,variant:h="body1",variantMapping:d=qB,...p}=i,f={...i,align:o,color:n,className:a,component:s,gutterBottom:l,noWrap:u,paragraph:c,variant:h,variantMapping:d},g=s||(c?"p":d[h]||qB[h])||"span",m=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:a}=e;return gD({root:["root",o,"inherit"!==e.align&&`align${vz(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]},UB,a)})(f);return(0,Rj.jsx)(HB,{as:g,ref:t,className:ct(m.root,a),...p,ownerState:f,style:{..."inherit"!==o&&{"--Typography-textAlign":o},...p.style}})})),XB=KB;function YB(e){return e&&e.ownerDocument||document}function QB(e){return YB(e).defaultView||window}function JB(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r}function ZB(e){return parseInt(e,10)||0}const eW={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};const tW=a.forwardRef((function(e,t){const{onChange:n,maxRows:r,minRows:i=1,style:o,value:s,...l}=e,{current:u}=a.useRef(null!=s),c=a.useRef(null),h=Lj(t,c),d=a.useRef(null),p=a.useRef(null),f=a.useCallback((()=>{const t=c.current,n=QB(t).getComputedStyle(t);if("0px"===n.width)return{outerHeightStyle:0,overflowing:!1};const o=p.current;o.style.width=n.width,o.value=t.value||e.placeholder||"x","\n"===o.value.slice(-1)&&(o.value+=" ");const a=n.boxSizing,s=ZB(n.paddingBottom)+ZB(n.paddingTop),l=ZB(n.borderBottomWidth)+ZB(n.borderTopWidth),u=o.scrollHeight;o.value="x";const h=o.scrollHeight;let d=u;i&&(d=Math.max(Number(i)*h,d)),r&&(d=Math.min(Number(r)*h,d)),d=Math.max(d,h);return{outerHeightStyle:d+("border-box"===a?s+l:0),overflowing:Math.abs(d-u)<=1}}),[r,i,e.placeholder]),g=a.useCallback((()=>{const e=f();if(void 0===(t=e)||null===t||0===Object.keys(t).length||0===t.outerHeightStyle&&!t.overflowing)return;var t;const n=e.outerHeightStyle,r=c.current;d.current!==n&&(d.current=n,r.style.height=`${n}px`),r.style.overflow=e.overflowing?"hidden":""}),[f]);zj((()=>{const e=()=>{g()};let t;const n=JB(e),r=c.current,i=QB(r);let o;return i.addEventListener("resize",n),"undefined"!==typeof ResizeObserver&&(o=new ResizeObserver(e),o.observe(r)),()=>{n.clear(),cancelAnimationFrame(t),i.removeEventListener("resize",n),o&&o.disconnect()}}),[f,g]),zj((()=>{g()}));return(0,Rj.jsxs)(a.Fragment,{children:[(0,Rj.jsx)("textarea",{value:s,onChange:e=>{u||g(),n&&n(e)},ref:h,rows:i,style:o,...l}),(0,Rj.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:{...eW,...o,paddingTop:0,paddingBottom:0}})]})})),nW=tW;const rW=function(e){return"string"===typeof e};function iW(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const oW=a.createContext(void 0);function aW(){return a.useContext(oW)}const sW=zj;function lW(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function uW(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(lW(e.value)&&""!==e.value||t&&lW(e.defaultValue)&&""!==e.defaultValue)}function cW(e){return rz("MuiInputBase",e)}const hW=iz("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var dW;const pW=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${vz(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},fW=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},gW=Nj("div",{name:"MuiInputBase",slot:"Root",overridesResolver:pW})(Oj((e=>{let{theme:t}=e;return{...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${hW.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"4px 0 5px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"100%"}}]}}))),mW=Nj("input",{name:"MuiInputBase",slot:"Input",overridesResolver:fW})(Oj((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},i={opacity:"0 !important"},o=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${hW.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${hW.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableInjectingGlobalStyles},style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}}))),yW=function(e){return function(t){return(0,Rj.jsx)(WB,{styles:"function"===typeof e?n=>e({theme:n,...t}):e})}}({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),vW=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiInputBase"}),{"aria-describedby":r,autoComplete:i,autoFocus:o,className:s,color:l,components:u={},componentsProps:c={},defaultValue:h,disabled:d,disableInjectingGlobalStyles:p,endAdornment:f,error:g,fullWidth:m=!1,id:y,inputComponent:v="input",inputProps:b={},inputRef:x,margin:w,maxRows:k,minRows:S,multiline:C=!1,name:I,onBlur:E,onChange:T,onClick:_,onFocus:N,onKeyDown:A,onKeyUp:O,placeholder:R,readOnly:$,renderSuffix:P,rows:D,size:M,slotProps:F={},slots:L={},startAdornment:j,type:z="text",value:B,...W}=n,U=null!=b.value?b.value:B,{current:V}=a.useRef(null!=U),G=a.useRef(),H=a.useCallback((e=>{0}),[]),q=jj(G,x,b.ref,H),[K,X]=a.useState(!1),Y=aW();const Q=iW({props:n,muiFormControl:Y,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Q.focused=Y?Y.focused:K,a.useEffect((()=>{!Y&&d&&K&&(X(!1),E&&E())}),[Y,d,K,E]);const J=Y&&Y.onFilled,Z=Y&&Y.onEmpty,ee=a.useCallback((e=>{uW(e)?J&&J():Z&&Z()}),[J,Z]);sW((()=>{V&&ee({value:U})}),[U,ee,V]);a.useEffect((()=>{ee(G.current)}),[]);let te=v,ne=b;C&&"input"===te&&(ne=D?{type:void 0,minRows:D,maxRows:D,...ne}:{type:void 0,maxRows:k,minRows:S,...ne},te=nW);a.useEffect((()=>{Y&&Y.setAdornedStart(Boolean(j))}),[Y,j]);const re={...n,color:Q.color||"primary",disabled:Q.disabled,endAdornment:f,error:Q.error,focused:Q.focused,formControl:Y,fullWidth:m,hiddenLabel:Q.hiddenLabel,multiline:C,size:Q.size,startAdornment:j,type:z},ie=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:a,formControl:s,fullWidth:l,hiddenLabel:u,multiline:c,readOnly:h,size:d,startAdornment:p,type:f}=e;return gD({root:["root",`color${vz(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",s&&"formControl",d&&"medium"!==d&&`size${vz(d)}`,c&&"multiline",p&&"adornedStart",o&&"adornedEnd",u&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled","search"===f&&"inputTypeSearch",c&&"inputMultiline","small"===d&&"inputSizeSmall",u&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd",h&&"readOnly"]},cW,t)})(re),oe=L.root||u.Root||gW,ae=F.root||c.root||{},se=L.input||u.Input||mW;return ne={...ne,...F.input??c.input},(0,Rj.jsxs)(a.Fragment,{children:[!p&&"function"===typeof yW&&(dW||(dW=(0,Rj.jsx)(yW,{}))),(0,Rj.jsxs)(oe,{...ae,ref:t,onClick:e=>{G.current&&e.currentTarget===e.target&&G.current.focus(),_&&_(e)},...W,...!rW(oe)&&{ownerState:{...re,...ae.ownerState}},className:ct(ie.root,ae.className,s,$&&"MuiInputBase-readOnly"),children:[j,(0,Rj.jsx)(oW.Provider,{value:null,children:(0,Rj.jsx)(se,{"aria-invalid":Q.error,"aria-describedby":r,autoComplete:i,autoFocus:o,defaultValue:h,disabled:Q.disabled,id:y,onAnimationStart:e=>{ee("mui-auto-fill-cancel"===e.animationName?G.current:{value:"x"})},name:I,placeholder:R,readOnly:$,required:Q.required,rows:D,value:U,onKeyDown:A,onKeyUp:O,type:z,...ne,...!rW(se)&&{as:te,ownerState:{...re,...ne.ownerState}},ref:q,className:ct(ie.input,ne.className,$&&"MuiInputBase-readOnly"),onBlur:e=>{E&&E(e),b.onBlur&&b.onBlur(e),Y&&Y.onBlur?Y.onBlur(e):X(!1)},onChange:function(e){if(!V){const t=e.target||G.current;if(null==t)throw new Error(mD(1));ee({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];b.onChange&&b.onChange(e,...n),T&&T(e,...n)},onFocus:e=>{N&&N(e),b.onFocus&&b.onFocus(e),Y&&Y.onFocus?Y.onFocus(e):X(!0)}})}),f,P?P({...Q,startAdornment:j}):null]})]})})),bW=vW;function xW(e){return rz("MuiInput",e)}const wW={...hW,...iz("MuiInput",["root","underline","input"])},kW=Nj(gW,{shouldForwardProp:e=>RD(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...pW(e,t),!n.disableUnderline&&t.underline]}})(Oj((e=>{let{theme:t}=e;let n="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{"label + &":{marginTop:16}}},{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${wW.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${wW.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${wW.disabled}, .${wW.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${wW.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(bz()).map((e=>{let[n]=e;return{props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n].main}`}}}}))]}}))),SW=Nj(mW,{name:"MuiInput",slot:"Input",overridesResolver:fW})({}),CW=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiInput"}),{disableUnderline:r=!1,components:i={},componentsProps:o,fullWidth:a=!1,inputComponent:s="input",multiline:l=!1,slotProps:u,slots:c={},type:h="text",...d}=n,p=(e=>{const{classes:t,disableUnderline:n}=e,r=gD({root:["root",!n&&"underline"],input:["input"]},xW,t);return{...t,...r}})(n),f={root:{ownerState:{disableUnderline:r}}},g=u??o?pF(u??o,f):f,m=c.root??i.Root??kW,y=c.input??i.Input??SW;return(0,Rj.jsx)(bW,{slots:{root:m,input:y},slotProps:g,fullWidth:a,inputComponent:s,multiline:l,ref:t,type:h,...d,classes:p})}));CW&&(CW.muiName="Input");const IW=CW;function EW(e){return rz("MuiFilledInput",e)}const TW={...hW,...iz("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},_W=Nj(gW,{shouldForwardProp:e=>RD(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...pW(e,t),!n.disableUnderline&&t.underline]}})(Oj((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i}},[`&.${TW.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i},[`&.${TW.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${TW.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${TW.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${TW.disabled}, .${TW.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${TW.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(bz()).map((e=>{let[n]=e;return{props:{disableUnderline:!1,color:n},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n]?.main}`}}}})),{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:12}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:12}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"25px 12px 8px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}}]}}))),NW=Nj(mW,{name:"MuiFilledInput",slot:"Input",overridesResolver:fW})(Oj((e=>{let{theme:t}=e;return{paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}}))),AW=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiFilledInput"}),{disableUnderline:r=!1,components:i={},componentsProps:o,fullWidth:a=!1,hiddenLabel:s,inputComponent:l="input",multiline:u=!1,slotProps:c,slots:h={},type:d="text",...p}=n,f={...n,disableUnderline:r,fullWidth:a,inputComponent:l,multiline:u,type:d},g=(e=>{const{classes:t,disableUnderline:n,startAdornment:r,endAdornment:i,size:o,hiddenLabel:a,multiline:s}=e,l=gD({root:["root",!n&&"underline",r&&"adornedStart",i&&"adornedEnd","small"===o&&`size${vz(o)}`,a&&"hiddenLabel",s&&"multiline"],input:["input"]},EW,t);return{...t,...l}})(n),m={root:{ownerState:f},input:{ownerState:f}},y=c??o?pF(m,c??o):m,v=h.root??i.Root??_W,b=h.input??i.Input??NW;return(0,Rj.jsx)(bW,{slots:{root:v,input:b},componentsProps:y,fullWidth:a,inputComponent:l,multiline:u,ref:t,type:d,...p,classes:g})}));AW&&(AW.muiName="Input");const OW=AW;var RW;const $W=Nj("fieldset",{shouldForwardProp:RD})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),PW=Nj("legend",{shouldForwardProp:RD})(Oj((e=>{let{theme:t}=e;return{float:"unset",width:"auto",overflow:"hidden",variants:[{props:e=>{let{ownerState:t}=e;return!t.withLabel},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:e=>{let{ownerState:t}=e;return t.withLabel},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:e=>{let{ownerState:t}=e;return t.withLabel&&t.notched},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}})));function DW(e){return rz("MuiOutlinedInput",e)}const MW={...hW,...iz("MuiOutlinedInput",["root","notchedOutline","input"])},FW=Nj(gW,{shouldForwardProp:e=>RD(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:pW})(Oj((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${MW.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},[`&.${MW.focused} .${MW.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(bz()).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${MW.focused} .${MW.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}}})),{props:{},style:{"@media (hover: none)":{[`&:hover .${MW.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${MW.error} .${MW.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${MW.disabled} .${MW.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:14}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:14}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"16.5px 14px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{padding:"8.5px 14px"}}]}}))),LW=Nj((function(e){const{children:t,classes:n,className:r,label:i,notched:o,...a}=e,s=null!=i&&""!==i,l={...e,notched:o,withLabel:s};return(0,Rj.jsx)($W,{"aria-hidden":!0,className:r,ownerState:l,...a,children:(0,Rj.jsx)(PW,{ownerState:l,children:s?(0,Rj.jsx)("span",{children:i}):RW||(RW=(0,Rj.jsx)("span",{className:"notranslate",children:"\u200b"}))})})}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(Oj((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}}))),jW=Nj(mW,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:fW})(Oj((e=>{let{theme:t}=e;return{padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:0}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}}]}}))),zW=a.forwardRef((function(e,t){var n;const r=Dj({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:o=!1,inputComponent:s="input",label:l,multiline:u=!1,notched:c,slots:h={},type:d="text",...p}=r,f=(e=>{const{classes:t}=e,n=gD({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},DW,t);return{...t,...n}})(r),g=aW(),m=iW({props:r,muiFormControl:g,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),y={...r,color:m.color||"primary",disabled:m.disabled,error:m.error,focused:m.focused,formControl:g,fullWidth:o,hiddenLabel:m.hiddenLabel,multiline:u,size:m.size,type:d},v=h.root??i.Root??FW,b=h.input??i.Input??jW;return(0,Rj.jsx)(bW,{slots:{root:v,input:b},renderSuffix:e=>(0,Rj.jsx)(LW,{ownerState:y,className:f.notchedOutline,label:null!=l&&""!==l&&m.required?n||(n=(0,Rj.jsxs)(a.Fragment,{children:[l,"\u2009","*"]})):l,notched:"undefined"!==typeof c?c:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:o,inputComponent:s,multiline:u,ref:t,type:d,...p,classes:{...f,notchedOutline:null}})}));zW&&(zW.muiName="Input");const BW=zW;function WW(e){return rz("MuiFormLabel",e)}const UW=iz("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),VW=Nj("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return{...t.root,..."secondary"===n.color&&t.colorSecondary,...n.filled&&t.filled}}})(Oj((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(bz()).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${UW.focused}`]:{color:(t.vars||t).palette[n].main}}}})),{props:{},style:{[`&.${UW.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${UW.error}`]:{color:(t.vars||t).palette.error.main}}}]}}))),GW=Nj("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(Oj((e=>{let{theme:t}=e;return{[`&.${UW.error}`]:{color:(t.vars||t).palette.error.main}}}))),HW=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiFormLabel"}),{children:r,className:i,color:o,component:a="label",disabled:s,error:l,filled:u,focused:c,required:h,...d}=n,p=iW({props:n,muiFormControl:aW(),states:["color","required","focused","disabled","error","filled"]}),f={...n,color:p.color||"primary",component:a,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required},g=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:a,required:s}=e;return gD({root:["root",`color${vz(n)}`,i&&"disabled",o&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]},WW,t)})(f);return(0,Rj.jsxs)(VW,{as:a,ownerState:f,className:ct(g.root,i),ref:t,...d,children:[r,p.required&&(0,Rj.jsxs)(GW,{ownerState:f,"aria-hidden":!0,className:g.asterisk,children:["\u2009","*"]})]})})),qW=HW;function KW(e){return rz("MuiInputLabel",e)}iz("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const XW=Nj(qW,{shouldForwardProp:e=>RD(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${UW.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(Oj((e=>{let{theme:t}=e;return{display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:e=>{let{ownerState:t}=e;return t.shrink},style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:e=>{let{ownerState:t}=e;return!t.disableAnimation},style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"filled"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:e=>{let{variant:t,ownerState:n,size:r}=e;return"filled"===t&&n.shrink&&"small"===r},style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"outlined"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}}))),YW=a.forwardRef((function(e,t){const n=Dj({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,margin:i,shrink:o,variant:a,className:s,...l}=n,u=aW();let c=o;"undefined"===typeof c&&u&&(c=u.filled||u.focused||u.adornedStart);const h=iW({props:n,muiFormControl:u,states:["size","variant","required","focused"]}),d={...n,disableAnimation:r,formControl:u,shrink:c,size:h.size,variant:h.variant,required:h.required,focused:h.focused},p=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:a,required:s}=e,l=gD({root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&"normal"!==r&&`size${vz(r)}`,a],asterisk:[s&&"asterisk"]},KW,t);return{...t,...l}})(d);return(0,Rj.jsx)(XW,{"data-shrink":c,ref:t,className:ct(p.root,s),...l,ownerState:d,classes:p})})),QW=YW;const JW=function(e,t){return a.isValidElement(e)&&-1!==t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)};function ZW(e){return rz("MuiFormControl",e)}iz("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const eU=Nj("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return{...t.root,...t[`margin${vz(n.margin)}`],...n.fullWidth&&t.fullWidth}}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),tU=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiFormControl"}),{children:r,className:i,color:o="primary",component:s="div",disabled:l=!1,error:u=!1,focused:c,fullWidth:h=!1,hiddenLabel:d=!1,margin:p="none",required:f=!1,size:g="medium",variant:m="outlined",...y}=n,v={...n,color:o,component:s,disabled:l,error:u,fullWidth:h,hiddenLabel:d,margin:p,required:f,size:g,variant:m},b=(e=>{const{classes:t,margin:n,fullWidth:r}=e;return gD({root:["root","none"!==n&&`margin${vz(n)}`,r&&"fullWidth"]},ZW,t)})(v),[x,w]=a.useState((()=>{let e=!1;return r&&a.Children.forEach(r,(t=>{if(!JW(t,["Input","Select"]))return;const n=JW(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[k,S]=a.useState((()=>{let e=!1;return r&&a.Children.forEach(r,(t=>{JW(t,["Input","Select"])&&(uW(t.props,!0)||uW(t.props.inputProps,!0))&&(e=!0)})),e})),[C,I]=a.useState(!1);l&&C&&I(!1);const E=void 0===c||l?C:c;let T;a.useRef(!1);const _=a.useMemo((()=>({adornedStart:x,setAdornedStart:w,color:o,disabled:l,error:u,filled:k,focused:E,fullWidth:h,hiddenLabel:d,size:g,onBlur:()=>{I(!1)},onEmpty:()=>{S(!1)},onFilled:()=>{S(!0)},onFocus:()=>{I(!0)},registerEffect:T,required:f,variant:m})),[x,o,l,u,k,E,h,d,T,f,g,m]);return(0,Rj.jsx)(oW.Provider,{value:_,children:(0,Rj.jsx)(eU,{as:s,ownerState:v,className:ct(b.root,i),ref:t,...y,children:r})})})),nU=tU;function rU(e){return rz("MuiFormHelperText",e)}const iU=iz("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var oU;const aU=Nj("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${vz(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(Oj((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${iU.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${iU.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:e=>{let{ownerState:t}=e;return t.contained},style:{marginLeft:14,marginRight:14}}]}}))),sU=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p",disabled:a,error:s,filled:l,focused:u,margin:c,required:h,variant:d,...p}=n,f=iW({props:n,muiFormControl:aW(),states:["variant","size","disabled","error","filled","focused","required"]}),g={...n,component:o,contained:"filled"===f.variant||"outlined"===f.variant,variant:f.variant,size:f.size,disabled:f.disabled,error:f.error,filled:f.filled,focused:f.focused,required:f.required};delete g.ownerState;const m=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:a,focused:s,required:l}=e;return gD({root:["root",i&&"disabled",o&&"error",r&&`size${vz(r)}`,n&&"contained",s&&"focused",a&&"filled",l&&"required"]},rU,t)})(g);return(0,Rj.jsx)(aU,{as:o,className:ct(m.root,i),ref:t,...p,ownerState:g,children:" "===r?oU||(oU=(0,Rj.jsx)("span",{className:"notranslate",children:"\u200b"})):r})})),lU=sU;function uU(e){return e&&a.isValidElement(e)?e.props.propertyIsEnumerable("ref")?e.props.ref:e.ref:null}n(805);const cU=YB,hU=a.createContext();const dU=function(e){const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...o}=e,a=i?{}:sB(n,r),{props:s,internalRef:l}=cB({...o,externalSlotProps:a}),u=Lj(l,a?.ref,e.additionalProps?.ref);return aB(t,{...s,ref:u},r)};const pU=a.createContext({});function fU(e){return rz("MuiList",e)}iz("MuiList",["root","padding","dense","subheader"]);const gU=Nj("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return t.subheader},style:{paddingTop:0}}]}),mU=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiList"}),{children:r,className:i,component:o="ul",dense:s=!1,disablePadding:l=!1,subheader:u,...c}=n,h=a.useMemo((()=>({dense:s})),[s]),d={...n,component:o,dense:s,disablePadding:l},p=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e;return gD({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},fU,t)})(d);return(0,Rj.jsx)(pU.Provider,{value:h,children:(0,Rj.jsxs)(gU,{as:o,className:ct(p.root,i),ref:t,ownerState:d,...c,children:[u,r]})})})),yU=mU;function vU(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const bU=vU;function xU(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function wU(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function kU(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join("")))}function SU(e,t,n,r,i,o){let a=!1,s=i(e,t,!!t&&n);for(;s;){if(s===e.firstChild){if(a)return!1;a=!0}const t=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&kU(s,o)&&!t)return s.focus(),!0;s=i(e,s,n)}return!1}const CU=a.forwardRef((function(e,t){const{actions:n,autoFocus:r=!1,autoFocusItem:i=!1,children:o,className:s,disabledItemsFocusable:l=!1,disableListWrap:u=!1,onKeyDown:c,variant:h="selectedMenu",...d}=e,p=a.useRef(null),f=a.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});sW((()=>{r&&p.current.focus()}),[r]),a.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!p.current.style.width;if(e.clientHeight<p.current.clientHeight&&r){const t=`${bU(cU(e))}px`;p.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,p.current.style.width=`calc(100% + ${t})`}return p.current}})),[]);const g=jj(p,t);let m=-1;a.Children.forEach(o,((e,t)=>{a.isValidElement(e)?(e.props.disabled||("selectedMenu"===h&&e.props.selected||-1===m)&&(m=t),m===t&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(m+=1,m>=o.length&&(m=-1))):m===t&&(m+=1,m>=o.length&&(m=-1))}));const y=a.Children.map(o,((e,t)=>{if(t===m){const t={};return i&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===h&&(t.tabIndex=0),a.cloneElement(e,t)}return e}));return(0,Rj.jsx)(yU,{role:"menu",ref:g,className:s,onKeyDown:e=>{const t=p.current,n=e.key;if(e.ctrlKey||e.metaKey||e.altKey)return void(c&&c(e));const r=cU(t).activeElement;if("ArrowDown"===n)e.preventDefault(),SU(t,r,u,l,xU);else if("ArrowUp"===n)e.preventDefault(),SU(t,r,u,l,wU);else if("Home"===n)e.preventDefault(),SU(t,null,u,l,xU);else if("End"===n)e.preventDefault(),SU(t,null,u,l,wU);else if(1===n.length){const i=f.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);const s=r&&!i.repeating&&kU(r,i);i.previousKeyMatched&&(s||SU(t,r,!1,l,xU,i))?e.preventDefault():i.previousKeyMatched=!1}c&&c(e)},tabIndex:r?0:-1,...d,children:y})})),IU=CU,EU=JB,TU=QB,_U=e=>e.scrollTop;function NU(e,t){const{timeout:n,easing:r,style:i={}}=e;return{duration:i.transitionDuration??("number"===typeof n?n:n[t.mode]||0),easing:i.transitionTimingFunction??("object"===typeof r?r[t.mode]:r),delay:i.transitionDelay}}function AU(e){return`scale(${e}, ${e**2})`}const OU={entering:{opacity:1,transform:AU(1)},entered:{opacity:1,transform:"none"}},RU="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),$U=a.forwardRef((function(e,t){const{addEndListener:n,appear:r=!0,children:i,easing:o,in:s,onEnter:l,onEntered:u,onEntering:c,onExit:h,onExited:d,onExiting:p,style:f,timeout:g="auto",TransitionComponent:m=Na,...y}=e,v=Kj(),b=a.useRef(),x=gB(),w=a.useRef(null),k=jj(w,uU(i),t),S=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},C=S(c),I=S(((e,t)=>{_U(e);const{duration:n,delay:r,easing:i}=NU({style:f,timeout:g,easing:o},{mode:"enter"});let a;"auto"===g?(a=x.transitions.getAutoHeightDuration(e.clientHeight),b.current=a):a=n,e.style.transition=[x.transitions.create("opacity",{duration:a,delay:r}),x.transitions.create("transform",{duration:RU?a:.666*a,delay:r,easing:i})].join(","),l&&l(e,t)})),E=S(u),T=S(p),_=S((e=>{const{duration:t,delay:n,easing:r}=NU({style:f,timeout:g,easing:o},{mode:"exit"});let i;"auto"===g?(i=x.transitions.getAutoHeightDuration(e.clientHeight),b.current=i):i=t,e.style.transition=[x.transitions.create("opacity",{duration:i,delay:n}),x.transitions.create("transform",{duration:RU?i:.666*i,delay:RU?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=AU(.75),h&&h(e)})),N=S(d);return(0,Rj.jsx)(m,{appear:r,in:s,nodeRef:w,onEnter:I,onEntered:E,onEntering:C,onExit:_,onExited:N,onExiting:T,addEndListener:e=>{"auto"===g&&v.start(b.current||0,e),n&&n(w.current,e)},timeout:"auto"===g?null:g,...y,children:(e,t)=>a.cloneElement(i,{style:{opacity:0,transform:AU(.75),visibility:"exited"!==e||s?void 0:"hidden",...OU[e],...f,...i.props.style},ref:k,...t})})}));$U&&($U.muiSupportAuto=!0);const PU=$U,DU=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function MU(e){const t=[],n=[];return Array.from(e.querySelectorAll(DU)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function FU(){return!0}const LU=function(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=MU,isEnabled:s=FU,open:l}=e,u=a.useRef(!1),c=a.useRef(null),h=a.useRef(null),d=a.useRef(null),p=a.useRef(null),f=a.useRef(!1),g=a.useRef(null),m=Lj(uU(t),g),y=a.useRef(null);a.useEffect((()=>{l&&g.current&&(f.current=!n)}),[n,l]),a.useEffect((()=>{if(!l||!g.current)return;const e=YB(g.current);return g.current.contains(e.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex","-1"),f.current&&g.current.focus()),()=>{i||(d.current&&d.current.focus&&(u.current=!0,d.current.focus()),d.current=null)}}),[l]),a.useEffect((()=>{if(!l||!g.current)return;const e=YB(g.current),t=t=>{y.current=t,!r&&s()&&"Tab"===t.key&&e.activeElement===g.current&&t.shiftKey&&(u.current=!0,h.current&&h.current.focus())},n=()=>{const t=g.current;if(null===t)return;if(!e.hasFocus()||!s()||u.current)return void(u.current=!1);if(t.contains(e.activeElement))return;if(r&&e.activeElement!==c.current&&e.activeElement!==h.current)return;if(e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!f.current)return;let n=[];if(e.activeElement!==c.current&&e.activeElement!==h.current||(n=o(g.current)),n.length>0){const e=Boolean(y.current?.shiftKey&&"Tab"===y.current?.key),t=n[0],r=n[n.length-1];"string"!==typeof t&&"string"!==typeof r&&(e?r.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const i=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(i),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[n,r,i,s,l,o]);const v=e=>{null===d.current&&(d.current=e.relatedTarget),f.current=!0};return(0,Rj.jsxs)(a.Fragment,{children:[(0,Rj.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:c,"data-testid":"sentinelStart"}),a.cloneElement(t,{ref:m,onFocus:e=>{null===d.current&&(d.current=e.relatedTarget),f.current=!0,p.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,Rj.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:h,"data-testid":"sentinelEnd"})]})};const jU=a.forwardRef((function(e,t){const{children:n,container:r,disablePortal:i=!1}=e,[o,s]=a.useState(null),l=Lj(uU(n),t);if(zj((()=>{i||s(function(e){return"function"===typeof e?e():e}(r)||document.body)}),[r,i]),zj((()=>{if(o&&!i)return Fj(t,o),()=>{Fj(t,null)}}),[t,o,i]),i){if(a.isValidElement(n)){const e={ref:l};return a.cloneElement(n,e)}return(0,Rj.jsx)(a.Fragment,{children:n})}return(0,Rj.jsx)(a.Fragment,{children:o?ue.createPortal(n,o):o})})),zU={entering:{opacity:1},entered:{opacity:1}},BU=a.forwardRef((function(e,t){const n=gB(),r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:s,easing:l,in:u,onEnter:c,onEntered:h,onEntering:d,onExit:p,onExited:f,onExiting:g,style:m,timeout:y=r,TransitionComponent:v=Na,...b}=e,x=a.useRef(null),w=jj(x,uU(s),t),k=e=>t=>{if(e){const n=x.current;void 0===t?e(n):e(n,t)}},S=k(d),C=k(((e,t)=>{_U(e);const r=NU({style:m,timeout:y,easing:l},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),c&&c(e,t)})),I=k(h),E=k(g),T=k((e=>{const t=NU({style:m,timeout:y,easing:l},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),p&&p(e)})),_=k(f);return(0,Rj.jsx)(v,{appear:o,in:u,nodeRef:x,onEnter:C,onEntered:I,onEntering:S,onExit:T,onExited:_,onExiting:E,addEndListener:e=>{i&&i(x.current,e)},timeout:y,...b,children:(e,t)=>a.cloneElement(s,{style:{opacity:0,visibility:"exited"!==e||u?void 0:"hidden",...zU[e],...m,...s.props.style},ref:w,...t})})})),WU=BU;function UU(e){return rz("MuiBackdrop",e)}iz("MuiBackdrop",["root","invisible"]);const VU=Nj("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),GU=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiBackdrop"}),{children:r,className:i,component:o="div",invisible:a=!1,open:s,components:l={},componentsProps:u={},slotProps:c={},slots:h={},TransitionComponent:d,transitionDuration:p,...f}=n,g={...n,component:o,invisible:a},m=(e=>{const{classes:t,invisible:n}=e;return gD({root:["root",n&&"invisible"]},UU,t)})(g),y={slots:{transition:d,root:l.Root,...h},slotProps:{...u,...c}},[v,b]=hB("root",{elementType:VU,externalForwardedProps:y,className:ct(m.root,i),ownerState:g}),[x,w]=hB("transition",{elementType:WU,externalForwardedProps:y,ownerState:g}),k=(e=>{const{ownerState:t,...n}=e;return n})(w);return(0,Rj.jsx)(x,{in:s,timeout:p,...f,...k,children:(0,Rj.jsx)(v,{"aria-hidden":!0,...b,classes:m,ref:t,children:r})})})),HU=GU;function qU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}function KU(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function XU(e){return parseInt(QB(e).getComputedStyle(e).paddingRight,10)||0}function YU(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,(e=>{const t=!o.includes(e),n=!function(e){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&KU(e,i)}))}function QU(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function JU(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=YB(e);return t.body===e?QB(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=vU(YB(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${XU(r)+e}px`;const t=YB(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${XU(t)+e}px`}))}let e;if(r.parentNode instanceof DocumentFragment)e=YB(r).body;else{const t=r.parentElement,n=QB(r);e="HTML"===t?.nodeName&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const ZU=new class{constructor(){this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&KU(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);YU(t,e.mount,e.modalRef,r,!0);const i=QU(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=QU(this.containers,(t=>t.modals.includes(e))),r=this.containers[n];r.restore||(r.restore=JU(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=QU(this.containers,(t=>t.modals.includes(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&KU(e.modalRef,t),YU(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&KU(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const eV=function(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=ZU,closeAfterTransition:o=!1,onTransitionEnter:s,onTransitionExited:l,children:u,onClose:c,open:h,rootRef:d}=e,p=a.useRef({}),f=a.useRef(null),g=a.useRef(null),m=Lj(g,d),[y,v]=a.useState(!h),b=function(e){return!!e&&e.props.hasOwnProperty("in")}(u);let x=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(x=!1);const w=()=>(p.current.modalRef=g.current,p.current.mount=f.current,p.current),k=()=>{i.mount(w(),{disableScrollLock:r}),g.current&&(g.current.scrollTop=0)},S=Bj((()=>{const e=function(e){return"function"===typeof e?e():e}(t)||YB(f.current).body;i.add(w(),e),g.current&&k()})),C=a.useCallback((()=>i.isTopModal(w())),[i]),I=Bj((e=>{f.current=e,e&&(h&&C()?k():g.current&&KU(g.current,x))})),E=a.useCallback((()=>{i.remove(w(),x)}),[x,i]);a.useEffect((()=>()=>{E()}),[E]),a.useEffect((()=>{h?S():b&&o||E()}),[h,E,b,o,S]);const T=e=>t=>{e.onKeyDown?.(t),"Escape"===t.key&&229!==t.which&&C()&&(n||(t.stopPropagation(),c&&c(t,"escapeKeyDown")))},_=e=>t=>{e.onClick?.(t),t.target===t.currentTarget&&c&&c(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=lB(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r={...n,...t};return{role:"presentation",...r,onKeyDown:T(r),ref:m}},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"aria-hidden":!0,...e,onClick:_(e),open:h}},getTransitionProps:()=>({onEnter:qU((()=>{v(!1),s&&s()}),u?.props.onEnter),onExited:qU((()=>{v(!0),l&&l(),o&&E()}),u?.props.onExited)}),rootRef:m,portalRef:I,isTopModal:C,exited:y,hasTransition:b}};function tV(e){return rz("MuiModal",e)}iz("MuiModal",["root","hidden","backdrop"]);const nV=Nj("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(Oj((e=>{let{theme:t}=e;return{position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:e=>{let{ownerState:t}=e;return!t.open&&t.exited},style:{visibility:"hidden"}}]}}))),rV=Nj(HU,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),iV=a.forwardRef((function(e,t){const n=Dj({name:"MuiModal",props:e}),{BackdropComponent:r=rV,BackdropProps:i,classes:o,className:s,closeAfterTransition:l=!1,children:u,container:c,component:h,components:d={},componentsProps:p={},disableAutoFocus:f=!1,disableEnforceFocus:g=!1,disableEscapeKeyDown:m=!1,disablePortal:y=!1,disableRestoreFocus:v=!1,disableScrollLock:b=!1,hideBackdrop:x=!1,keepMounted:w=!1,onBackdropClick:k,onClose:S,onTransitionEnter:C,onTransitionExited:I,open:E,slotProps:T={},slots:_={},theme:N,...A}=n,O={...n,closeAfterTransition:l,disableAutoFocus:f,disableEnforceFocus:g,disableEscapeKeyDown:m,disablePortal:y,disableRestoreFocus:v,disableScrollLock:b,hideBackdrop:x,keepMounted:w},{getRootProps:R,getBackdropProps:$,getTransitionProps:P,portalRef:D,isTopModal:M,exited:F,hasTransition:L}=eV({...O,rootRef:t}),j={...O,exited:F},z=(e=>{const{open:t,exited:n,classes:r}=e;return gD({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},tV,r)})(j),B={};if(void 0===u.props.tabIndex&&(B.tabIndex="-1"),L){const{onEnter:e,onExited:t}=P();B.onEnter=e,B.onExited=t}const W={...A,slots:{root:d.Root,backdrop:d.Backdrop,..._},slotProps:{...p,...T}},[U,V]=hB("root",{elementType:nV,externalForwardedProps:W,getSlotProps:R,additionalProps:{ref:t,as:h},ownerState:j,className:ct(s,z?.root,!j.open&&j.exited&&z?.hidden)}),[G,H]=hB("backdrop",{elementType:r,externalForwardedProps:W,additionalProps:i,getSlotProps:e=>$({...e,onClick:t=>{k&&k(t),e?.onClick&&e.onClick(t)}}),className:ct(i?.className,z?.backdrop),ownerState:j}),q=jj(i?.ref,H.ref);return w||E||L&&!F?(0,Rj.jsx)(jU,{ref:D,container:c,disablePortal:y,children:(0,Rj.jsxs)(U,{...V,children:[!x&&r?(0,Rj.jsx)(G,{...H,ref:q}):null,(0,Rj.jsx)(LU,{disableEnforceFocus:g,disableAutoFocus:f,disableRestoreFocus:v,isEnabled:M,open:E,children:a.cloneElement(u,B)})]})}):null})),oV=iV;function aV(e){return rz("MuiPopover",e)}iz("MuiPopover",["root","paper"]);function sV(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function lV(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function uV(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?`${e}px`:e)).join(" ")}function cV(e){return"function"===typeof e?e():e}const hV=Nj(oV,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),dV=Nj(bB,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),pV=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiPopover"}),{action:r,anchorEl:i,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:s,anchorReference:l="anchorEl",children:u,className:c,container:h,elevation:d=8,marginThreshold:p=16,open:f,PaperProps:g={},slots:m={},slotProps:y={},transformOrigin:v={vertical:"top",horizontal:"left"},TransitionComponent:b=PU,transitionDuration:x="auto",TransitionProps:{onEntering:w,...k}={},disableScrollLock:S=!1,...C}=n,I=y?.paper??g,E=a.useRef(),T={...n,anchorOrigin:o,anchorReference:l,elevation:d,marginThreshold:p,externalPaperSlotProps:I,transformOrigin:v,TransitionComponent:b,transitionDuration:x,TransitionProps:k},_=(e=>{const{classes:t}=e;return gD({root:["root"],paper:["paper"]},aV,t)})(T),N=a.useCallback((()=>{if("anchorPosition"===l)return s;const e=cV(i),t=(e&&1===e.nodeType?e:cU(E.current).body).getBoundingClientRect();return{top:t.top+sV(t,o.vertical),left:t.left+lV(t,o.horizontal)}}),[i,o.horizontal,o.vertical,s,l]),A=a.useCallback((e=>({vertical:sV(e,v.vertical),horizontal:lV(e,v.horizontal)})),[v.horizontal,v.vertical]),O=a.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=A(t);if("none"===l)return{top:null,left:null,transformOrigin:uV(n)};const r=N();let o=r.top-n.vertical,a=r.left-n.horizontal;const s=o+t.height,u=a+t.width,c=TU(cV(i)),h=c.innerHeight-p,d=c.innerWidth-p;if(null!==p&&o<p){const e=o-p;o-=e,n.vertical+=e}else if(null!==p&&s>h){const e=s-h;o-=e,n.vertical+=e}if(null!==p&&a<p){const e=a-p;a-=e,n.horizontal+=e}else if(u>d){const e=u-d;a-=e,n.horizontal+=e}return{top:`${Math.round(o)}px`,left:`${Math.round(a)}px`,transformOrigin:uV(n)}}),[i,l,N,A,p]),[R,$]=a.useState(f),P=a.useCallback((()=>{const e=E.current;if(!e)return;const t=O(e);null!==t.top&&e.style.setProperty("top",t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,$(!0)}),[O]);a.useEffect((()=>(S&&window.addEventListener("scroll",P),()=>window.removeEventListener("scroll",P))),[i,S,P]);a.useEffect((()=>{f&&P()})),a.useImperativeHandle(r,(()=>f?{updatePosition:()=>{P()}}:null),[f,P]),a.useEffect((()=>{if(!f)return;const e=EU((()=>{P()})),t=TU(i);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[i,f,P]);let D=x;"auto"!==x||b.muiSupportAuto||(D=void 0);const M=h||(i?cU(cV(i)).body:void 0),F={slots:m,slotProps:{...y,paper:I}},[L,j]=hB("paper",{elementType:dV,externalForwardedProps:F,additionalProps:{elevation:d,className:ct(_.paper,I?.className),style:R?I.style:{...I.style,opacity:0}},ownerState:T}),[z,{slotProps:B,...W}]=hB("root",{elementType:hV,externalForwardedProps:F,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:M,open:f},ownerState:T,className:ct(_.root,c)}),U=jj(E,j.ref);return(0,Rj.jsx)(z,{...W,...!rW(z)&&{slotProps:B,disableScrollLock:S},...C,ref:t,children:(0,Rj.jsx)(b,{appear:!0,in:f,onEntering:(e,t)=>{w&&w(e,t),P()},onExited:()=>{$(!1)},timeout:D,...k,children:(0,Rj.jsx)(L,{...j,ref:U,children:u})})})})),fV=pV;function gV(e){return rz("MuiMenu",e)}iz("MuiMenu",["root","paper","list"]);const mV={vertical:"top",horizontal:"right"},yV={vertical:"top",horizontal:"left"},vV=Nj(fV,{shouldForwardProp:e=>RD(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),bV=Nj(dV,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),xV=Nj(IU,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),wV=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiMenu"}),{autoFocus:r=!0,children:i,className:o,disableAutoFocusItem:s=!1,MenuListProps:l={},onClose:u,open:c,PaperProps:h={},PopoverClasses:d,transitionDuration:p="auto",TransitionProps:{onEntering:f,...g}={},variant:m="selectedMenu",slots:y={},slotProps:v={},...b}=n,x=a.useContext(hU)??!1,w={...n,autoFocus:r,disableAutoFocusItem:s,MenuListProps:l,onEntering:f,PaperProps:h,transitionDuration:p,TransitionProps:g,variant:m},k=(e=>{const{classes:t}=e;return gD({root:["root"],paper:["paper"],list:["list"]},gV,t)})(w),S=r&&!s&&c,C=a.useRef(null);let I=-1;a.Children.map(i,((e,t)=>{a.isValidElement(e)&&(e.props.disabled||("selectedMenu"===m&&e.props.selected||-1===I)&&(I=t))}));const E=y.paper??bV,T=v.paper??h,_=dU({elementType:y.root,externalSlotProps:v.root,ownerState:w,className:[k.root,o]}),N=dU({elementType:E,externalSlotProps:T,ownerState:w,className:k.paper});return(0,Rj.jsx)(vV,{onClose:u,anchorOrigin:{vertical:"bottom",horizontal:x?"right":"left"},transformOrigin:x?mV:yV,slots:{paper:E,root:y.root},slotProps:{root:_,paper:N},open:c,ref:t,transitionDuration:p,TransitionProps:{onEntering:(e,t)=>{C.current&&C.current.adjustStyleForScrollbar(e,{direction:x?"rtl":"ltr"}),f&&f(e,t)},...g},ownerState:w,...b,classes:d,children:(0,Rj.jsx)(xV,{onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),u&&u(e,"tabKeyDown"))},actions:C,autoFocus:r&&(-1===I||s),autoFocusItem:S,variant:m,...l,className:ct(k.list,l.className),children:i})})})),kV=wV;function SV(e){return rz("MuiNativeSelect",e)}const CV=iz("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),IV=Nj("select")((e=>{let{theme:t}=e;return{MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${CV.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:e=>{let{ownerState:t}=e;return"filled"!==t.variant&&"outlined"!==t.variant},style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]}})),EV=Nj(IV,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:RD,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${CV.multiple}`]:t.multiple}]}})({}),TV=Nj("svg")((e=>{let{theme:t}=e;return{position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${CV.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:e=>{let{ownerState:t}=e;return t.open},style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]}})),_V=Nj(TV,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${vz(n.variant)}`],n.open&&t.iconOpen]}})({}),NV=a.forwardRef((function(e,t){const{className:n,disabled:r,error:i,IconComponent:o,inputRef:s,variant:l="standard",...u}=e,c={...e,disabled:r,variant:l,error:i},h=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:a}=e;return gD({select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${vz(n)}`,o&&"iconOpen",r&&"disabled"]},SV,t)})(c);return(0,Rj.jsxs)(a.Fragment,{children:[(0,Rj.jsx)(EV,{ownerState:c,className:ct(h.select,n),disabled:r,ref:s||t,...u}),e.multiple?null:(0,Rj.jsx)(_V,{as:o,ownerState:c,className:h.icon})]})})),AV=NV;const OV=function(e){let{controlled:t,default:n,name:r,state:i="value"}=e;const{current:o}=a.useRef(void 0!==t),[s,l]=a.useState(n);return[o?t:s,a.useCallback((e=>{o||l(e)}),[])]};function RV(e){return rz("MuiSelect",e)}const $V=iz("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var PV;const DV=Nj(IV,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${$V.select}`]:t.select},{[`&.${$V.select}`]:t[n.variant]},{[`&.${$V.error}`]:t.error},{[`&.${$V.multiple}`]:t.multiple}]}})({[`&.${$V.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),MV=Nj(TV,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${vz(n.variant)}`],n.open&&t.iconOpen]}})({}),FV=Nj("input",{shouldForwardProp:e=>OD(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function LV(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function jV(e){return null==e||"string"===typeof e&&!e.trim()}const zV=a.forwardRef((function(e,t){const{"aria-describedby":n,"aria-label":r,autoFocus:i,autoWidth:o,children:s,className:l,defaultOpen:u,defaultValue:c,disabled:h,displayEmpty:d,error:p=!1,IconComponent:f,inputRef:g,labelId:m,MenuProps:y={},multiple:v,name:b,onBlur:x,onChange:w,onClose:k,onFocus:S,onOpen:C,open:I,readOnly:E,renderValue:T,SelectDisplayProps:_={},tabIndex:N,type:A,value:O,variant:R="standard",...$}=e,[P,D]=OV({controlled:O,default:c,name:"Select"}),[M,F]=OV({controlled:I,default:u,name:"Select"}),L=a.useRef(null),j=a.useRef(null),[z,B]=a.useState(null),{current:W}=a.useRef(null!=I),[U,V]=a.useState(),G=jj(t,g),H=a.useCallback((e=>{j.current=e,e&&B(e)}),[]),q=z?.parentNode;a.useImperativeHandle(G,(()=>({focus:()=>{j.current.focus()},node:L.current,value:P})),[P]),a.useEffect((()=>{u&&M&&z&&!W&&(V(o?null:q.clientWidth),j.current.focus())}),[z,o]),a.useEffect((()=>{i&&j.current.focus()}),[i]),a.useEffect((()=>{if(!m)return;const e=cU(j.current).getElementById(m);if(e){const t=()=>{getSelection().isCollapsed&&j.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[m]);const K=(e,t)=>{e?C&&C(t):k&&k(t),W||(V(o?null:q.clientWidth),F(e))},X=a.Children.toArray(s),Y=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(v){n=Array.isArray(P)?P.slice():[];const t=P.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),P!==n&&(D(n),w)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:b}}),w(i,e)}v||K(!1,t)}},Q=null!==z&&M;let J,Z;delete $["aria-invalid"];const ee=[];let te=!1,ne=!1;(uW({value:P})||d)&&(T?J=T(P):te=!0);const re=X.map((e=>{if(!a.isValidElement(e))return null;let t;if(v){if(!Array.isArray(P))throw new Error(mD(2));t=P.some((t=>LV(t,e.props.value))),t&&te&&ee.push(e.props.children)}else t=LV(P,e.props.value),t&&te&&(Z=e.props.children);return t&&(ne=!0),a.cloneElement(e,{"aria-selected":t?"true":"false",onClick:Y(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));te&&(J=v?0===ee.length?null:ee.reduce(((e,t,n)=>(e.push(t),n<ee.length-1&&e.push(", "),e)),[]):Z);let ie,oe=U;!o&&W&&z&&(oe=q.clientWidth),ie="undefined"!==typeof N?N:h?null:0;const ae=_.id||(b?`mui-component-select-${b}`:void 0),se={...e,variant:R,value:P,open:Q,error:p},le=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:a}=e;return gD({select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${vz(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]},RV,t)})(se),ue={...y.PaperProps,...y.slotProps?.paper},ce=jz();return(0,Rj.jsxs)(a.Fragment,{children:[(0,Rj.jsx)(DV,{as:"div",ref:H,tabIndex:ie,role:"combobox","aria-controls":ce,"aria-disabled":h?"true":void 0,"aria-expanded":Q?"true":"false","aria-haspopup":"listbox","aria-label":r,"aria-labelledby":[m,ae].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:e=>{if(!E){[" ","ArrowUp","ArrowDown","Enter"].includes(e.key)&&(e.preventDefault(),K(!0,e))}},onMouseDown:h||E?null:e=>{0===e.button&&(e.preventDefault(),j.current.focus(),K(!0,e))},onBlur:e=>{!Q&&x&&(Object.defineProperty(e,"target",{writable:!0,value:{value:P,name:b}}),x(e))},onFocus:S,..._,ownerState:se,className:ct(_.className,le.select,l),id:ae,children:jV(J)?PV||(PV=(0,Rj.jsx)("span",{className:"notranslate",children:"\u200b"})):J}),(0,Rj.jsx)(FV,{"aria-invalid":p,value:Array.isArray(P)?P.join(","):P,name:b,ref:L,"aria-hidden":!0,onChange:e=>{const t=X.find((t=>t.props.value===e.target.value));void 0!==t&&(D(t.props.value),w&&w(e,t))},tabIndex:-1,disabled:h,className:le.nativeInput,autoFocus:i,...$,ownerState:se}),(0,Rj.jsx)(MV,{as:f,className:le.icon,ownerState:se}),(0,Rj.jsx)(kV,{id:`menu-${b||""}`,anchorEl:q,open:Q,onClose:e=>{K(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...y,MenuListProps:{"aria-labelledby":m,role:"listbox","aria-multiselectable":v?"true":void 0,disableListWrap:!0,id:ce,...y.MenuListProps},slotProps:{...y.slotProps,paper:{...ue,style:{minWidth:oe,...null!=ue?ue.style:null}}},children:re})]})})),BV=zV,WV=Pz((0,Rj.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function UV(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,o=fB(r);return i&&(o=o[i]||o),function(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?fD(t.components[n].defaultProps,r):r}({theme:o,name:n,props:t})}function VV(e){let{props:t,name:n}=e;return UV({props:t,name:n,defaultTheme:Ej,themeId:Tj})}const GV={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>RD(e)&&"variant"!==e,slot:"Root"},HV=Nj(IW,GV)(""),qV=Nj(BW,GV)(""),KV=Nj(OW,GV)(""),XV=a.forwardRef((function(e,t){const n=VV({name:"MuiSelect",props:e}),{autoWidth:r=!1,children:i,classes:o={},className:s,defaultOpen:l=!1,displayEmpty:u=!1,IconComponent:c=WV,id:h,input:d,inputProps:p,label:f,labelId:g,MenuProps:m,multiple:y=!1,native:v=!1,onClose:b,onOpen:x,open:w,renderValue:k,SelectDisplayProps:S,variant:C="outlined",...I}=n,E=v?AV:BV,T=iW({props:n,muiFormControl:aW(),states:["variant","error"]}),_=T.variant||C,N={...n,variant:_,classes:o},A=(e=>{const{classes:t}=e;return t})(N),{root:O,...R}=A,$=d||{standard:(0,Rj.jsx)(HV,{ownerState:N}),outlined:(0,Rj.jsx)(qV,{label:f,ownerState:N}),filled:(0,Rj.jsx)(KV,{ownerState:N})}[_],P=jj(t,uU($));return(0,Rj.jsx)(a.Fragment,{children:a.cloneElement($,{inputComponent:E,inputProps:{children:i,error:T.error,IconComponent:c,variant:_,type:void 0,multiple:y,...v?{id:h}:{autoWidth:r,defaultOpen:l,displayEmpty:u,labelId:g,MenuProps:m,onClose:b,onOpen:x,open:w,renderValue:k,SelectDisplayProps:{id:h,...S}},...p,classes:p?pF(R,p.classes):R,...d?d.props.inputProps:{}},...(y&&v||u)&&"outlined"===_?{notched:!0}:{},ref:P,className:ct($.props.className,s,A.root),...!d&&{variant:_},...I})})}));XV.muiName="Select";const YV=XV;function QV(e){return rz("MuiTextField",e)}iz("MuiTextField",["root"]);const JV={standard:IW,filled:OW,outlined:BW},ZV=Nj(nU,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),eG=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:a,color:s="primary",defaultValue:l,disabled:u=!1,error:c=!1,FormHelperTextProps:h,fullWidth:d=!1,helperText:p,id:f,InputLabelProps:g,inputProps:m,InputProps:y,inputRef:v,label:b,maxRows:x,minRows:w,multiline:k=!1,name:S,onBlur:C,onChange:I,onFocus:E,placeholder:T,required:_=!1,rows:N,select:A=!1,SelectProps:O,slots:R={},slotProps:$={},type:P,value:D,variant:M="outlined",...F}=n,L={...n,autoFocus:i,color:s,disabled:u,error:c,fullWidth:d,multiline:k,required:_,select:A,variant:M},j=(e=>{const{classes:t}=e;return gD({root:["root"]},QV,t)})(L);const z=jz(f),B=p&&z?`${z}-helper-text`:void 0,W=b&&z?`${z}-label`:void 0,U=JV[M],V={slots:R,slotProps:{input:y,inputLabel:g,htmlInput:m,formHelperText:h,select:O,...$}},G={},H=V.slotProps.inputLabel;"outlined"===M&&(H&&"undefined"!==typeof H.shrink&&(G.notched=H.shrink),G.label=b),A&&(O&&O.native||(G.id=void 0),G["aria-describedby"]=void 0);const[q,K]=hB("input",{elementType:U,externalForwardedProps:V,additionalProps:G,ownerState:L}),[X,Y]=hB("inputLabel",{elementType:QW,externalForwardedProps:V,ownerState:L}),[Q,J]=hB("htmlInput",{elementType:"input",externalForwardedProps:V,ownerState:L}),[Z,ee]=hB("formHelperText",{elementType:lU,externalForwardedProps:V,ownerState:L}),[te,ne]=hB("select",{elementType:YV,externalForwardedProps:V,ownerState:L}),re=(0,Rj.jsx)(q,{"aria-describedby":B,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:d,multiline:k,name:S,rows:N,maxRows:x,minRows:w,type:P,value:D,id:z,inputRef:v,onBlur:C,onChange:I,onFocus:E,placeholder:T,inputProps:J,slots:{input:R.htmlInput?Q:void 0},...K});return(0,Rj.jsxs)(ZV,{className:ct(j.root,a),disabled:u,error:c,fullWidth:d,ref:t,required:_,color:s,variant:M,ownerState:L,...F,children:[null!=b&&""!==b&&(0,Rj.jsx)(X,{htmlFor:z,id:W,...Y,children:b}),A?(0,Rj.jsx)(te,{"aria-describedby":B,id:z,labelId:W,value:D,input:re,...ne,children:o}):re,p&&(0,Rj.jsx)(Z,{id:B,...ee,children:p})]})})),tG=eG;const nG=iz("MuiBox",["root"]),rG=Ij(),iG=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=e,o=cF("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(xL),s=a.forwardRef((function(e,a){const s=fB(n),{className:l,component:u="div",...c}=jB(e);return(0,Rj.jsx)(o,{as:u,ref:a,className:ct(l,i?i(r):r),theme:t&&s[t]||s,...c})}));return s}({themeId:Tj,defaultTheme:rG,defaultClassName:nG.root,generateClassName:tz.generate}),oG=iG;const aG=a.createContext();function sG(e){return rz("MuiGrid",e)}const lG=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],uG=iz("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>`spacing-xs-${e}`)),...["column-reverse","column","row-reverse","row"].map((e=>`direction-xs-${e}`)),...["nowrap","wrap-reverse","wrap"].map((e=>`wrap-xs-${e}`)),...lG.map((e=>`grid-xs-${e}`)),...lG.map((e=>`grid-sm-${e}`)),...lG.map((e=>`grid-md-${e}`)),...lG.map((e=>`grid-lg-${e}`)),...lG.map((e=>`grid-xl-${e}`))]),cG=uG;function hG(e){let{breakpoints:t,values:n}=e,r="";Object.keys(n).forEach((e=>{""===r&&0!==n[e]&&(r=e)}));const i=Object.keys(t).sort(((e,n)=>t[e]-t[n]));return i.slice(0,i.indexOf(r))}const dG=Nj("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:i,item:o,spacing:a,wrap:s,zeroMinWidth:l,breakpoints:u}=n;let c=[];r&&(c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n[`spacing-xs-${String(e)}`]];const r=[];return t.forEach((t=>{const i=e[t];Number(i)>0&&r.push(n[`spacing-${t}-${String(i)}`])})),r}(a,u,t));const h=[];return u.forEach((e=>{const r=n[e];r&&h.push(t[`grid-${e}-${String(r)}`])})),[t.root,r&&t.container,o&&t.item,l&&t.zeroMinWidth,...c,"row"!==i&&t[`direction-xs-${String(i)}`],"wrap"!==s&&t[`wrap-xs-${String(s)}`],...h]}})((e=>{let{ownerState:t}=e;return{boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...t.item&&{margin:0},...t.zeroMinWidth&&{minWidth:0},..."wrap"!==t.wrap&&{flexWrap:t.wrap}}}),(function(e){let{theme:t,ownerState:n}=e;return bF({theme:t},kF({values:n.direction,breakpoints:t.breakpoints.values}),(e=>{const t={flexDirection:e};return e.startsWith("column")&&(t[`& > .${cG.item}`]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,rowSpacing:i}=n;let o={};if(r&&0!==i){const e=kF({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=hG({breakpoints:t.breakpoints.values,values:e})),o=bF({theme:t},e,((e,r)=>{const i=t.spacing(e);return"0px"!==i?{marginTop:t.spacing(-e),[`& > .${cG.item}`]:{paddingTop:i}}:n?.includes(r)?{}:{marginTop:0,[`& > .${cG.item}`]:{paddingTop:0}}}))}return o}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,columnSpacing:i}=n;let o={};if(r&&0!==i){const e=kF({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=hG({breakpoints:t.breakpoints.values,values:e})),o=bF({theme:t},e,((e,r)=>{const i=t.spacing(e);if("0px"!==i){return{width:`calc(100% + ${i})`,marginLeft:t.spacing(-e),[`& > .${cG.item}`]:{paddingLeft:i}}}return n?.includes(r)?{}:{width:"100%",marginLeft:0,[`& > .${cG.item}`]:{paddingLeft:0}}}))}return o}),(function(e){let t,{theme:n,ownerState:r}=e;return n.breakpoints.keys.reduce(((e,i)=>{let o={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const a=kF({values:r.columns,breakpoints:n.breakpoints.values}),s="object"===typeof a?a[i]:a;if(void 0===s||null===s)return e;const l=Math.round(t/s*1e8)/1e6+"%";let u={};if(r.container&&r.item&&0!==r.columnSpacing){const e=n.spacing(r.columnSpacing);if("0px"!==e){const t=`calc(${l} + ${e})`;u={flexBasis:t,maxWidth:t}}}o={flexBasis:l,flexGrow:0,maxWidth:l,...u}}return 0===n.breakpoints.values[i]?Object.assign(e,o):e[n.breakpoints.up(i)]=o,e}),{})}));const pG=e=>{const{classes:t,container:n,direction:r,item:i,spacing:o,wrap:a,zeroMinWidth:s,breakpoints:l}=e;let u=[];n&&(u=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[`spacing-xs-${String(e)}`];const n=[];return t.forEach((t=>{const r=e[t];if(Number(r)>0){const e=`spacing-${t}-${String(r)}`;n.push(e)}})),n}(o,l));const c=[];l.forEach((t=>{const n=e[t];n&&c.push(`grid-${t}-${String(n)}`)}));return gD({root:["root",n&&"container",i&&"item",s&&"zeroMinWidth",...u,"row"!==r&&`direction-xs-${String(r)}`,"wrap"!==a&&`wrap-xs-${String(a)}`,...c]},sG,t)},fG=a.forwardRef((function(e,t){const n=VV({props:e,name:"MuiGrid"}),{breakpoints:r}=gB(),i=jB(n),{className:o,columns:s,columnSpacing:l,component:u="div",container:c=!1,direction:h="row",item:d=!1,rowSpacing:p,spacing:f=0,wrap:g="wrap",zeroMinWidth:m=!1,...y}=i,v=p||f,b=l||f,x=a.useContext(aG),w=c?s||12:x,k={},S={...y};r.keys.forEach((e=>{null!=y[e]&&(k[e]=y[e],delete S[e])}));const C={...i,columns:w,container:c,direction:h,item:d,rowSpacing:v,columnSpacing:b,wrap:g,zeroMinWidth:m,spacing:f,...k,breakpoints:r.keys},I=pG(C);return(0,Rj.jsx)(aG.Provider,{value:w,children:(0,Rj.jsx)(dG,{ownerState:C,className:ct(I.root,o),as:u,ref:t,...S})})}));const gG=fG;const mG=iz("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const yG=iz("MuiListItemIcon",["root","alignItemsFlexStart"]);const vG=iz("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function bG(e){return rz("MuiMenuItem",e)}const xG=iz("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),wG=Nj(yz,{shouldForwardProp:e=>RD(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})(Oj((e=>{let{theme:t}=e;return{...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${xG.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:CD(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${xG.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:CD(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${xG.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:CD(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:CD(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${xG.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${xG.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${mG.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${mG.inset}`]:{marginLeft:52},[`& .${vG.root}`]:{marginTop:0,marginBottom:0},[`& .${vG.inset}`]:{paddingLeft:36},[`& .${yG.root}`]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${yG.root} svg`]:{fontSize:"1.25rem"}}}]}}))),kG=a.forwardRef((function(e,t){const n=Dj({props:e,name:"MuiMenuItem"}),{autoFocus:r=!1,component:i="li",dense:o=!1,divider:s=!1,disableGutters:l=!1,focusVisibleClassName:u,role:c="menuitem",tabIndex:h,className:d,...p}=n,f=a.useContext(pU),g=a.useMemo((()=>({dense:o||f.dense||!1,disableGutters:l})),[f.dense,o,l]),m=a.useRef(null);sW((()=>{r&&m.current&&m.current.focus()}),[r]);const y={...n,dense:g.dense,divider:s,disableGutters:l},v=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:o,classes:a}=e,s=gD({root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},bG,a);return{...a,...s}})(n),b=jj(m,t);let x;return n.disabled||(x=void 0!==h?h:-1),(0,Rj.jsx)(pU.Provider,{value:g,children:(0,Rj.jsx)(wG,{ref:b,role:c,tabIndex:x,component:i,focusVisibleClassName:ct(v.focusVisible,u),className:ct(v.root,d),...p,ownerState:y,classes:v})})})),SG=kG,CG=e=>{let{onTimeSet:t}=e;const[n,r]=(0,a.useState)(0),[i,o]=(0,a.useState)(0),[s,l]=(0,a.useState)(null),[u,c]=(0,a.useState)(!1);(0,a.useEffect)((()=>{if(u&&null!==s){if(s>0){const e=setInterval((()=>{l((e=>e-1))}),1e3);return()=>clearInterval(e)}0===s&&(t(!1),l(null),c(!1))}}),[s,u,t]);return(0,Rj.jsxs)(oG,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",sx:{p:4,border:"1px solid lightgray",borderRadius:2,width:"100%",maxWidth:400},children:[(0,Rj.jsx)(XB,{variant:"h6",gutterBottom:!0,children:"Set Fridge On Duration"}),(0,Rj.jsxs)(gG,{container:!0,spacing:2,justifyContent:"center",mb:2,children:[(0,Rj.jsx)(gG,{item:!0,children:(0,Rj.jsxs)(YV,{value:n,onChange:e=>r(Number(e.target.value)),displayEmpty:!0,variant:"outlined",sx:{minWidth:120},children:[(0,Rj.jsx)(SG,{value:0,children:"0 hrs"}),[...Array(12).keys()].map((e=>(0,Rj.jsxs)(SG,{value:e+1,children:[e+1," hrs"]},e+1)))]})}),(0,Rj.jsx)(gG,{item:!0,children:(0,Rj.jsxs)(YV,{value:i,onChange:e=>o(Number(e.target.value)),displayEmpty:!0,variant:"outlined",sx:{minWidth:120},children:[(0,Rj.jsx)(SG,{value:0,children:"0 mins"}),[...Array(12).keys()].map((e=>(0,Rj.jsxs)(SG,{value:5*(e+1),children:[5*(e+1)," mins"]},5*(e+1))))]})})]}),(0,Rj.jsxs)(gG,{container:!0,spacing:2,justifyContent:"center",mb:2,children:[(0,Rj.jsx)(gG,{item:!0,children:(0,Rj.jsx)(Nz,{variant:"contained",color:"primary",onClick:()=>{const e=3600*n+60*i;e>0&&(l(e),t(!0),c(!0))},disabled:null!==s,children:"Start Timer"})}),(0,Rj.jsx)(gG,{item:!0,children:(0,Rj.jsx)(Nz,{variant:"outlined",color:"secondary",onClick:()=>{l(null),t(!1),c(!1)},disabled:null===s,children:"Stop Timer"})})]}),(0,Rj.jsx)(Nz,{variant:"contained",color:u?"error":"success",onClick:()=>{c((e=>!e))},fullWidth:!0,sx:{mb:2},children:u?"Deactivate Timer":"Activate Timer"}),null!==s&&(0,Rj.jsxs)(XB,{variant:"body1",color:"secondary",mt:2,align:"center",children:["Time Remaining: ",Math.floor(s/3600)," hrs"," ",Math.floor(s%3600/60)," mins ",s%60," ","secs"]})]})};class IG{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class EG{refCount(e){return TG("refCount")}incRef(e){return TG("incRef")}timerAvailable(){return!0}time(e){return TG("time")}read(e){return TG("read")}readSync(e){return TG("readSync")}readToGPU(e,t){return TG("readToGPU")}numDataIds(){return TG("numDataIds")}disposeData(e,t){return TG("disposeData")}write(e,t,n){return TG("write")}move(e,t,n,r,i){return TG("move")}createTensorFromGPUData(e,t,n){return TG("createTensorFromGPUData")}memory(){return TG("memory")}floatPrecision(){return TG("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return TG("dispose")}}function TG(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function _G(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,OG(e,t,n)}function NG(e,t,n){return Math.max(e,Math.min(t,n))}function AG(e){return e%2===0?e:e+1}function OG(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function RG(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function $G(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";RG(MG(e,t),(()=>n+` Shapes ${e} and ${t} must match`))}function PG(e){RG(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function DG(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function MG(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function FG(e){return e%1===0}function LG(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function jG(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function zG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise(((i,o)=>{let a=0;const s=()=>{if(e())return void i();a++;const l=t(a);null!=n&&a>=n?o():null!=r?r(s,l):setTimeout(s,l)};s()}))}function BG(e,t){let n=1,r=-1;for(let o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${o}`);r=o}else if(e[o]<0)throw Error(`Shapes can not be < 0. Found ${e[o]} at dim ${o}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const i=e.slice();return i[r]=t/n,i}function WG(e,t){const n=t.length;return e=null==e?t.map(((e,t)=>t)):[].concat(e),RG(e.every((e=>e>=-n&&e<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`)),RG(e.every((e=>FG(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?n+e:e))}function UG(e,t){const n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||i?null:WG(t,e).sort();let a=0;for(let s=0;s<e.length;++s){if(null!=o){if(o[a]===s&&1!==e[s])throw new Error(`Can't squeeze axis ${s} since its dim '${e[s]}' is not 1`);(null==o[a]||o[a]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[a]<=s&&a++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function VG(e,t){return GG(e,t)}function GG(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function HG(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function qG(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function KG(e){return"string"===typeof e||e instanceof String}function XG(e){return"number"===typeof e}function YG(e){return Array.isArray(e)?YG(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":XG(e)?"float32":KG(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function QG(e){return!!(e&&e.constructor&&e.call&&e.apply)}function JG(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function ZG(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function eH(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Array;if(1===t.length){const o=t[0]*(r?2:1);for(let t=0;t<o;t++)i[t]=n[e+t]}else{const o=t[0],a=t.slice(1),s=a.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<o;t++)i[t]=eH(e+t*s,a,n,r)}return i}function tH(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return eH(0,e,t,n)}function nH(e,t){const n=rH(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function rH(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function iH(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return tH(e,new Float32Array(n));if("int32"===t)return tH(e,new Int32Array(n));if("bool"===t)return tH(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function oH(e){e.forEach((t=>{RG(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function aH(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=n[i]*e[i];return r}function sH(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(e/n[i]),e-=r[i]*n[i];return r[r.length-1]=e,r}function lH(e){return e&&e.then&&"function"===typeof e.then}const uH="tfjsflags";class cH{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=hH,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(dH().getBool("IS_TEST")||dH().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];dH().getBool("IS_TEST")||dH().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(lH(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(uH in e){e[uH].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:""+ +n===n?+n:t}(0,n)}))}}}function hH(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function dH(){return fH}let pH,fH=null;function gH(){if(null==pH){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}pH=e}return pH}function mH(e,t){const n=function(){const e=gH();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const yH="Abs",vH="Acos",bH="Acosh",xH="Add",wH="AddN",kH="All",SH="Any",CH="ArgMax",IH="ArgMin",EH="Asin",TH="Asinh",_H="Atan",NH="Atanh",AH="Atan2",OH="AvgPool",RH="AvgPoolGrad",$H="AvgPool3D",PH="AvgPool3DGrad",DH="BatchMatMul",MH="BatchToSpaceND",FH="Bincount",LH="BitwiseAnd",jH="BroadcastArgs",zH="Cast",BH="Ceil",WH="ClipByValue",UH="Complex",VH="ComplexAbs",GH="Concat",HH="Conv2D",qH="Conv2DBackpropFilter",KH="Conv2DBackpropInput",XH="Conv3D",YH="Conv3DBackpropFilterV2",QH="Conv3DBackpropInputV2",JH="Cos",ZH="Cosh",eq="Cumprod",tq="Cumsum",nq="CropAndResize",rq="DenseBincount",iq="DepthToSpace",oq="DepthwiseConv2dNative",aq="DepthwiseConv2dNativeBackpropFilter",sq="DepthwiseConv2dNativeBackpropInput",lq="Diag",uq="Dilation2D",cq="Dilation2DBackpropInput",hq="Dilation2DBackpropFilter",dq="Draw",pq="RealDiv",fq="Einsum",gq="Elu",mq="EluGrad",yq="Erf",vq="Equal",bq="Exp",xq="ExpandDims",wq="Expm1",kq="FFT",Sq="Fill",Cq="FlipLeftRight",Iq="Floor",Eq="FloorDiv",Tq="FusedBatchNorm",_q="GatherV2",Nq="GatherNd",Aq="Greater",Oq="GreaterEqual",Rq="Identity",$q="IFFT",Pq="Imag",Dq="IsFinite",Mq="IsInf",Fq="IsNan",Lq="LeakyRelu",jq="Less",zq="LessEqual",Bq="LinSpace",Wq="Log",Uq="Log1p",Vq="LogicalAnd",Gq="LogicalNot",Hq="LogicalOr",qq="LRN",Kq="LRNGrad",Xq="Max",Yq="Maximum",Qq="MaxPool",Jq="MaxPoolGrad",Zq="MaxPool3D",eK="MaxPool3DGrad",tK="MaxPoolWithArgmax",nK="Mean",rK="Min",iK="Minimum",oK="MirrorPad",aK="Mod",sK="Multinomial",lK="Multiply",uK="Neg",cK="NotEqual",hK="NonMaxSuppressionV3",dK="NonMaxSuppressionV4",pK="NonMaxSuppressionV5",fK="OnesLike",gK="OneHot",mK="Pack",yK="PadV2",vK="Pow",bK="Prelu",xK="Prod",wK="RaggedGather",kK="RaggedRange",SK="RaggedTensorToTensor",CK="Range",IK="Real",EK="Reciprocal",TK="Relu",_K="Reshape",NK="ResizeNearestNeighbor",AK="ResizeNearestNeighborGrad",OK="ResizeBilinear",RK="ResizeBilinearGrad",$K="Relu6",PK="Reverse",DK="Round",MK="Rsqrt",FK="ScatterNd",LK="TensorScatterUpdate",jK="SearchSorted",zK="Select",BK="Selu",WK="Slice",UK="Sin",VK="Sinh",GK="Sign",HK="Sigmoid",qK="Softplus",KK="Sqrt",XK="Sum",YK="SpaceToBatchND",QK="SplitV",JK="Softmax",ZK="SparseFillEmptyRows",eX="SparseReshape",tX="SparseSegmentMean",nX="SparseSegmentSum",rX="SparseToDense",iX="SquaredDifference",oX="Square",aX="StaticRegexReplace",sX="StridedSlice",lX="StringNGrams",uX="StringSplit",cX="StringToHashBucketFast",hX="Sub",dX="Tan",pX="Tanh",fX="Tile",gX="TopK",mX="Transform",yX="Transpose",vX="Unique",bX="Unpack",xX="UnsortedSegmentSum",wX="ZerosLike",kX="Step",SX="FromPixels",CX="RotateWithOffset",IX="_FusedMatMul",EX="FusedConv2D",TX="FusedDepthwiseConv2D";function _X(){dH().getBool("IS_TEST")||dH().getBool("PROD")||console.warn(...arguments)}function NX(){dH().getBool("IS_TEST")||dH().getBool("PROD")||console.log(...arguments)}const AX=mH("kernelRegistry",(()=>new Map)),OX=mH("gradRegistry",(()=>new Map));function RX(e,t){const n=FX(e,t);return AX.get(n)}function $X(e){return OX.get(e)}function PX(e){const t=AX.entries(),n=[];for(;;){const{done:r,value:i}=t.next();if(r)break;const[o,a]=i,[s]=o.split("_");s===e&&n.push(a)}return n}function DX(e){const{kernelName:t,backendName:n}=e,r=FX(t,n);AX.has(r)&&_X(`The kernel '${t}' for backend '${n}' is already registered`),AX.set(r,e)}function MX(e){const{kernelName:t}=e;OX.has(t)&&dH().getBool("DEBUG")&&_X(`Overriding the gradient for '${t}'`),OX.set(t,e)}function FX(e,t){return`${t}_${e}`}function LX(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var jX=n(8818);const zX=n.n(jX)()||jX;function BX(e){return zX.fromString(e,!0,16)}const WX=BX("c3a5c85c97cb3127"),UX=BX("b492b66fbe98f273"),VX=BX("9ae16a3b2f90404f");function GX(e){return e.xor(e.shru(47))}function HX(e,t,n){const r=e.slice(t,t+n);return zX.fromBytes(Array.from(r),!0,!0)}function qX(e,t){return HX(e,t,8)}function KX(e,t){return HX(e,t,4)}function XX(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function YX(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:BX("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));let i=t.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function QX(e,t,n,r){return function(e,t,n,r,i,o){i=i.add(e),o=XX(o.add(i).add(r),21);const a=i;return i=(i=i.add(t)).add(n),o=o.add(XX(i,44)),[i.add(r),o.add(a)]}(qX(e,t),qX(e,t+8),qX(e,t+16),qX(e,t+24),n,r)}function JX(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=zX.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=VX.add(2*t),r=qX(e,0).add(VX),i=qX(e,t-8);return YX(XX(i,37).mul(n).add(r),XX(r,25).add(i).mul(n),n)}if(t>=4){const n=VX.add(2*t);return YX(KX(e,0).shl(3).add(t),KX(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return GX(VX.mul(n).xor(WX.mul(r))).mul(VX)}return VX}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=VX.add(2*t),r=qX(e,0).mul(UX),i=qX(e,8),o=qX(e,t-8).mul(n),a=qX(e,t-16).mul(VX);return YX(XX(r.add(i),43).add(XX(o,30)).add(a),r.add(XX(i.add(VX),18)).add(o),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=VX.add(2*t),r=qX(e,0).mul(VX),i=qX(e,8),o=qX(e,t-8).mul(n),a=qX(e,t-16).mul(VX),s=XX(r.add(i),43).add(XX(o,30)).add(a),l=YX(s,r.add(XX(i.add(VX),18)).add(o),n),u=qX(e,16).mul(n),c=qX(e,24),h=s.add(qX(e,t-32)).mul(n),d=l.add(qX(e,t-24)).mul(n);return YX(XX(u.add(c),43).add(XX(h,30)).add(d),u.add(XX(c.add(r),18)).add(h),n)}(e,t);let r=n,i=n.mul(UX).add(113),o=GX(i.mul(VX).add(113)).mul(VX),a=[zX.UZERO,zX.UZERO],s=[zX.UZERO,zX.UZERO];r=r.mul(VX).add(qX(e,0));let l=0;const u=64*(t-1>>6),c=u+(t-1&63)-63;do{r=XX(r.add(i).add(a[0]).add(qX(e,l+8)),37).mul(UX),i=XX(i.add(a[1]).add(qX(e,l+48)),42).mul(UX),r=r.xor(s[1]),i=i.add(a[0]).add(qX(e,l+40)),o=XX(o.add(s[0]),33).mul(UX),a=QX(e,l,a[1].mul(UX),r.add(s[0])),s=QX(e,l+32,o.add(s[1]),i.add(qX(e,l+16))),[o,r]=[r,o],l+=64}while(l!==u);const h=UX.add(o.and(255).shl(1));return l=c,s[0]=s[0].add(t-1&63),a[0]=a[0].add(s[0]),s[0]=s[0].add(a[0]),r=XX(r.add(i).add(a[0]).add(qX(e,l+8)),37).mul(h),i=XX(i.add(a[1]).add(qX(e,l+48)),42).mul(h),r=r.xor(s[1].mul(9)),i=i.add(a[0].mul(9).add(qX(e,l+40))),o=XX(o.add(s[0]),33).mul(h),a=QX(e,l,a[1].mul(h),r.add(s[0])),s=QX(e,l+32,o.add(s[1]),i.add(qX(e,l+16))),[o,r]=[r,o],YX(YX(a[0],s[0],h).add(GX(i).mul(WX)).add(o),YX(a[1],s[1],h).add(r),h)}function ZX(e,t){return"string"===t?nY(e):eY([e],t)}function eY(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=oY(e)),dH().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function tY(){return dH().platform.now()}function nY(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",dH().platform.encode(e,t)}function rY(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",dH().platform.decode(e,t)}function iY(e){return null!=dH().platform.isTypedArray?dH().platform.isTypedArray(e):LX(e)}function oY(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||lH(e)||null==e||iY(e)&&n)t.push(e);else if(Array.isArray(e)||iY(e))for(let r=0;r<e.length;++r)oY(e[r],t,n);else{let r=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let i=0;i<=r;i++)oY(e[i],t,n)}return t}class aY{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new lY)}profileKernel(e,t,n){let r;const i=()=>{r=n()};let o;const a=tY();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const e of r)e.dataSync();o=Promise.resolve({kernelMs:tY()-a})}if(dH().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let s=0;s<r.length;s++){const t=r[s];t.data().then((n=>{sY(n,t.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:o.then((e=>e.kernelMs)),extraInfo:o.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:i,extraInfo:o}=e;n.forEach((e=>{Promise.all([e.data(),r,o]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],i,n[2])}))}))}}function sY(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${n}'`),!0}return!1}class lY{logKernelProfile(e,t,n,r,i,o){const a="number"===typeof r?jG(`${r}ms`,9):r.error,s=jG(e,25),l=t.rank,u=t.size,c=jG(t.shape.toString(),14);let h="";for(const d in i){const e=i[d];if(null!=e){const n=e.shape||t.shape,r=n.length;h+=`${d}: ${r}D ${r>0?n:""} `}}console.log(`%c${s}\t%c${a}\t%c${l}D ${c}\t%c${u}\t%c${h}\t%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function uY(e,t,n,r){const i=ZG(t),o=function(e,t,n,r){const i=DG(t),o=r[r.length-1],a=new Array(o).fill(0),s=t.length,l="complex64"===n?pY(e):e;if(s>1)for(let u=0;u<i/o;u++){const e=u*o;for(let t=0;t<o;t++)a[t]=Math.max(a[t],cY(l[e+t],0,n).length)}return a}(e,t,n,i),a=t.length,s=dY(e,t,n,i,o),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${a}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(s.map((e=>"    "+e)).join("\n")),l.join("\n")}function cY(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:KG(e)?`'${e}'`:"bool"===n?hY(e):parseFloat(e.toFixed(7)).toString(),jG(r,t)}function hY(e){return 0===e?"false":"true"}function dY(e,t,n,r,i){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const a="complex64"===n?2:1,s=t[0],l=t.length;if(0===l){if("complex64"===n){return[cY(pY(e)[0],0,n)]}return"bool"===n?[hY(e[0])]:[e[0].toString()]}if(1===l){if(s>20){const t=3*a;let r=Array.from(e.slice(0,t)),o=Array.from(e.slice((s-3)*a,s*a));return"complex64"===n&&(r=pY(r),o=pY(o)),["["+r.map(((e,t)=>cY(e,i[t],n))).join(", ")+", ..., "+o.map(((e,t)=>cY(e,i[s-3+t],n))).join(", ")+"]"]}return["["+("complex64"===n?pY(e):Array.from(e)).map(((e,t)=>cY(e,i[t],n))).join(", ")+"]"]}const u=t.slice(1),c=r.slice(1),h=r[0]*a,d=[];if(s>20){for(let t=0;t<3;t++){const r=t*h,o=r+h;d.push(...dY(e.slice(r,o),u,n,c,i,!1))}d.push("...");for(let t=s-3;t<s;t++){const r=t*h,o=r+h;d.push(...dY(e.slice(r,o),u,n,c,i,t===s-1))}}else for(let g=0;g<s;g++){const t=g*h,r=t+h;d.push(...dY(e.slice(t,r),u,n,c,i,g===s-1))}const p=2===l?",":"";d[0]="["+(s>0?d[0]+p:"");for(let g=1;g<d.length-1;g++)d[g]=" "+d[g]+p;let f=",\n";for(let g=2;g<l;g++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(o?"":f),d}function pY(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class fY{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=DG(e),null!=n){const e=n.length;RG(e===this.size,(()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||GG(t,this.size),this.strides=ZG(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),RG(n.length===this.rank,(()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`));const i=this.locToIndex(n);this.values[i]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let r=0;for(const o of t){if(o<0||o>=this.shape[r]){const e=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(e)}r++}let i=t[t.length-1];for(let o=0;o<t.length-1;++o)i+=this.strides[o]*t[o];return this.values[i]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return gY().makeTensor(this.values,this.shape,this.dtype)}}let gY=null,mY=null,yY=null;class vY{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=DG(e),this.strides=ZG(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return mY.buffer(this.shape,this.dtype,e)}bufferSync(){return mY.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return tH(this.shape,e,"complex64"===this.dtype)}arraySync(){return tH(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=gY().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map((e=>rY(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),gY().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=gY().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>rY(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await gY().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),gY().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return mY.print(this,e)}clone(){return this.throwIfDisposed(),mY.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return uY(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),mY.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),gY().makeVariable(this,e,t,n)}}function bY(){return mH("Tensor",(()=>vY))}Object.defineProperty(vY,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),bY();class xY extends vY{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!MG(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);gY().disposeTensor(this),this.dataId=e.dataId,gY().incRef(this,null)}dispose(){gY().disposeVariable(this),this.isDisposedInternal=!0}}var wY,kY,SY,CY,IY;Object.defineProperty(xY,Symbol.hasInstance,{value:e=>e instanceof vY&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(wY||(wY={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(kY||(kY={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(SY||(SY={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(CY||(CY={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(IY||(IY={}));const EY={float32:CY,int32:kY,bool:SY,complex64:IY};function TY(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return EY[e][t]}function _Y(e){return TY(e,"int32")}function NY(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function AY(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function OY(e,t){if(e.dtype===t.dtype)return[e,t];const n=TY(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function RY(e,t){return t.some((t=>t.id===e.id))}function $Y(e){const t=[];return PY(e,t,new Set),t}function PY(e,t,n){if(null==e)return;if(e instanceof vY)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!==typeof r)return;var r;const i=e;for(const o in i){const e=i[o];n.has(e)||(n.add(e),PY(e,t,n))}}function DY(e){return null!=e.kernelName}class MY{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class FY{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new MY}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(_X(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new aY(this.backendInstance),!0}setupRegisteredKernels(){PX(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){PX(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof EG||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,_X(`Initialization of backend ${e} failed`),_X(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return _X(`Initialization of backend ${e} failed`),_X(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,i=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,i,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return FY.nextTensorId++}nextVariableId(){return FY.nextVariableId++}clone(e){const t=jY.runKernel(Rq,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return jY.runKernel(zH,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=RX(e,this.backendName)))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let i=0;n.forEach((e=>{i+="complex64"===e.dtype?3:1}));const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-t-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;let a,s;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=DY(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(DY(e)){const{kernelName:t,inputs:i,attrs:o}=e;null==this.backendName&&this.backend;const l=RX(t,this.backendName);RG(null!=l,(()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`)),a=()=>{const e=this.backend.numDataIds();s=l.kernelFunc({inputs:i,attrs:o,backend:this.backend});const a=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,a);const u=a.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(r){const e=this.getTensorsForGradient(t,i,u);n=this.saveTensorsForBackwardMode(e)}return u}}else{const{forwardFunc:t}=e,i=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};a=()=>{const e=this.backend.numDataIds();s=this.tidy((()=>t(this.backend,i)));const n=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:u,attrs:c}=e,h=DY(e)?null:e.backwardsFunc;let d;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(l,u,(()=>a())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs):t=a()})),r&&this.addTapeNode(l,u,t,h,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map((e=>null!=u[e]?u[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(s)?t:t[0]}saveTensorsForBackwardMode(e){return e.map((e=>this.keep(this.clone(e))))}getTensorsForGradient(e,t,n){const r=$X(e);if(null!=r){const e=r.inputsToSave||[],i=r.outputsToSave||[];let o;r.saveAllInputs?(RG(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),o=Object.keys(t).map((e=>t[e]))):o=e.map((e=>t[e]));const a=n.filter(((e,t)=>i[t]));return o.concat(a)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let i=e;"string"===n&&KG(e[0])&&(i=e.map((e=>nY(e))));const o=r.write(i,t,n),a=new vY(t,n,o,this.nextTensorId());if(this.trackTensor(a,r),"string"===n){const e=this.state.tensorInfo.get(o),t=function(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}(i);this.state.numBytes+=t-e.bytes,e.bytes=t}return a}makeTensorFromDataId(e,t,n,r){const i={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(i,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:i}=e,o=new vY(r,i,n,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const i=new xY(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*qG(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof xY||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*qG(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},s=$X(e);null!=s&&(r=s.gradFunc),null!=r&&(a.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=rH(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=$Y(e),n=new Set(t.map((e=>e.id)));for(let i=0;i<this.state.activeScope.track.length;i++){const e=this.state.activeScope.track[i];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(RG(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const i=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));RG(i instanceof vY,(()=>"The result y returned by f() must be a tensor."));const o=function(e,t,n){const r={},i={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const n=e[l],o=n.inputs;for(const e in o){const a=o[e];let s=!1;for(let e=0;e<t.length;e++)if(r[a.id]){n.outputs.forEach((e=>r[e.id]=!0)),s=!0,i[n.id]=!0;break}if(s)break}}const o={};o[n.id]=!0;const a={};for(let l=e.length-1;l>=0;l--){const t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(o[t.outputs[e].id]){for(const e in n)o[n[e].id]=!0,a[t.id]=!0;break}}const s=[];for(let l=0;l<e.length;l++){const t=e[l];if(i[t.id]&&a[t.id]){const e={};for(const i in t.inputs){const n=t.inputs[i];r[n.id]&&(e[i]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,s.push(n)}}return s}(this.state.activeTape,t,i);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[i.id]=null==n?function(e){const t=nH(DG(e),"float32");return jY.makeTensor(t,e,"float32")}(i.shape):n,function(e,t,n,r){for(let i=t.length-1;i>=0;i--){const o=t[i],a=[];if(o.outputs.forEach((t=>{const n=e[t.id];null!=n?a.push(n):a.push(null)})),null==o.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const s=o.gradient(a);for(const t in o.inputs){if(!(t in s))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(s)}.`);const i=n((()=>s[t]()));if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${i.dtype}'`);const a=o.inputs[t];if(!MG(i.shape,a.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${t}' has shape '${i.shape}', which does not match the shape of the input '${a.shape}'`);if(null==e[a.id])e[a.id]=i;else{const t=e[a.id];e[a.id]=r(t,i),t.dispose()}}}}(e,o,(e=>this.tidy(e)),zY);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:i,grads:r}}))}customGrad(e){var t=this;return RG(QG(e),(()=>"The f passed in customGrad(f) must be a function.")),function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];let o;RG(r.every((e=>e instanceof vY)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const a={};r.forEach(((e,t)=>{a[t]=e}));return t.runKernelFunc({forwardFunc:(t,n)=>(o=e(...r,n),RG(o.value instanceof vY,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),RG(QG(o.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),o.value),backwardsFunc:(e,t)=>{const n=o.gradFunc(e,t),i=Array.isArray(n)?n:[n];RG(i.length===r.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),RG(i.every((e=>e instanceof vY)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const a={};return i.forEach(((e,t)=>{a[t]=()=>e})),a},inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=tY(),n=await this.backend.time(e);return n.wallMs=tY()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new MY;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function LY(){const e=gH();if(null==e._tfengine){const t=new cH(e);e._tfengine=new FY(t)}var t;return t=e._tfengine.ENV,fH=t,gY=()=>e._tfengine,e._tfengine}FY.nextTensorId=0,FY.nextVariableId=0;const jY=LY();function zY(e,t){const n={a:e,b:t};return jY.runKernel(xH,n)}let BY;function WY(e){if(void 0!==BY)return BY;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function UY(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const VY=dH();function GY(e,t){let n=e;if(iY(e))return"string"===t?[]:[e.length];if(NY(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(AY(e))return[e.buffer.size/(null==t?4:qG(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||iY(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&dH().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&HY(e,r,[]),r}function HY(e,t,n){if(n=n||[],!Array.isArray(e)&&!iY(e))return void RG(0===t.length,(()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));RG(t.length>0,(()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),RG(e.length===t[0],(()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const r=t.slice(1);for(let i=0;i<e.length;++i)HY(e[i],r,n.concat(i))}function qY(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function KY(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof bY())return qY(r,e.dtype,t,n),e;let i=YG(e);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),qY(r,i,t,n),null==e||!iY(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const o=GY(e,i);iY(e)||Array.isArray(e)||(e=[e]);const a="string"!==i?eY(e,i):oY(e,[],!0);return jY.makeTensor(a,o,i)}function XY(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map(((e,i)=>KY(e,`${t}[${i}]`,n,r)))}VY.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),VY.registerFlag("IS_BROWSER",(()=>UY())),VY.registerFlag("IS_NODE",(()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node)),VY.registerFlag("IS_CHROME",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),VY.registerFlag("IS_SAFARI",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor))),VY.registerFlag("PROD",(()=>!1)),VY.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>VY.getBool("DEBUG"))),VY.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),VY.registerFlag("IS_TEST",(()=>!1)),VY.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>VY.getBool("DEBUG"))),VY.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),VY.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),VY.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));function YY(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";const i=function(){jY.startScope(n);try{const e=r(...arguments);return lH(e)&&console.error("Cannot return a Promise inside of tidy."),jY.endScope(e),e}catch(e){throw jY.endScope(null),e}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}const QY=YY({complex_:function(e,t){const n=KY(e,"real","complex"),r=KY(t,"imag","complex");$G(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return jY.runKernel(UH,i)}});function JY(e,t,n,r){if(null==r)r=YG(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(AY(e)||NY(e)){if("float32"!==r&&"int32"!==r)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return jY.backend.createTensorFromGPUData(e,t||n,r)}if(!iY(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){oH(t);const e=DG(t),r=DG(n);RG(e===r,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`));for(let i=0;i<n.length;++i){const e=n[i],r=i!==n.length-1||e!==DG(t.slice(i));RG(n[i]===t[i]||!r,(()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `))}}return iY(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?eY(e,r):oY(e,[],!0),jY.makeTensor(e,t,r)}function ZY(e,t,n){return JY(e,t,GY(e,n),n)}const eQ={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class tQ{static join(e){return new tQ(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map((e=>iY(e)?e.buffer:e))).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=t+r.byteLength;this.shards.push({buffer:r,start:t,end:i}),t=i}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error(`Could not find start shard for byte ${e}`);const r=new ArrayBuffer(t-e),i=new Uint8Array(r);let o=0;for(let a=n;a<this.shards.length;a++){const n=this.shards[a],r=e+o-n.start,s=o,l=Math.min(t,n.end)-n.start,u=new Uint8Array(n.buffer,r,l-r);if(i.set(u,s),o+=u.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,r=e.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,o=t(e[i]);if(0===o)return i;o<0?r=i:n=i+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function nQ(){return jY}function rQ(){return jY.memory()}function iQ(e,t){return jY.tidy(e,t)}function oQ(e){$Y(e).forEach((e=>e.dispose()))}function aQ(e){return jY.keep(e)}function sQ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return jY.registerBackend(e,t,n)}function lQ(){return jY.backend}yY=function(e){dH().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")};async function uQ(e,t){const n=[],r=[],i=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let o=0;o<i.length;++o){const a=i[o],s=Array.isArray(e)?e[o].tensor:e[a];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error(`Unsupported dtype in weight '${a}': ${s.dtype}`);const l={name:a,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise((async e=>{const t=await s.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+4*t.length,r=new Uint8Array(n);let i=0;for(let o=0;o<t.length;o++){const e=t[o],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,i),i+=4,r.set(e,i),i+=e.length}e(r)}));r.push(e)}else r.push(s.data());null!=t&&(l.group=t),n.push(l)}return{data:pQ(await Promise.all(r)),specs:n}}function cQ(e,t){const n=new tQ(e),r={};let i=0;for(const o of t){const e=hQ(o,((e,t)=>n.slice(i+e,i+t)));r[o.name]=dQ(o,n.slice(i,i+e)),i+=e}return r}function hQ(e,t){const n=DG(e.shape);let r;if("quantization"in e){const t=e.quantization;r=eQ[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=4+new Uint32Array(t(e,e+4))[0];return e}r=eQ[e.dtype]}return n*r}function dQ(e,t){const n=e.name,r=e.dtype,i=e.shape,o=DG(i);let a,s=0;if("quantization"in e){const i=e.quantization;if("uint8"===i.dtype||"uint16"===i.dtype){if(!("min"in i)||!("scale"in i))throw new Error(`Weight ${e.name} with quantization ${i.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==i.dtype)throw new Error(`Weight ${e.name} has unknown quantization dtype ${i.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==r)throw new Error(`Weight ${e.name} is quantized with ${i.dtype} which only supports weights of type float32 not ${r}.`)}const l=eQ[i.dtype],u="uint8"===i.dtype?new Uint8Array(t):new Uint16Array(t);if("float32"===r)if("uint8"===i.dtype||"uint16"===i.dtype){a=new Float32Array(u.length);for(let e=0;e<u.length;e++){const t=u[e];a[e]=t*i.scale+i.min}}else{if("float16"!==i.dtype)throw new Error(`Unsupported quantization type ${i.dtype} for weight type float32.`);{const e=function(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0===(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const i=new ArrayBuffer(4*r.length),o=new Uint32Array(i);for(let a=0;a<r.length;a++){const i=r[a],s=e[n[i>>10]+(1023&i)]+t[i>>10];o[a]=s}return new Float32Array(i)}}();a=e(u)}}else{if("int32"!==r)throw new Error(`Unsupported dtype in weight '${n}': ${r}`);if("uint8"!==i.dtype&&"uint16"!==i.dtype)throw new Error(`Unsupported quantization type ${i.dtype} for weight type int32.`);a=new Int32Array(u.length);for(let e=0;e<u.length;e++){const t=u[e];a[e]=Math.round(t*i.scale+i.min)}}s+=o*l}else if("string"===r){const n=DG(e.shape);a=[];for(let e=0;e<n;e++){const e=new Uint32Array(t.slice(s,s+4))[0];s+=4;const n=new Uint8Array(t.slice(s,s+e));a.push(n),s+=e}}else{const e=eQ[r];if("float32"===r)a=new Float32Array(t);else if("int32"===r)a=new Int32Array(t);else{if("bool"!==r){if("complex64"===r){a=new Float32Array(t);const e=new Float32Array(a.length/2),n=new Float32Array(a.length/2);for(let t=0;t<e.length;t++)e[t]=a[2*t],n[t]=a[2*t+1];const r=ZY(e,i,"float32"),o=ZY(n,i,"float32"),s=QY(r,o);return r.dispose(),o.dispose(),s}throw new Error(`Unsupported dtype in weight '${n}': ${r}`)}a=new Uint8Array(t)}s+=o*e}return ZY(a,i,r)}function pQ(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const r=new Uint8Array(t);let i=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),i),i+=e.byteLength})),r.buffer}const fQ="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function gQ(e){return fQ?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function mQ(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function yQ(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),function(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}(e,n,r)}function vQ(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:gQ(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:gQ(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new tQ(e.weightData).byteLength}}function bQ(e){const t=[];for(const n of e)t.push(...n.weights);return t}class xQ{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==xQ.instance&&(xQ.instance=new xQ),xQ.instance}static registerSaveRouter(e){xQ.getInstance().saveRouters.push(e)}static registerLoadRouter(e){xQ.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return xQ.getHandlers(e,"save")}static getLoadHandlers(e,t){return xQ.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?xQ.getInstance().loadRouters:xQ.getInstance().saveRouters).forEach((t=>{const i=t(e,n);null!==i&&r.push(i)})),r}}const wQ="tensorflowjs",kQ="models_store",SQ="model_info_store";function CQ(){if(!dH().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function IQ(e){const t=e.result;t.createObjectStore(kQ,{keyPath:"modelPath"}),t.createObjectStore(SQ,{keyPath:"modelPath"})}class EQ{constructor(e){if(this.indexedDB=CQ(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(wQ,1);r.onupgradeneeded=()=>IQ(r),r.onsuccess=()=>{const i=r.result;if(null==t){const t=i.transaction(kQ,"readonly"),r=t.objectStore(kQ).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(i.close(),n(r.error)),t.oncomplete=()=>i.close()}else{t.weightData=tQ.join(t.weightData);const r=vQ(t),o=i.transaction(SQ,"readwrite");let a,s,l=o.objectStore(SQ);try{a=l.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(bI){return n(bI)}a.onsuccess=()=>{s=i.transaction(kQ,"readwrite");const a=s.objectStore(kQ);let u;try{u=a.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r})}catch(bI){return n(bI)}u.onsuccess=()=>e({modelArtifactsInfo:r}),u.onerror=e=>{l=o.objectStore(SQ);const t=l.delete(this.modelPath);t.onsuccess=()=>(i.close(),n(u.error)),t.onerror=e=>(i.close(),n(u.error))}},a.onerror=e=>(i.close(),n(a.error)),o.oncomplete=()=>{null==s?i.close():s.oncomplete=()=>i.close()}}},r.onerror=e=>n(r.error)}))}}EQ.URL_SCHEME="indexeddb://";const TQ=e=>{return dH().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(EQ.URL_SCHEME)?(t=e.slice(EQ.URL_SCHEME.length),new EQ(t)):null;var t};xQ.registerSaveRouter(TQ),xQ.registerLoadRouter(TQ);class _Q{constructor(){this.indexedDB=CQ()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(wQ,1);n.onupgradeneeded=()=>IQ(n),n.onsuccess=()=>{const r=n.result,i=r.transaction(SQ,"readonly"),o=i.objectStore(SQ).getAll();o.onsuccess=()=>{const t={};for(const e of o.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},o.onerror=e=>(r.close(),t(o.error)),i.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(EQ.URL_SCHEME)?t.slice(EQ.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(wQ,1);r.onupgradeneeded=()=>IQ(r),r.onsuccess=()=>{const i=r.result,o=i.transaction(SQ,"readwrite"),a=o.objectStore(SQ),s=a.get(e);let l;s.onsuccess=()=>{if(null==s.result)return i.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=a.delete(e),o=()=>{l=i.transaction(kQ,"readwrite");const r=l.objectStore(kQ).delete(e);r.onsuccess=()=>t(s.result.modelArtifactsInfo),r.onerror=e=>n(s.error)};r.onsuccess=o,r.onerror=e=>(o(),i.close(),n(s.error))}},s.onerror=e=>(i.close(),n(s.error)),o.oncomplete=()=>{null==l?i.close():l.oncomplete=()=>i.close()}},r.onerror=e=>n(r.error)}))}}const NQ="/",AQ="tensorflowjs_models",OQ="info",RQ="model_topology",$Q="weight_specs",PQ="weight_data",DQ="model_metadata";function MQ(e){return{info:[AQ,e,OQ].join(NQ),topology:[AQ,e,RQ].join(NQ),weightSpecs:[AQ,e,$Q].join(NQ),weightData:[AQ,e,PQ].join(NQ),modelMetadata:[AQ,e,DQ].join(NQ)}}function FQ(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function LQ(e){const t=e.split(NQ);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(NQ)}class jQ{constructor(e){if(!dH().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=MQ(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=vQ(e),o=tQ.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(fQ)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,i=t.length;r<i;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(o));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:i}}catch(t){throw FQ(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const e=JSON.parse(i);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(fQ){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(o),t}}jQ.URL_SCHEME="localstorage://";const zQ=e=>{return dH().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(jQ.URL_SCHEME)?(t=e.slice(jQ.URL_SCHEME.length),new jQ(t)):null;var t};xQ.registerSaveRouter(zQ),xQ.registerLoadRouter(zQ);class BQ{constructor(){RG(dH().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),RG("undefined"===typeof window||"undefined"!==typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=AQ+NQ,n=NQ+OQ;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);if(i.startsWith(t)&&i.endsWith(n)){e[LQ(i)]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){var t;const n=MQ(e=(t=e).startsWith(jQ.URL_SCHEME)?t.slice(jQ.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return FQ(n),r}}const WQ="://";class UQ{constructor(){this.managers={}}static getInstance(){return null==UQ.instance&&(UQ.instance=new UQ),UQ.instance}static registerManager(e,t){RG(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(WQ)&&(e=e.slice(0,e.indexOf(WQ))),RG(e.length>0,(()=>"scheme must not be an empty string."));const n=UQ.getInstance();RG(null==n.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),n.managers[e]=t}static getManager(e){const t=UQ.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(UQ.getInstance().managers)}}class VQ{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&dH().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}}),!0))):setTimeout(e,t)}isTypedArray(e){return LX(e)}}if(dH().get("IS_BROWSER")){dH().setPlatform("browser",new VQ);try{UQ.registerManager(jQ.URL_SCHEME,new BQ)}catch(Yve){}try{UQ.registerManager(EQ.URL_SCHEME,new _Q)}catch(Yve){}}const GQ=()=>n(5817);let HQ;class qQ{constructor(){this.util=n(8590),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=dH().global.fetch?dH().global.fetch(e,t):(null==HQ&&(HQ=GQ()),HQ(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function KQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",oH(e),new fY(e,t,n)}dH().get("IS_NODE")&&!dH().get("IS_BROWSER")&&dH().setPlatform("node",new qQ);const XQ=YY({cast_:function(e,t){const n=KY(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:t};return jY.runKernel(zH,r,i)}});const YQ=YY({clone_:function(e){const t={x:KY(e,"x","clone","string_or_numeric")};return jY.runKernel(Rq,t)}});LY();const QQ={buffer:KQ,cast:XQ,clone:YQ,print:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};mY=QQ;const JQ=YY({add_:function(e,t){let n=KY(e,"a","add"),r=KY(t,"b","add");[n,r]=OY(n,r);const i={a:n,b:r};return jY.runKernel(xH,i)}});const ZQ=YY({floorDiv_:function(e,t){let n=KY(e,"a","floorDiv"),r=KY(t,"b","floorDiv");[n,r]=OY(n,r);const i={a:n,b:r};return jY.runKernel(Eq,i)}});const eJ=YY({div_:function(e,t){let n=KY(e,"a","div"),r=KY(t,"b","div");if([n,r]=OY(n,r),"int32"===n.dtype&&"int32"===r.dtype)return ZQ(n,r);const i={a:n,b:r};return jY.runKernel(pq,i,{})}});const tJ=YY({mul_:function(e,t){let n=KY(e,"a","mul"),r=KY(t,"b","mul");[n,r]=OY(n,r);const i={a:n,b:r};return jY.runKernel(lK,i)}});const nJ=YY({sqrt_:function(e){const t={x:KY(e,"x","sqrt","float32")};return jY.runKernel(KK,t)}});const rJ=YY({square_:function(e){const t=KY(e,"x","square");return jY.runKernel("Square",{x:t},{})}});const iJ=YY({zerosLike_:function(e){const t={x:KY(e,"x","zerosLike")};return jY.runKernel(wX,t)}});function oJ(e){return jY.customGrad(e)}function aJ(e,t){if((iY(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&iY(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return JY(e,[],[],t)}const sJ=new Map,lJ=new Map;class uJ{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class cJ{constructor(){this.classNameMap={}}static getMap(){return null==cJ.instance&&(cJ.instance=new cJ),cJ.instance}static register(e){cJ.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function hJ(e,t,n){RG(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),RG("string"===typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),RG(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const r=t+">"+n;return cJ.register(e),sJ.set(r,e),lJ.set(e,r),e}class dJ extends uJ{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:r,grads:i}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:i[e.name]})));this.applyGradients(e)}else this.applyGradients(i);return oQ(i),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){RG(QG(e),(()=>"The f passed in variableGrads(f) must be a function")),RG(null==t||Array.isArray(t)&&t.every((e=>e instanceof xY)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in jY.registeredVariables)t.push(jY.registeredVariables[e])}const r=n?t.filter((e=>!e.trainable)):null,i=t.length;t=t.filter((e=>e.trainable)),RG(t.length>0,(()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`));const{value:o,grads:a}=jY.gradients(e,t,null,!0);RG(a.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),RG(0===o.rank,(()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`));const s={};return t.forEach(((e,t)=>{null!=a[t]&&(s[e.name]=a[t])})),null!=r&&r.forEach((e=>s[e.name]=null)),{value:o,grads:s}}(e,t)}dispose(){null!=this.iterations_&&oQ(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:aJ(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(dJ,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class pJ extends dJ{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=jY.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=jY.registeredVariables[t],i=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:iQ((()=>iJ(r).variable(i)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:iQ((()=>iJ(r).variable(i)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const a=this.accumulatedGrads[n].variable,s=this.accumulatedUpdates[n].variable;iQ((()=>{const e=JQ(tJ(a,this.rho),tJ(rJ(o),1-this.rho)),t=tJ(eJ(nJ(JQ(s,this.epsilon)),nJ(JQ(a,this.epsilon))),o),n=JQ(tJ(s,this.rho),tJ(rJ(t),1-this.rho));a.assign(e),s.assign(n);const i=JQ(tJ(t,-this.learningRate),r);r.assign(i)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(oQ(this.accumulatedGrads.map((e=>e.variable))),oQ(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function fJ(e,t,n){oH(e);const r={shape:e,value:t,dtype:n=n||YG(t)};return jY.runKernel(Sq,{},r)}class gJ extends dJ{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=jY.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:iQ((()=>fJ(r.shape,this.initialAccumulatorValue).variable(e)))}}const i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;const o=this.accumulatedGrads[n].variable;iQ((()=>{const e=JQ(o,rJ(i));o.assign(e);const t=JQ(tJ(eJ(i,nJ(JQ(e,jY.backend.epsilon()))),-this.learningRate),r);r.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&oQ(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}const mJ=YY({pow_:function(e,t){let n=KY(e,"base","pow"),r=KY(t,"exp","pow");[n,r]=OY(n,r);const i={a:n,b:r};return jY.runKernel(vK,i)}});const yJ=YY({sub_:function(e,t){let n=KY(e,"a","sub"),r=KY(t,"b","sub");[n,r]=OY(n,r);const i={a:n,b:r};return jY.runKernel(hX,i)}});class vJ extends dJ{static get className(){return"Adam"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],iQ((()=>{this.accBeta1=aJ(t).variable(),this.accBeta2=aJ(n).variable()})),null==r&&(this.epsilon=jY.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);iQ((()=>{const n=yJ(1,this.accBeta1),r=yJ(1,this.accBeta2);t.forEach(((t,i)=>{const o=jY.registeredVariables[t],a=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${t}/m`,variable:iQ((()=>iJ(o).variable(a)))}),null==this.accumulatedSecondMoment[i]&&(this.accumulatedSecondMoment[i]={originalName:`${t}/v`,variable:iQ((()=>iJ(o).variable(a)))});const s=Array.isArray(e)?e[i].tensor:e[t];if(null==s)return;const l=this.accumulatedFirstMoment[i].variable,u=this.accumulatedSecondMoment[i].variable,c=JQ(tJ(l,this.beta1),tJ(s,1-this.beta1)),h=JQ(tJ(u,this.beta2),tJ(rJ(s),1-this.beta2)),d=eJ(c,n),p=eJ(h,r);l.assign(c),u.assign(h);const f=JQ(tJ(eJ(d,JQ(nJ(p),this.epsilon)),-this.learningRate),o);o.assign(f)})),this.accBeta1.assign(tJ(this.accBeta1,this.beta1)),this.accBeta2.assign(tJ(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&oQ(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&oQ(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),iQ((()=>{this.accBeta1.assign(mJ(this.beta1,this.iterations_+1)),this.accBeta2.assign(mJ(this.beta2,this.iterations_+1))}));const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}const bJ=YY({abs_:function(e){const t=KY(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return jY.runKernel(VH,e)}{const e={x:t};return jY.runKernel(yH,e)}}});function xJ(e,t){const n=e.length,r=[];for(let i=0;i<n;i++){const o=n-1-i,a=e[o]||1;(t[t.length-1-i]||1)>1&&1===a&&r.unshift(o)}return r}function wJ(e,t){const n=[];for(let r=0;r<t.length;r++){const i=e[e.length-r-1],o=t.length-r-1,a=t[o];(null==i||1===i&&a>1)&&n.unshift(o)}return n}function kJ(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let i=0;i<n;i++){let o=e[e.length-i-1];null==o&&(o=1);let a=t[t.length-i-1];if(null==a&&(a=1),1===o)r[n-i-1]=a;else if(1===a)r[n-i-1]=o;else{if(o!==a){throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`)}r[n-i-1]=o}}return r}const SJ=YY({maximum_:function(e,t){let n=KY(e,"a","maximum"),r=KY(t,"b","maximum");[n,r]=OY(n,r),"bool"===n.dtype&&(n=XQ(n,"int32"),r=XQ(r,"int32")),kJ(n.shape,r.shape);const i={a:n,b:r};return jY.runKernel(Yq,i)}});class CJ extends dJ{static get className(){return"Adamax"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],iQ((()=>{this.iteration=aJ(0).variable(),this.accBeta1=aJ(t).variable()})),null==r&&(this.epsilon=jY.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);iQ((()=>{const n=yJ(1,this.accBeta1),r=eJ(-this.learningRate,JQ(tJ(this.iteration,this.decay),1));t.forEach(((t,i)=>{const o=jY.registeredVariables[t],a=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${t}/m`,variable:iJ(o).variable(a)}),null==this.accumulatedWeightedInfNorm[i]&&(this.accumulatedWeightedInfNorm[i]={originalName:`${t}/v`,variable:iJ(o).variable(a)});const s=Array.isArray(e)?e[i].tensor:e[t];if(null==s)return;const l=this.accumulatedFirstMoment[i].variable,u=this.accumulatedWeightedInfNorm[i].variable,c=JQ(tJ(l,this.beta1),tJ(s,1-this.beta1)),h=tJ(u,this.beta2),d=bJ(s),p=SJ(h,d);l.assign(c),u.assign(p);const f=JQ(tJ(eJ(r,n),eJ(c,JQ(p,this.epsilon))),o);o.assign(f)})),this.iteration.assign(JQ(this.iteration,1)),this.accBeta1.assign(tJ(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&oQ(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&oQ(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class IJ extends dJ{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);t.forEach(((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const i=jY.registeredVariables[t];iQ((()=>{const e=JQ(tJ(this.c,r),i);i.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=aQ(aJ(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class EJ extends IJ{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=aJ(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=jY.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:`${t}/momentum`,variable:iQ((()=>iJ(r).variable(e)))}}const i=this.accumulations[n].variable,o=Array.isArray(e)?e[n].tensor:e[t];null!=o&&iQ((()=>{let e;const t=JQ(tJ(this.m,i),o);e=this.useNesterov?JQ(tJ(this.c,JQ(o,tJ(t,this.m))),r):JQ(tJ(this.c,t),r),i.assign(t),r.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&oQ(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class TJ extends dJ{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=jY.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=jY.registeredVariables[t],i=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:iQ((()=>iJ(r).variable(i)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:iQ((()=>iJ(r).variable(i)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:iQ((()=>iJ(r).variable(i)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const a=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;iQ((()=>{const e=JQ(tJ(a,this.decay),tJ(rJ(o),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,i=JQ(tJ(t,this.decay),tJ(o,1-this.decay)),l=eJ(tJ(o,this.learningRate),nJ(yJ(e,JQ(rJ(i),this.epsilon)))),u=JQ(tJ(s,this.momentum),l);a.assign(e),t.assign(i),s.assign(u);const c=yJ(r,u);r.assign(c)}else{const e=JQ(tJ(a,this.decay),tJ(rJ(o),1-this.decay)),t=JQ(tJ(s,this.momentum),eJ(tJ(o,this.learningRate),nJ(JQ(e,this.epsilon))));a.assign(e),s.assign(t);const n=yJ(r,t);r.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&oQ(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&oQ(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&oQ(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const _J=[pJ,gJ,vJ,CJ,EJ,TJ,IJ];function NJ(e){return new Promise((e=>setTimeout(e))).then(e)}class AJ{constructor(e){if(!dH().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(AJ.URL_SCHEME)&&(e=e.slice(AJ.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=tQ.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=mQ(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),i=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(i.download=this.modelJsonFileName,i.href=r,await NJ((()=>i.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await NJ((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:vQ(e)}}}}AJ.URL_SCHEME="downloads://";function OJ(e,t,n,r){!function(e){RG(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){RG(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),RG(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),RG(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(n=null==n?0:n,r=null==r?1:r);let i=0;return Promise.all(e.map((o=>(o.then((o=>{const a=n+ ++i/e.length*(r-n);return t(a),o})),o))))}async function RJ(e,t){null==t&&(t={});const n=null==t.fetchFunc?dH().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),i=(null==t.onProgress?await Promise.all(r):await OJ(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(i):await OJ(i,t.onProgress,.5,1)}xQ.registerSaveRouter((e=>dH().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(AJ.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new AJ(e)}(e.slice(AJ.URL_SCHEME.length)):null));class $J{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(RG("function"===typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=dH().platform.fetch,RG(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&RG(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=mQ(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=tQ.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:vQ(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(ie){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return yQ(await this.loadModelJSON(),(e=>this.loadWeights(e)))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=bQ(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const r=null==t.fetchFunc?dH().platform.fetch:t.fetchFunc;let i,o=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var a;o<e.length;){if(!i){const n=(await r(e[o],t.requestInit,{isBinary:!0})).body;i=n.getReader()}const{done:s,value:l}=await i.read();if(!s)return void n.enqueue(l);o++,i=void 0,null===(a=t.onProgress)||void 0===a||a.call(t,o/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),i=n>t?e.substring(n):"";return[r+"/",i]}(t),i=this.weightPathPrefix||n,o=[],a=[];for(const s of e)for(const e of s.paths)null!=this.weightUrlConverter?a.push(this.weightUrlConverter(e)):o.push(i+e+r);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(e){const t=await this.getWeightUrls(e);return[bQ(e),await RJ(t,this.loadOptions)]}}function PJ(e){return null!=e.match($J.URL_SCHEME_REGEX)}$J.URL_SCHEME_REGEX=/^https?:\/\//;const DJ=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>PJ(e))):PJ(e),n)return MJ(e,t)}return null};function MJ(e,t){return new $J(e,t)}xQ.registerSaveRouter(DJ),xQ.registerLoadRouter(DJ);const FJ=-2,LJ=-1;function jJ(e,t,n){const r=e.shape.length;RG(r===t.length,(()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`)),RG(r===n.length,(()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`));for(let i=0;i<r;++i)RG(t[i]+n[i]<=e.shape[i],(()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${t[i]+n[i]}) would overflow input.shape[${i}] (${e.shape[i]})`))}function zJ(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function BJ(e,t,n){const r=[];for(let i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function WJ(e,t,n,r){const i=[...e];for(let o=i.length;o<r.length;o++)i.push(1);for(let o=0;o<n;o++)0===o?i[t]=1:(i.splice(t,0,1),i.pop());return i}function UJ(e,t,n){return n<=e?n:n-(t-1)}function VJ(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function GJ(e,t,n,r,i,o,a,s,l){const u=e.length;let c=new Array(u),h=new Array(u),d=new Array(u);if(t.length&&n>0){const l=t[0],u=n+1;c=HJ(a,l,u,r,e),h=qJ(s,l,u,i,e),d=WJ(o,l,u,e)}else for(let p=0;p<u;p++)c[p]=XJ(a,r,o,e,p,l),h[p]=YJ(s,i,o,e,p,l),d[p]=KJ(o,p,l);return{begin:c,end:h,strides:d}}function HJ(e,t,n,r,i){const o=[...i],a=VJ(n,t);for(let s=0;s<o.length;s++)if(a.indexOf(s)>-1)o[s]=0;else{const i=UJ(t,n,s);let a=r[i];e&1<<i&&(a=0),o[s]=a}return o}function qJ(e,t,n,r,i){const o=[...i],a=VJ(n,t);for(let s=0;s<o.length;s++)if(a.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{const i=UJ(t,n,s);let a=r[i];e&1<<i&&(a=Number.MAX_SAFE_INTEGER),o[s]=a}for(let s=0;s<o.length;s++){const e=i[s];o[s]<0&&(o[s]+=e),o[s]=NG(0,o[s],i[s])}return o}function KJ(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function XJ(e,t,n,r,i,o){let a=t[i];const s=n[i]||1;(e&1<<i||o&1<<i||null==a)&&(a=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),a=NG(0,a,l-1),a}function YJ(e,t,n,r,i,o){let a=t[i];const s=n[i]||1;(e&1<<i||o&1<<i||null==a)&&(a=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),a=s>0?NG(0,a,l):NG(-1,a,l-1),a}function QJ(e,t,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function JJ(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function ZJ(e,t,n){let r;const i=e.shape.length;let o;return r="number"===typeof t?[t,...new Array(i-1).fill(0)]:t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice(),r.forEach((e=>{RG(-1!==e,(()=>"slice() does not support negative begin indexing."))})),o=null==n?new Array(i).fill(-1):"number"===typeof n?[n,...new Array(i-1).fill(-1)]:n.length<i?n.concat(new Array(i-n.length).fill(-1)):n,o=o.map(((t,n)=>t>=0?t:(RG(-1===t,(()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`)),e.shape[n]-r[n]))),[r,o]}function eZ(e,t,n,r,i,o,a,s,l){let u;if(null==r?(u=new Array(t.length),u.fill(1)):u=r,null!=a&&0!==(a&a-1))throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const h={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:l};for(let b=0;b<h.dims;b++)c&&0!==(1<<b&s)&&h.numAddAxisAfterEllipsis++,1<<b&a&&(c=!0);c||(h.ellipsisMask|=1<<h.dims,h.dims++);const d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const i=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<i;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(FJ),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(LJ),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(h,d);let p=!0,f=!0,g=!0;const m=[],y=[];for(let b=0;b<e.length;++b){if(0===d.strides[b])throw Error(`strides[${b}] must be non-zero`);const t=!!(d.shrinkAxisMask&1<<b),n=e[b];if(-1===n){m.push(t?1:-1);continue}const r=[d.beginMask&1<<b,d.endMask&1<<b],i=[d.strides[b]>0?0:-1,d.strides[b]>0?n:n-1];if(t&&d.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&1===d.strides[b];const o=!!(d.beginMask&1<<b&&d.endMask&1<<b);if(d.beginValid&&d.endValid){if(t){const e=d.begin[b]<0?n+d.begin[b]:d.begin[b];if(d.begin[b]=e,d.end[b]=d.begin[b]+1,e<0||e>=n)throw Error(`slice index ${d.begin[b]} of dimension ${b} out of bounds.`)}else d.begin[b]=tZ(d.begin[b],0,d.strides[b],n,r,i),d.end[b]=tZ(d.end[b],1,d.strides[b],n,r,i);const e=1===d.strides[b]&&0===d.begin[b]&&d.end[b]===n;p=p&&e,f=f&&(0===b&&1===d.strides[b]||e)}else p=p&&1===d.strides[b]&&o,f=f&&(0===b&&1===d.strides[b]||o);let a,s=!1;if(d.beginValid&&d.endValid?(a=d.end[b]-d.begin[b],s=!0):t?(a=1,s=!0):o&&n>=0&&(a=d.strides[b]<0?-n:n,s=!0),s){let e;e=0===a||a<0!==d.strides[b]<0?0:Math.trunc(a/d.strides[b])+(a%d.strides[b]!==0?1:0),m.push(e)}else m.push(-1)}for(let b=0;b<d.finalShapeGatherIndices.length;++b){const e=d.finalShapeGatherIndices[b];e>=0?y.push(m[e]):e===FJ&&y.push(1)}const v=y.filter(((e,t)=>d.finalShapeGatherIndices[t]!==FJ));return{finalShapeSparse:v,finalShape:y,isIdentity:p,sliceDim0:f,isSimpleSlice:g,begin:d.begin,end:d.end,strides:d.strides}}function tZ(e,t,n,r,i,o){if(i[t])return n>0?o[t]:o[t+1&1];{const t=e<0?r+e:e;return t<o[0]?o[0]:t>o[1]?o[1]:t}}const nZ=YY({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:KY(e,"x","all","bool")},i={axis:t,keepDims:n};return jY.runKernel(kH,r,i)}});const rZ=YY({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:KY(e,"x","any","bool")},i={axis:t,keepDims:n};return jY.runKernel(SH,r,i)}});const iZ=YY({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:KY(e,"x","argMax")},r={axis:t};return jY.runKernel(CH,n,r)}});function oZ(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0;return lZ(e,[...t,e[3]],n,o,r,null,null,vZ(i))}function aZ(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[s,l]=hZ(t);let u;if("channelsLast"===a)u=[s,l,e[3],e[3]];else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);u=[s,l,e[1],e[1]]}return lZ(e,u,n,r,i,o,!1,a)}function sZ(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[s,l,u]=dZ(t);let c,h;if("NDHWC"===a)h="channelsLast",c=[s,l,u,e[4],e[4]];else{if("NCDHW"!==a)throw new Error(`Unknown dataFormat ${a}`);h="channelsFirst",c=[s,l,u,e[1],e[1]]}return uZ(e,c,n,r,i,!1,h,o)}function lZ(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[l,u,c,h]=[-1,-1,-1,-1];if("channelsLast"===s)[l,u,c,h]=e;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[l,h,u,c]=e}const[d,p,,f]=t,[g,m]=hZ(n),[y,v]=hZ(r),b=pZ(d,y),x=pZ(p,v),{padInfo:w,outHeight:k,outWidth:S}=function(e,t,n,r,i,o,a,s,l){let u,c,h;if("number"===typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const i=function(e,t,n,r,i){null==r&&(r=cZ(e,t,n));const o=e[0],a=e[1],s=fZ((o-t+2*r)/n+1,i),l=fZ((a-t+2*r)/n+1,i);return[s,l]}([t,n],o,r,e,s);c=i[0],h=i[1]}else if("same"===e){c=Math.ceil(t/r),h=Math.ceil(n/i);const e=Math.max(0,(c-1)*r+o-t),s=Math.max(0,(h-1)*i+a-n),l=Math.floor(e/2),d=e-l,p=Math.floor(s/2);u={top:l,bottom:d,left:p,right:s-p,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-o+1)/r),h=Math.ceil((n-a+1)/i);else{if("object"!==typeof e)throw Error(`Unknown padding parameter: ${e}`);{const d="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],g="channelsLast"===l?e[2][1]:e[3][1];u={top:d,bottom:p,left:f,right:g,type:0===d&&0===p&&0===f&&0===g?"VALID":"EXPLICIT"},c=fZ((t-o+d+p)/r+1,s),h=fZ((n-a+f+g)/i+1,s)}}return{padInfo:u,outHeight:c,outWidth:h}}(i,u,c,g,m,b,x,o,s),C=a?f*h:f;let I;return"channelsFirst"===s?I=[l,C,k,S]:"channelsLast"===s&&(I=[l,k,S,C]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:c,inChannels:h,outHeight:k,outWidth:S,outChannels:C,padInfo:w,strideHeight:g,strideWidth:m,filterHeight:d,filterWidth:p,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:v,inShape:e,outShape:I,filterShape:t}}function uZ(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,[l,u,c,h,d]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[l,u,c,h,d]=e;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[l,d,u,c,h]=e}const[p,f,g,,m]=t,[y,v,b]=dZ(n),[x,w,k]=dZ(r),S=pZ(p,x),C=pZ(f,w),I=pZ(g,k),{padInfo:E,outDepth:T,outHeight:_,outWidth:N}=function(e,t,n,r,i,o,a,s,l,u,c){let h,d,p,f;"valid"===e&&(e=0);if("number"===typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const g=function(e,t,n,r,i,o){null==i&&(i=cZ(e,t[0],r[0]));const a=[0,0,0,n];for(let s=0;s<3;s++)e[s]+2*i>=t[s]&&(a[s]=fZ((e[s]-t[s]+2*i)/r[s]+1,o));return a}([t,n,r,1],[s,l,u],1,[i,o,a],e,c);d=g[0],p=g[1],f=g[2]}else{if("same"!==e)throw Error(`Unknown padding parameter: ${e}`);{d=Math.ceil(t/i),p=Math.ceil(n/o),f=Math.ceil(r/a);const e=(d-1)*i+s-t,c=(p-1)*o+l-n,g=(f-1)*a+u-r,m=Math.floor(e/2),y=e-m,v=Math.floor(c/2),b=c-v,x=Math.floor(g/2);h={top:v,bottom:b,left:x,right:g-x,front:m,back:y,type:"SAME"}}}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}(i,u,c,h,y,v,b,S,C,I,s),A=o?m*d:m;let O;return"channelsFirst"===a?O=[l,A,T,_,N]:"channelsLast"===a&&(O=[l,T,_,N,A]),{batchSize:l,dataFormat:a,inDepth:u,inHeight:c,inWidth:h,inChannels:d,outDepth:T,outHeight:_,outWidth:N,outChannels:A,padInfo:E,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:p,filterHeight:f,filterWidth:g,effectiveFilterDepth:S,effectiveFilterHeight:C,effectiveFilterWidth:I,dilationDepth:x,dilationHeight:w,dilationWidth:k,inShape:e,outShape:O,filterShape:t}}function cZ(e,t,n){const r=pZ(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function hZ(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function dZ(e){return"number"===typeof e?[e,e,e]:e}function pZ(e,t){return t<=1?e:e+(e-1)*(t-1)}function fZ(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function gZ(e){const[t,n,r]=hZ(e);return 1===t&&1===n&&1===r}function mZ(e,t){return gZ(e)||gZ(t)}function yZ(e){return hZ(e).every((e=>e>0))}function vZ(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function bZ(e,t,n){if(null!=n){if("string"===typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"===typeof t)RG(FG(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`));else{if("object"!==typeof t)throw Error(`Error in ${e}: Unknown padding parameter: ${t}`);t.forEach((t=>{t.forEach((t=>{RG(FG(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`))}))}))}}}const xZ=YY({reshape_:function(e,t){const n={x:KY(e,"x","reshape","string_or_numeric")},r={shape:t};return jY.runKernel(_K,n,r)}});const wZ=YY({avgPool_:function(e,t,n,r,i){const o=KY(e,"x","avgPool","float32");RG(mZ(n,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`));let a=o,s=!1;3===o.rank&&(s=!0,a=xZ(o,[1,o.shape[0],o.shape[1],o.shape[2]])),RG(4===a.rank,(()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`)),bZ("avgPool",r,i);const l={x:a},u={filterSize:t,strides:n,pad:r,dimRoundingMode:i};let c=jY.runKernel(OH,l,u);return c=XQ(c,o.dtype),s?xZ(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const kZ=YY({avgPool3d_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const a=KY(e,"x","avgPool3d","float32");let s=a,l=!1;4===a.rank&&(l=!0,s=xZ(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),RG(5===s.rank,(()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`)),RG("NDHWC"===o,(()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`)),RG("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`)),bZ("avgPool3d",r,i);const u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:o};let h=jY.runKernel($H,u,c);return h=XQ(h,s.dtype),l?xZ(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const SZ=YY({batchNorm_:function(e,t,n,r,i,o){null==o&&(o=.001);const a=KY(e,"x","batchNorm"),s=KY(t,"mean","batchNorm"),l=KY(n,"variance","batchNorm");let u,c;null!=i&&(u=KY(i,"scale","batchNorm")),null!=r&&(c=KY(r,"offset","batchNorm")),RG(s.rank===l.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),RG(null==c||s.rank===c.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),RG(null==u||s.rank===u.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const h=function(e){let t;return t=0===e.rank||1===e.rank?xZ(e,[1,1,1,e.size]):2===e.rank?xZ(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?xZ(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(a),d={x:h,scale:u,offset:c,mean:s,variance:l},p={varianceEpsilon:o},f=jY.runKernel(Tq,d,p);return xZ(f,a.shape)}});const CZ=YY({batchNorm2d_:function(e,t,n,r,i,o){const a=KY(e,"x","batchNorm"),s=KY(t,"mean","batchNorm"),l=KY(n,"variance","batchNorm");let u,c;return null!=i&&(u=KY(i,"scale","batchNorm")),null!=r&&(c=KY(r,"offset","batchNorm")),RG(2===a.rank,(()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`)),RG(2===s.rank||1===s.rank,(()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`)),RG(2===l.rank||1===l.rank,(()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`)),null!=u&&RG(2===u.rank||1===u.rank,(()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`)),null!=c&&RG(2===c.rank||1===c.rank,(()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`)),SZ(a,s,l,c,u,o)}});const IZ=YY({batchNorm3d_:function(e,t,n,r,i,o){const a=KY(e,"x","batchNorm"),s=KY(t,"mean","batchNorm"),l=KY(n,"variance","batchNorm");let u,c;return null!=i&&(u=KY(i,"scale","batchNorm")),null!=r&&(c=KY(r,"offset","batchNorm")),RG(3===a.rank,(()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`)),RG(3===s.rank||1===s.rank,(()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`)),RG(3===l.rank||1===l.rank,(()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`)),null!=u&&RG(3===u.rank||1===u.rank,(()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`)),null!=c&&RG(3===c.rank||1===c.rank,(()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`)),SZ(a,s,l,c,u,o)}});const EZ=YY({batchNorm4d_:function(e,t,n,r,i,o){const a=KY(e,"x","batchNorm"),s=KY(t,"mean","batchNorm"),l=KY(n,"variance","batchNorm");let u,c;return null!=i&&(u=KY(i,"scale","batchNorm")),null!=r&&(c=KY(r,"offset","batchNorm")),RG(4===a.rank,(()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`)),RG(4===s.rank||1===s.rank,(()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`)),RG(4===l.rank||1===l.rank,(()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`)),null!=u&&RG(4===u.rank||1===u.rank,(()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`)),null!=c&&RG(4===c.rank||1===c.rank,(()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`)),SZ(a,s,l,c,u,o)}});const TZ=YY({broadcastTo_:function(e,t){let n=KY(e,"broadcastTo","x");const r=n.shape;if(oH(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=xZ(n,e)}const i=n.shape,o=Array.from(t);for(let u=t.length-1;u>=0;u--)if(i[u]===t[u])o[u]=1;else if(1!==n.shape[u])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);const a=o.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0));if(0===a.length)return YQ(n);const s={x:n},l={reps:o};return jY.runKernel(fX,s,l)}});const _Z=YY({clipByValue_:function(e,t,n){const r=KY(e,"x","clipByValue");if(RG(t<=n,(()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`)),t===n)return fJ(r.shape,t,r.dtype);const i={x:r},o={clipValueMin:t,clipValueMax:n};return jY.runKernel(WH,i,o)}});const NZ=YY({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;RG(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=XY(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)})),1===n.length)return YQ(n[0]);const r=n,i={axis:t};return jY.runKernel(GH,r,i)}});const AZ=YY({concat1d_:function(e){return NZ(e,0)}});const OZ=YY({concat2d_:function(e,t){return NZ(e,t)}});const RZ=YY({concat3d_:function(e,t){return NZ(e,t)}});const $Z=YY({concat4d_:function(e,t){return NZ(e,t)}});const PZ=YY({conv2d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0;const s=KY(e,"x","conv2d","float32"),l=KY(t,"filter","conv2d","float32");let u=s,c=!1;3===s.rank&&(c=!0,u=xZ(s,[1,s.shape[0],s.shape[1],s.shape[2]])),RG(4===u.rank,(()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`)),RG(4===l.rank,(()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`)),bZ("conv2d",r,a);const h="NHWC"===i?u.shape[3]:u.shape[1];RG(h===l.shape[2],(()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`)),RG(mZ(n,o),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`)),RG(yZ(o),(()=>"Error in conv2D: Dilated rates should be larger than 0.")),RG(yZ(n),(()=>"Error in conv2D: Strides should be larger than 0."));const d={x:u,filter:l},p={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a},f=jY.runKernel(HH,d,p);return c?xZ(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const DZ=YY({conv1d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6?arguments[6]:void 0;const s=KY(e,"x","conv1d"),l=KY(t,"filter","conv1d");let u=s,c=!1;2===s.rank&&(c=!0,u=xZ(s,[1,s.shape[0],s.shape[1]])),RG(3===u.rank,(()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`)),RG(3===l.rank,(()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`)),bZ("conv1d",r,a),RG(u.shape[2]===l.shape[1],(()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`)),RG(mZ(n,o),(()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${o}'`)),RG(yZ(o),(()=>"Error in conv1D: Dilated rates should be larger than 0.")),RG(yZ(n),(()=>"Error in conv1D: Stride should be larger than 0.")),RG("NWC"===i,(()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`));const h=xZ(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=xZ(u,[u.shape[0],1,u.shape[1],u.shape[2]]),p=PZ(d,h,[1,n],r,"NHWC",[1,o],a);return xZ(p,c?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});const MZ=YY({conv2DBackpropInput_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",a=arguments.length>6?arguments[6]:void 0;RG(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let s=e,l=t,u=!1;3===t.rank&&(u=!0,l=xZ(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),RG(4===s.length,(()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`)),RG(4===l.rank,(()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`)),RG(4===n.rank,(()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`));const c="NHWC"===o?s[3]:s[1],h="NHWC"===o?l.shape[3]:l.shape[1];RG(c===n.shape[2],(()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`)),RG(h===n.shape[3],(()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`)),bZ("conv2dDerInput",i,a);const d={dy:l,filter:n},p={strides:r,pad:i,dataFormat:o,dimRoundingMode:a,inputShape:s},f=jY.runKernel(KH,d,p);return u?xZ(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const FZ=YY({conv2dTranspose_:function(e,t,n,r,i,o){const a=KY(e,"x","conv2dTranspose"),s=KY(t,"filter","conv2dTranspose");return MZ(n,a,s,r,i,"NHWC",o)}});const LZ=YY({conv3d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const a=KY(e,"x","conv3d"),s=KY(t,"filter","conv3d");let l=a,u=!1;4===a.rank&&(u=!0,l=xZ(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),RG(5===l.rank,(()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`)),RG(5===s.rank,(()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`)),RG(l.shape[4]===s.shape[3],(()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`)),RG(mZ(n,o),(()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`)),RG("NDHWC"===i,(()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`)),RG(yZ(o),(()=>"Error in conv3D: Dilated rates should be larger than 0.")),RG(yZ(n),(()=>"Error in conv3D: Strides should be larger than 0."));const c={x:l,filter:s},h={strides:n,pad:r,dataFormat:i,dilations:o},d=jY.runKernel(XH,c,h);return u?xZ(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const jZ=YY({conv3DBackpropInput_:function(e,t,n,r,i){RG(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let o=e,a=t,s=!1;4===t.rank&&(s=!0,a=xZ(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);const l=o[4],u=a.shape[4];RG(5===o.length,(()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`)),RG(5===a.rank,(()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`)),RG(5===n.rank,(()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`)),RG(l===n.shape[3],(()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`)),RG(u===n.shape[4],(()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`));const c={dy:a,filter:n},h={pad:i,strides:r,inputShape:o},d=jY.runKernel(QH,c,h);return s?xZ(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const zZ=YY({conv3dTranspose_:function(e,t,n,r,i){const o=KY(e,"x","conv3dTranspose"),a=KY(t,"filter","conv3dTranspose");return jZ(n,o,a,r,i)}});const BZ=YY({denseBincount_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=KY(e,"x","denseBincount"),o=KY(t,"weights","denseBincount");RG("int32"===i.dtype,(()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`)),RG(i.rank<=2,(()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`)),RG(n>=0,(()=>`size must be non-negative, but got ${n}.`)),RG(o.size===i.size||0===o.size,(()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${o.shape}.`));const a={x:i,weights:o},s={size:n,binaryOutput:r};return jY.runKernel(rq,a,s)}});const WZ=YY({depthwiseConv2d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0;const s=KY(e,"x","depthwiseConv2d","float32"),l=KY(t,"filter","depthwiseConv2d","float32");let u=s,c=!1;3===s.rank&&(c=!0,u=xZ(s,[1,s.shape[0],s.shape[1],s.shape[2]])),RG(4===u.rank,(()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`)),RG(4===l.rank,(()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`));const h="NHWC"===i?u.shape[3]:u.shape[1];RG(h===l.shape[2],(()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${l.shape[2]}.`)),bZ("depthwiseConv2d",r,a);const d={x:u,filter:l},p={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a},f=jY.runKernel(oq,d,p);return c?xZ(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const UZ=YY({elu_:function(e){const t={x:KY(e,"x","elu","float32")};return jY.runKernel(gq,t)}});const VZ=YY({equal_:function(e,t){let n=KY(e,"a","equal","string_or_numeric"),r=KY(t,"b","equal","string_or_numeric");[n,r]=OY(n,r),kJ(n.shape,r.shape);const i={a:n,b:r};return jY.runKernel(vq,i)}});const GZ=YY({erf_:function(e){let t=KY(e,"x","erf");RG("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=XQ(t,"float32"));const n={x:t};return jY.runKernel(yq,n)}});const HZ=YY({exp_:function(e){const t={x:KY(e,"x","exp")};return jY.runKernel(bq,t)}});const qZ=YY({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=KY(e,"x","expandDims","string_or_numeric");RG(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const r={input:n},i={dim:t};return jY.runKernel(xq,r,i)}});const KZ=YY({tile_:function(e,t){const n=KY(e,"x","tile","string_or_numeric");RG(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`));const r={x:n},i={reps:t};return jY.runKernel(fX,r,i)}});const XZ=YY({eye_:function(e,t,n){null==t&&(t=e);const r=KQ([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),i=e<=t?e:t;for(let a=0;a<i;++a)r.set(1,a,a);const o=xZ(r.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return KZ(qZ(o,0),[n[0],1,1]);if(2===n.length)return KZ(qZ(qZ(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return KZ(qZ(qZ(qZ(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});const YZ=YY({floor_:function(e){const t={x:KY(e,"x","floor","float32")};return jY.runKernel(Iq,t)}});const QZ=YY({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i={x:KY(e,"x","gather"),indices:KY(t,"indices","gather","int32")},o={axis:n,batchDims:r};return jY.runKernel(_q,i,o)}});const JZ=YY({greater_:function(e,t){let n=KY(e,"a","greater","string_or_numeric"),r=KY(t,"b","greater","string_or_numeric");[n,r]=OY(n,r),kJ(n.shape,r.shape);const i={a:n,b:r};return jY.runKernel(Aq,i)}});const ZZ=YY({greaterEqual_:function(e,t){let n=KY(e,"a","greaterEqual","string_or_numeric"),r=KY(t,"b","greaterEqual","string_or_numeric");[n,r]=OY(n,r),kJ(n.shape,r.shape);const i={a:n,b:r};return jY.runKernel(Oq,i)}});const e0=YY({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:KY(e,"x","leakyRelu")},r={alpha:t};return jY.runKernel(Lq,n,r)}});const t0=YY({log_:function(e){const t={x:KY(e,"x","log","float32")};return jY.runKernel(Wq,t)}});const n0=YY({log1p_:function(e){const t={x:KY(e,"x","log1p")};return jY.runKernel(Uq,t)}});const r0=YY({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:KY(e,"x","max")},i={reductionIndices:t,keepDims:n};return jY.runKernel(Xq,r,i)}});const i0=YY({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=KY(e,"x","sum");"bool"===r.dtype&&(r=XQ(r,"int32"));const i={x:r},o={axis:t,keepDims:n};return jY.runKernel(XK,i,o)}});const o0=YY({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=KY(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);const r=oJ(((e,n)=>{const r=r0(e,t,!0),i=yJ(e,r),o=yJ(XQ(i,"float32"),t0(i0(HZ(i),t,!0)));n([o]);return{value:o,gradFunc:(e,n)=>{const[r]=n,i=HZ(r);return yJ(e,tJ(i0(e,t,!0),i))}}}));return r(n)}});function a0(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function s0(e,t,n){const r=e.length+t.length,i=[];let o=0,a=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?i.push(e[o++]):i.push(t[a++]);return i}function l0(e,t){const n=[],r=e.length;for(let i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i]);return[n,t.map((t=>e[t]))]}function u0(e,t){return s0(e,t.map((e=>1)),t)}function c0(e,t,n){RG(a0(t,n),(()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`))}function h0(e,t){if(a0(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function d0(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function p0(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const f0=YY({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=KY(e,"x","logSumExp"),i=WG(t,r.shape),o=r0(r,i,!0),a=yJ(r,o),s=HZ(a),l=i0(s,i),u=t0(l),c=JQ(xZ(o,u.shape),u);if(n){const e=u0(c.shape,i);return xZ(c,e)}return c}});const g0=YY({logicalAnd_:function(e,t){const n=KY(e,"a","logicalAnd","bool"),r=KY(t,"b","logicalAnd","bool");kJ(n.shape,r.shape);const i={a:n,b:r};return jY.runKernel(Vq,i)}});const m0=YY({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=KY(e,"a","matMul"),o=KY(t,"b","matMul");[i,o]=OY(i,o);const a={a:i,b:o},s={transposeA:n,transposeB:r};return jY.runKernel(DH,a,s)}});const y0=YY({maxPool_:function(e,t,n,r,i){const o=KY(e,"x","maxPool");let a=o,s=!1;3===o.rank&&(s=!0,a=xZ(o,[1,o.shape[0],o.shape[1],o.shape[2]])),RG(4===a.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`)),RG(mZ(n,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`)),bZ("maxPool",r,i);const l={x:a},u={filterSize:t,strides:n,pad:r,dimRoundingMode:i},c=jY.runKernel(Qq,l,u);return s?xZ(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const v0=YY({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const a=KY(e,"x","maxPool3d");let s=a,l=!1;4===a.rank&&(l=!0,s=xZ(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),RG(5===s.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`)),RG("NDHWC"===o,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`)),bZ("maxPool3d",r,i);const u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:o},h=jY.runKernel(Zq,u,c);return l?xZ(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const b0=YY({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:KY(e,"x","mean")},i={axis:t,keepDims:n};return jY.runKernel(nK,r,i)}});const x0=YY({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:KY(e,"x","min")},i={axis:t,keepDims:n};return jY.runKernel(rK,r,i)}});const w0=YY({minimum_:function(e,t){let n=KY(e,"a","minimum"),r=KY(t,"b","minimum");[n,r]=OY(n,r),"bool"===n.dtype&&(n=XQ(n,"int32"),r=XQ(r,"int32")),kJ(n.shape,r.shape);const i={a:n,b:r};return jY.runKernel(iK,i)}});const k0=YY({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=WG(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=KY(e,"x","moments")).shape),r=b0(e,n,t);let i=r.shape;t||(i=u0(r.shape,n));const o=rJ(yJ(XQ(e,"float32"),xZ(r,i)));return{mean:r,variance:b0(o,n,t)}}});const S0=YY({neg_:function(e){const t={x:KY(e,"x","neg")};return jY.runKernel(uK,t)}});const C0=YY({notEqual_:function(e,t){let n=KY(e,"a","notEqual","string_or_numeric"),r=KY(t,"b","notEqual","string_or_numeric");[n,r]=OY(n,r),kJ(n.shape,r.shape);const i={a:n,b:r};return jY.runKernel(cK,i)}});const I0=YY({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const o={indices:KY(e,"indices","oneHot","int32")},a={dtype:i,depth:t,onValue:n,offValue:r};return jY.runKernel(gK,o,a)}});function E0(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(oH(e),"complex64"===t){const t=E0(e,"float32"),n=E0(e,"float32");return QY(t,n)}const n=rH(DG(e),t);return jY.makeTensor(n,e,t)}function T0(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(oH(e),"complex64"===t){const t=T0(e,"float32"),n=E0(e,"float32");return QY(t,n)}const n=nH(DG(e),t);return jY.makeTensor(n,e,t)}const _0=YY({onesLike_:function(e){const t={x:KY(e,"x","onesLike")};return jY.runKernel(fK,t)}});const N0=YY({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=KY(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:t,constantValue:n},o={x:r};return jY.runKernel(yK,o,i)}});const A0=YY({prelu_:function(e,t){const n={x:KY(e,"x","prelu"),alpha:KY(t,"alpha","prelu")};return jY.runKernel(bK,n)}});var O0=n(4334);class R0{constructor(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=i||Math.random();this.random=O0.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,i,o;do{r=2*this.random()-1,i=2*this.random()-1,o=r*r+i*i}while(o>=1||0===o);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*r*a,t=this.mean+this.stdDev*i*a,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class $0{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=O0.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const P0=YY({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(oH(e),null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const o=new R0(t,n,r,!1,i),a=KQ(e,r);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}});const D0=YY({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",i=arguments.length>4?arguments[4]:void 0;oH(e);const o=KQ(e,r),a=new $0(t,n,null,i);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}});function M0(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const i={start:e,stop:t,step:n,dtype:r};return jY.runKernel(CK,{},i)}const F0=YY({relu_:function(e){const t={x:KY(e,"x","relu")};return jY.runKernel(TK,t)}});const L0=YY({reverse_:function(e,t){const n={x:KY(e,"x","reverse")},r={dims:t};return jY.runKernel(PK,n,r)}});const j0=YY({selu_:function(e){const t={x:KY(e,"x","selu")};return jY.runKernel(BK,t)}});const z0=YY({separableConv2d_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const s=KY(e,"x","separableConv2d"),l=KY(t,"depthwiseFilter","separableConv2d"),u=KY(n,"pointwiseFilter","separableConv2d");let c=s,h=!1;if(3===s.rank&&(h=!0,c=xZ(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");RG(4===c.rank,(()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`)),RG(4===l.rank,(()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`)),RG(4===u.rank,(()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`)),RG(1===u.shape[0],(()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`)),RG(1===u.shape[1],(()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`));const d=l.shape[2],p=l.shape[3];RG(u.shape[2]===d*p,(()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*p}, but got ${u.shape[2]}.`));const f=WZ(c,l,r,i,a,o),g=PZ(f,u,1,"valid",a);return h?xZ(g,[g.shape[1],g.shape[2],g.shape[3]]):g}});const B0=YY({sigmoid_:function(e){const t={x:KY(e,"x","sigmoid","float32")};return jY.runKernel(HK,t)}});const W0=YY({slice_:function(e,t,n){const r=KY(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const i={x:r},o={begin:t,size:n};return jY.runKernel(WK,i,o)}});const U0=YY({slice1d_:function(e,t,n){const r=KY(e,"x","slice1d");return RG(1===r.rank,(()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`)),W0(r,[t],[n])}});const V0=YY({slice2d_:function(e,t,n){const r=KY(e,"x","slice2d");return RG(2===r.rank,(()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`)),W0(r,t,n)}});const G0=YY({slice3d_:function(e,t,n){const r=KY(e,"x","slice3d");return RG(3===r.rank,(()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`)),W0(r,t,n)}});const H0=YY({slice4d_:function(e,t,n){const r=KY(e,"x","slice4d");return RG(4===r.rank,(()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`)),W0(r,t,n)}});const q0=YY({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=KY(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const r={logits:n},i={dim:t};return jY.runKernel(JK,r,i)}});const K0=YY({softplus_:function(e){const t={x:KY(e,"x","softplus")};return jY.runKernel(qK,t)}});const X0=YY({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={x:KY(e,"x","split")},i={numOrSizeSplits:t,axis:n};return jY.runKernel(QK,r,i)}});const Y0=YY({squeeze_:function(e,t){const n=KY(e,"x","squeeze","string_or_numeric");return xZ(n,UG(n.shape,t).newShape)}});const Q0=YY({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=XY(e,"tensors","stack","string_or_numeric");RG(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&RG(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const r=n,i={axis:t};return jY.runKernel(mK,r,i)}});const J0=YY({tanh_:function(e){const t={x:KY(e,"x","tanh","float32")};return jY.runKernel(pX,t)}});function Z0(e,t){PG(e);const n=GY(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return JY(e,null,n,t)}function e1(e,t,n){if(PG(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=GY(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return JY(e,t,r,n)}const t1=YY({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(oH(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const o=new R0(t,n,r,!0,i),a=KQ(e,r);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}});const n1=YY({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=KY(e,"x","unstack","string_or_numeric");RG(t>=-n.shape.length&&t<n.shape.length,(()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`));const r={value:n},i={axis:t};return jY.runKernel(bX,r,i)}});const r1=YY({where_:function(e,t,n){const r=KY(t,"a","where"),i=KY(n,"b","where"),o=KY(e,"condition","where","bool"),a=kJ(kJ(o.shape,r.shape),i.shape),s={condition:TZ(o,a),t:TZ(r,a),e:TZ(i,a)};return jY.runKernel(zK,s)}});const i1=YY({imag_:function(e){const t={input:KY(e,"input","imag")};return jY.runKernel(Pq,t)}});const o1=YY({real_:function(e){const t={input:KY(e,"input","real")};return jY.runKernel(IK,t)}});const a1=YY({transpose_:function(e,t,n){const r=KY(e,"x","transpose");if(null==t&&(t=r.shape.map(((e,t)=>t)).reverse()),RG(r.rank===t.length,(()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`)),t.forEach((e=>{RG(e>=0&&e<r.rank,(()=>"All entries in 'perm' must be between 0 and "+(r.rank-1)+` but got ${t}`))})),r.rank<=1)return r.clone();const i={x:r},o={perm:t};return"complex64"===r.dtype?iQ((()=>{let e=o1(r),t=i1(r);return e=jY.runKernel(yX,{x:e},o),t=jY.runKernel(yX,{x:t},o),n&&(t=S0(t)),QY(e,t)})):jY.runKernel(yX,i,o)}});const s1=YY({dropout_:function(e,t,n,r){const i=KY(e,"x","dropout");if(RG("float32"===i.dtype,(()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`)),RG(t>=0&&t<1,(()=>`rate must be a float in the range [0, 1), but got ${t}.`)),0===t)return e instanceof vY?i.clone():i;const o=function(e,t){if(null==t)return e.shape.slice();if(MG(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(i,n),a=1-t,s=eJ(YZ(JQ(D0(o,0,1,"float32",r),a)),a);return tJ(i,s)}});const l1=YY({fft_:function(e){RG("complex64"===e.dtype,(()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`));const t={input:e};return jY.runKernel(kq,t)}});const u1=YY({rfft_:function(e,t){RG("float32"===e.dtype,(()=>`The dtype for rfft() must be real value but got ${e.dtype}`));let n=e.shape[e.shape.length-1];const r=e.size/n;let i;if(null!=t&&t<n){const r=e.shape.map((e=>0)),o=e.shape.map((e=>e));o[e.shape.length-1]=t,i=W0(e,r,o),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,i=NZ([e,E0(r)],e.shape.length-1),n=t}else i=e;const o=iJ(i),a=xZ(QY(i,o),[r,n]),s=l1(a),l=Math.floor(n/2)+1,u=o1(s),c=i1(s),h=X0(u,[l,n-l],u.shape.length-1),d=X0(c,[l,n-l],c.shape.length-1),p=i.shape.slice();return p[i.shape.length-1]=l,xZ(QY(h[0],d[0]),p)}});const c1=YY({ifft_:function(e){RG("complex64"===e.dtype,(()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`));const t={input:e};return jY.runKernel($q,t)}});const h1=YY({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const i=xZ(e,[n,t]);r=c1(i)}else{const i=[n,2*(t-1)],o=xZ(o1(e),[n,t]),a=xZ(i1(e),[n,t]),s=L0(W0(o,[0,1],[n,t-2]),1),l=tJ(L0(W0(a,[0,1],[n,t-2]),1),aJ(-1)),u=NZ([o,s],1),c=NZ([a,l],1),h=xZ(QY(u,c),[i[0],i[1]]);r=c1(h)}if(r=o1(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=xZ(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}});const d1=YY({conv2DBackpropFilter_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",a=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=xZ(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=xZ(t,[1,t.shape[0],t.shape[1],t.shape[2]])),RG(4===s.rank,(()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`)),RG(4===l.rank,(()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`)),RG(4===n.length,(()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`));const u="NHWC"===o?s.shape[3]:s.shape[1],c="NHWC"===o?l.shape[3]:l.shape[1];RG(u===n[2],(()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`)),RG(c===n[3],(()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`)),bZ("conv2dDerFilter",i,a);const h={x:s,dy:l},d={strides:r,pad:i,dataFormat:o,dimRoundingMode:a,filterShape:n};return jY.runKernel(qH,h,d)}});const p1=YY({relu6_:function(e){const t={x:KY(e,"x","relu6")};return jY.runKernel($K,t)}});const f1=YY({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:KY(e,"x","step")},r={alpha:t};return jY.runKernel(kX,n,r)}});function g1(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return tJ(e,f1(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function m1(e,t){let n=t;const r=wJ(e.shape,t.shape);return r.length>0&&(n=i0(n,r)),xZ(n,e.shape)}function y1(e,t,n,r){if("linear"===t)return e;if("relu"===t)return F0(e);if("elu"===t)return UZ(e);if("relu6"===t)return p1(e);if("prelu"===t)return A0(e,n);if("leakyrelu"===t)return e0(e,r);if("sigmoid"===t)return B0(e);throw new Error(`Unknown fused activation ${t}.`)}const v1=(e,t)=>!(e>0)||"linear"===t;const b1=YY({fusedConv2d_:function(e){let{x:t,filter:n,strides:r,pad:i,dataFormat:o="NHWC",dilations:a=[1,1],dimRoundingMode:s,bias:l,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:h}=e;if(u=u||"linear",!1===v1(jY.state.gradientDepth,u)){RG("NHWC"===o,(()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`));let e=PZ(t,n,r,i,o,a,s);return null!=l&&(e=JQ(e,l)),y1(e,u,c,h)}const d=KY(t,"x","conv2d","float32"),p=KY(n,"filter","conv2d","float32");let f=d,g=!1;3===d.rank&&(g=!0,f=xZ(d,[1,d.shape[0],d.shape[1],d.shape[2]])),RG(4===f.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`)),RG(4===p.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`)),bZ("fused conv2d",i,s);const m="NHWC"===o?f.shape[3]:f.shape[1];RG(p.shape[2]===m,(()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${p.shape[2]}.`)),RG(mZ(r,a),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${r} and dilations '${a}'`));const y=lZ(f.shape,p.shape,r,a,i,s);let v,b;if(null!=l&&(v=KY(l,"bias","fused conv2d"),[v]=OY(v,d),"NHWC"===o?kJ(y.outShape,v.shape):(RG(v.shape.length<=1,(()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`)),RG(0===v.shape.length||v.shape[0]===y.outChannels||1===v.shape[0],(()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${y.outChannels})`)))),null!=c){const e=c.shape;if(RG(e.length<=1||3===e.length,(()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${e.length}.`)),1===e.length)RG(1===e[0]||e[0]===y.outChannels,(()=>`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the number of output channels (${y.outChannels}).`));else if(3===e.length)try{kJ(e,y.outShape)}catch(ie){const n=`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(n)}b=KY(c,"prelu weights","fused conv2d")}const x=(e,t)=>{RG("NHWC"===o,(()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`));const[n,s,l,c]=t,h=g1(e,l,u);RG(gZ(a),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`));const d=[MZ(s.shape,h,n,r,i),d1(s,h,n.shape,r,i)];if(null!=c){const e=m1(c,h);d.push(e)}return d},w={x:f,filter:p,bias:v,preluActivationWeights:b},k={strides:r,pad:i,dataFormat:o,dilations:a,dimRoundingMode:s,activation:u,leakyreluAlpha:h};if(null==l){const e=oJ(((e,t,n)=>{let r=jY.runKernel(EX,w,k);return n([t,e,r]),g&&(r=xZ(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:x}}));return e(f,p)}{const e=oJ(((e,t,n,r)=>{let i=jY.runKernel(EX,w,k);return r([t,e,i,n]),g&&(i=xZ(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:x}}));return e(f,p,v)}}});const x1=YY({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=xZ(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=xZ(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:s,dy:l},c={strides:r,pad:i,dimRoundingMode:a,dilations:o,filterShape:n};return jY.runKernel(aq,u,c)}});const w1=YY({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0,s=t,l=!1;3===t.rank&&(l=!0,s=xZ(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:s,filter:n},c={strides:r,pad:i,dimRoundingMode:a,dilations:o,inputShape:e},h=jY.runKernel(sq,u,c);return l?xZ(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});const k1=YY({fusedMatMul_:function(e){let{a:t,b:n,transposeA:r=!1,transposeB:i=!1,bias:o,activation:a="linear",preluActivationWeights:s,leakyreluAlpha:l=.2}=e;if(!1===v1(jY.state.gradientDepth,a)){let e=m0(t,n,r,i);return null!=o&&(e=JQ(e,o)),y1(e,a,s,l)}let u=KY(t,"a","fused matMul"),c=KY(n,"b","fused matMul");[u,c]=OY(u,c);const h=r?u.shape[u.rank-2]:u.shape[u.rank-1],d=i?c.shape[c.rank-1]:c.shape[c.rank-2],p=r?u.shape[u.rank-1]:u.shape[u.rank-2],f=i?c.shape[c.rank-2]:c.shape[c.rank-1],g=u.shape.slice(0,-2),m=c.shape.slice(0,-2),y=DG(g),v=DG(m);RG(h===d,(()=>`Error in fused matMul: inner shapes (${h}) and (${d}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${r} and transposeB=${i} must match.`));const b=kJ(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,f]),x=xZ(u,r?[y,h,p]:[y,p,h]),w=xZ(c,i?[v,f,d]:[v,d,f]);let k,S;null!=o&&(k=KY(o,"bias","fused matMul"),[k]=OY(k,u),kJ(b,k.shape)),null!=s&&(S=KY(s,"prelu weights","fused matMul"));const C=(e,t)=>{const[n,s,l,u]=t,c=g1(xZ(e,l.shape),l,a);let h,d;if(r||i?!r&&i?(h=m0(c,s,!1,!1),d=m0(c,n,!0,!1)):r&&!i?(h=m0(s,c,!1,!0),d=m0(n,c,!1,!1)):(h=m0(s,c,!0,!0),d=m0(c,n,!0,!0)):(h=m0(c,s,!1,!0),d=m0(n,c,!0,!1)),null!=o){return[h,d,m1(u,c)]}return[h,d]},I={a:x,b:w,bias:k,preluActivationWeights:S},E={transposeA:r,transposeB:i,activation:a,leakyreluAlpha:l};if(null==o){const e=oJ(((e,t,n)=>{const r=jY.runKernel(IX,I,E);return n([e,t,r]),{value:xZ(r,b),gradFunc:C}}));return e(x,w)}{const e=oJ(((e,t,n,r)=>{const i=jY.runKernel(IX,I,E);return r([e,t,i,n]),{value:xZ(i,b),gradFunc:C}}));return e(x,w,k)}}});const S1=YY({cropAndResize_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=KY(e,"image","cropAndResize"),s=KY(t,"boxes","cropAndResize","float32"),l=KY(n,"boxInd","cropAndResize","int32"),u=s.shape[0];RG(4===a.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`)),RG(2===s.rank&&4===s.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`)),RG(1===l.rank&&l.shape[0]===u,(()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`)),RG(2===r.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`)),RG(r[0]>=1&&r[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${r}`)),RG("bilinear"===i||"nearest"===i,(()=>`method must be bilinear or nearest, but was ${i}`));const c={image:a,boxes:s,boxInd:l},h={method:i,extrapolationValue:o,cropSize:r};return jY.runKernel(nq,c,h)}});const C1=YY({flipLeftRight_:function(e){const t=KY(e,"image","flipLeftRight","float32");RG(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const n={image:t};return jY.runKernel(Cq,n,{})}});const I1=YY({grayscaleToRGB_:function(e){const t=KY(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];RG(t.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`)),RG(1===r,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`));const i=new Array(t.rank);return i.fill(1,0,n),i[n]=3,KZ(t,i)}});const E1=YY({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(((e,t)=>KY(e,`tensors${t}`,"einsum"))),o={equation:e};return jY.runKernel(fq,i,o)}});const T1=YY({rgbToGrayscale_:function(e){const t=KY(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];RG(t.rank>=2,(()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`)),RG(3===r,(()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`));const i=t.dtype,o=XQ(t,"float32"),a=Z0([.2989,.587,.114]);let s;switch(t.rank){case 2:s=E1("ij,j->i",o,a);break;case 3:s=E1("ijk,k->ij",o,a);break;case 4:s=E1("ijkl,l->ijk",o,a);break;case 5:s=E1("ijklm,m->ijkl",o,a);break;case 6:s=E1("ijklmn,n->ijklm",o,a);break;default:throw new Error("Not a valid tensor rank.")}return s=qZ(s,-1),XQ(s,i)}});const _1=YY({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const i=KY(e,"image","rotateWithOffset","float32");RG(4===i.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`));const o={image:i},a={radians:t,fillValue:n,center:r};return jY.runKernel(CX,o,a)}});function N1(e,t,n,r,i,o){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==o&&(o=0);const a=e.shape[0];return n=Math.min(n,a),RG(0<=r&&r<=1,(()=>`iouThreshold must be in [0, 1], but was '${r}'`)),RG(2===e.rank,(()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`)),RG(4===e.shape[1],(()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`)),RG(1===t.rank,(()=>"scores must be a 1D tensor")),RG(t.shape[0]===a,(()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${t.shape[0]}`)),RG(0<=o&&o<=1,(()=>`softNmsSigma must be in [0, 1], but was '${o}'`)),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}const A1=YY({nonMaxSuppression_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=KY(e,"boxes","nonMaxSuppression","float32"),a=KY(t,"scores","nonMaxSuppression","float32"),s=N1(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return jY.runKernel(hK,{boxes:o,scores:a},l)}});function O1(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,i=e.length,o=0,a=!1;for(;r<i;){o=r+(i-r>>>1);const s=n(t,e[o]);s>0?r=o+1:(i=o,a=!s)}return a?r:-r-1}(e,t,n||R1)}(e,t,n),i=r<0?-(r+1):r;e.splice(i,0,t)}function R1(e,t){return e>t?1:e<t?-1:0}function $1(e,t,n,r,i){return M1(e,t,n,r,i,0)}function P1(e,t,n,r,i,o){return M1(e,t,n,r,i,0,!1,o,!0)}function D1(e,t,n,r,i,o){return M1(e,t,n,r,i,o,!0)}function M1(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const u=[];for(let m=0;m<t.length;m++)t[m]>i&&u.push({score:t[m],boxIndex:m,suppressBeginIndex:0});u.sort(j1);const c=o>0?-.5/o:0,h=[],d=[];for(;h.length<n&&u.length>0;){const t=u.pop(),{score:n,boxIndex:o,suppressBeginIndex:a}=t;if(n<i)break;let s=!1;for(let l=h.length-1;l>=a;--l){const n=F1(e,o,h[l]);if(n>=r){s=!0;break}if(t.score=t.score*L1(r,c,n),t.score<=i)break}t.suppressBeginIndex=h.length,s||(t.score===n?(h.push(o),d.push(t.score)):t.score>i&&O1(u,t,j1))}const p=h.length,f=n-p;s&&f>0&&(h.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const g={selectedIndices:h};return a&&(g.selectedScores=d),l&&(g.validOutputs=p),g}function F1(e,t,n){const r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),p=(s-o)*(l-a),f=(h-u)*(d-c);if(p<=0||f<=0)return 0;const g=Math.max(o,u),m=Math.max(a,c),y=Math.min(s,h),v=Math.min(l,d),b=Math.max(y-g,0)*Math.max(v-m,0);return b/(p+f-b)}function L1(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function j1(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const z1=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=KY(e,"boxes","nonMaxSuppressionAsync"),a=KY(t,"scores","nonMaxSuppressionAsync"),s=N1(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const l=await Promise.all([o.data(),a.data()]),u=l[0],c=l[1],{selectedIndices:h}=$1(u,c,n,r,i);return o!==e&&o.dispose(),a!==t&&a.dispose(),Z0(h,"int32")};const B1=YY({nonMaxSuppressionWithScore_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=KY(e,"boxes","nonMaxSuppression"),s=KY(t,"scores","nonMaxSuppression"),l=N1(a,s,n,r,i,o);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma;const u={boxes:a,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o},h=jY.runKernel(pK,u,c);return{selectedIndices:h[0],selectedScores:h[1]}}});const W1=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=KY(e,"boxes","nonMaxSuppressionAsync"),s=KY(t,"scores","nonMaxSuppressionAsync"),l=N1(a,s,n,r,i,o);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma;const u=await Promise.all([a.data(),s.data()]),c=u[0],h=u[1],{selectedIndices:d,selectedScores:p}=D1(c,h,n,r,i,o);return a!==e&&a.dispose(),s!==t&&s.dispose(),{selectedIndices:Z0(d,"int32"),selectedScores:Z0(p)}};const U1=YY({nonMaxSuppressionPadded_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=KY(e,"boxes","nonMaxSuppression"),s=KY(t,"scores","nonMaxSuppression"),l=N1(a,s,n,r,i,null),u={boxes:a,scores:s},c={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:o},h=jY.runKernel(dK,u,c);return{selectedIndices:h[0],validOutputs:h[1]}}});const V1=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=KY(e,"boxes","nonMaxSuppressionAsync"),s=KY(t,"scores","nonMaxSuppressionAsync"),l=N1(a,s,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,h=l.scoreThreshold,[d,p]=await Promise.all([a.data(),s.data()]),{selectedIndices:f,validOutputs:g}=P1(d,p,u,c,h,o);return a!==e&&a.dispose(),s!==t&&s.dispose(),{selectedIndices:Z0(f,"int32"),validOutputs:aJ(g,"int32")}};const G1=YY({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=KY(e,"images","resizeBilinear");RG(3===i.rank||4===i.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`)),RG(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),RG(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let o=i,a=!1;3===i.rank&&(a=!0,o=xZ(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=t,s={images:o},l={alignCorners:n,halfPixelCenters:r,size:t},u=jY.runKernel(OK,s,l);return a?xZ(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const H1=YY({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=KY(e,"images","resizeNearestNeighbor");RG(3===i.rank||4===i.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`)),RG(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),RG("float32"===i.dtype||"int32"===i.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),RG(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let o=i,a=!1;3===i.rank&&(a=!0,o=xZ(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=t,s={images:o},l={alignCorners:n,halfPixelCenters:r,size:t},u=jY.runKernel(NK,s,l);return a?xZ(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const q1=YY({bincount_:function(e,t,n){const r=KY(e,"x","bincount"),i=KY(t,"weights","bincount");RG("int32"===r.dtype,(()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`)),RG(n>=0,(()=>`size must be non-negative, but got ${n}.`)),RG(i.size===r.size||0===i.size,(()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`));const o={x:r,weights:i},a={size:n};return jY.runKernel(FH,o,a)}});const K1=YY({lessEqual_:function(e,t){let n=KY(e,"a","lessEqual","string_or_numeric"),r=KY(t,"b","lessEqual","string_or_numeric");[n,r]=OY(n,r),kJ(n.shape,r.shape);const i={a:n,b:r};return jY.runKernel(zq,i)}});const X1=YY({round_:function(e){const t={x:KY(e,"x","round")};return jY.runKernel(DK,t)}});const Y1=YY({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const i=KY(e,"image","threshold"),o=i.shape[0]*i.shape[1];let a,s,l,u,c=tJ(Z0([r]),255);if(RG(3===i.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`)),RG(3===i.shape[2]||1===i.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`)),RG("int32"===i.dtype||"float32"===i.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`)),RG("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===i.shape[2]){[a,s,l]=X0(i,[1,1,1],-1);const e=tJ(a,.2989),t=tJ(s,.587),n=tJ(l,.114);u=JQ(JQ(e,t),n)}else u=e;if("otsu"===t){c=function(e,t){let n,r,i,o,a,s,l=Z0([-1]),u=Z0([0]),c=Z0([0]);for(let h=0;h<e.size-1;h++){n=W0(e,0,h+1),r=W0(e,h+1),a=eJ(i0(n),t),s=eJ(i0(r),t);const d=i0(tJ(n,M0(0,n.size)));i=eJ(d,i0(n));const p=fJ(r.shape,n.size),f=JQ(M0(0,r.size),p),g=tJ(r,f);o=eJ(i0(g),i0(r));const m=yJ(i,o),y=yJ(i,o),v=tJ(a,s);c=tJ(tJ(v,m),y);const b=JZ(c,u);u=r1(b,c,u),l=r1(b,Z0([h]),l)}return l}(q1(XQ(X1(u),"int32"),ZY([]),256),o)}const h=n?K1(u,c):JZ(u,c);return XQ(tJ(h,255),"int32")}});const Q1=YY({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;const a=KY(e,"image","transform","float32"),s=KY(t,"transforms","transform","float32");RG(4===a.rank,(()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`)),RG(2===s.rank&&(s.shape[0]===a.shape[0]||1===s.shape[0])&&8===s.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),RG(null==o||2===o.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`));const l={image:a,transforms:s},u={interpolation:n,fillMode:r,fillValue:i,outputShape:o};return jY.runKernel(mX,l,u)}});const J1=YY({less_:function(e,t){let n=KY(e,"a","less","string_or_numeric"),r=KY(t,"b","less","string_or_numeric");[n,r]=OY(n,r),kJ(n.shape,r.shape);const i={a:n,b:r};return jY.runKernel(jq,i)}});const Z1=YY({bandPart_:function(e,t,n){const r=KY(e,"a","bandPart");RG(r.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`));const i=r.shape,[o,a]=r.shape.slice(-2);let s,l;"number"===typeof t?(RG(t%1===0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),RG(t<=o,(()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${o}).`)),s=KY(t<0?o:t,"numLower","bandPart")):(RG("int32"===t.dtype,(()=>"bandPart(): numLower's dtype must be an int32.")),s=r1(J1(t,0),o,w0(t,o))),"number"===typeof n?(RG(n%1===0,(()=>`bandPart(): numUpper must be an integer, got ${n}.`)),RG(n<=a,(()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`)),l=KY(n<0?a:n,"numUpper","bandPart")):(RG("int32"===n.dtype,(()=>"bandPart(): numUpper's dtype must be an int32.")),l=r1(J1(n,0),a,w0(n,a)));const u=xZ(M0(0,o,1,"int32"),[-1,1]),c=M0(0,a,1,"int32"),h=yJ(u,c),d=g0(K1(h,s),ZZ(h,S0(l))),p=E0([o,a],r.dtype);return xZ(Q0(n1(xZ(r,[-1,o,a])).map((e=>r1(d,e,p)))),i)}});function e2(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return bJ(e);if(1!==e.rank&&null===n)return e2(xZ(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return i0(bJ(e),n);if(t===1/0)return r0(bJ(e),n);if(t===-1/0)return x0(bJ(e),n);if("euclidean"===t||2===t)return nJ(i0(mJ(bJ(e),aJ(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&2===n.length){if(1===t)return r0(i0(bJ(e),n[0]),n[1]-1);if(t===1/0)return r0(i0(bJ(e),n[1]),n[0]);if(t===-1/0)return x0(i0(bJ(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return nJ(i0(rJ(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const t2=YY({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=e2(e=KY(e,"x","norm"),t,n);let o=i.shape;if(r){const t=WG(n,e.shape);o=u0(i.shape,t)}return xZ(i,o)}});const n2=YY({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,RG(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)RG(e[t].shape[0]===n,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`))}else t=!0,e=X0(e,e.shape[0],0).map((e=>Y0(e,[0])));RG(e.length<=e[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`));const n=[],r=e;for(let i=0;i<e.length;++i)n.push(jY.tidy((()=>{let e=r[i];if(i>0)for(let t=0;t<i;++t){const r=tJ(i0(tJ(n[t],e)),n[t]);e=yJ(e,r)}return eJ(e,t2(e,"euclidean"))})));return t?Q0(n,0):n}});function r2(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return jY.tidy((()=>{RG(2===e.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`));const n=e.shape[0],r=e.shape[1];let i=XZ(n),o=YQ(e);const a=e1([[1]],[1,1]);let s=YQ(a);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=o,l=s,u=i;[s,o,i]=jY.tidy((()=>{const t=W0(o,[e,e],[n-e,1]),l=t2(t),u=W0(o,[e,e],[1,1]),c=r1(JZ(u,0),e1([[-1]]),e1([[1]])),h=yJ(u,tJ(c,l)),d=eJ(t,h);s=1===d.shape[0]?YQ(a):NZ([a,W0(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const p=S0(eJ(m0(c,h),l)),f=W0(o,[e,0],[n-e,r]),g=tJ(p,s),m=a1(s);if(0===e)o=yJ(f,m0(g,m0(m,f)));else{const t=yJ(f,m0(g,m0(m,f)));o=NZ([W0(o,[0,0],[e,r]),t],0)}const y=a1(g),v=W0(i,[0,e],[n,i.shape[1]-e]);if(0===e)i=yJ(v,m0(m0(v,s),y));else{const t=yJ(v,m0(m0(v,s),y));i=NZ([W0(i,[0,0],[n,e]),t],1)}return[s,o,i]})),oQ([t,l,u])}return!t&&n>r&&(i=W0(i,[0,0],[n,r]),o=W0(o,[0,0],[r,r])),[i,o]}))}const i2=YY({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(RG(e.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`)),2===e.rank)return r2(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=n1(xZ(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],o=[];r.forEach((e=>{const[n,r]=r2(e,t);i.push(n),o.push(r)}));return[xZ(Q0(i,0),e.shape),xZ(Q0(o,0),e.shape)]}}});var o2;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(o2||(o2={}));const a2=YY({squaredDifference_:function(e,t){let n=KY(e,"a","squaredDifference"),r=KY(t,"b","squaredDifference");[n,r]=OY(n,r),kJ(n.shape,r.shape);const i={a:n,b:r};return jY.runKernel(iX,i,{})}});const s2={flipLeftRight:C1,grayscaleToRGB:I1,resizeNearestNeighbor:H1,resizeBilinear:G1,rgbToGrayscale:T1,rotateWithOffset:_1,cropAndResize:S1,nonMaxSuppression:A1,nonMaxSuppressionAsync:z1,nonMaxSuppressionWithScore:B1,nonMaxSuppressionWithScoreAsync:W1,nonMaxSuppressionPadded:U1,nonMaxSuppressionPaddedAsync:V1,threshold:Y1,transform:Q1},l2={bandPart:Z1,gramSchmidt:n2,qr:i2};const u2=class{static sgd(e){return new IJ(e)}static momentum(e,t){return new EJ(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}static rmsprop(e){return new TJ(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}static adam(){return new vJ(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}static adadelta(){return new pJ(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}static adamax(){return new CJ(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}static adagrad(e){return new gJ(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}},c2="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function h2(){return new Promise((e=>c2((()=>e()))))}function d2(e,t){const n=e[0].length;e.forEach(((e,t)=>{RG(e.length===n,(()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`))})),RG(t>=0&&t<n,(()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`));const r=e[0];e.forEach(((e,i)=>{for(let o=0;o<n;o++)RG(o===t||e[o]===r[o],(()=>`Error in concat${n}D: Shape of tensors[${i}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`))}))}function p2(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var f2;function g2(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const o=n[i],a=r[r.length-n.length+i],s=r[a];if(o>=0)if(s>=0){if(s!==o)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${i+e}] = ${o} but shape[${i+e}] = ${s}`)}else r[a]=o}return r}function m2(e){const t={FIRST_DIM_SIZE:f2.FIRST_DIM_SIZE,VALUE_ROWIDS:f2.VALUE_ROWIDS,ROW_LENGTHS:f2.ROW_LENGTHS,ROW_SPLITS:f2.ROW_SPLITS,ROW_LIMITS:f2.ROW_LIMITS,ROW_STARTS:f2.ROW_STARTS},n=[];for(const r of e){if(!(r in t))break;n.push(t[r])}return n}function y2(e){return 0===e.length?0:e[0]===f2.FIRST_DIM_SIZE?e.length-1:e.length}function v2(e,t){if(null==e||null==t)return;const n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const n=e[i],r=t[i+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${i-e.length}] = ${n} but ragged tensor input.flatValues.shape[${i-e.length}] = ${r}`)}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(f2||(f2={}));const b2=30;function x2(e){return e<=b2?e:JG(e,Math.floor(Math.sqrt(e)))}function w2(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function k2(e,t,n){let r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])r=r.concat(t.slice(0)),r.push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);const n=t.length;for(let i=0;i<n;++i)r=r.concat([e[i+1]/t[i],t[i]]);r=r.concat(e.slice(n+1))}return r}function S2(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{const r=[],i=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?i.push(n):r.push(n);n.push(...r),n.push(0),n.push(...i)}return n}function C2(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(let o=1;o<e.length;++o)o<=t.length?r?i.push(t[o-1]*e[o]):i.push(e[o]/t[o-1]):i.push(e[o]);return i}function I2(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function E2(e,t,n){const r=e.slice(0,1);for(let i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}function T2(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===DG(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const i=t.shape,o=i[i.length-1];let a=1;for(let h=0;h<i.length-1;++h)a*=i[h];const s=e.shape,l=i.slice();l.pop();let u=1;for(let h=o;h<n;++h)u*=s[h],l.push(s[h]);const c=[...ZG(e.shape).map((e=>e/u)),1].slice(0,o);return[l,a,u,c]}function _2(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(o+` update.rank < ${i}. `);if(e.length<r+(n.rank-i))throw new Error(o+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+e.length-r)throw new Error(o+" update.rank != "+(i+e.length-r));for(let a=0;a<i;++a)if(n.shape[a]!==t.shape[a])throw new Error(o+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${t.shape[a]}).`);for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==e[a+r])throw new Error(o+` updates.shape[${a+i}] (${n.shape[a+i]}) != shape[${a+i}] (${e[a+i]})`)}function N2(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}_2(n,t,e)}function A2(e,t,n){const r=t.shape.length,i=r>1?t.shape[r-1]:1,o=n.length;let a=1;for(let l=i;l<o;++l)a*=n[l];const s=i<1?1:i;return{sliceRank:i,numUpdates:DG(t.shape)/s,sliceSize:a,strides:[...ZG(n.slice(0,i)),1],outputSize:DG(n)}}const O2=1.7580993408473768,R2=1.0507009873554805,$2=.3275911,P2=.254829592,D2=-.284496736,M2=1.421413741,F2=-1.453152027,L2=1.061405429;function j2(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function z2(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function B2(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function W2(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function U2(e,t){return{real:e[2*t],imag:e[2*t+1]}}function V2(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function G2(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let i=0;i<Math.ceil(e/2);i++){const o=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}function H2(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const q2="->",K2=/->/g,X2=",",Y2="...";function Q2(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(K2,"").length)/q2.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${q2}").`);const[r,i]=e.split(q2);RG(-1===r.indexOf(Y2),(()=>`The ellipsis notation ("${Y2}") is not supported yet.`));const o=r.split(X2),a=o.length;if(t!==a)throw new Error(`Expected ${a} input tensors, received ${t}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let h=0;h<i.length;++h){const e=i[h];if(!o.some((t=>-1!==t.indexOf(e))))throw new Error(`Output subscripts contain the label ${e} not present in the input subscripts.`);-1===s.indexOf(e)&&s.push(e)}for(let h=0;h<r.length;++h){const e=r[h];-1===s.indexOf(e)&&e!==X2&&s.push(e)}const l=new Array(o.length);for(let h=0;h<a;++h){if(new Set(o[h].split("")).size!==o[h].length)throw new Error(`Found duplicate axes in input component ${o[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let e=0;e<o[h].length;++e)l[h].push(s.indexOf(o[h][e]))}const u=s.length,c=[];for(let h=i.length;h<u;++h)c.push(h);return{allDims:s,summedDims:c,idDims:l}}function J2(e,t){let n=new Array(e);n.fill(-1);for(let i=0;i<t.length;++i)n[t[i]]=i;const r=[];for(let i=0;i<e;++i)-1===n[i]&&r.push(i);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function Z2(e,t,n){const r=new Array(e);for(let i=0;i<n.length;++i){const e=n[i].shape;for(let n=0;n<t[i].length;++n)void 0===r[t[i][n]]?r[t[i][n]]=e[n]:RG(r[t[i][n]]===e[n],(()=>`Expected dimension ${r[t[i][n]]} at axis ${n} of input shaped ${JSON.stringify(e)}, but got dimension ${e[n]}`))}}function e3(e,t){const n=e,r=[];let i=0;0===e.length&&n.push(-1),i=e.length+1;for(let a=0;a<i;++a)r.push([]);const o=[];for(let a=0;a<n.length;++a){const e=n3(t,n[a]);for(const t of e)-1===o.indexOf(t)&&(r[a].push(t),o.push(t))}return{path:n,steps:r}}function t3(e){return e.every(((e,t)=>e===t))}function n3(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function r3(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)RG(e.shape[n]%t===0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{const i=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);RG(i<=1,(()=>"There should be only one negative value in split array."));const o=t.indexOf(-1);if(-1!==o){const r=t.reduce(((e,t)=>t>0?e+t:e));t[o]=e.shape[n]-r}RG(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}function i3(e){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${e}`}function o3(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function a3(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function s3(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function l3(e,t){return`size ${e} must be non-negative, not ${t}`}function u3(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function c3(e,t){return`Input to reshape is a SparseTensor with ${DG(e)}\n  dense values, but the requested shape requires a multiple of ${DG(t)}. inputShape=${e} outputShape= ${t}`}function h3(e,t){return`Input to reshape is a tensor with ${DG(e)} dense values, but the requested shape has ${DG(t)}. inputShape=${e} outputShape=${t}`}function d3(){return"segment ids must be >= 0"}function p3(){return"segment ids are not increasing"}function f3(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function g3(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}function m3(e,t){let n,r=!1;for(e<=b2?(n=e,r=!0):n=JG(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=JG(e,n+1);return n}function y3(e,t,n){const r=[],i=e.length;for(let o=0;o<i;o++)o!==t?r.push(e[o]):r.push(n);return r}function v3(e,t,n,r){const i=t.shape.length,o=e.shape.length;if(0!==r&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>o)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${o}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let h=0;h<r;++h)if(e.shape[h]!==t.shape[h])throw new Error(`x.shape[${h}]: ${e.shape[h]} should be equal to indices.shape[${h}]: ${t.shape[h]}.`);const a=e.shape[n],s=[];let l=1,u=1,c=1;for(let h=0;h<r;++h)s.push(e.shape[h]),l*=e.shape[h];for(let h=r;h<n;h++)s.push(e.shape[h]),u*=e.shape[h];for(let h=r;h<i;h++)s.push(t.shape[h]);for(let h=n+1;h<o;h++)s.push(e.shape[h]),c*=e.shape[h];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:a,outputShape:s}}function b3(e){try{return e.map((e=>rY(e)))}catch(Yve){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${Yve}`)}}function x3(e){return e.map((e=>nY(e)))}function w3(e,t){const n=[];for(let o=0;o<t.length;o++)t[o]&&n.push(o);const r=KQ(e,"int32"),i=KQ([n.length,e.length],"int32");for(let o=0;o<n.length;o++){const t=r.indexToLoc(n[o]),a=o*e.length;i.values.set(t,a)}return i.toTensor()}!function(){for(const e of _J)hJ(e)}();const k3={kernelName:yH,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tJ(e,f1(XQ(n,"float32"),-1))}}},S3={kernelName:vH,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=rJ(XQ(n,"float32")),r=nJ(yJ(aJ(1),t));return S0(eJ(e,r))}}}},C3={kernelName:bH,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=nJ(yJ(rJ(XQ(n,"float32")),1));return eJ(e,t)}}}},I3={kernelName:xH,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=kJ(n.shape,r.shape);return{a:()=>{let t=e;const r=wJ(n.shape,i);return r.length>0&&(t=i0(t,r)),xZ(t,n.shape)},b:()=>{let t=e;const n=wJ(r.shape,i);return n.length>0&&(t=i0(t,n)),xZ(t,r.shape)}}}},E3={kernelName:wH,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach(((t,r)=>{n[r]=()=>e.clone()})),n}},T3={kernelName:CH,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>iJ(n)}}},_3={kernelName:IH,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>iJ(n)}}},N3={kernelName:EH,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eJ(e,nJ(yJ(aJ(1),rJ(XQ(n,"float32")))))}}},A3={kernelName:TH,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=nJ(JQ(aJ(1),rJ(XQ(n,"float32"))));return eJ(e,t)}}}},O3={kernelName:AH,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=kJ(n.shape,r.shape);return{a:()=>{const t=JQ(rJ(n),rJ(r));let o=tJ(e,eJ(r,t));const a=wJ(n.shape,i);return a.length>0&&(o=i0(o,a)),xZ(o,n.shape)},b:()=>{const t=JQ(rJ(n),rJ(r));let o=S0(tJ(e,eJ(n,t)));const a=wJ(r.shape,i);return a.length>0&&(o=i0(o,a)),xZ(o,r.shape)}}}},R3={kernelName:_H,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eJ(e,JQ(rJ(XQ(n,"float32")),1))}}},$3={kernelName:NH,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eJ(e,yJ(aJ(1),rJ(XQ(n,"float32"))))}}};const P3=YY({avgPool3dGrad_:function(e,t,n,r,i,o){const a=KY(e,"dy","avgPool3dGrad"),s=KY(t,"input","avgPool3dGrad");let l=a,u=s,c=!1;4===s.rank&&(c=!0,l=xZ(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),u=xZ(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),RG(5===l.rank,(()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`)),RG(5===u.rank,(()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`)),bZ("avgPool3dGrad",i,o);const h={dy:l,input:u},d={filterSize:n,strides:r,pad:i,dimRoundingMode:o},p=jY.runKernel(PH,h,d);return c?xZ(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),D3={kernelName:$H,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:o,pad:a,dimRoundingMode:s}=n;return{x:()=>P3(e,r,i,o,a,s)}}};const M3=YY({avgPoolGrad_:function(e,t,n,r,i){const o=KY(e,"dy","avgPoolGrad"),a=KY(t,"input","avgPoolGrad");RG(a.rank===o.rank,(()=>`Rank of input (${a.rank}) does not match rank of dy (${o.rank})`));let s=a,l=o,u=!1;3===a.rank&&(u=!0,s=xZ(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=xZ(o,[1,o.shape[0],o.shape[1],o.shape[2]])),RG(4===l.rank,(()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`)),RG(4===s.rank,(()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${s.rank}.`));const c={dy:l,input:s},h={filterSize:n,strides:r,pad:i},d=jY.runKernel(RH,c,h);return u?xZ(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),F3={kernelName:OH,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:o,pad:a}=n;return{x:()=>M3(e,r,i,o,a)}}},L3={kernelName:DH,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,i]=t,{transposeA:o,transposeB:a}=n;return o||a?!o&&a?{a:()=>m0(e,i,!1,!1),b:()=>m0(e,r,!0,!1)}:o&&!a?{a:()=>m0(i,e,!1,!0),b:()=>m0(r,e,!1,!1)}:{a:()=>m0(i,e,!0,!0),b:()=>m0(e,r,!0,!0)}:{a:()=>m0(e,i,!1,!0),b:()=>m0(r,e,!0,!1)}}};const j3=YY({spaceToBatchND_:function(e,t,n){const r=KY(e,"x","spaceToBatchND");RG(r.rank>=1+t.length,(()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`)),RG(n.length===t.length,(()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`)),RG(r.shape.reduce(((e,r,i)=>i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]===0:e),!0),(()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`));const i={x:r},o={blockShape:t,paddings:n};return jY.runKernel(YK,i,o)}}),z3={kernelName:MH,gradFunc:(e,t,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>j3(e,r,i)}}},B3={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const r=n,i=r.inputShape,o=r.shape,a=Array.from(o);for(let l=i.length-1;l>=0;l--)if(i[l]===o[l])a[l]=1;else if(1!==i[l])throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${o}].`);const s=[];for(let l=0;l<a.length;l++)a[l]>1&&s.push(l);return{x:()=>i0(e,s,!0)}}},W3={kernelName:zH,gradFunc:e=>({x:()=>e.clone()})},U3={kernelName:BH,gradFunc:e=>({x:()=>iJ(e)})},V3={kernelName:WH,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:i,clipValueMax:o}=n;return{x:()=>r1(g0(ZZ(r,i),K1(r,o)),e,iJ(e))}}},G3={kernelName:VH,inputsToSave:["x"],gradFunc:k3.gradFunc},H3={kernelName:GH,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map((e=>e.shape)),{axis:i}=n,o=WG(i,t[0].shape)[0],a=r.map((e=>e[o]));return X0(e,a,o).map((e=>()=>e))}},q3={kernelName:HH,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{dilations:o,strides:a,pad:s,dataFormat:l}=n;return RG(gZ(o),(()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`)),{x:()=>MZ(r.shape,e,i,a,s,l),filter:()=>d1(r,e,i.shape,a,s,l)}}},K3={kernelName:KH,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{strides:o,pad:a,dataFormat:s,dimRoundingMode:l}=n;return{dy:()=>PZ(e,i,o,a,s,1,l),filter:()=>d1(e,r,i.shape,o,a,s,l)}}};const X3=YY({conv3DBackpropFilter_:function(e,t,n,r,i){let o=e;4===e.rank&&(o=xZ(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let a=t;4===a.rank&&(a=xZ(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),RG(5===o.rank,(()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${o.shape}.`)),RG(5===a.rank,(()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`)),RG(5===n.length,(()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`)),RG(o.shape[4]===n[3],(()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must match input depth in filter (${n[3]}.`)),RG(a.shape[4]===n[4],(()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`));const s={x:o,dy:a},l={strides:r,pad:i,filterShape:n};return jY.runKernel(YH,s,l)}}),Y3={kernelName:XH,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:o}=n;RG(gZ(r),(()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`));const[a,s]=t;return{x:()=>jZ(a.shape,e,s,i,o),filter:()=>X3(a,e,s.shape,i,o)}}};const Q3=YY({sin_:function(e){const t={x:KY(e,"x","sin","float32")};return jY.runKernel(UK,t)}}),J3={kernelName:JH,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tJ(S0(Q3(XQ(n,"float32"))),e)}}};const Z3=YY({sinh_:function(e){const t={x:KY(e,"x","sinh")};return jY.runKernel(VK,t)}}),e4={kernelName:ZH,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tJ(Z3(XQ(n,"float32")),e)}}};const t4=YY({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i={x:KY(e,"x","cumsum")},o={axis:t,exclusive:n,reverse:r};return jY.runKernel(tq,i,o)}}),n4={kernelName:tq,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i,exclusive:o,reverse:a}=n;return{x:()=>{const t=h0([i],r.rank);let n=t4(e,i,o,!a);return null!=t&&(n=a1(n,t)),n}}}},r4={kernelName:oq,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:o,dimRoundingMode:a}=n,s=null==r?[1,1]:r;RG(gZ(s),(()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`));const[l,u]=t;return RG(4===l.rank,(()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`)),RG(4===u.rank,(()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`)),RG(l.shape[3]===u.shape[2],(()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`)),RG(mZ(i,s),(()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${s}'.`)),bZ("depthwiseConv2d",o,a),{x:()=>w1(l.shape,e,u,i,o,s,a),filter:()=>x1(l,e,u.shape,i,o,s,a)}}},i4={kernelName:uq,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,o={x:r,filter:i,dy:e},a={x:r,filter:i,dy:e};return{x:()=>jY.runKernel(cq,o,n),filter:()=>jY.runKernel(hq,a,n)}}},o4={kernelName:gq,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>jY.runKernel(mq,r)}}},a4={kernelName:yq,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=tJ(HZ(S0(rJ(n))),2/Math.sqrt(Math.PI));return{x:()=>tJ(e,r)}}},s4={kernelName:bq,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tJ(e,n)}}},l4={kernelName:xq,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>xZ(e,n.shape)}}},u4={kernelName:wq,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tJ(e,HZ(n))}}},c4={kernelName:Iq,gradFunc:e=>({x:()=>iJ(e)})},h4={kernelName:Eq,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=kJ(n.shape,r.shape);return{a:()=>{const t=eJ(e,XQ(r,"float32")),o=wJ(n.shape,i);return o.length>0?xZ(i0(t,o),n.shape):t},b:()=>{let t=tJ(e,XQ(n,"float32"));const o=wJ(r.shape,i);o.length>0&&(t=xZ(i0(t,o),r.shape));const a=rJ(r);return S0(eJ(t,XQ(a,"float32")))}}}};const d4=YY({rsqrt_:function(e){const t={x:KY(e,"x","rsqrt","float32")};return jY.runKernel(MK,t)}}),p4={kernelName:Tq,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[i,o,a,s]=t,l=null==s?aJ(1):s,u=wJ(o.shape,i.shape),c=[];if(1===o.rank){for(let e=0;e<i.shape.length-1;++e)c.push(i.shape[e]);c.push(1)}const h=yJ(i,o),d=tJ(e,l),p=d4(JQ(a,aJ(r))),f=tJ(tJ(tJ(p,p),p),aJ(-.5));return{x:()=>1===o.rank?xZ(tJ(tJ(e,KZ(xZ(p,[1,1,1,o.shape[0]]),c)),l),i.shape):xZ(tJ(tJ(e,p),l),i.shape),mean:()=>{let e=tJ(tJ(p,aJ(-1)),d);return 1===o.rank&&(e=i0(e,u)),xZ(e,o.shape)},variance:()=>{let e=tJ(tJ(f,h),d);return 1===o.rank&&(e=i0(e,u)),xZ(e,o.shape)},scale:()=>{const t=tJ(h,p);let n=tJ(e,t);return 1===o.rank&&(n=i0(n,u)),xZ(n,o.shape)},offset:()=>{let t=e;return 1===o.rank&&(t=i0(t,u)),xZ(t,o.shape)}}}};const f4=YY({unsortedSegmentSum_:function(e,t,n){const r=KY(e,"x","unsortedSegmentSum"),i=KY(t,"segmentIds","unsortedSegmentSum","int32");RG(FG(n),(()=>"numSegments must be of dtype int"));const o={x:r,segmentIds:i},a={numSegments:n};return jY.runKernel(xX,o,a)}}),g4={kernelName:_q,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,i]=t,{axis:o,batchDims:a}=n,s=WG(o,r.shape)[0],l=(e,t,n)=>()=>{const r=e.shape,i=t.size,a=r.slice(0,s),l=a.length,u=r.slice(o,r.length).slice(1),c=u.length,h=m4(0,l),d=m4(l+1,l+1+c),p=y4([a,[i],u]),f=xZ(n,p),g=xZ(t,[i]),m=y4([[l],h,d]),y=a1(f,m);let v=f4(y,g,e.shape[s]);const b=d0(m);return v=a1(v,b),v};if(1===a){const t=r.shape[0],n=r.split(t,0),o=()=>{const t=Q0(n.map(((t,n)=>l(t,i.slice(n,1),e.slice(n,1))())));return t.reshape(r.shape)};return{x:o,indices:()=>i}}return{x:l(r,i,e),indices:()=>i}}};function m4(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function y4(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const v4={kernelName:Oq,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>iJ(n),b:()=>iJ(r)}}},b4={kernelName:Rq,gradFunc:e=>({x:()=>XQ(e,"float32")})},x4={kernelName:Dq,gradFunc:e=>({x:()=>iJ(e)})},w4={kernelName:Mq,gradFunc:e=>({x:()=>iJ(e)})},k4={kernelName:Fq,gradFunc:e=>({x:()=>iJ(e)})},S4={kernelName:Lq,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:i}=n,o=JZ(r,0);return{x:()=>r1(o,e,tJ(e,i))}}},C4={kernelName:Uq,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eJ(e,JQ(n,1))}}},I4={kernelName:Wq,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eJ(e,XQ(n,"float32"))}}},E4={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;return{logits:()=>{const t=HZ(r);return yJ(e,tJ(i0(e,i,!0),t))}}}};const T4=YY({localResponseNormalizationBackprop_:function(e,t,n){const r={x:e,y:t,dy:n},i={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return jY.runKernel(Kq,r,i)}}),_4={kernelName:qq,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{depthRadius:o,bias:a,alpha:s,beta:l}=n;return{x:()=>T4(r,i,e,o,a,s,l)}}};function N4(e,t,n,r){return t.rank<n.rank&&(t=xZ(t,u0(t.shape,r))),e.rank<n.rank&&(e=xZ(e,u0(e.shape,r))),{x:()=>tJ(e,XQ(VZ(n,t),e.dtype))}}const A4={kernelName:Xq,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:i}=r,o=t[0],a=N4(e,t[1],o,WG(i,o.shape));return{x:()=>a.x()}}},O4={kernelName:Yq,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>tJ(e,XQ(ZZ(n,r),"float32")),b:()=>tJ(e,XQ(J1(n,r),"float32"))}}};const R4=YY({maxPool3dGrad_:function(e,t,n,r,i,o,a){const s=KY(e,"dy","maxPool3dGrad"),l=KY(t,"input","maxPool3dGrad"),u=KY(n,"output","maxPool3dGrad");let c=s,h=l,d=u,p=!1;4===l.rank&&(p=!0,c=xZ(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),h=xZ(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=xZ(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),RG(5===c.rank,(()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`)),RG(5===h.rank,(()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`)),RG(5===d.rank,(()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`)),bZ("maxPool3dGrad",o,a);const f={dy:c,input:h,output:d},g={filterSize:r,strides:i,pad:o,dimRoundingMode:a},m=jY.runKernel(eK,f,g);return p?xZ(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),$4={kernelName:Zq,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=n;return{x:()=>R4(e,r,i,o,a,s,l)}}};const P4=YY({maxPoolGrad_:function(e,t,n,r,i,o,a){const s=KY(e,"dy","maxPoolGrad"),l=KY(t,"input","maxPoolGrad"),u=KY(n,"output","maxPoolGrad");RG(l.rank===s.rank,(()=>`Rank of input (${l.rank}) does not match rank of dy (${s.rank})`)),RG(4===s.rank,(()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${s.rank}.`)),RG(4===l.rank,(()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`)),bZ("maxPoolGrad",o,a);const c={dy:s,input:l,output:u},h={filterSize:r,strides:i,pad:o,dimRoundingMode:a};return jY.runKernel(Jq,c,h)}}),D4={kernelName:Qq,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:o,strides:a,pad:s}=n;return{x:()=>P4(e,r,i,o,a,s)}}},M4={kernelName:nK,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n,o=WG(i,r.shape),a=DG(l0(r.shape,o)[1]);return{x:()=>{const t=r.shape.slice();o.forEach((e=>{t[e]=1}));const n=xZ(e,t);return eJ(tJ(n,T0(r.shape,"float32")),a)}}}},F4={kernelName:rK,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:i}=r,[o,a]=t,s=N4(e,a,o,WG(i,o.shape));return{x:()=>s.x()}}},L4={kernelName:iK,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>tJ(e,XQ(K1(n,r),"float32")),b:()=>tJ(e,XQ(JZ(n,r),"float32"))}}},j4={kernelName:oK,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,o=i.map((e=>e[0]));return{x:()=>W0(e,o,r.shape)}}},z4={kernelName:aK,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=kJ(n.shape,r.shape);return{a:()=>{const t=wJ(n.shape,i);return t.length>0?xZ(i0(e,t),n.shape):e},b:()=>{const t=tJ(e,S0(YZ(eJ(n,r)))),o=wJ(r.shape,i);return o.length>0?xZ(i0(t,o),r.shape):t}}}},B4={kernelName:lK,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=kJ(n.shape,r.shape);return{a:()=>{const t=tJ(e,XQ(r,"float32")),o=wJ(n.shape,i);return o.length>0?xZ(i0(t,o),n.shape):t},b:()=>{const t=tJ(e,XQ(n,"float32")),o=wJ(r.shape,i);return o.length>0?xZ(i0(t,o),r.shape):t}}}},W4={kernelName:uK,gradFunc:e=>({x:()=>S0(e)})},U4={kernelName:gK,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>E0(n.shape,"float32")}}},V4={kernelName:fK,gradFunc:e=>({x:()=>iJ(e)})},G4={kernelName:mK,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return n1(e,r).map((e=>()=>e))}},H4={kernelName:yK,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,o=i.map((e=>e[0]));return{x:()=>W0(e,o,r.shape)}}},q4={kernelName:vK,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,i]=t,o=n,a=r,s=kJ(o.shape,a.shape);return{a:()=>{const t=XQ(a,"float32");let n=tJ(e,tJ(t,mJ(o,yJ(t,aJ(1)))));const r=wJ(o.shape,s);return r.length>0&&(n=i0(n,r)),xZ(n,o.shape)},b:()=>{const t=JZ(o,0),n=r1(t,t0(o),iJ(o));let r=tJ(e,tJ(i,n));const l=wJ(a.shape,s);return l.length>0&&(r=i0(r,l)),xZ(r,a.shape)}}}},K4={kernelName:bK,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,i=JZ(n,0);return{x:()=>r1(i,e,tJ(e,r)),alpha:()=>{let t=r1(i,iJ(e),tJ(e,n));const o=wJ(r.shape,e.shape);return o.length>0&&(t=i0(t,o)),xZ(t,r.shape)}}}};const X4=YY({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i={x:KY(e,"x","cumprod")},o={axis:t,exclusive:n,reverse:r};return jY.runKernel(eq,i,o)}});function Y4(e,t,n){const r=e.shape.length,i=r-n.length,o=h0(n,r);let a=e;null!=o&&(a=a1(e,o));const s=a.shape.slice(),l=s.splice(r-n.length,n.length).reduce(((e,t)=>e*t),1);s.push(l);let u=function(e,t,n){const r=e.shape.slice();r[n]=1;const i=xZ(t,r),o=X4(e,n,!0,!1),a=X4(e,n,!0,!0),s=tJ(o,a);return tJ(i,s)}(a.reshape(s),t,i);if(u=u.reshape(a.shape),null!=o){const e=d0(o);u=a1(u,e)}return u}const Q4={kernelName:xK,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;let o=[];return o=void 0===i||null===i?r.shape.map(((e,t)=>t)):"number"===typeof i?[i]:i,{x:()=>Y4(r,e,o)}}},J4={kernelName:pq,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=kJ(n.shape,r.shape);return{a:()=>{const t=eJ(e,XQ(r,"float32")),o=wJ(n.shape,i);return o.length>0?xZ(i0(t,o),n.shape):t},b:()=>{let t=tJ(e,XQ(n,"float32"));const o=wJ(r.shape,i);o.length>0&&(t=xZ(i0(t,o),r.shape));const a=rJ(r);return S0(eJ(t,XQ(a,"float32")))}}}},Z4={kernelName:EK,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eJ(e,S0(rJ(n)))}}},e5={kernelName:$K,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=tJ(K1(n,6),f1(n));return{x:()=>tJ(e,XQ(r,"float32"))}}},t5={kernelName:TK,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tJ(e,XQ(f1(n),"float32"))}}},n5={kernelName:_K,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>xZ(e,n.shape)}}},r5={kernelName:OK,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>jY.runKernel(RK,i,n)}}},i5={kernelName:NK,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>jY.runKernel(AK,i,n)}}},o5={kernelName:PK,gradFunc:(e,t,n)=>{const{dims:r}=n,i=WG(r,e.shape);return{x:()=>L0(e,i)}}},a5={kernelName:DK,gradFunc:e=>({x:()=>iJ(e)})},s5={kernelName:MK,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>S0(eJ(e,tJ(mJ(n,1.5),2)))}}};const l5=YY({logicalNot_:function(e){const t={x:KY(e,"x","logicalNot","bool")};return jY.runKernel(Gq,t)}}),u5={kernelName:zK,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>XQ(iJ(n),"float32"),t:()=>tJ(e,XQ(n,e.dtype)),e:()=>tJ(e,XQ(l5(n),e.dtype))}}},c5={kernelName:BK,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=JZ(n,aJ(0)),r=aJ(O2),i=aJ(R2),o=tJ(e,i),a=tJ(tJ(e,r),HZ(XQ(n,"float32")));return r1(t,o,a)}}}},h5={kernelName:HK,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tJ(e,tJ(n,yJ(aJ(1),n)))}}},d5={kernelName:GK,gradFunc:e=>({x:()=>iJ(e)})};const p5=YY({cos_:function(e){const t={x:KY(e,"x","cos","float32")};return jY.runKernel(JH,t)}}),f5={kernelName:UK,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tJ(p5(XQ(n,"float32")),e)}}};const g5=YY({cosh_:function(e){const t={x:KY(e,"x","cosh","float32")};return jY.runKernel(ZH,t)}}),m5={kernelName:VK,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tJ(g5(XQ(n,"float32")),e)}}},y5={kernelName:WK,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:i,size:o}=n,a=r.shape,[s,l]=ZJ(r,i,o),u=[];for(let c=0;c<e.rank;c++)u.push([s[c],a[c]-s[c]-l[c]]);return{x:()=>N0(e,u)}}},v5={kernelName:JK,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:i}=n,o=tJ(e,r);return{logits:()=>yJ(o,tJ(i0(o,[i],true),r))}}},b5={kernelName:qK,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tJ(e,B0(n))}}};const x5=YY({batchToSpaceND_:function(e,t,n){const r=KY(e,"x","batchToSpaceND"),i=t.reduce(((e,t)=>e*t));RG(r.rank>=1+t.length,(()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`)),RG(n.length===t.length,(()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`)),RG(r.shape[0]%i===0,(()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${i}`));const o={x:r},a={blockShape:t,crops:n};return jY.runKernel(MH,o,a)}}),w5={kernelName:YK,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>x5(e,r,i)}}},k5={kernelName:QK,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>NZ(e,r)}}},S5={kernelName:KK,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eJ(e,tJ(nJ(XQ(n,"float32")),2))}}},C5={kernelName:oX,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tJ(e,tJ(XQ(n,"float32"),2))}}},I5={kernelName:iX,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=aJ(2);return{a:()=>tJ(e,tJ(i,yJ(n,r))),b:()=>tJ(e,tJ(i,yJ(r,n)))}}},E5={kernelName:hX,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=kJ(n.shape,r.shape);return{a:()=>{let t=e;const r=wJ(n.shape,i);return r.length>0&&(t=i0(t,r)),xZ(t,n.shape)},b:()=>{let t=e;const n=wJ(r.shape,i);return n.length>0&&(t=i0(t,n)),xZ(S0(t),r.shape)}}}},T5={kernelName:XK,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,i=r.shape.slice(),{axis:o}=n;WG(o,r.shape).forEach((e=>{i[e]=1}));const a=xZ(e,i),s=tJ(a,T0(r.shape,"float32"));return{x:()=>s}}},_5={kernelName:dX,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eJ(e,rJ(p5(n)))}}},N5={kernelName:fX,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:i}=n;return{x:()=>{let t=iJ(r);if(1===r.rank)for(let n=0;n<i[0];++n)t=JQ(t,W0(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)t=JQ(t,W0(e,[n*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)for(let a=0;a<i[2];++a)t=JQ(t,W0(e,[n*r.shape[0],o*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)for(let a=0;a<i[2];++a)for(let s=0;s<i[3];++s)t=JQ(t,W0(e,[n*r.shape[0],o*r.shape[1],a*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},A5={kernelName:xX,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=SJ(t,iJ(t)),r=QZ(e,n);let i=ZZ(t,aJ(0,"int32"));const o=r.rank-i.rank;for(let s=0;s<o;++s)i=qZ(i,s+1);i=g0(i,T0(r.shape,"bool"));const a=iJ(r);return r1(i,r,a)}(e,n)}}};const O5=[k3,S3,C3,I3,E3,T3,_3,N3,A3,O3,R3,$3,D3,F3,L3,z3,B3,W3,U3,V3,G3,H3,K3,q3,Y3,J3,e4,n4,r4,i4,J4,o4,a4,s4,l4,u4,h4,c4,p4,g4,v4,b4,x4,w4,k4,S4,C4,I4,E4,_4,A4,A4,O4,$4,D4,M4,F4,L4,j4,z4,B4,W4,U4,V4,G4,H4,H4,q4,K4,Q4,Z4,e5,t5,n5,r5,i5,o5,a5,s5,u5,c5,h5,d5,f5,m5,y5,v5,b5,w5,w5,k5,k5,S5,I5,C5,{kernelName:kX,gradFunc:e=>({x:()=>iJ(e)})},E5,T5,_5,{kernelName:pX,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tJ(yJ(aJ(1),rJ(n)),e)}}},N5,{kernelName:yX,gradFunc:(e,t,n)=>{const r=n,{perm:i}=r,o=d0(i);return{x:()=>a1(e,o)}}},{kernelName:bX,gradFunc:(e,t,n)=>{const r=n,{axis:i}=r;return{value:()=>Q0(e,i)}}},A5,{kernelName:wX,gradFunc:e=>({x:()=>iJ(e)})}];for(const n of O5)MX(n);bY().prototype.abs=function(){return this.throwIfDisposed(),bJ(this)};const R5=YY({acos_:function(e){const t={x:KY(e,"x","acos")};return jY.runKernel(vH,t)}});bY().prototype.acos=function(){return this.throwIfDisposed(),R5(this)};const $5=YY({acosh_:function(e){const t={x:KY(e,"x","acosh")};return jY.runKernel(bH,t)}});bY().prototype.acosh=function(){return this.throwIfDisposed(),$5(this)},bY().prototype.add=function(e){return this.throwIfDisposed(),JQ(this,e)},bY().prototype.all=function(e,t){return this.throwIfDisposed(),nZ(this,e,t)},bY().prototype.any=function(e,t){return this.throwIfDisposed(),rZ(this,e,t)},bY().prototype.argMax=function(e){return this.throwIfDisposed(),iZ(this,e)};const P5=YY({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:KY(e,"x","argMin")},r={axis:t};return jY.runKernel(IH,n,r)}});bY().prototype.argMin=function(e){return this.throwIfDisposed(),P5(this,e)},bY().prototype.asScalar=function(){return this.throwIfDisposed(),RG(1===this.size,(()=>"The array must have only 1 element.")),xZ(this,[])},bY().prototype.asType=function(e){return this.throwIfDisposed(),XQ(this,e)},bY().prototype.as1D=function(){return this.throwIfDisposed(),xZ(this,[this.size])},bY().prototype.as2D=function(e,t){return this.throwIfDisposed(),xZ(this,[e,t])},bY().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),xZ(this,[e,t,n])},bY().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),xZ(this,[e,t,n,r])},bY().prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),xZ(this,[e,t,n,r,i])};const D5=YY({asin_:function(e){const t={x:KY(e,"x","asin")};return jY.runKernel(EH,t)}});bY().prototype.asin=function(){return this.throwIfDisposed(),D5(this)};const M5=YY({asinh_:function(e){const t={x:KY(e,"x","asinh")};return jY.runKernel(TH,t)}});bY().prototype.asinh=function(){return this.throwIfDisposed(),M5(this)};const F5=YY({atan_:function(e){const t={x:KY(e,"x","atan")};return jY.runKernel(_H,t)}});bY().prototype.atan=function(){return this.throwIfDisposed(),F5(this)};const L5=YY({atan2_:function(e,t){let n=KY(e,"a","atan2"),r=KY(t,"b","atan2");[n,r]=OY(n,r);const i={a:n,b:r};return jY.runKernel(AH,i)}});bY().prototype.atan2=function(e){return this.throwIfDisposed(),L5(this,e)};const j5=YY({atanh_:function(e){const t={x:KY(e,"x","atanh")};return jY.runKernel(NH,t)}});bY().prototype.atanh=function(){return this.throwIfDisposed(),j5(this)},bY().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),wZ(this,e,t,n,r)},bY().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),x5(this,e,t)},bY().prototype.batchNorm=function(e,t,n,r,i){return this.throwIfDisposed(),SZ(this,e,t,n,r,i)},bY().prototype.broadcastTo=function(e){return this.throwIfDisposed(),TZ(this,e)},bY().prototype.cast=function(e){return this.throwIfDisposed(),XQ(this,e)};const z5=YY({ceil_:function(e){const t={x:KY(e,"x","ceil","float32")};return jY.runKernel(BH,t)}});bY().prototype.ceil=function(){return this.throwIfDisposed(),z5(this)},bY().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),_Z(this,e,t)},bY().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof vY&&(e=[e]),NZ([this,...e],t)},bY().prototype.conv1d=function(e,t,n,r,i,o){return this.throwIfDisposed(),DZ(this,e,t,n,r,i,o)},bY().prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),FZ(this,e,t,n,r,i)},bY().prototype.conv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),PZ(this,e,t,n,r,i,o)},bY().prototype.cos=function(){return this.throwIfDisposed(),p5(this)},bY().prototype.cosh=function(){return this.throwIfDisposed(),g5(this)},bY().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),X4(this,e,t,n)},bY().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),t4(this,e,t,n)};const B5=YY({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const r=KY(e,"x","depthToSpace","float32"),i="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1];RG(t>1,(()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`)),RG(i*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${i} and ${t}  for depthToSpace with input shape\n    ${r.shape}`)),RG(o*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${o} and ${t} for depthToSpace with input shape\n        ${r.shape}`)),RG(a%(t*t)===0,(()=>`Dimension size must be evenly divisible by ${t*t} but is ${a} for depthToSpace with input shape ${r.shape}`));const s={x:r},l={blockSize:t,dataFormat:n};return jY.runKernel(iq,s,l)}});bY().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),B5(this,e,t)},bY().prototype.depthwiseConv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),WZ(this,e,t,n,r,i,o)};const W5=YY({dilation2d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const a=KY(e,"x","dilation2d"),s=KY(t,"filter","dilation2d");RG(3===a.rank||4===a.rank,(()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`)),RG(3===s.rank,(()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`)),RG("NHWC"===o,(()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`));let l=a,u=!1;3===a.rank&&(l=xZ(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=!0),RG(l.shape[3]===s.shape[2],(()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${s.shape[2]}`));const c={x:l,filter:s},h={strides:n,pad:r,dilations:i},d=jY.runKernel(uq,c,h);return u?xZ(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});bY().prototype.dilation2d=function(e,t,n,r,i){return this.throwIfDisposed(),W5(this,e,t,n,r,i)};const U5=YY({divNoNan_:function(e,t){let n=KY(e,"a","div"),r=KY(t,"b","div");[n,r]=OY(n,r);const i=eJ(n,r),o=iJ(i),a=VZ(r,o);return r1(a,o,i)}});bY().prototype.divNoNan=function(e){return this.throwIfDisposed(),U5(this,e)},bY().prototype.div=function(e){return this.throwIfDisposed(),eJ(this,e)};const V5=YY({dot_:function(e,t){const n=KY(e,"t1","dot"),r=KY(t,"t2","dot");RG((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`));const i=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(RG(i===o,(()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${o}.`)),1===n.rank&&1===r.rank){const e=xZ(n,[1,-1]),t=xZ(r,[-1,1]),i=m0(e,t);return xZ(i,[])}if(1===n.rank&&2===r.rank){const e=xZ(n,[1,-1]),t=xZ(r,[r.shape[0],r.shape[1]]),i=m0(e,t);return xZ(i,[i.size])}if(2===n.rank&&1===r.rank){const e=xZ(r,[-1,1]),t=m0(n,e);return xZ(t,[t.size])}{const e=xZ(r,[r.shape[0],r.shape[1]]);return m0(n,e)}}});bY().prototype.dot=function(e){return this.throwIfDisposed(),V5(this,e)},bY().prototype.elu=function(){return this.throwIfDisposed(),UZ(this)},bY().prototype.equal=function(e){return this.throwIfDisposed(),VZ(this,e)},bY().prototype.erf=function(){return this.throwIfDisposed(),GZ(this)};const G5=YY({euclideanNorm_:function(e){return t2(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});bY().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),G5(this,e,t)},bY().prototype.exp=function(){return this.throwIfDisposed(),HZ(this)},bY().prototype.expandDims=function(e){return this.throwIfDisposed(),qZ(this,e)};const H5=YY({expm1_:function(e){const t={x:KY(e,"x","expm1")};return jY.runKernel(wq,t)}});bY().prototype.expm1=function(){return this.throwIfDisposed(),H5(this)},bY().prototype.fft=function(){return this.throwIfDisposed(),l1(this)},bY().prototype.flatten=function(){return this.throwIfDisposed(),xZ(this,[this.size])},bY().prototype.floor=function(){return this.throwIfDisposed(),YZ(this)},bY().prototype.floorDiv=function(e){return this.throwIfDisposed(),ZQ(this,e)},bY().prototype.gather=function(e,t,n){return this.throwIfDisposed(),QZ(this,e,t,n)},bY().prototype.greaterEqual=function(e){return this.throwIfDisposed(),ZZ(this,e)},bY().prototype.greater=function(e){return this.throwIfDisposed(),JZ(this,e)},bY().prototype.ifft=function(){return this.throwIfDisposed(),c1(this)},bY().prototype.irfft=function(){return this.throwIfDisposed(),h1(this)};const q5=YY({isFinite_:function(e){const t={x:KY(e,"x","isFinite")};return jY.runKernel(Dq,t)}});bY().prototype.isFinite=function(){return this.throwIfDisposed(),q5(this)};const K5=YY({isInf_:function(e){const t={x:KY(e,"x","isInf")};return jY.runKernel(Mq,t)}});bY().prototype.isInf=function(){return this.throwIfDisposed(),K5(this)};const X5=YY({isNaN_:function(e){const t={x:KY(e,"x","isNaN")};return jY.runKernel(Fq,t)}});bY().prototype.isNaN=function(){return this.throwIfDisposed(),X5(this)},bY().prototype.leakyRelu=function(e){return this.throwIfDisposed(),e0(this,e)},bY().prototype.lessEqual=function(e){return this.throwIfDisposed(),K1(this,e)},bY().prototype.less=function(e){return this.throwIfDisposed(),J1(this,e)};const Y5=YY({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const o=KY(e,"x","localResponseNormalization");RG(4===o.rank||3===o.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${o.rank}.`)),RG(FG(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let a=o,s=!1;3===o.rank&&(s=!0,a=xZ(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const l={x:a},u={depthRadius:t,bias:n,alpha:r,beta:i},c=jY.runKernel(qq,l,u);return s?xZ(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});bY().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),Y5(this,e,t,n,r)};const Q5=YY({logSigmoid_:function(e){const t=KY(e,"x","logSigmoid"),n=oJ((e=>({value:S0(K0(S0(e))),gradFunc:t=>tJ(t,B0(S0(e)))})));return n(t)}});bY().prototype.logSigmoid=function(){return this.throwIfDisposed(),Q5(this)},bY().prototype.logSoftmax=function(e){return this.throwIfDisposed(),o0(this,e)},bY().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),f0(this,e,t)},bY().prototype.log=function(){return this.throwIfDisposed(),t0(this)},bY().prototype.log1p=function(){return this.throwIfDisposed(),n0(this)},bY().prototype.logicalAnd=function(e){return this.throwIfDisposed(),g0(this,e)},bY().prototype.logicalNot=function(){return this.throwIfDisposed(),l5(this)};const J5=YY({logicalOr_:function(e,t){const n=KY(e,"a","logicalOr","bool"),r=KY(t,"b","logicalOr","bool");kJ(n.shape,r.shape);const i={a:n,b:r};return jY.runKernel(Hq,i)}});bY().prototype.logicalOr=function(e){return this.throwIfDisposed(),J5(this,e)};const Z5=YY({logicalXor_:function(e,t){const n=KY(e,"a","logicalXor","bool"),r=KY(t,"b","logicalXor","bool");return kJ(n.shape,r.shape),g0(J5(e,t),l5(g0(e,t)))}});bY().prototype.logicalXor=function(e){return this.throwIfDisposed(),Z5(this,e)},bY().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),m0(this,e,t,n)},bY().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),y0(this,e,t,n,r)},bY().prototype.max=function(e,t){return this.throwIfDisposed(),r0(this,e,t)},bY().prototype.maximum=function(e){return this.throwIfDisposed(),SJ(this,e)},bY().prototype.mean=function(e,t){return this.throwIfDisposed(),b0(this,e,t)},bY().prototype.min=function(e,t){return this.throwIfDisposed(),x0(this,e,t)},bY().prototype.minimum=function(e){return this.throwIfDisposed(),w0(this,e)};const e6=YY({mirrorPad_:function(e,t,n){RG("reflect"===n||"symmetric"===n,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`));const r=KY(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");RG(t.length===r.rank,(()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`));const i="reflect"===n?1:0;for(let s=0;s<r.rank;s++)RG(2===t[s].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),RG(t[s][0]>=0&&t[s][0]<=r.shape[s]-i&&t[s][1]>=0&&t[s][1]<=r.shape[s]-i,(()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-i} or less than 0 for input of shape ${r.shape}`));const o={paddings:t,mode:n},a={x:r};return jY.runKernel(oK,a,o)}});bY().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),e6(this,e,t)};const t6=YY({mod_:function(e,t){let n=KY(e,"a","mod"),r=KY(t,"b","mod");[n,r]=OY(n,r);const i={a:n,b:r};return jY.runKernel(aK,i)}});bY().prototype.mod=function(e){return this.throwIfDisposed(),t6(this,e)},bY().prototype.mul=function(e){return this.throwIfDisposed(),tJ(this,e)},bY().prototype.neg=function(){return this.throwIfDisposed(),S0(this)},bY().prototype.norm=function(e,t,n){return this.throwIfDisposed(),t2(this,e,t,n)},bY().prototype.notEqual=function(e){return this.throwIfDisposed(),C0(this,e)},bY().prototype.oneHot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),I0(this,e,t,n)},bY().prototype.onesLike=function(){return this.throwIfDisposed(),_0(this)},bY().prototype.pad=function(e,t){return this.throwIfDisposed(),N0(this,e,t)};const n6=YY({pool_:function(e,t,n,r,i,o,a){null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid");const s=KY(e,"x","maxPool");let l=s,u=!1;3===s.rank&&(u=!0,l=xZ(s,[1,s.shape[0],s.shape[1],s.shape[2]])),RG(mZ(o,i),(()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${i}'`));const c=aZ(l.shape,t,o,i,r),h=[c.dilationHeight,c.dilationWidth];let d;d="same"===r?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),r=n.map((e=>e-1)),i=r.map((e=>Math.floor(e/2))),o=r.map(((e,t)=>e-i[t]));return r.map(((e,t)=>[i[t],o[t]]))}([c.filterHeight,c.filterWidth],h):[[0,0],[0,0]];const p=1===h[0]&&1===h[1],[f,g]=function(e,t,n){const r=n.map((e=>e[0])),i=n.map((e=>e[1])),o=e.concat(r,i),a=t.map(((e,t)=>(e-o[t]%e)%e)),s=i.map(((e,t)=>e+a[t])),l=t.map(((e,t)=>[r[t],s[t]])),u=t.map(((e,t)=>[0,a[t]]));return[l,u]}([c.inHeight,c.inWidth],h,d),m=p?r:"valid",y=p?l:j3(l,h,f),v=("avg"===n?()=>wZ(y,t,o,m,a):()=>y0(y,t,o,m,a))(),b=p?v:x5(v,h,g);return u?xZ(b,[b.shape[1],b.shape[2],b.shape[3]]):b}});bY().prototype.pool=function(e,t,n,r,i,o){return this.throwIfDisposed(),n6(this,e,t,n,r,i,o)},bY().prototype.pow=function(e){return this.throwIfDisposed(),mJ(this,e)},bY().prototype.prelu=function(e){return this.throwIfDisposed(),A0(this,e)};const r6=YY({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=KY(e,"x","prod");"bool"===r.dtype&&(r=XQ(r,"int32"));const i={x:r},o={axis:t,keepDims:n};return jY.runKernel(xK,i,o)}});bY().prototype.prod=function(e,t){return this.throwIfDisposed(),r6(this,e,t)};const i6=YY({reciprocal_:function(e){const t={x:KY(e,"x","reciprocal")};return jY.runKernel(EK,t)}});bY().prototype.reciprocal=function(){return this.throwIfDisposed(),i6(this)},bY().prototype.relu=function(){return this.throwIfDisposed(),F0(this)},bY().prototype.relu6=function(){return this.throwIfDisposed(),p1(this)},bY().prototype.reshapeAs=function(e){return this.throwIfDisposed(),xZ(this,e.shape)},bY().prototype.reshape=function(e){return this.throwIfDisposed(),xZ(this,e)},bY().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),G1(this,e,t,n)},bY().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),H1(this,e,t,n)},bY().prototype.reverse=function(e){return this.throwIfDisposed(),L0(this,e)},bY().prototype.rfft=function(){return this.throwIfDisposed(),u1(this)},bY().prototype.round=function(){return this.throwIfDisposed(),X1(this)},bY().prototype.rsqrt=function(){return this.throwIfDisposed(),d4(this)},bY().prototype.selu=function(){return this.throwIfDisposed(),j0(this)},bY().prototype.separableConv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),z0(this,e,t,n,r,i,o)},bY().prototype.sigmoid=function(){return this.throwIfDisposed(),B0(this)};const o6=YY({sign_:function(e){const t={x:KY(e,"x","sign")};return jY.runKernel(GK,t)}});bY().prototype.sign=function(){return this.throwIfDisposed(),o6(this)},bY().prototype.sin=function(){return this.throwIfDisposed(),Q3(this)},bY().prototype.sinh=function(){return this.throwIfDisposed(),Z3(this)},bY().prototype.slice=function(e,t){return this.throwIfDisposed(),W0(this,e,t)},bY().prototype.softmax=function(e){return this.throwIfDisposed(),q0(this,e)},bY().prototype.softplus=function(){return this.throwIfDisposed(),K0(this)},bY().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),j3(this,e,t)},bY().prototype.split=function(e,t){return this.throwIfDisposed(),X0(this,e,t)},bY().prototype.sqrt=function(){return this.throwIfDisposed(),nJ(this)},bY().prototype.square=function(){return this.throwIfDisposed(),rJ(this)},bY().prototype.squaredDifference=function(e){return this.throwIfDisposed(),a2(this,e)},bY().prototype.squeeze=function(e){return this.throwIfDisposed(),Y0(this,e)},bY().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof vY?[this,e]:[this,...e];return Q0(n,t)},bY().prototype.step=function(e){return this.throwIfDisposed(),f1(this,e)};const a6=YY({stridedSlice_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const u={x:KY(e,"x","stridedSlice","string_or_numeric")},c={begin:t,end:n,strides:r,beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:l};return jY.runKernel(sX,u,c)}});bY().prototype.stridedSlice=function(e,t,n,r,i,o,a,s){return this.throwIfDisposed(),a6(this,e,t,n,r,i,o,a,s)},bY().prototype.sub=function(e){return this.throwIfDisposed(),yJ(this,e)},bY().prototype.sum=function(e,t){return this.throwIfDisposed(),i0(this,e,t)};const s6=YY({tan_:function(e){const t={x:KY(e,"x","tan","float32")};return jY.runKernel(dX,t)}});bY().prototype.tan=function(){return this.throwIfDisposed(),s6(this)},bY().prototype.tanh=function(){return this.throwIfDisposed(),J0(this)},bY().prototype.tile=function(e){return this.throwIfDisposed(),KZ(this,e)},bY().prototype.toBool=function(){return this.throwIfDisposed(),XQ(this,"bool")},bY().prototype.toFloat=function(){return this.throwIfDisposed(),XQ(this,"float32")},bY().prototype.toInt=function(){return this.throwIfDisposed(),XQ(this,"int32")};const l6=YY({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=KY(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${t}`);const o={x:r},a={k:t,sorted:n},[s,l]=jY.runKernel(gX,o,a);return{values:s,indices:l}}});bY().prototype.topk=function(e,t){return this.throwIfDisposed(),l6(this,e,t)},bY().prototype.transpose=function(e){return this.throwIfDisposed(),a1(this,e)};const u6=YY({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=KY(e,"x","unique","string_or_numeric");RG(n.rank>0,(()=>"The input tensor must be at least 1D"));const r={x:n},i={axis:t},[o,a]=jY.runKernel(vX,r,i);return{values:o,indices:a}}});bY().prototype.unique=function(e){return this.throwIfDisposed(),u6(this,e)},bY().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),f4(this,e,t)},bY().prototype.unstack=function(e){return this.throwIfDisposed(),n1(this,e)},bY().prototype.where=function(e,t){return this.throwIfDisposed(),r1(e,this,t)},bY().prototype.zerosLike=function(){return this.throwIfDisposed(),iJ(this)};class c6 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,c6.prototype)}}class h6 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,h6.prototype)}}class d6 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,d6.prototype)}}class p6 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,p6.prototype)}}class f6 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,f6.prototype)}}Error;class g6{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function m6(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function y6(e,t){if(!e)throw new f6(t)}function v6(e,t){let n=0;for(const r of e)r===t&&n++;return n}function b6(e){return 1===e.length?e[0]:e}function x6(e){return Array.isArray(e)?e:[e]}function w6(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function k6(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,((e,t)=>t.toUpperCase()))}let S6={};function C6(e){if(null===e||void 0===e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function I6(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((e=>I6(e)));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"===typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!==typeof t.value?I6(t):e[n]=t.value)}}}function E6(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){const i=e;let o;if(i in n)o=n[i];else if(i in S6)o=S6[i];else if(o=t[i],null==o)throw new d6(`Unknown ${r}: ${e}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}{const o=e;if(null==o.className||null==o.config)throw new d6(`${r}: Improper config format: ${JSON.stringify(o)}.\n'className' and 'config' must set.`);const a=o.className;let s,l;if(a in n?[s,l]=n[a]:a in S6?[s,l]=S6.className:a in t&&([s,l]=t[a]),null==s)throw new d6(`Unknown ${r}: ${a}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=l){const e={};for(const n of Object.keys(S6))e[n]=S6[n];for(const i of Object.keys(n))e[i]=n[i];o.config.customObjects=e;const t=Object.assign({},S6);for(const i of Object.keys(n))S6[i]=n[i];I6(o.config);const r=l(s,o.config,n,i);return S6=Object.assign({},t),r}{const e=Object.assign({},S6);for(const r of Object.keys(n))S6[r]=n[r];const t=new s(o.config);return S6=Object.assign({},e),t}}}function T6(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function _6(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function N6(e){if(null==e)throw new d6(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function A6(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new d6(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function O6(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return y6(n>=0),y6(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((e=>typeof e===t))}function R6(e,t){Array.isArray(e)?(RG(e.length>0,(()=>`${t} is unexpectedly an empty array.`)),e.forEach(((e,n)=>R6(e,`element ${n+1} of ${t}`)))):RG(Number.isInteger(e)&&e>0,(()=>`Expected ${t} to be a positive integer, but got ${$6(e)}.`))}function $6(e){return null===e?"null":Array.isArray(e)?"["+e.map((e=>$6(e))).join(",")+"]":"string"===typeof e?`"${e}"`:`${e}`}function P6(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let D6=0;function M6(){return D6++}const F6={};function L6(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in F6||(F6[e]=0),F6[e]+=1,e+F6[e].toString()}const j6=["channelsFirst","channelsLast"],z6=["nearest","bilinear"],B6=["valid","same","causal"],W6=["max","avg"],U6=["sum","mul","concat","ave"],V6=new Map;function G6(e){A6(j6,"DataFormat",e)}function H6(e){A6(B6,"PaddingMode",e)}function q6(e){A6(W6,"PoolMode",e)}const K6=[];function X6(e,t){K6.push(e);try{const e=t();return K6.pop(),e}catch(ie){throw K6.pop(),ie}}function Y6(e){if(!Z6(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===K6.length?"":K6.join("/")+"/")+e}function Q6(e){if(!Z6(e))throw new Error("Not a valid tensor name: '"+e+"'");V6.has(e)||V6.set(e,0);const t=V6.get(e);if(V6.set(e,V6.get(e)+1),t>0){const n=`${e}_${t}`;return V6.set(n,1),n}return e}const J6=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Z6(e){return!!e.match(J6)}function e9(e){return e===parseInt(e.toString(),10)}function t9(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let i=t;i<n;++i)r*=e[i];return r}function n9(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function r9(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function i9(e,t){if(t<e)throw new d6(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let r=e;r<t;++r)n.push(r);return n}let o9;function a9(){return null==o9&&(o9=lQ().epsilon()),o9}function s9(e,t){return XQ(e,t)}function l9(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),xZ(e,n)}function u9(e,t,n){return iQ((()=>{switch(e.rank){case 1:return U0(e,t,n);case 2:return V0(e,[t,0],[n,e.shape[1]]);case 3:return G0(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return H0(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return W0(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return W0(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new d6(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function c9(e,t,n){return iQ((()=>{switch(e.rank){case 1:return U0(e,t,n);case 2:return V0(e,[0,t],[e.shape[0],n]);case 3:return G0(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return H0(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new d6(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function h9(e,t,n,r){return iQ((()=>{switch(e.rank){case 1:return U0(e,t,n);case 2:switch(r){case 1:return u9(e,t,n);case 2:return c9(e,t,n);default:throw new d6(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return u9(e,t,n);case 2:return G0(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return c9(e,t,n);default:throw new d6(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return u9(e,t,n);case 2:return H0(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return H0(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return c9(e,t,n);default:throw new d6(`The axis is not within the rank of the tensor ${r}`)}default:throw new d6(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function d9(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),NZ(e,n)}function p9(e,t){switch(e.rank){case 1:return AZ([e,t]);case 2:return OZ([e,t],0);case 3:return RZ([e,t],0);case 4:return $Z([e,t],0);default:throw new d6(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function f9(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new d6(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return KZ(e,t)}function g9(e){return P0(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function m9(e,t,n,r){if(e.rank<2||t.rank<2)throw new p6(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new p6(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(2===e.rank&&2===t.rank){return k1({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?b9(e.rank,r,"channelsLast"):null,activation:n})}{const i=e.shape.slice(),o=i.pop();e=xZ(e,[-1,o]);const a=t.shape.slice(),s=a.pop(),l=a.pop(),u=[...a,s],c=Array.from({length:t.rank},((e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n));t=xZ(a1(t,c),[l,-1]);const h=[...i,...u];return xZ(k1({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?b9(e.rank,r,"channelsLast"):null,activation:n}),h)}}function y9(e,t,n){return iQ((()=>(t=Array.isArray(t)?Z0(t,"int32"):XQ(t,"int32"),QZ(e,t,n))))}function v9(e){return tJ(e,e)}function b9(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new d6(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===r.length?xZ(t,[1,r[0],1,1,1]):xZ(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?xZ(t,[1,1,1,1,r[0]]):xZ(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?xZ(t,[1,r[0],1,1]):xZ(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?xZ(t,[1,1,1,r[0]]):xZ(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?xZ(t,[1,r[0],1]):xZ(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?xZ(t,[1,1,r[0]]):xZ(t,[1].concat(r))}else if(e<3)return t;throw new d6(`Unsupported input rank by biasAdd: ${t.rank}`)}function x9(e,t,n){return iQ((()=>(null==n&&(n="channelsLast"),G6(n),JQ(e,b9(e.rank,t,n)))))}function w9(e,t,n,r){return iQ((()=>s1(e,t,n,r)))}function k9(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}const S9=["fanIn","fanOut","fanAvg"],C9=["normal","uniform","truncatedNormal"];class I9 extends uJ{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class E9 extends I9{apply(e,t){return E0(e,t)}}E9.className="Zeros",hJ(E9);class T9 extends I9{apply(e,t){return T0(e,t)}}T9.className="Ones",hJ(T9);class _9 extends I9{constructor(e){if(super(),"object"!==typeof e)throw new d6(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new d6(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return iQ((()=>tJ(aJ(this.value),T0(e,t))))}getConfig(){return{value:this.value}}}_9.className="Constant",hJ(_9);class N9 extends I9{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return D0(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}N9.className="RandomUniform",hJ(N9);class A9 extends I9{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new p6(`randomNormal does not support dType ${t}.`);return g9(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}A9.className="RandomNormal",hJ(A9);class O9 extends I9{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new p6(`truncatedNormal does not support dType ${t}.`);return t1(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}O9.className="TruncatedNormal",hJ(O9);class R9 extends I9{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return iQ((()=>{if(2!==e.length||e[0]!==e[1])throw new d6("Identity matrix initializer can only be used for 2D square matrices.");return tJ(this.gain,XZ(e[0]))}))}getConfig(){return{gain:this.gain}}}R9.className="Identity",hJ(R9);class $9 extends I9{constructor(e){if(super(),e.scale<0)throw new d6(`scale must be a positive float. Got: ${e.scale}`);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,function(e){A6(S9,"FanMode",e)}(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function(e){A6(C9,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(G6(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){const r=t9(e,2);t=e[1]*r,n=e[0]*r}else if("channelsLast"===r){const r=t9(e,0,e.length-2);t=e[e.length-2]*r,n=e[e.length-1]*r}}else{const r=t9(e);t=Math.sqrt(r),n=Math.sqrt(r)}return[t,n]}(e),r=n[0],i=n[1];let o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,r):"fanOut"===this.mode?o/=Math.max(1,i):o/=Math.max(1,(r+i)/2),"normal"===this.distribution){const n=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new p6(`${this.getClassName()} does not support dType ${t}.`);return t1(e,0,n,t,this.seed)}{const n=Math.sqrt(3*o);return D0(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}$9.className="VarianceScaling",hJ($9);class P9 extends $9{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return $9.className}}P9.className="GlorotUniform",hJ(P9);class D9 extends $9{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return $9.className}}D9.className="GlorotNormal",hJ(D9);class M9 extends $9{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return $9.className}}M9.className="HeNormal",hJ(M9);class F9 extends $9{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return $9.className}}F9.className="HeUniform",hJ(F9);class L9 extends $9{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return $9.className}}L9.className="LeCunNormal",hJ(L9);class j9 extends $9{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return $9.className}}j9.className="LeCunUniform",hJ(j9);class z9 extends I9{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return iQ((()=>{if(e.length<2)throw new p6("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError(`Unsupported data type ${t}.`);const n=DG(e.slice(0,-1)),r=e[e.length-1],i=n*r;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const o=g9([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),a=l2.qr(o,!1);let s=a[0];const l=a[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return s=tJ(s,l.sign()),n<r&&(s=s.transpose()),tJ(aJ(this.gain),s.reshape(e))}))}getConfig(){return{gain:this.gain,seed:this.seed}}}z9.className="Orthogonal",hJ(z9);const B9={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function W9(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E6(e,cJ.getMap().classNameMap,t,"initializer")}function U9(e){return C6(e)}function V9(e){if("string"===typeof e){const t=e in B9?B9[e]:e;if("GlorotNormal"===t)return new D9;if("GlorotUniform"===t)return new P9;if("HeNormal"===t)return new M9;if("HeUniform"===t)return new F9;if("LeCunNormal"===t)return new L9;if("LeCunUniform"===t)return new j9;{const e={};return e.className=t,e.config={},W9(e)}}return e instanceof I9?e:W9(e)}function G9(e){return Array.isArray(e)&&Array.isArray(e[0])}function H9(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function q9(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new d6(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function K9(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new d6(`Expected exactly 1 Shape; got ${e.length}`)}return e}function X9(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce(((e,t)=>e*t));return t}const Y9="Variable";class Q9{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y9,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=M6(),n=null==n?Y9:n,this.originalName=Y6(n),this.name=Q6(this.originalName),this.trainable_=r,this.constraint=i,this.val=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return jY.makeVariable(e,t,n,r)}(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function J9(e){return e.map((e=>e.read()))}function Z9(e){e.forEach((e=>{e[0].write(e[1])}))}class e7{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class t7{constructor(e,t,n,r,i,o,a){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=a,this.id=M6(),null!=o&&(this.originalName=Y6(o),this.name=Q6(this.originalName)),this.rank=t.length}}let n7=0;class r7{constructor(e,t){this.callArgs=t,this.id=n7++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let i7=0;class o7 extends uJ{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=i7++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=w6(e)+"_"+L6(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new h6(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new d6(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return b6(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return b6(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new c6(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new c6(`Layer ${this.name} is not connected, no input to return.`);return b6(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new c6(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new c6(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return b6(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map((e=>e()))}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach((t=>t.trainable=e)),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter((e=>e.trainable)):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter((e=>!e.trainable)).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=x6(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=x6(this.inputSpec);if(t.length!==n.length)throw new d6(`Layer ${this.name} expects ${n.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let r=0;r<t.length;r++){const e=t[r],i=n[r];if(null==i)continue;const o=e.rank;if(null!=i.ndim&&o!==i.ndim)throw new d6(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${o}`);if(null!=i.maxNDim&&o>i.maxNDim)throw new d6(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${o}`);if(null!=i.minNDim&&o<i.minNDim)throw new d6(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${o}.`);if(null!=i.dtype&&e.dtype!==i.dtype)throw new d6(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${e.dtype}.`);if(i.axes){const t=e.shape;for(const e in i.axes){const n=Number(e),o=i.axes[e],a=n>=0?t[n]:t[t.length+n];if(null!=o&&-1===[o,null].indexOf(a))throw new d6(`Input ${r} is incompatible with layer ${this.name}: expected axis ${n} of input shape to have value ${o} but got shape ${t}.`)}}if(null!=i.shape)for(let t=0;t<i.shape.length;++t){const n=i.shape[t],o=e.shape[t];if(null!=n&&null!=o&&n!==o)throw new d6(`Input ${r} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${e.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=x6(e),r=function(e){let t=!0;for(const n of x6(e))if(!(n instanceof t7)){t=!1;break}return t}(e),i=function(e){let t=!0;for(const n of x6(e))if(n instanceof t7){t=!1;break}return t}(e);if(r===i)throw new d6("Arguments to apply() must be all SymbolicTensors or all Tensors");return X6(this.name,(()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of x6(e))t.push(n.shape);this.build(b6(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);const i=x6(r),o=[];for(let e of i)-1!==n.indexOf(e)&&(e=e.clone()),o.push(e);if(r=b6(o),null!=this.activityRegularizer)throw new p6("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=x6(e);const t=[];for(const n of e)t.push(n.shape);return b6(t)}(e),r=this.computeOutputShape(n);let i;const o="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),i=null!=r&&r.length>0&&Array.isArray(r[0])?r.map(((n,r)=>new t7(o,n,this,x6(e),t,this.name,r))):new t7(o,r,this,x6(e),t,this.name),this.addInboundNode(e,i,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new p6("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}}))}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach(((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new c6(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new c6(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new h6(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return X9(this.weights)}build(e){this.built=!0}getWeights(){return J9(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}setWeights(e){iQ((()=>{const t=this.weights;if(t.length!==e.length)throw new d6(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;const n=[],r=J9(t);for(let i=0;i<r.length;++i){const o=r[i],a=t[i],s=e[i];if(!MG(o.shape,s.shape))throw new d6(`Layer weight shape ${o.shape} not compatible with provided weight shape ${s.shape}`);n.push([a,s])}Z9(n)}))}addWeight(e,t,n,r,i,o,a,s){if(-1!==this._addedWeightNames.indexOf(e))throw new d6(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():V9("zeros"));const l=r.apply(t,n),u=new Q9(l,n,e,o,a);return l.dispose(),null!=i&&this.addLoss((()=>i.apply(u.read()))),null==o&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=x6(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);t.forEach((e=>{if(null!=e)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)}))}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const r=this.computeMask(e,n),i=x6(t),o=x6(r);if(i.length!==o.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let a=0;a<i.length;a++)i[a].kerasMask=o[a]}addInboundNode(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const s=x6(e);t=x6(t),n=x6(n),r=x6(r),i=H9(i),o=H9(o);const l=[],u=[],c=[];for(const h of s)l.push(h.sourceLayer),u.push(h.nodeIndex),c.push(h.tensorIndex);new r7({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:c,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:o},a);for(let h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach((e=>e.dispose())),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function a7(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=a7(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}class s7 extends o7{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:L6("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new d6("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new d6("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new d6("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new t7(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new r7({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new d6(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}s7.className="InputLayer",hJ(s7);class l7{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof l7)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new d6(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return XQ(t,e.dtype)}catch(Yve){throw new d6(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof t7){if(null==this.id2Value[e.id])throw new d6(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new d6(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof t7){if(null==this.id2Value[e.id])throw new d6(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new d6(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&oQ(this.id2Mask)}}const u7=new g6,c7=new g6;function h7(e,t,n,r){const i=null!=n&&n.training,o=Array.isArray(e),a=o?e:[e],s=a.map((e=>e.name)),l=[],u=t.names();for(const f of s)-1!==u.indexOf(f)?l.push(t.getValue(f)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const c=s.join(",")+"|"+t.names().sort().join(",");let h,d=u7.get(c);if(null==d){const e=function(e,t){RG(null!=e&&e.length>0,(()=>"Expected at least one fetch, got none"));let n=[],r={};if(1===e.length){const i=p7(e[0],t);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const o of e){const{sorted:e,recipientMap:a}=p7(o,t);for(const t of e)i.has(t.name)||(n.push(t),i.add(t.name));for(const t in a)null==r[t]&&(r[t]=new Set),a[t].forEach((e=>r[t].add(e)))}}return{sorted:n,recipientCounts:d7(r)}}(a,t);d=e.sorted,h=e.recipientCounts,u7.put(c,d),c7.put(c,h)}h={},i||Object.assign(h,c7.get(c));const p=new l7(t);for(let f=0;f<d.length;++f){if(null!=r){const e=rQ().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const e=d[f],o=e.sourceLayer;if(o instanceof s7)continue;const a=[],u=[],c=[];let g=!1;for(const n of e.inputs){const e=p.getValue(n),r=p.getMask(n);a.push(e),u.push(r),null!=r&&(g=!0),i||(h[n.name]--,0!==h[n.name]||t.hasKey(n)||-1!==s.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||c.push(e))}g&&((n=n||{}).mask=u[0]);const m=x6(o.apply(a,n));let y=null;o.supportsMasking&&(y=o.computeMask(a,u));const v=f7(e),b=Array.isArray(v)?v:[v];for(let t=0;t<b.length;++t){p.hasKey(b[t])||p.add(b[t],m[t],Array.isArray(y)?y[0]:y);const e=s.indexOf(b[t].name);-1!==e&&(l[e]=m[t])}i||oQ(c)}return p.disposeMasks(),o?l:l[0]}function d7(e){const t={};for(const n in e)t[n]=e[n].size;return t}function p7(e,t){const n=new Set,r=[],i={};for(const s of t.names())n.add(s);const o=[],a=[];for(o.push(e);o.length>0;){const e=o[o.length-1];if(n.has(e.name)){o.pop();continue}const t=a[a.length-1]===o.length-1;if(0===e.inputs.length||t)o.pop(),r.push(e),n.add(e.name),t&&a.pop();else{a.push(o.length-1);for(const t of e.inputs)null==i[t.name]&&(i[t.name]=new Set),i[t.name].add(e.name),n.has(t.name)||o.push(t)}}return{sorted:r,recipientMap:i}}function f7(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function g7(e,t){return iQ((()=>nJ(i0(tJ(e,e),t,!0))))}dH().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(()=>100),(function(e){null!=u7&&u7.setMaxEntries(e),null!=c7&&c7.setMaxEntries(e)}));class m7 extends uJ{getConfig(){return{}}}class y7 extends m7{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return iQ((()=>{const t=g7(e,this.axis),n=_Z(t,0,this.maxValue);return tJ(e,eJ(n,JQ(a9(),t)))}))}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}y7.className="MaxNorm",hJ(y7);class v7 extends m7{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return iQ((()=>eJ(e,JQ(a9(),g7(e,this.axis)))))}getConfig(){return{axis:this.axis}}}v7.className="UnitNorm",hJ(v7);class b7 extends m7{apply(e){return F0(e)}}b7.className="NonNeg",hJ(b7);class x7 extends m7{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return iQ((()=>{const t=g7(e,this.axis),n=JQ(tJ(this.rate,_Z(t,this.minValue,this.maxValue)),tJ(1-this.rate,t));return tJ(e,eJ(n,JQ(a9(),t)))}))}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}x7.className="MinMaxNorm",hJ(x7);const w7={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function k7(e){return C6(e)}function S7(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E6(e,cJ.getMap().classNameMap,t,"constraint")}function C7(e){if(null==e)return null;if("string"===typeof e){return S7({className:e in w7?w7[e]:e,config:{}})}return e instanceof m7?e:S7(e)}async function I7(e){if(null==e)return;const t=[],n=[],r=[];for(const i in e){const o=e[i];if("number"!==typeof o){const e=o;t.push(e.data()),n.push(i),r.push(e)}}if(t.length>0){const i=await Promise.all(t);for(let t=0;t<i.length;++t)e[n[t]]=i[t][0];oQ(r)}}function E7(e){if(null!=e)for(const t in e){const n=e[t];"number"!==typeof n&&n.dispose()}}var T7;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(T7||(T7={}));class _7{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class N7{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class A7 extends _7{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const r in t){const e=t[r];if("number"===typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;const i=iQ((()=>JQ(this.totals[r],tJ(e,n))));this.totals[r]=i,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"===typeof this.totals[n]?t[n]=this.totals[n]/this.seen:iQ((()=>{const e=tJ(eJ(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),aQ(t[n])})))}}class O7 extends _7{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const i in this.history){const r=this.history[i];for(let o=0;o<r.length;++o)if("number"!==typeof r[o]){const a=r[o];e.push(a.data()),t.push(i),n.push(o)}}const r=await Promise.all(e);for(let i=0;i<r.length;++i){this.history[t[i]][n[i]].dispose(),this.history[t[i]][n[i]]=r[i][0]}}}class R7 extends _7{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||h2,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");XG(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,i=null!=n?n():tY();return function(){const o=null!=n?n():tY();return o-i<t||(i=o,r=e(...arguments)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await I7(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await I7(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await I7(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await I7(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await I7(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):XG(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await I7(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await I7(e),await this.trainEnd(e))}}function $7(e,t){if(null==e&&(e={}),e instanceof _7)return[e];if(Array.isArray(e)&&e[0]instanceof _7)return e;return x6(e).map((e=>new R7(e,t)))}class P7{constructor(){}static registerCallbackConstructor(e,t){RG(e>=0&&Number.isInteger(e),(()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`)),P7.checkForDuplicate(t),null==P7.constructors[e]&&(P7.constructors[e]=[]),P7.constructors[e].push(t)}static checkForDuplicate(e){for(const t in P7.constructors){P7.constructors[+t].forEach((t=>{if(t===e)throw new d6("Duplicate callback constructor.")}))}}static clear(){P7.constructors={}}static createCallbacks(e){const t=[];for(const n in P7.constructors){const r=+n;e>=r&&t.push(...P7.constructors[r])}return t.map((e=>new e))}}function D7(e,t,n,r,i,o,a,s,l){const u=new O7,c=[new A7,...P7.createCallbacks(t)];null!=e&&c.push(...e),c.push(u);const h=new N7(c);return h.setParams({epochs:n,initialEpoch:r,samples:i,steps:o,batchSize:a,verbose:t,doValidation:s,metrics:l}),{callbackList:h,history:u}}function M7(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return E6(e,cJ.getMap().classNameMap,t,"layer",n)}function F7(e,t){return iQ((()=>{"float32"!==e.dtype&&(e=XQ(e,"float32"));const n=i0(v9(e),t,!0),r=fJ(n.shape,a9()),i=nJ(SJ(n,r));return eJ(e,i)}))}function L7(e,t){return iQ((()=>b0(v9(yJ(t,e)),-1)))}function j7(e,t){return iQ((()=>b0(bJ(yJ(t,e)),-1)))}function z7(e,t){return iQ((()=>{const n=yJ(e,t),r=_Z(bJ(e),a9(),Number.MAX_VALUE),i=bJ(eJ(n,r));return tJ(100,b0(i,-1))}))}function B7(e,t){return iQ((()=>{const n=_Z(t,a9(),Number.MAX_VALUE),r=t0(JQ(1,n)),i=_Z(e,a9(),Number.MAX_VALUE),o=t0(JQ(1,i));return b0(v9(yJ(r,o)),-1)}))}function W7(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return iQ((()=>{if(n)t=q0(t);else{const e=i0(t,t.shape.length-1,!0);t=eJ(t,e)}return t=_Z(t,a9(),1-a9()),S0(i0(tJ(XQ(e,"float32"),t0(t)),t.shape.length-1))}))}function U7(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return iQ((()=>{const r=XQ(YZ(function(e){const t=[t9(e.shape)];return xZ(e,t)}(e)),"int32"),i=(t=_Z(t,a9(),1-a9())).shape;return W7(xZ(I0(r,i[i.length-1]),i),t,n)}))}function V7(e,t){return iQ((()=>{let n;return n=_Z(t,a9(),1-a9()),n=t0(eJ(n,yJ(1,n))),b0(function(e,t){if(!MG(e.shape,t.shape))throw new d6(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return iQ((()=>{const n=F0(t),r=S0(bJ(t));return JQ(yJ(n,tJ(t,e)),n0(HZ(r)))}))}(e,n),-1)}))}function G7(e,t){return iQ((()=>{const n=_Z(e,a9(),1),r=_Z(t,a9(),1);return i0(tJ(e,t0(eJ(n,r))),-1)}))}function H7(e,t){return iQ((()=>{const n=F7(e,-1),r=F7(t,-1),i=tJ(n,r);return S0(i0(i,-1))}))}P7.constructors={};const q7={meanSquaredError:L7,meanAbsoluteError:j7,meanAbsolutePercentageError:z7,meanSquaredLogarithmicError:B7,squaredHinge:function(e,t){return iQ((()=>{const n=SJ(0,yJ(1,tJ(e,t)));return b0(v9(n),-1)}))},hinge:function(e,t){return iQ((()=>{const n=SJ(0,yJ(1,tJ(e,t)));return b0(n,-1)}))},categoricalHinge:function(e,t){return iQ((()=>{const n=i0(tJ(e,t),-1),r=r0(tJ(yJ(1,e),t),-1);return SJ(0,JQ(1,yJ(r,n)))}))},logcosh:function(e,t){return iQ((()=>{const n=Math.log(2),r=yJ(t,e),i=yJ(JQ(r,K0(tJ(-2,r))),n);return b0(i,-1)}))},categoricalCrossentropy:W7,sparseCategoricalCrossentropy:U7,binaryCrossentropy:V7,kullbackLeiblerDivergence:G7,poisson:function(e,t){return iQ((()=>{const n=t0(JQ(a9(),t));return b0(yJ(t,tJ(e,n)),-1)}))},cosineProximity:H7};function K7(e){if("string"===typeof e){if(e in q7)return q7[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new d6(t)}return e}function X7(e,t){return iQ((()=>{const n=tJ(.5,_0(t)),r=s9(JZ(t,n),e.dtype);return b0(VZ(e,r),-1)}))}function Y7(e,t){return iQ((()=>s9(VZ(iZ(e,-1),iZ(t,-1)),"float32")))}function Q7(e,t){return iQ((()=>XQ(i0(g0(VZ(e,1),VZ(t,1))),"float32")))}function J7(e,t){return V7(e,t)}function Z7(e,t){return e.rank===t.rank&&(e=Y0(e,[e.rank-1])),(t=iZ(t,-1)).dtype!==e.dtype&&(t=XQ(t,e.dtype)),XQ(VZ(e,t),"float32")}const e8=W7,t8=U7,n8={binaryAccuracy:X7,categoricalAccuracy:Y7,precision:function(e,t){return iQ((()=>{const n=Q7(e,t),r=function(e,t){return iQ((()=>XQ(i0(g0(VZ(e,0),VZ(t,1))),"float32")))}(e,t),i=JQ(n,r);return XQ(r1(JZ(i,0),eJ(n,i),0),"float32")}))},categoricalCrossentropy:e8,sparseCategoricalCrossentropy:t8,mse:L7,MSE:L7,mae:j7,MAE:j7,mape:z7,MAPE:z7,cosine:H7};function r8(e){if("string"===typeof e&&e in n8)return n8[e];if("string"!==typeof e&&null!=e)return e;throw new d6(`Unknown metric ${e}`)}function i8(e){if(y6(null!==e,`Unknown LossOrMetricFn ${e}`),"string"===typeof e)return e;{let t;for(const n of Object.keys(q7))if(q7[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(n8))if(n8[n]===e){t=n;break}return void 0!==t?t:e.name}}const o8=1048576;function a8(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!s8(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>o8&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function s8(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!==typeof n)return!1;if(!s8(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!s8(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function l8(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;const i=function(e){let t=!0;const n=[],r=[];for(const i in e.nodesByDepth)n.push(e.nodesByDepth[i]);for(const i of n){if(i.length>1||1===i.length&&i[0].inboundLayers.length>1){t=!1;break}r.push(...i)}if(t)for(const i of e.layers){let e=!1;for(const n of i.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),o=["Layer (type)","Input Shape","Output shape","Param #"];let a;if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((e=>Math.floor(t*e)))),!i){o.push("Receives inputs"),a=[];for(const t in e.nodesByDepth)a.push(...e.nodesByDepth[t])}r("_".repeat(t)),u8(o,n,r),r("=".repeat(t));const s=e.layers;for(let c=0;c<s.length;++c)i?c8(s[c],n,r):h8(s[c],n,a,r),r((c===s.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=function(e){let t;t=null!=e.collectedTrainableWeights?X9(e.collectedTrainableWeights):X9(e.trainableWeights);return t}(e),u=X9(e.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(t))}function u8(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="";for(let i=0;i<e.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=e[i],r=r.slice(0,t[i]),r+=" ".repeat(t[i]-r.length);n(r)}function c8(e,t,n){let r,i;try{i=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(Yve){i="multiple"}try{r=JSON.stringify(e.outputShape)}catch(Yve){r="multiple"}u8([`${e.name} (${e.getClassName()})`,i,r,e.countParams().toString()],t,n)}function h8(e,t,n,r){let i,o;try{o=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(Yve){o="multiple"}try{i=JSON.stringify(e.outputShape)}catch(Yve){i="multiple"}const a=[];for(const c of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(let e=0;e<c.inboundLayers.length;++e){const t=c.inboundLayers[e].name,n=c.nodeIndices[e],r=c.tensorIndices[e];a.push(`${t}[${n}][${r}]`)}const s=e.name,l=e.getClassName(),u=0===a.length?"":a[0];u8([`${s} (${l})`,o,i,e.countParams().toString(),u],t,r);for(let c=1;c<a.length;++c)u8(["","","","",a[c]],t,r)}function d8(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function p8(e,t){if(null===e)return null;if("string"===typeof e)return k6(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const r=e[i];d8(t,i,r)?n.push(r):n.push(p8(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"===typeof r)t[n]=r;else{const e=k6(n);t[e]=p8(r,e)}}return t}}function f8(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return w6(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const r=e[i];d8(t,i,r)?n.push(r):n.push(f8(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n],i=w6(n);t[i]="name"!==n&&"className"!==n||"string"!==typeof r?f8(r,n):r}return t}}const g8="4.22.0";class m8 extends o7{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=L6(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],_6(this.inputs).length!==this.inputs.length)throw new d6(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map((e=>e.name))}`);_6(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map((e=>e.name))}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;this.outputLayers.push(e),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(n)}for(const y of this.inputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;y6(0===t,"input layer has >1 nodes"),y6(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const t=this.inputLayers[y];if(!(t instanceof s7))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${y} (0-based) originates from layer type ${t.getClassName()}.`);this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map((e=>e.shape)),this.internalOutputShapes=this.outputs.map((e=>e.shape));const t={},n={},r={},i={},o={},a=[],s=(e,t,n,r,i,l)=>{null!=r&&null!=i&&null!=l||(r=e.sourceLayer,i=e.nodeIndex,l=e.tensorIndex);const u=r.inboundNodes[i];if(-1!==n.indexOf(u))throw new h6(`The tensor ${e.name} at layer "${r.name}" is part of a cycle.`);if(-1!==t.indexOf(u))return;this.containerNodes.add(m8.nodeKey(r,i)),r.id in o||(o[r.id]=Object.keys(o).length),-1===n.indexOf(u)&&n.push(u);const c=u.inboundLayers.length;for(let o=0;o<c;o++){const e=u.inputTensors[o],r=u.inboundLayers[o],i=u.nodeIndices[o],a=u.tensorIndices[o];s(e,t,n,r,i,a)}for(t.push(u);n.indexOf(u)>=0;)n.splice(n.indexOf(u),1);a.push(u)},l=[],u=[];for(const y of this.outputs)s(y,l,u);const c=a.slice().reverse();for(const y of c){n[y.id]=y,y.id in t||(t[y.id]=0);let e=t[y.id];const o=null==r[y.outboundLayer.id]?0:r[y.outboundLayer.id];e=Math.max(e,o),r[y.outboundLayer.id]=e,i[y.outboundLayer.id]=y.outboundLayer,t[y.id]=e;for(let r=0;r<y.inboundLayers.length;r++){const i=y.inboundLayers[r],o=y.nodeIndices[r],a=i.inboundNodes[o],s=null==t[a.id]?0:t[a.id];t[a.id]=Math.max(e+1,s),n[a.id]=a}}const h={};for(const y in t){const e=t[y];e in h||(h[e]=[]),h[e].push(n[y])}const d={};for(const y in r){const e=r[y];e in d||(d[e]=[]),d[e].push(i[y])}let p=Object.keys(d).map((e=>parseInt(e,10))).sort(T6);this.layers=[];for(const y of p){const e=d[y];e.sort(((e,t)=>{const n=o[e.id],r=o[t.id];return n<r?-1:n>r?1:0}));for(const t of e)t instanceof m8&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=d,p=Object.keys(h).map((e=>parseInt(e,10))).sort(T6);const f=this.inputs.slice(),g=[];for(const y of p)for(const e of h[y]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new h6(`Graph disconnected: cannot obtain value for tensor ${n} at layer "${t.name}". The following previous layers were accessed without issue: ${g}`);for(const t of e.outputTensors)f.push(t);g.push(t.name)}}this.nodesByDepth=h;const m=this.layers.map((e=>e.name));for(const y of m){const e=m.filter((e=>e===y)).length;if(1!==e)throw new h6(`The name "${y}" is used ${e} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(m))}this.outboundNodes=[],this.inboundNodes=[],new r7({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map((e=>null)),outputMasks:this.outputs.map((e=>null)),inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs.map((e=>e.shape))}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach((t=>{t._trainableWeights.forEach((t=>t.trainable=e))})),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new d6("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n={};let r=0;const i=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);i&&this.parseWeights(e);for(const a of this.layers)for(const[e,t]of a.weights.entries()){const o=i?`${t.name.split("/").slice(0,-1).join("/")+"/"}${e}`:t.originalName;if(null!=n[o])throw new d6(`Duplicate weight name: ${o}`);n[o]=t,r++}const o=[];for(const a in e){let r=a;if(null==n[a]){const e=a.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])o.push([n[r],e[a]]);else if(t)throw new d6(`Provided weight data has no target variable: ${a}`);delete n[r]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new d6(`${e.length} of ${r} weights are not set: ${e}`)}Z9(o)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],i=n.map((e=>e.startsWith("_")?e.slice(1):e)).filter((e=>!r.includes(e))).join("/");i!==t&&(e[i]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${g8}`,t.backend="TensorFlow.js",t}toJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=f8(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return iQ((()=>{e=x6(e);const n=new l7;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return h7(this.outputs,n,t)}))}computeMask(e,t){return iQ((()=>{let n;return e=x6(e),n=null==t?m6(null,e.length):x6(t),this.runInternalGraph(e,n)[1]}))}computeOutputShape(e){const t=H9(e);if(t.length!==this.inputLayers.length)throw new d6(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let a=0;a<t.length;a++){const e=this.inputLayers[a],r=t[a];n[e.name+"_0_0"]=r}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(T6);if(r.length>1)for(const a of r){const e=this.nodesByDepth[a];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map((e=>e.id)).indexOf(e.id))continue;const r=[];for(let a=0;a<t.inboundLayers.length;a++){const e=t.inboundLayers[a],i=t.nodeIndices[a],o=t.tensorIndices[a],s=n[`${e.name}_${i}_${o}`];r.push(s)}const i=H9(e.computeOutputShape(b6(r))),o=e.inboundNodes.indexOf(t);for(let t=0;t<i.length;t++){n[`${e.name}_${o}_${t}`]=i[t]}}}const i=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const e=this.outputLayers[a],t=this.outputLayersNodeIndices[a],n=this.outputLayersTensorIndices[a],r=`${e.name}_${t}_${n}`;o.push(r)}for(let a=0;a<o.length;a++){const e=o[a];y6(e in n),i.push(n[e])}return b6(i)}runInternalGraph(e,t){null==t&&(t=m6(null,e.length));const n={};for(let s=0;s<this.inputs.length;++s){const r=this.inputs[s],i=e[s],o=t[s];n[r.id]=[i,o]}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(T6);for(const s of r){const e=this.nodesByDepth[s];for(const t of e){const e=t.outboundLayer,r=t.inputTensors,i=t.outputTensors,o=new Array;for(const t of r)t.id in n&&o.push(n[t.id]);if(o.length===r.length){let r,a,s,l,u={};if(null!=t.callArgs&&(u=t.callArgs),1===o.length){const[t,n]=o[0];null==u.mask&&(u.mask=n),s=x6(e.call(t,u)),l=x6(e.computeMask(t,n)),r=[t],a=[n]}else r=o.map((e=>e[0])),a=o.map((e=>e[1])),null==u.mask&&(u.mask=a),s=x6(e.call(r,u)),l=x6(e.computeMask(r,a));if(e.activityRegularizer)throw new p6("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<i.length;++e){const t=i[e],r=s[e],o=l[e];n[t.id]=[r,o]}}}}const i=[],o=[],a=[];for(const s of this.outputs){y6(s.id in n,`Could not compute output ${s.name} : ${s.id}`);const[e,t]=n[s.id];a.push(e.shape),i.push(e),o.push(t)}return[i,o,a]}buildNodeConversionMap(e){const t={};let n;for(const r of this.layers){n=r instanceof m8?1:0;for(let e=0;e<r.inboundNodes.length;e++){const i=m8.nodeKey(r,e);this.containerNodes.has(i)&&(t[i]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new d6("Provide either a layer name or layer index");if("number"===typeof e)return this.findLayer(e);for(const n of this.layers)if(n.name===e)return n;throw new d6(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new d6(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return iQ((()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=m8.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e}))}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const o of this.layers){const e=o.getClassName(),r=o.getConfig(),i=[];for(let n=0;n<o.inboundNodes.length;n++){const e=o.inboundNodes[n],r=m8.nodeKey(o,n);let a={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),a=e.callArgs}catch(Yve){console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${e.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),a={}}if(e.inboundLayers.length>0){const n=[];for(let r=0;r<e.inboundLayers.length;r++){const i=e.inboundLayers[r],o=e.nodeIndices[r],s=e.tensorIndices[r];let l=t[m8.nodeKey(i,o)];null==l&&(l=0),n.push([i.name,l,s,a])}i.push(n)}}}const a={};a.name=o.name,a.className=e,a.config=r,a.inboundNodes=i,n.push(a)}e.layers=n;const r=[];for(let o=0;o<this.inputLayers.length;o++){const e=this.inputLayers[o],n=this.inputLayersNodeIndices[o],i=m8.nodeKey(e,n);if(!this.containerNodes.has(i))continue;let a=t[i];null!==a&&void 0!==a||(a=0);const s=this.inputLayersTensorIndices[o];r.push([e.name,a,s])}e.inputLayers=r;const i=[];for(let o=0;o<this.outputLayers.length;o++){const e=this.outputLayers[o],n=this.outputLayersNodeIndices[o],r=m8.nodeKey(e,n);if(!this.containerNodes.has(r))continue;let a=t[r];null!==a&&void 0!==a||(a=0);const s=this.outputLayersTensorIndices[o];i.push([e.name,a,s])}return e.outputLayers=i,e}static fromConfig(e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={},i={};function o(e,t){e.name in i?i[e.name].push(t):i[e.name]=[t]}function a(e,t){const n=[];let i;for(const a of t){const s=a[0],l=a[1],u=a[2];if(i=null==a[3]?{}:a[3],!(s in r))return void o(e,t);const c=r[s];if(c.inboundNodes.length<=l)return void o(e,t);const h=c.inboundNodes[l];n.push(h.outputTensors[u])}n.length>0&&e.apply(b6(n),i)}function s(e){const i=e.name,a=M7(e,null!=t.customObjects?t.customObjects:{});a.setFastWeightInitDuringBuild(n),r[i]=a;e.inboundNodes.forEach((e=>{if(!(e instanceof Array))throw new d6(`Corrupted configuration, expected array for nodeData: ${e}`);o(a,e)}))}const l=t.name,u=t.layers;for(const f of u)s(f);for(;!N6(i);)for(const e of u){const t=r[e.name];if(t.name in i){const e=i[t.name];delete i[t.name];for(const n of e)a(t,n)}}const c=[],h=[],d=t.inputLayers;for(const f of d){const e=f[0],t=f[1],n=f[2];y6(e in r);const i=r[e].inboundNodes[t].outputTensors;c.push(i[n])}const p=t.outputLayers;for(const f of p){const e=f[0],t=f[1],n=f[2];y6(e in r);const i=r[e].inboundNodes[t].outputTensors;h.push(i[n])}return new e({inputs:c,outputs:h,name:l})}get stateful(){if(this._stateful)throw new d6("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){iQ((()=>{this.layers.forEach((e=>{e.stateful&&e.resetStates()}))}))}}function y8(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>null));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){const n=[];return t.forEach((t=>{t in e?n.push(e[t]):n.push(null)})),n}throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function v8(e,t){return y8(e,t,"classWeight")}async function b8(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=iQ((()=>{if(1===e.shape.length)return YQ(e);if(2===e.shape.length){if(e.shape[1]>1){return iZ(e,1)}if(1===e.shape[1])return xZ(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)})),r=Array.from(await t.data());oQ(t);const i=[];return r.forEach((e=>{if(null==n[e])throw new Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);i.push(n[e])})),Z0(i,"float32")}return null}function x8(e,t){return tJ(e,t)}function w8(e,t){let n,r;const i=t;n=i.xs,r=i.ys,RG(null!=n&&null!=r,(()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`));const o=k8("input",e.inputNames,n),a=k8("output",e.outputNames,r),s=o[0].shape[0];RG(o.length===e.inputs.length,(()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${o.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`)),RG(a.length===e.outputs.length,(()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`));for(let l=0;l<o.length;l++)RG(o[l].shape[0]===s,(()=>`Batch size mismatch: input ${e.inputNames[l]} has ${o[l].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`));for(let l=0;l<a.length;l++)RG(a[l].shape[0]===s,(()=>`Batch size mismatch: output ${e.outputNames[l]} has ${a[l].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`));return{xs:o,ys:a}}function k8(e,t,n){if(n instanceof vY)return[n];if(Array.isArray(n))return RG(n.length===t.length,(()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`)),n;{const r=[];for(const i of t){if(null==n[i])throw new d6(`The feature data generated by the dataset lacks the required ${e} key '${i}'.`);r.push(n[i])}return r}}async function S8(e,t,n){const r=null!=n.batchesPerEpoch;if(RG(null!=e.optimizer,(()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig).")),RG(null!=n,(()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call.")),RG(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`)),RG(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`)),RG(null==n.validationSplit,(()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead.")),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const i=null!=n.validationData;let o,a;if(i)if(C8(n.validationData))RG(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`));else{const e=function(e){if(3===e.length)throw new p6("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);o=e.xs,a=e.ys}const s=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let u;u=i?l.slice().concat(l.map((e=>"val_"+e))):l.slice();const c=$7(n.callbacks,n.yieldEvery),h=null==n.verbose?1:n.verbose,{callbackList:d,history:p}=D7(c,h,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,i,u);d.setModel(e),e.history=p,await d.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,g=await t.iterator();for(;f<n.epochs;){const u={};await d.onEpochBegin(f);let c=0,h=0;for(r||(g=await t.iterator());!r||c<n.batchesPerEpoch;){const t=await g.next();if(r&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${c} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, `+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:i}=w8(e,t.value),o={};o.batch=h,o.size=r[0].shape[0],await d.onBatchBegin(h,o);const a=[];if(null!=n.classWeight){const t=v8(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)a.push(await b8(i[e],null,t[e]))}const u=r.concat(i).concat(a),p=s(u);oQ(u);for(let e=0;e<l.length;++e){const t=l[e],n=p[e];o[t]=n,aQ(n)}await d.onBatchEnd(h,o),E7(o),h++,c++}if(r?c>=n.batchesPerEpoch:t.done){if(i){let t;t=C8(n.validationData)?x6(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):x6(e.evaluate(o,a,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)u[`val_${e.metricsNames[n]}`]=t[n]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(f,u),f++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function C8(e){return"function"===typeof e.iterator}function I8(e){RG(e>0&&Number.isInteger(e),(()=>`batchSize is required to be a positive integer, but got ${e}`))}function E8(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((e=>u9(e,t,n-t))):u9(e,t,n-t)}function T8(e,t){return iQ((()=>null==e?null:Array.isArray(e)?e.map((e=>T8(e,t))):y9(e,"int32"===t.dtype?t:XQ(t,"int32"))))}function _8(e,t){const n=[];let r=0,i=null;for(;r<e;)i=r+t,i>=e&&(i=e),n.push([r,i]),r=i;return n}function N8(e){const t=[];e instanceof vY&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(l9(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function A8(e,t){if(null==e)return;const n=[];if(t instanceof vY)n.push(t.id);else if(Array.isArray(t))t.forEach((e=>n.push(e.id)));else if(null!=t)for(const i in t){const e=t[i];n.push(e.id)}const r=[];if(e instanceof vY)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach((e=>{-1===n.indexOf(e.id)&&r.push(e)}));else if(null!=e)for(const i in e){const t=e[i];-1===n.indexOf(t.id)&&r.push(t)}r.forEach((e=>{e.isDisposed||e.dispose()}))}function O8(e){return Array.isArray(e)}function R8(e){return!function(e){return e instanceof vY}(e)&&!O8(e)}function $8(e,t,n){let r,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){let t=!1;if(O8(e)&&e.length>0)t=!0;else if(R8(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new d6(`Error when checking model ${o} expected no data, but got ${e}`)}return[]}if(null==e)return t.map((e=>null));if(R8(e)){r=[];for(const n of t){if(null==e[n])throw new d6(`No data provided for "${n}". Need data for each key in: ${t}`);r.push(e[n])}}else if(O8(e)){if(e.length!==t.length)throw new d6(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);r=e}else{if(t.length>1)throw new d6(`The model ${o} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);r=[e]}if(r=N8(r),null!=n)for(let a=0;a<t.length;++a){if(null==n[a])continue;const e=r[a];if(e.shape.length!==n[a].length)throw new d6(`Error when checking ${o}: expected ${t[a]} to have ${n[a].length} dimension(s). but got array with shape ${e.shape}`);for(let t=0;t<n[a].length;++t){if(0===t&&!i)continue;const r=e.shape[t],s=n[a][t];if(null!=s&&s>=0&&r!==s)throw new d6(`${o} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${o} received an input with ${e.shape[0]} examples, each with shape [${e.shape.slice(1,e.shape.length)}] (tensor shape [${e.shape}])`)}}return r}function P8(e,t,n){let r,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new d6(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);r=e}else{if(t.length>1)throw new d6(`The model expects ${t.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);r=[e]}if(null!=n)for(let a=0;a<t.length;++a){if(null==n[a])continue;const e=r[a];if(e.shape.length!==n[a].length)throw new d6(`Error when checking ${o}: expected ${t[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(e.shape)}`);for(let r=0;r<n[a].length;++r){if(0===r&&!i)continue;const s=e.shape[r],l=n[a][r];if(null!=l&&l!==s)throw new d6(`Error when checking ${o}: expected ${t[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(e.shape)}.`)}}}class D8 extends m8{constructor(e){super(e),this.isTraining=!1}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new d6("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");l8(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>u2.adagrad(.01),Adadelta:()=>u2.adadelta(1,.95,a9()),Adam:()=>u2.adam(.001,.9,.999,a9()),Adamax:()=>u2.adamax(.002,.9,.999,a9(),0),RMSProp:()=>u2.rmsprop(.001,.9,0,a9()),SGD:()=>u2.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new d6(`Unknown Optimizer ${e}`)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof dJ))throw new d6("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new d6(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);const n=e.loss;t=n.map((e=>K7(e)))}else{const n=K7(e.loss);this.outputs.forEach((e=>{t.push(n)}))}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new d6(`Unknown entry in loss dictionary: "${t}". Only expected the following keys: ${this.outputNames}`);for(const n of this.outputNames)null==e.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),t.push(K7(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const e=this.internalOutputShapes[o],t=this.outputNames[o];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[o])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],X6("loss",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}}));const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>[]));let n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);n=e}if(Array.isArray(n))return t.map((e=>n));{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),i=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};X6("metric",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,r,o;for(const a of t){if("string"===typeof a&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(a)){const t=this.internalOutputShapes[e];let i;1===t[t.length-1]||this.lossFunctions[e]===V7?-1!==["accuracy","acc"].indexOf(a)?r=X7:-1!==["crossentropy","ce"].indexOf(a)&&(r=J7):this.lossFunctions[e]===U7?-1!==["accuracy","acc"].indexOf(a)?r=Z7:-1!==["crossentropy","ce"].indexOf(a)&&(r=t8):-1!==["accuracy","acc"].indexOf(a)?r=Y7:-1!==["crossentropy","ce"].indexOf(a)&&(r=e8),-1!==["accuracy","acc"].indexOf(a)?i="acc":-1!==["crossentropy","ce"].indexOf(a)&&(i="ce"),o=r,n=""+i}else{const e=r8(a);o=e,n=""+i8(a)}let t;X6(n,(()=>{t=o})),i(e,n,t)}})(r[e])}})),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=null==n.batchSize?32:n.batchSize;I8(r);const i=this.standardizeUserDataXY(e,t,!0,r);try{const e=i[0].concat(i[1]);this.makeTestFunction();const t=this.testFunction;return b6(this.testLoop(t,e,r,n.verbose,n.steps))}finally{A8(i[0],e),A8(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,i=e.testFunction;let o=[];if(n.verbose>0)throw new p6("Verbose mode is not implemented yet.");RG(!r||n.batches>0&&Number.isInteger(n.batches),(()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`));const a="function"===typeof t.next?t:await t.iterator();let s=0,l=0;for(;!r||l<n.batches;){const t=await a.next();if(o=iQ((()=>{if(t.value){const{xs:n,ys:r}=w8(e,t.value),a=n.concat(r),u=iQ((()=>i(a)));if(oQ(a),0===l)for(let e=0;e<u.length;++e)o.push(aJ(0));const c=a[0].shape[0];for(let e=0;e<u.length;++e){const t=u[e],n=o[e];o[e]=iQ((()=>JQ(o[e],tJ(c,t)))),l>0&&oQ(n)}oQ(u),s+=c,++l}return o})),t.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<o.length;++u){const e=o[u];o[u]=eJ(o[u],s),oQ(e)}return b6(o)}(this,e,t)}checkNumSamples(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new d6(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else{if(null==e)throw new d6(`Either the input data should have a defined shape, or ${i} shoud be specified.`);r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new d6("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],i=this.retrieveSymbolicTensors(r),o=new l7;if(e instanceof vY&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new d6(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let t=0;t<this.inputs.length;++t)o.add(this.inputs[t],e[t])}else for(const s of this.inputs){const t=e[s.name];if(null==t)throw new d6(`No value is provided for the model's input ${s.name}`);o.add(s,t)}const a=h7(i,o);return n?a:a[0]}retrieveSymbolicTensors(e){const t=m6(null,e.length);let n=e.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],o=i.map((e=>e.name));for(let r=0;r<e.length;++r){const a=o.indexOf(e[r]);if(-1!==a&&(t[r]=i[a],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach(((t,r)=>{null==t&&n.push(e[r])})),new d6(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(n)}`)}return t}predictLoop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return iQ((()=>{const r=this.checkNumSamples(e);if(n)throw new p6("Verbose predictLoop() is not implemented yet.");const i=_8(r,t),o=this.outputs.map((e=>[]));for(let t=0;t<i.length;++t){const n=iQ((()=>{const n=i[t][0],r=i[t][1],o=E8(e,n,r),a=[];if(Array.isArray(o))for(let e=0;e<o.length;++e)a.push({key:this.inputs[e],value:o[e]});else a.push({key:this.inputs[0],value:o});const s=new l7(a);return h7(this.outputs,s)}));n.forEach(((e,t)=>o[t].push(e)))}return b6(o.map((e=>NZ(e,0))))}))}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=N8(e);P8(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return I8(e),this.predictLoop(n,e)}finally{A8(n,e)}}predictOnBatch(e){P8(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t){let n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new h6("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let i=0;i<this.feedOutputShapes.length;++i){const e=this.feedOutputShapes[i];this.feedLossFns[i]===U7?r.push(e.slice(0,e.length-1).concat([1])):r.push(e)}if(function(e,t){const n=_6(e.map((e=>e.shape[0])));n.sort();const r=_6(t.map((e=>e.shape[0])));if(r.sort(),n.length>1)throw new d6(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map((e=>e.shape)))}`);if(r.length>1)throw new d6(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map((e=>e.shape)))}`);if(n.length>0&&r.length>0&&!MG(n,r))throw new d6(`Input Tensors should have the same number of samples as target Tensors. Found ${n[0]} input sample(s) and ${r[0]} target sample(s).`)}(e=$8(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=$8(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){const r=[L7,V7,W7];for(let i=0;i<e.length;++i){const o=e[i],a=t[i],s=n[i];if(null!=a){if(a===W7&&1===o.shape[o.shape.length-1])throw new d6(`You are passing a target array of shape ${o.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(a)){const e=o.shape.slice(1),t=s.slice(1);for(let n=0;n<e.length;++n){const r=e[n],i=t[n];if(null!=i&&r!==i)throw new d6(`A target Tensor with shape ${o.shape} was passed for an output of shape ${s}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new d6(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${n}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5?arguments[5]:void 0;const[a,s]=this.standardizeUserDataXY(e,t,i,o);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=v8(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await b8(s[t],null,e[t]))}return[a,s,l]}testLoop(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return iQ((()=>{const o=this.checkNumSamples(t,n,i,"steps"),a=[];if(r>0)throw new p6("Verbose mode is not implemented yet.");if(null!=i)throw new p6("steps mode in testLoop() is not implemented yet");{const r=_8(o,n),i=Z0(i9(0,o));for(let n=0;n<r.length;++n){const o=r[n][0],s=r[n][1],l=u9(i,o,s-o),u=T8(t,l),c=e(u);if(0===n)for(let e=0;e<c.length;++e)a.push(aJ(0));for(let e=0;e<c.length;++e){const t=c[e];a[e]=JQ(a[e],tJ(s-o,t))}}for(let e=0;e<a.length;++e)a[e]=eJ(a[e],o)}return a}))}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let i=r;if(v6(e,r)>1){i+=`_${v6(e.slice(0,n),r)}`}t.push(i)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),o=[],a=this.collectedTrainableWeights.map((e=>e.read())),s=this.optimizer_.minimize((()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const a=new l7(e),s=h7(this.outputs,a,{training:!0});let l;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(r[n],s[n]);null!=i[n]&&(e=x8(e,i[n]));const o=b0(e);t.push(o),l=0===n?e:JQ(l,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][0],i=this.metricsTensors[n][1];e=b0(t(r[i],s[i]))}aQ(e),o.push(e)}return l=b0(l),this.calculateLosses().forEach((e=>{l=JQ(l,e)})),l}),!0,a);return[s].concat(o)}}makeTestFunction(){this.testFunction=e=>iQ((()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let e=0;e<this.inputs.length;++e)o.push({key:this.inputs[e],value:r[e]});const a=new l7(o),s=h7(this.outputs,a);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],o=b0(r(i[e],s[e]));n=0===e?o:JQ(n,o),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],o=b0(n(i[r],s[r]));t.push(o)}return t}))}async fit(e,t){let n,r,i,o,a,s,l,u,c,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;try{const d=null==h.batchSize?32:h.batchSize;I8(d);const p=!1,f=await this.standardizeUserData(e,t,h.sampleWeight,h.classWeight,p,d);n=f[0],r=f[1],c=f[2];let g,m=!1;if(null!=h.validationData&&h.validationData.length>0){if(m=!0,2!==h.validationData.length)throw 3===h.validationData.length?new p6("validationData including sample weights is not supported yet."):new d6(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${h.validationData} is invalid.`);a=h.validationData[0],s=h.validationData[1];const e=!0,t=await this.standardizeUserData(a,s,null,null,e,d);l=t[0],u=t[1],g=l.concat(u)}else if(null!=h.validationSplit&&h.validationSplit>0&&h.validationSplit<1){m=!0;const e=Math.floor(n[0].shape[0]*(1-h.validationSplit)),t=n[0].shape[0];l=E8(n,e,t),i=n,n=E8(n,0,e),u=E8(r,e,t),o=r,r=E8(r,0,e),g=l.concat(u)}else null!=h.validationSteps&&(m=!0);const y=n.concat(r).concat(c);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let x,w;m?(this.makeTestFunction(),x=this.testFunction,w=b.slice().concat(b.map((e=>"val_"+e)))):(x=null,g=[],w=b.slice());const k=$7(h.callbacks,h.yieldEvery);return await this.fitLoop(v,y,b,d,h.epochs,h.verbose,k,x,g,h.shuffle,w,h.initialEpoch,null,null)}finally{this.isTraining=!1,A8(n,e),A8(r,t),A8(i,e),A8(o,t),A8(l,a),A8(u,s),null!=c&&oQ(c)}}async fitLoop(e,t,n,r,i,o,a,s,l,u,c,h,d,p){null==r&&(r=32),null==i&&(i=1),null==u&&(u=!0),null==h&&(h=0);let f=!1;if(null!=s&&null!=l&&(f=!0),null!=p&&(f=!0,null==d))throw new d6("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(t,r,d,"steps_per_epoch");let m;null!=g&&(m=i9(0,g)),null==o&&(o=1);const{callbackList:y,history:v}=D7(a,o,i,h,g,d,r,f,c);y.setModel(this),this.history=v,await y.onTrainBegin(),this.stopTraining_=!1;for(let b=h;b<i;++b){await y.onEpochBegin(b);const i={};if(null!=d)throw new p6("stepsPerEpoch mode is not implemented yet.");{if("batch"===u)throw new p6("batch shuffling is not implemneted yet");u&&_G(m);const o=Z0(m),a=_8(g,r);for(let u=0;u<a.length;++u){const c={};if(await y.onBatchBegin(u,c),iQ((()=>{const h=a[u][0],d=a[u][1],p=u9(o,h,d-h);c.batch=u,c.size=d-h;const g=T8(t,p),m=e(g);for(let e=0;e<n.length;++e){const t=n[e],r=m[e];c[t]=r,aQ(r)}if(u===a.length-1&&f){const e=this.testLoop(s,l,r);for(let t=0;t<n.length;++t){const r=n[t],o=e[t];aQ(o),i["val_"+r]=o}}})),await y.onBatchEnd(u,c),E7(c),this.stopTraining_)break}o.dispose()}if(await y.onEpochEnd(b,i),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return S8(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],i=n[1],o=this.makeTrainFunction()(r.concat(i)),a=[];for(const s of o){const e=await s.data();a.push(e[0])}return oQ(o),A8(n[0],e),A8(n[1],t),b6(a)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n);for(let o=0;o<r.length;++o)n&&!r[o].trainable||t.push({name:r[o].originalName,tensor:i[o]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=rQ().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-rQ().numTensors}return e}getLossIdentifiers(){let e;if("string"===typeof this.loss)e=w6(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!==typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map((e=>w6(e)))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=w6(n[r])}}return e}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[w6(i8(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((e=>w6(i8(e))));{const e={};for(const t in this.metrics)e[t]=w6(i8(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=M7(p8(e.optimizer_config));let n,r;if("string"===typeof e.loss)n=k6(e.loss);else if(Array.isArray(e.loss))n=e.loss.map((e=>k6(e)));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=k6(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map((e=>k6(e)));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=k6(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"===typeof e){const t=(n=e,xQ.getSaveHandlers(n));if(0===t.length)throw new d6(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new d6(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}var n;if(null==e.save)throw new d6("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await uQ(this.getNamedWeights(t)),i={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:`TensorFlow.js tfjs-layers v${g8}`,convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){i.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:n}=await uQ(await this.optimizer.getWeights(),e);r.specs.push(...n),r.data=(o=[r.data,t],tQ.join(o))}var o;if(null!=this.userDefinedMetadata){const e=!0;a8(this.userDefinedMetadata,this.name,e),i.userDefinedMetadata=this.userDefinedMetadata}return i.weightData=r.data,i.weightSpecs=r.specs,e.save(i)}setUserDefinedMetadata(e){a8(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}D8.className="Model",hJ(D8);class M8 extends D8{}async function F8(e,t){if(null==t&&(t={}),"string"===typeof e){const i=(n=e,r=t,xQ.getLoadHandlers(n,r));if(0===i.length)i.push(function(e,t){return MJ(e,t)}(e,t));else if(i.length>1)throw new d6(`Found more than one (${i.length}) load handlers for URL '${e}'`);e=i[0]}var n,r;return async function(e,t,n){null==n&&(n={});if(null==e.load)throw new d6("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await e.load();let i=r.modelTopology;null!=i.model_config&&(i=i.model_config);const o=null==n.strict||n.strict,a=null!=r.weightData&&null!=r.weightSpecs&&o,s=M7(p8(i),t,a),l=r.trainingConfig;null!=l&&s.loadTrainingConfig(l);null!=r.userDefinedMetadata&&s.setUserDefinedMetadata(r.userDefinedMetadata);if(null!=r.weightData){if(null==r.weightSpecs)throw new d6("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:e,optimizerWeights:t}=function(e,t){const n=cQ(e,t),r={},i=[];return t.forEach((e=>{"optimizer"===e.group?i.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:i}}(r.weightData,r.weightSpecs);s.loadWeights(e,o),null!=s.optimizer&&t.length>0&&await s.optimizer.setWeights(t),oQ(e),oQ(t.map((e=>e.tensor)))}return s}(e,void 0,t)}M8.className="Functional",hJ(M8);class L8 extends D8{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:L6("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some((e=>e<0)))throw new d6(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof L8||e instanceof D8;let n;if(t){if(n=e,1!==n.outputs.length)throw new d6("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new d6("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new d6("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new d6("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new s7({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new d6(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new d6("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=a7(this.outputs[0])}this.inboundNodes=[],new r7({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:m6(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(K9(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new D8({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new h6("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new h6("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new h6("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new h6("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t){let n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new d6("Legacy serialization format not supported yet.");n=t}else RG(null!=t.layers,(()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field.")),n=t.layers,delete t.layers,i=t;const o=new e(i);if(!(o instanceof L8))throw new p6(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const a of n){const e=M7(a,void 0,r);r&&e.setFastWeightInitDuringBuild(!0),o.add(e)}return o}set stopTraining(e){if(null==this.model)throw new d6("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new d6("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}L8.className="Sequential",hJ(L8);class j8 extends uJ{getConfig(){return{}}}class z8 extends j8{apply(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new p6(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return UZ(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}z8.className="elu",hJ(z8);class B8 extends j8{apply(e){return j0(e)}}B8.className="selu",hJ(B8);class W8 extends j8{apply(e){return F0(e)}}W8.className="relu",hJ(W8);class U8 extends j8{apply(e){return iQ((()=>w0(6,F0(e))))}}U8.className="relu6",hJ(U8);class V8 extends j8{apply(e){return e}}V8.className="linear",hJ(V8);class G8 extends j8{apply(e){return B0(e)}}G8.className="sigmoid",hJ(G8);class H8 extends j8{apply(e){return function(e){return iQ((()=>{const t=JQ(.5,tJ(.2,e));return _Z(t,0,1)}))}(e)}}H8.className="hardSigmoid",hJ(H8);class q8 extends j8{apply(e){return K0(e)}}q8.className="softplus",hJ(q8);class K8 extends j8{apply(e){return function(e){return iQ((()=>eJ(e,JQ(bJ(e),1))))}(e)}}K8.className="softsign",hJ(K8);class X8 extends j8{apply(e){return J0(e)}}X8.className="tanh",hJ(X8);class Y8 extends j8{apply(e){return q0(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}Y8.className="softmax",hJ(Y8);class Q8 extends j8{apply(e){return o0(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}Q8.className="logSoftmax",hJ(Q8);class J8 extends j8{apply(e){return iQ((()=>iQ((()=>{const t=Math.sqrt(2),n=tJ(.5,JQ(1,GZ(eJ(e,t))));return tJ(e,n)}))))}}J8.className="gelu",hJ(J8);class Z8 extends j8{apply(e){return iQ((()=>tJ(.5,tJ(e,JQ(1,J0(tJ(nJ(eJ(2,Math.PI)),JQ(e,tJ(.044715,mJ(e,3))))))))))}}Z8.className="gelu_new",hJ(Z8);class eee extends j8{apply(e){return iQ((()=>tJ(e,J0(K0(e)))))}}eee.className="mish",hJ(eee);class tee extends j8{apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return iQ((()=>tJ(B0(tJ(e,t)),e)))}}function nee(e){return e.getClassName()}function ree(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E6(e,cJ.getMap().classNameMap,t,"activation")}function iee(e){if(null==e){const e={className:"linear",config:{}};return ree(e)}if("string"===typeof e){const t={};return t.className=e,t.config={},ree(t)}return e instanceof j8?e:ree(e)}function oee(e){if(null!=e&&"object"!==typeof e)throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}tee.className="swish",hJ(tee);class aee extends uJ{}class see extends aee{constructor(e){super(),oee(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return iQ((()=>{let t=E0([1]);return this.hasL1&&(t=JQ(t,i0(tJ(this.l1,bJ(e))))),this.hasL2&&(t=JQ(t,i0(tJ(this.l2,v9(e))))),xZ(t,[])}))}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}see.className="L1L2",hJ(see);const lee={l1l2:"L1L2"};function uee(e){return C6(e)}function cee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E6(e,cJ.getMap().classNameMap,t,"regularizer")}function hee(e){if(null==e)return null;if("string"===typeof e){return cee({className:e in lee?lee[e]:e,config:{}})}return e instanceof aee?e:cee(e)}class dee extends o7{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=q9(e);let n=F0(e);return null!=this.maxValue&&(n=_Z(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}dee.className="ReLU",hJ(dee);class pee extends o7{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=q9(e);return e0(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}pee.className="LeakyReLU",hJ(pee);class fee extends o7{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=V9(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=hee(e.alphaRegularizer),this.alphaConstraint=C7(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new d6(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=K9(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new e7({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=q9(e),A0(e,this.alpha.read())}getConfig(){const e={alphaInitializer:U9(this.alphaInitializer),alphaRegularizer:uee(this.alphaRegularizer),alphaConstraint:k7(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}fee.className="PReLU",hJ(fee);class gee extends o7{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new p6(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=q9(e);return UZ(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}gee.className="ELU",hJ(gee);class mee extends o7{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=q9(e);return tJ(n,XQ(JZ(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}mee.className="ThresholdedReLU",hJ(mee);class yee extends o7{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new Y8).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return iQ((()=>{let n=q9(e);const r=t.mask;if(null!=r){const e=tJ(yJ(T0(n.shape),XQ(r,n.dtype)),aJ(-1e9));n=JQ(n,e)}return this.axis instanceof Array?this.axis.length>1?HZ(yJ(n,f0(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)}))}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function vee(e,t,n){if("number"===typeof e)return m6(e,t);if(e.length!==t)throw new d6(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let r=0;r<t;++r){const i=e[r];if(!e9(i))throw new d6(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${i}`)}return e}function bee(e,t,n,r){if(null==e)return e;let i;return i="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((i+r-1)/r)}function xee(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+r9([n-t,0]);else{if("same"!==r)throw new d6(`Unsupport padding mode: ${r}.`);e*=t}return e}function wee(e,t){return iQ((()=>(G6(t),"channelsFirst"===t?a1(e,[0,2,3,1]):e)))}function kee(e,t){return iQ((()=>(G6(t),"channelsFirst"===t?a1(e,[0,2,3,4,1]):e)))}function See(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return iQ((()=>{if(null==o&&(o="channelsLast"),G6(o),3!==e.shape.length)throw new d6(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(3!==t.shape.length)throw new d6(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new d6(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if("channelsFirst"===o&&(e=a1(e,[0,2,1])),"causal"===i)throw new p6("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=DZ(e,t,r,"same"===i?"same":"valid","NWC",a);return null!=n&&(s=x9(s,n)),s}))}function Cee(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return iQ((()=>{if(null==o&&(o="channelsLast"),G6(o),3!==e.rank&&4!==e.rank)throw new d6(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(3!==t.rank&&4!==t.rank)throw new d6(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=wee(e,o);if("causal"===i)throw new p6("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=b1({x:l,filter:t,strides:r,pad:"same"===i?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===o&&(l=a1(l,[0,3,1,2])),l}))}function Iee(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;return iQ((()=>{if(null==o&&(o="channelsLast"),G6(o),4!==e.rank&&5!==e.rank)throw new d6(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(4!==t.rank&&5!==t.rank)throw new d6(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let s=kee(e,o);if("causal"===i)throw new p6("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=LZ(s,t,r,"same"===i?"same":"valid","NDHWC",a),null!=n&&(s=x9(s,n)),"channelsFirst"===o&&(s=a1(s,[0,4,1,2,3])),s}))}yee.className="Softmax",hJ(yee);class Eee extends o7{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Eee.verifyArgs(t),this.rank=e,R6(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new p6(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=vee(t.kernelSize,e,"kernelSize"),this.strides=vee(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,H6(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,G6(this.dataFormat),this.activation=iee(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=V9(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=C7(t.biasConstraint),this.biasRegularizer=hee(t.biasRegularizer),this.activityRegularizer=hee(t.activityRegularizer),this.dilationRate=vee(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new d6(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new d6(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new d6(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(e){if(y6("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!O6(e.kernelSize,"number",1,3))throw new d6(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:nee(this.activation),useBias:this.useBias,biasInitializer:U9(this.biasInitializer),biasRegularizer:uee(this.biasRegularizer),activityRegularizer:uee(this.activityRegularizer),biasConstraint:k7(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class Tee extends Eee{constructor(e,t){super(e,t),this.kernel=null,Tee.verifyArgs(t),this.filters=t.filters,R6(this.filters,"filters"),this.kernelInitializer=V9(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=C7(t.kernelConstraint),this.kernelRegularizer=hee(t.kernelRegularizer)}build(e){e=K9(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new d6(`The channel dimension of the input should be defined. Found ${e[t]}`);const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return iQ((()=>{let t;e=q9(e);const n=null==this.bias?null:this.bias.read(),r=P6(this.activation.getClassName());if(null!=r&&2===this.rank)t=Cee(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=See(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=Cee(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new p6("convolutions greater than 3D are not implemented yet.");t=Iee(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t}))}computeOutputShape(e){e=K9(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<n.length;++i){const e=bee(n[i],this.kernelSize[i],this.padding,this.strides[i],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[i]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:U9(this.kernelInitializer),kernelRegularizer:uee(this.kernelRegularizer),kernelConstraint:k7(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new d6(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class _ee extends Tee{constructor(e){super(2,e),_ee.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!O6(e.kernelSize,"number",1,2))throw new d6(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}_ee.className="Conv2D",hJ(_ee);class Nee extends Tee{constructor(e){super(3,e),Nee.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new d6(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Nee.className="Conv3D",hJ(Nee);class Aee extends _ee{constructor(e){if(super(e),this.inputSpec=[new e7({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new d6(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=K9(e)).length)throw new d6("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new d6("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new e7({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return iQ((()=>{let t=q9(e);if(4!==t.shape.length)throw new d6(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let i,o;"channelsFirst"===this.dataFormat?(i=2,o=3):(i=1,o=2);const a=n[i],s=n[o],l=this.kernelSize[0],u=this.kernelSize[1],c=this.strides[0],h=this.strides[1],d=[r,xee(a,c,l,this.padding),xee(s,h,u,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=a1(t,[0,2,3,1]));let p=FZ(t,this.kernel.read(),d,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(p=a1(p,[0,3,1,2])),null!=this.bias&&(p=x9(p,this.bias.read(),this.dataFormat)),null!=this.activation&&(p=this.activation.apply(p)),p}))}computeOutputShape(e){const t=(e=K9(e)).slice();let n,r,i;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3):(n=3,r=1,i=2);const o=this.kernelSize[0],a=this.kernelSize[1],s=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=xee(t[r],s,o,this.padding),t[i]=xee(t[i],l,a,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Aee.className="Conv2DTranspose",hJ(Aee);class Oee extends Nee{constructor(e){if(super(e),this.inputSpec=[new e7({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new d6(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(5!==(e=K9(e)).length)throw new d6("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new d6("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new e7({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return iQ((()=>{let t=q9(e);if(5!==t.shape.length)throw new d6(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let i,o,a;"channelsFirst"===this.dataFormat?(a=2,i=3,o=4):(a=1,i=2,o=3);const s=n[a],l=n[i],u=n[o],c=this.kernelSize[0],h=this.kernelSize[1],d=this.kernelSize[2],p=this.strides[0],f=this.strides[1],g=this.strides[2],m=[r,xee(s,p,c,this.padding),xee(l,f,h,this.padding),xee(u,g,d,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=a1(t,[0,2,3,4,1]));let y=zZ(t,this.kernel.read(),m,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(y=a1(y,[0,4,1,2,3])),null!==this.bias&&(y=x9(y,this.bias.read(),this.dataFormat)),null!==this.activation&&(y=this.activation.apply(y)),y}))}computeOutputShape(e){const t=(e=K9(e)).slice();let n,r,i,o;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3,o=4):(n=4,r=1,i=2,o=3);const a=this.kernelSize[0],s=this.kernelSize[1],l=this.kernelSize[2],u=this.strides[0],c=this.strides[1],h=this.strides[2];return t[n]=this.filters,t[r]=xee(t[r],u,a,this.padding),t[i]=xee(t[i],c,s,this.padding),t[o]=xee(t[o],h,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Oee.className="Conv3DTranspose",hJ(Oee);class Ree extends Tee{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new d6("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new d6("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new d6(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=V9(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=hee(t.depthwiseRegularizer),this.depthwiseConstraint=C7(t.depthwiseConstraint),this.pointwiseInitializer=V9(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=hee(t.pointwiseRegularizer),this.pointwiseConstraint=C7(t.pointwiseConstraint)}build(e){if((e=K9(e)).length<this.rank+2)throw new d6(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new d6(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),i=[];for(let a=0;a<this.rank;++a)i.push(1);i.push(n*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new e7({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return iQ((()=>{let t;if(e=q9(e),1===this.rank)throw new p6("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=a1(e,[0,2,3,1])),t=z0(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=x9(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=a1(t,[0,3,1,2])),t}))}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=U9(this.depthwiseInitializer),e.pointwiseInitializer=U9(this.pointwiseInitializer),e.depthwiseRegularizer=uee(this.depthwiseRegularizer),e.pointwiseRegularizer=uee(this.pointwiseRegularizer),e.depthwiseConstraint=k7(this.depthwiseConstraint),e.pointwiseConstraint=k7(this.pointwiseConstraint),e}}Ree.className="SeparableConv";class $ee extends Ree{constructor(e){super(2,e)}}$ee.className="SeparableConv2D",hJ($ee);class Pee extends Tee{constructor(e){super(1,e),Pee.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!O6(e.kernelSize,"number",1,1))throw new d6(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}Pee.className="Conv1D",hJ(Pee);class Dee extends o7{constructor(e){super(e),"number"===typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return iQ((()=>{if(e=q9(e),"channelsLast"===this.dataFormat){const t=h9(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return h9(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=h9(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return h9(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}}))}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}Dee.className="Cropping2D",hJ(Dee);class Mee extends o7{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,G6(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){A6(z6,"InterpolationFormat",e)}(this.interpolation)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return iQ((()=>{let t=q9(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=a1(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],i="nearest"===this.interpolation?s2.resizeNearestNeighbor(t,[e,r]):s2.resizeBilinear(t,[e,r]);return a1(i,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?s2.resizeNearestNeighbor(t,[e,r]):s2.resizeBilinear(t,[e,r])}}))}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}Mee.className="UpSampling2D",hJ(Mee);class Fee extends Eee{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=V9(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=C7(e.depthwiseConstraint),this.depthwiseRegularizer=hee(e.depthwiseRegularizer)}build(e){if((e=K9(e)).length<4)throw new d6(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new d6(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return iQ((()=>{let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return iQ((()=>{null==i&&(i="channelsLast"),G6(i);let a=wee(e,i);if(4!==e.rank)throw new d6(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new d6(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return a=WZ(a,t,n,"same"===r?"same":"valid","NHWC",o),"channelsFirst"===i&&(a=a1(a,[0,3,1,2])),a}))}(e=q9(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=x9(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t}))}computeOutputShape(e){e=K9(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=bee(t,this.kernelSize[0],this.padding,this.strides[0]),o=bee(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,i,o]:[e[0],i,o,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=U9(this.depthwiseInitializer),e.depthwiseRegularizer=uee(this.depthwiseRegularizer),e.depthwiseConstraint=k7(this.depthwiseRegularizer),e}}function Lee(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new d6("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function i(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=i(t),constants:n=i(n)}}function jee(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return iQ((()=>{const l=t.shape.length;if(l<3)throw new d6(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(i9(2,l));if(t=a1(t,u),null!=o)throw new p6("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&(i=XQ(XQ(i,"bool"),"float32"),i.rank===l-1&&(i=qZ(i,-1)),i=a1(i,u)),r&&(t=L0(t,0),null!=i&&(i=L0(i,0)));const c=[];let h,d=n;const p=t.shape[0],f=n1(t);let g,m;null!=i&&(g=n1(i));for(let t=0;t<p;++t){const n=f[t],r=iQ((()=>e(n,d)));if(null==i)h=r[0],d=r[1];else{const e=iQ((()=>{const e=g[t],n=yJ(_0(e),e),i=JQ(tJ(r[0],e),tJ(d[0],n)),o=d.map(((t,i)=>JQ(tJ(r[1][i],e),tJ(t,n))));return{output:i,newStates:o}}));h=e.output,d=e.newStates}s&&c.push(h)}if(s){m=Q0(c,1)}return[h,m,d]}))}Fee.className="DepthwiseConv2D",hJ(Fee);class zee extends o7{constructor(e){let t;if(super(e),null==e.cell)throw new d6("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new Kee({cells:e.cell}):e.cell,null==t.stateSize)throw new d6("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new e7({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return i9(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((e=>null))}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){G9(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return iQ((()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map((e=>null));return[e].concat(t)}return e}))}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new p6("Constants support is not implemented in RNN yet.");G9(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new e7({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let i;if(this.cell.build(r),i=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!MG(this.stateSpec.map((e=>e.shape[e.shape.length-1])),i))throw new d6(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map((e=>new e7({shape:[null,e]})));this.stateful&&this.resetStates()}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];iQ((()=>{if(!this.stateful)throw new c6("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new d6("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>E0([n,e]))):this.states_=[E0([n,this.cell.stateSize])];else if(null==e)oQ(this.states_),null!=this.keptStates&&(oQ(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>E0([n,e]))):this.states_[0]=E0([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new d6(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);!0===t?this.keptStates.push(this.states_.slice()):oQ(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,o=[n,i];if(!MG(r.shape,o))throw new d6(`State ${t} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${r.shape}`);this.states_[t]=r}}this.states_=this.states_.map((e=>aQ(e.clone())))}))}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const i=Lee(e,n,r,this.numConstants);e=i.inputs,n=i.initialState,r=i.constants;let o=[],a=[];if(null!=n){t.initialState=n,o=o.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new e7({shape:e.shape}));a=a.concat(this.stateSpec)}null!=r&&(t.constants=r,o=o.concat(r),this.numConstants=r.length);if(o[0]instanceof t7){const n=[e].concat(o),r=this.inputSpec.concat(a),i=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=i,s}return super.apply(e,t)}call(e,t){return iQ((()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let i=null==t?null:t.initialState;e=q9(e),null==i&&(i=this.stateful?this.states_:this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==o)throw new d6(`RNN Layer has ${o} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:r},s=jee(((e,t)=>{const n=this.cell.call([e].concat(t),a);return[n[0],n.slice(1)]}),e,i,this.goBackwards,n,null,this.unroll,this.returnSequences),l=s[0],u=s[1],c=s[2];this.stateful&&this.resetStates(c,r);const h=this.returnSequences?u:l;return this.returnState?[h].concat(c):h}))}getInitialState(e){return iQ((()=>{let t=E0(e.shape);return t=i0(t,[1,2]),t=l9(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map((e=>e>1?f9(t,[1,e]):t)):this.cell.stateSize>1?[f9(t,[1,this.cell.stateSize])]:[t]}))}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===zee.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=M7(t.cell,n);return new e(Object.assign(t,{cell:r}))}}zee.className="RNN",hJ(zee);class Bee extends o7{}class Wee extends Bee{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,R6(this.units,"units"),this.activation=iee(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=V9(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=V9(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=V9(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=hee(e.kernelRegularizer),this.recurrentRegularizer=hee(e.recurrentRegularizer),this.biasRegularizer=hee(e.biasRegularizer),this.kernelConstraint=C7(e.kernelConstraint),this.recurrentConstraint=C7(e.recurrentConstraint),this.biasConstraint=C7(e.biasConstraint),this.dropout=n9([1,r9([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=n9([1,r9([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=K9(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return iQ((()=>{if(2!==e.length)throw new d6(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];const r=null!=t.training&&t.training;let i;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Xee({ones:()=>_0(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Xee({ones:()=>_0(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;i=m9(null!=o?tJ(e,o):e,this.kernel.read()),null!=this.bias&&(i=x9(i,this.bias.read())),null!=a&&(n=tJ(n,a));let s=JQ(i,m9(n,this.recurrentKernel.read()));return null!=this.activation&&(s=this.activation.apply(s)),[s,s]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:nee(this.activation),useBias:this.useBias,kernelInitializer:U9(this.kernelInitializer),recurrentInitializer:U9(this.recurrentInitializer),biasInitializer:U9(this.biasInitializer),kernelRegularizer:uee(this.kernelRegularizer),recurrentRegularizer:uee(this.recurrentRegularizer),biasRegularizer:uee(this.biasRegularizer),activityRegularizer:uee(this.activityRegularizer),kernelConstraint:k7(this.kernelConstraint),recurrentConstraint:k7(this.recurrentConstraint),biasConstraint:k7(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}Wee.className="SimpleRNNCell",hJ(Wee);class Uee extends zee{constructor(e){e.cell=new Wee(e),super(e)}call(e,t){return iQ((()=>{null!=this.cell.dropoutMask&&(oQ(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(oQ(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})}))}static fromConfig(e,t){return new e(t)}}Uee.className="SimpleRNN",hJ(Uee);class Vee extends Bee{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new d6("GRUCell does not support reset_after parameter set to true.");this.units=e.units,R6(this.units,"units"),this.activation=iee(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=iee(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=V9(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=V9(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=V9(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=hee(e.kernelRegularizer),this.recurrentRegularizer=hee(e.recurrentRegularizer),this.biasRegularizer=hee(e.biasRegularizer),this.kernelConstraint=C7(e.kernelConstraint),this.recurrentConstraint=C7(e.recurrentConstraint),this.biasConstraint=C7(e.biasConstraint),this.dropout=n9([1,r9([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=n9([1,r9([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=K9(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return iQ((()=>{if(2!==e.length)throw new d6(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Xee({ones:()=>_0(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Xee({ones:()=>_0(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let a,s,l;0<this.dropout&&this.dropout<1&&(e=tJ(e,i[0]));let u=m9(e,this.kernel.read());this.useBias&&(u=x9(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=tJ(r,o[0]));const c=this.recurrentKernel.read(),[h,d]=X0(c,[2*this.units,this.units],c.rank-1),p=m9(r,h),[f,g,m]=X0(u,3,u.rank-1),[y,v]=X0(p,2,p.rank-1);a=this.recurrentActivation.apply(JQ(f,y)),s=this.recurrentActivation.apply(JQ(g,v));const b=m9(tJ(s,r),d);l=this.activation.apply(JQ(m,b));const x=JQ(tJ(a,r),tJ(JQ(1,S0(a)),l));return[x,x]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:nee(this.activation),recurrentActivation:nee(this.recurrentActivation),useBias:this.useBias,kernelInitializer:U9(this.kernelInitializer),recurrentInitializer:U9(this.recurrentInitializer),biasInitializer:U9(this.biasInitializer),kernelRegularizer:uee(this.kernelRegularizer),recurrentRegularizer:uee(this.recurrentRegularizer),biasRegularizer:uee(this.biasRegularizer),activityRegularizer:uee(this.activityRegularizer),kernelConstraint:k7(this.kernelConstraint),recurrentConstraint:k7(this.recurrentConstraint),biasConstraint:k7(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}Vee.className="GRUCell",hJ(Vee);class Gee extends zee{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Vee(e),super(e)}call(e,t){return iQ((()=>{null!=this.cell.dropoutMask&&(oQ(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(oQ(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}Gee.className="GRU",hJ(Gee);class Hee extends Bee{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,R6(this.units,"units"),this.activation=iee(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=iee(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=V9(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=V9(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=V9(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=hee(e.kernelRegularizer),this.recurrentRegularizer=hee(e.recurrentRegularizer),this.biasRegularizer=hee(e.biasRegularizer),this.kernelConstraint=C7(e.kernelConstraint),this.recurrentConstraint=C7(e.recurrentConstraint),this.biasConstraint=C7(e.biasConstraint),this.dropout=n9([1,r9([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=n9([1,r9([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=K9(e))[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new((t=class extends I9{apply(t,r){const i=e.apply([n]),o=(new T9).apply([n]),a=e.apply([2*n]);return p9(p9(i,o),a)}}).className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return iQ((()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new d6(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Xee({ones:()=>_0(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Xee({ones:()=>_0(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let s,l,u,c;0<this.dropout&&this.dropout<1&&(e=tJ(e,o[0]));let h=m9(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=tJ(r,a[0])),h=JQ(h,m9(r,this.recurrentKernel.read())),this.useBias&&(h=x9(h,this.bias.read()));const[d,p,f,g]=X0(h,4,h.rank-1);s=this.recurrentActivation.apply(d),l=this.recurrentActivation.apply(p),u=JQ(tJ(l,i),tJ(s,this.activation.apply(f))),c=this.recurrentActivation.apply(g);const m=tJ(c,this.activation.apply(u));return[m,m,u]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:nee(this.activation),recurrentActivation:nee(this.recurrentActivation),useBias:this.useBias,kernelInitializer:U9(this.kernelInitializer),recurrentInitializer:U9(this.recurrentInitializer),biasInitializer:U9(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:uee(this.kernelRegularizer),recurrentRegularizer:uee(this.recurrentRegularizer),biasRegularizer:uee(this.biasRegularizer),activityRegularizer:uee(this.activityRegularizer),kernelConstraint:k7(this.kernelConstraint),recurrentConstraint:k7(this.recurrentConstraint),biasConstraint:k7(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}Hee.className="LSTMCell",hJ(Hee);class qee extends zee{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Hee(e),super(e)}call(e,t){return iQ((()=>{null!=this.cell.dropoutMask&&(oQ(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(oQ(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}qee.className="LSTM",hJ(qee);class Kee extends Bee{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return iQ((()=>{let n=e.slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const i=[];let o;for(let a=0;a<this.cells.length;++a){const s=this.cells[a];n=r[a],o=0===a?[e[0]].concat(n):[o[0]].concat(n),o=s.call(o,t),i.push(o.slice(1))}n=[];for(const e of i.slice().reverse())n.push(...e);return[o[0]].concat(n)}))}build(e){let t;G9(e)&&(e=e[0]),this.cells.forEach(((n,r)=>{X6(`RNNCell_${r}`,(()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map((e=>({className:e.getClassName(),config:e.getConfig()})))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];for(const i of t.cells)r.push(M7(i,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return J9(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,i=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],i[e]])}Z9(t)}}function Xee(e){const{ones:t,rate:n,training:r=!1,count:i=1,dropoutFunc:o}=e,a=()=>null!=o?o(t(),n):w9(t(),n),s=()=>k9(a,t,r);if(!i||i<=1)return aQ(s().clone());return Array(i).fill(void 0).map(s).map((e=>aQ(e.clone())))}Kee.className="StackedRNNCells",hJ(Kee);var Yee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Qee extends zee{constructor(e){if(e.unroll)throw new p6("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new p6("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new e7({ndim:5})]}call(e,t){return iQ((()=>{if(null!=this.cell.dropoutMask&&(oQ(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(oQ(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new d6("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})}))}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return iQ((()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),i=E0([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(i):[i]}))}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];iQ((()=>{if(!this.stateful)throw new c6("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),i=[r[0],...r.slice(2)];if(null==n[0])throw new d6("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>E0(i))):this.states_=[E0(i)];else if(null==e)oQ(this.states_),null!=this.keptStates&&(oQ(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>E0(i))):this.states_[0]=E0(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new d6(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):oQ(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=i;if(!MG(n.shape,r))throw new d6(`State ${t} is incompatible with layer ${this.name}: expected shape=${r}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map((e=>aQ(e.clone())))}))}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:i,strides:o,dilationRate:a}=this.cell,s="channelsFirst"===t,l=e[s?3:2],u=e[s?4:3],c=bee(l,r[0],i,o[0],a[0]),h=bee(u,r[1],i,o[1],a[1]);return[...e.slice(0,2),...s?[n,c,h]:[c,h,n]]}}Qee.className="ConvRNN2D";class Jee extends Hee{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:i,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,R6(this.filters,"filters"),this.kernelSize=vee(n,2,"kernelSize"),this.kernelSize.forEach((e=>R6(e,"kernelSize"))),this.strides=vee(r||1,2,"strides"),this.strides.forEach((e=>R6(e,"strides"))),this.padding=i||"valid",H6(this.padding),this.dataFormat=o||"channelsLast",G6(this.dataFormat),this.dilationRate=vee(a||1,2,"dilationRate"),this.dilationRate.forEach((e=>R6(e,"dilationRate")))}build(e){var t;e=K9(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new d6(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends I9{apply(e,t){return d9([n.apply([r]),T0([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return iQ((()=>{if(3!==e.length)throw new d6(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const n=t.training||!1,r=e[0],i=e[1],o=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Xee({ones:()=>_0(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,s=(e,t,n)=>t&&t[n]?tJ(t[n],e):e;let l=s(r,a,0),u=s(r,a,1),c=s(r,a,2),h=s(r,a,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Xee({ones:()=>_0(i),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const d=this.recurrentDropoutMask;let p=s(i,d,0),f=s(i,d,1),g=s(i,d,2),m=s(i,d,3);const[y,v,b,x]=X0(this.kernel.read(),4,3),[w,k,S,C]=this.useBias?X0(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,y,w,this.padding),u=this.inputConv(u,v,k,this.padding),c=this.inputConv(c,b,S,this.padding),h=this.inputConv(h,x,C,this.padding);const[I,E,T,_]=X0(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,I),f=this.recurrentConv(f,E),g=this.recurrentConv(g,T),m=this.recurrentConv(m,_);const N=this.recurrentActivation.apply(JQ(l,p)),A=this.recurrentActivation.apply(JQ(u,f)),O=JQ(tJ(A,o),tJ(N,this.activation.apply(JQ(c,g)))),R=tJ(this.recurrentActivation.apply(JQ(h,m)),this.activation.apply(O));return[R,R,O]}))}getConfig(){const e=super.getConfig(),{units:t}=e,n=Yee(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){const i=PZ(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?x9(i,n,this.dataFormat):i}recurrentConv(e,t){return PZ(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}Jee.className="ConvLSTM2DCell",hJ(Jee);class Zee extends Qee{constructor(e){const t=new Jee(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}Zee.className="ConvLSTM2D",hJ(Zee);class ete extends o7{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return iQ((()=>{this.invokeCallHook(e,t);const n=q9(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return k9((()=>w9(n,this.rate,r,this.seed)),(()=>n),e)}return e}))}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}ete.className="Dropout",hJ(ete);class tte extends ete{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}tte.className="SpatialDropout1D",hJ(tte);class nte extends o7{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,R6(this.units,"units"),this.activation=iee(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=V9(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=V9(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=C7(e.kernelConstraint),this.biasConstraint=C7(e.biasConstraint),this.kernelRegularizer=hee(e.kernelRegularizer),this.biasRegularizer=hee(e.biasRegularizer),this.activityRegularizer=hee(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=K9(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=K9(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return iQ((()=>{this.invokeCallHook(e,t);const n=q9(e),r=P6(this.activation.getClassName());let i;return null!=r?i=m9(n,this.kernel.read(),r,this.bias?this.bias.read():null):(i=m9(n,this.kernel.read()),null!=this.bias&&(i=x9(i,this.bias.read())),null!=this.activation&&(i=this.activation.apply(i))),i}))}getConfig(){const e={units:this.units,activation:nee(this.activation),useBias:this.useBias,kernelInitializer:U9(this.kernelInitializer),biasInitializer:U9(this.biasInitializer),kernelRegularizer:uee(this.kernelRegularizer),biasRegularizer:uee(this.biasRegularizer),activityRegularizer:uee(this.activityRegularizer),kernelConstraint:k7(this.kernelConstraint),biasConstraint:k7(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}nte.className="Dense",hJ(nte);class rte extends o7{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=K9(e);for(const t of e.slice(1))if(null==t)throw new d6(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],t9(e,1)]}call(e,t){return iQ((()=>{this.invokeCallHook(e,t);let n=q9(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=a1(n,e)}return function(e){if(e.rank<=1)throw new d6(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],t9(e.shape,1)];return xZ(e,t)}(n)}))}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}rte.className="Flatten",hJ(rte);class ite extends o7{constructor(e){super(e),this.supportsMasking=!0,this.activation=iee(e.activation)}call(e,t){return iQ((()=>{this.invokeCallHook(e,t);const n=q9(e);return this.activation.apply(n)}))}getConfig(){const e={activation:nee(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}ite.className="Activation",hJ(ite);class ote extends o7{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return iQ((()=>function(e,t){return iQ((()=>{if(2!==e.shape.length)throw new d6(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);return f9(l9(e,1),[1,t,1])}))}(e=q9(e),this.n)))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}ote.className="RepeatVector",hJ(ote);class ate extends o7{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let i=1,o=null;for(let s=0;s<r.length;++s){const e=r[s];if(this.isUnknown(e)){if(null!==o)throw new d6("Can only specifiy one unknown dimension.");o=s}else i*=e}const a=t9(e);if(null!==o){if(0===i||a%i!==0)throw new d6(n);r[o]=a/i}else if(a!==i)throw new d6(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return iQ((()=>{this.invokeCallHook(e,t);const n=q9(e),r=n.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return xZ(n,i)}))}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}ate.className="Reshape",hJ(ate);class ste extends o7{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=i9(1,e.dims.length+1);if(!MG(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new e7({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=K9(e)).slice();return this.dims.forEach(((n,r)=>{t[r+1]=e[n]})),t}call(e,t){return a1(q9(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}ste.className="Permute",hJ(ste);class lte extends o7{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=q9(e);return rZ(C0(n,this.maskValue),-1)}call(e,t){return iQ((()=>{this.invokeCallHook(e,t);const n=q9(e),r=rZ(C0(n,this.maskValue),-1,!0);return tJ(n,XQ(r,n.dtype))}))}}lte.className="Masking",hJ(lte);class ute extends o7{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(x6(e.inputLength))}this.inputDim=e.inputDim,R6(this.inputDim,"inputDim"),this.outputDim=e.outputDim,R6(this.outputDim,"outputDim"),this.embeddingsInitializer=V9(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=hee(e.embeddingsRegularizer),this.activityRegularizer=hee(e.activityRegularizer),this.embeddingsConstraint=C7(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return iQ((()=>this.maskZero?(e=q9(e),C0(e,iJ(e))):null))}computeOutputShape(e){if(e=K9(e),null==this.inputLength)return[...e,this.outputDim];const t=x6(this.inputLength);if(t.length!==e.length-1)throw new d6(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){const i=t[r],o=e[r+1];if(null!=i&&null!=o&&i!==o)throw new d6(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==i&&(t[n]=o),n++}}return[e[0],...t,this.outputDim]}call(e,t){return iQ((()=>{this.invokeCallHook(e,t);let n=q9(e);"int32"!==n.dtype&&(n=s9(n,"int32"));const r=y9(this.embeddings.read(),xZ(n,[n.size]));return xZ(r,K9(this.computeOutputShape(n.shape)))}))}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:U9(this.embeddingsInitializer),embeddingsRegularizer:uee(this.embeddingsRegularizer),activityRegularizer:uee(this.activityRegularizer),embeddingsConstraint:k7(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}ute.className="Embedding",hJ(ute);class cte extends o7{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new p6}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const i=e[e.length-t.length+r],o=t[r];if(null==i||null==o||i<0||o<0)n.push(null);else if(1===i)n.push(o);else if(1===o)n.push(i);else{if(i!==o)throw new d6("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(i)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[K9(e)]),e.length<2)throw new d6(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const i of e)null!=i&&null!==i[0]&&t.push(i[0]);if(t=_6(t),t.length>1)throw new d6(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let i=1;i<e.length;++i){const t=null==e[i]?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const r=e.map((e=>e.length));-1===e.indexOf(null)&&1===_6(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return iQ((()=>{if(this.reshapeRequired){const t=[],n=e.map((e=>e.rank));if(-1===n.indexOf(null)){const r=r9(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=l9(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const o of e){const e=o.rank;if(null==e){const e=o.shape,r=e[0],i=e.slice(1).concat([r]);let a=xZ(o,[r].concat(t9(e.slice(1))));a=a1(a,[1,0]),a=xZ(a,i),t.push(a),n=!0}else if(e>1){const r=i9(1,e).concat([0]);t.push(a1(o,r)),n=!0}else t.push(o)}let r=this.mergeFunction(t);const i=r.rank;if(n)if(null==i){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=xZ(a1(xZ(r,[-1,t]),[1,0]),n)}else if(i>1){const e=[i-1].concat(i9(0,i-1));r=a1(r,e)}return r}}return this.mergeFunction(e)}))}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=_6(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return iQ((()=>{if(null==t)return null;if(!Array.isArray(t))throw new d6("`mask` should be an Array");if(!Array.isArray(e))throw new d6("`inputs` should be an Array");if(t.length!==e.length)throw new d6(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every((e=>null==e)))return null;t=t.map((e=>null==e?e:qZ(e,0)));let n=t[0];for(let e=1;e<t.length-1;++e)n=g0(n,t[e]);return n}))}}class hte extends cte{constructor(e){super(e)}mergeFunction(e){return iQ((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=JQ(t,e[n]);return t}))}}hte.className="Add",hJ(hte);class dte extends cte{constructor(e){super(e)}mergeFunction(e){return iQ((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=tJ(t,e[n]);return t}))}}dte.className="Multiply",hJ(dte);class pte extends cte{constructor(e){super(e)}mergeFunction(e){return iQ((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=JQ(t,e[n]);return tJ(1/e.length,t)}))}}pte.className="Average",hJ(pte);class fte extends cte{constructor(e){super(e)}mergeFunction(e){return iQ((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=SJ(t,e[n]);return t}))}}fte.className="Maximum",hJ(fte);class gte extends cte{constructor(e){super(e)}mergeFunction(e){return iQ((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=w0(t,e[n]);return t}))}}gte.className="Minimum",hJ(gte);class mte extends cte{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new d6("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const r of e)if(null!=r){t=!1;break}if(t)return;const n=[];for(let r=0;r<e.length;++r){const t=e[r].slice();t.splice(this.axis,1);let i=!1;for(const e of n)if(MG(e,t)){i=!0;break}i||n.push(t)}if(n.length>1)throw new d6("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return iQ((()=>d9(e,this.axis)))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new d6("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const i of t.slice(1)){if(null==n[r]||null==i[r]){n[r]=null;break}n[r]+=i[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new d6("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new d6("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new d6(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return iQ((()=>{let n=!0;if(t.forEach((e=>{null==e||(n=!1)})),n)return null;const r=[];for(let o=0;o<e.length;++o)null==t[o]?r.push(XQ(_0(e[o]),"bool")):t[o].rank<e[o].rank?r.push(qZ(t[o],-1)):r.push(t[o]);const i=NZ(r,this.axis);return nZ(i,-1,!1)}))}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function yte(e,t){for(;e<0;)e+=t;return e}mte.className="Concatenate",hJ(mte);class vte extends cte{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){RG(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new p6("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new d6(`Dimension incompatibility: ${t[r[0]]} !== ${n[r[1]]}`)}mergeFunction(e){if(2!==e.length)throw new d6(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map(((t,n)=>yte(t,e[n].shape.length))):[yte(this.axes,n.shape.length),yte(this.axes,r.shape.length)],this.normalize&&(n=F7(n,t[0]),r=F7(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new p6("batchDot is not implemented for tensors of 4D or higher rank yet");if(RG(e.shape.length>=2,(()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`)),RG(e.shape.length>=2,(()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`)),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new p6("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,i=t.shape.length;null==n&&(n=[r-1,i-2]);const o=n;return iQ((()=>{let n,a;if(r>i){n=r-i;const e=[];for(let t=0;t<n;++t)e.push(1);t=xZ(t,t.shape.concat(e))}else if(i>r){n=i-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=xZ(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)a=o[0]===o[1]?i0(tJ(e,t),o[0]):i0(tJ(a1(e,[1,0]),t),o[1]);else{const n=o[0]!==e.shape.length-1,r=o[1]===t.shape.length-1;a=m0(e,t,n,r)}if(n>0){let e;e=r>i?r+i-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);a=Y0(a,t)}return 1===a.shape.length&&(a=qZ(a,1)),a}))}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[yte(this.axes,e.length),yte(this.axes,t.length)],n}computeOutputShape(e){RG(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new p6("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const i=t.concat(n);return 1===i.length&&i.push(1),i}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}vte.className="Dot",hJ(vte);class bte extends o7{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return iQ((()=>{this.invokeCallHook(e,t);const n=q9(e);return k9((()=>JQ(g9(n.shape,0,this.stddev),n)),(()=>n),t.training||!1)}))}}bte.className="GaussianNoise",hJ(bte);class xte extends o7{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return iQ((()=>{this.invokeCallHook(e,t);const n=q9(e);if(this.rate>0&&this.rate<1){return k9((()=>{const e=Math.sqrt(this.rate/(1-this.rate));return tJ(n,g9(n.shape,1,e))}),(()=>n),t.training||!1)}return n}))}}xte.className="GaussianDropout",hJ(xte);class wte extends o7{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||q9(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return iQ((()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=q9(e),r=-1.7580993408473766;let i=ZZ(D0(n),this.rate);i=s9(i,"float32");const o=((1-this.rate)*(1+this.rate*r**2))**-.5,a=-o*r*this.rate,s=JQ(tJ(t,i),tJ(JQ(i,-1),r));return JQ(tJ(s,o),a)};return k9(r,(()=>q9(e)),t.training||!1)}return e}))}}function kte(e,t,n,r,i){let o,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)o=CZ(e,t,n,r,i,a);else if(3===e.rank)o=IZ(e,t,n,r,i,a);else{if(4!==e.rank)throw new p6(`batchNormalization is not implemented for array of rank ${e.rank} yet`);o=EZ(e,t,n,r,i,a)}return o}function Ste(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return MG(r.slice().sort(),i9(0,e.rank-1))?function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return iQ((()=>{const o=k0(e,r),a=o.mean,s=o.variance;return[kte(e,a,s,n,t,i),a,s]}))}(e,t,n,r,i):function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return iQ((()=>{const o=k0(e,r),a=o.mean,s=o.variance,l=[];for(const t of i9(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);const u=xZ(a,l),c=xZ(s,l),h=null==t?null:xZ(t,l),d=null==n?null:xZ(n,l);return[kte(e,u,c,d,h,i),a,s]}))}(e,t,n,r,i)}wte.className="AlphaDropout",hJ(wte);class Cte extends o7{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=V9(e.betaInitializer||"zeros"),this.gammaInitializer=V9(e.gammaInitializer||"ones"),this.movingMeanInitializer=V9(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=V9(e.movingVarianceInitializer||"ones"),this.betaConstraint=C7(e.betaConstraint),this.gammaConstraint=C7(e.gammaConstraint),this.betaRegularizer=hee(e.betaRegularizer),this.gammaRegularizer=hee(e.gammaRegularizer)}build(e){e=K9(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new d6(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new e7({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return iQ((()=>{const n=null!=t.training&&t.training,r=q9(e),i=r.shape,o=i.length,a=i9(0,o),s=this.axis>=0?this.axis:this.axis+o;a.splice(s,1);const l=m6(1,o);l[s]=i[s];const u=a.slice();u.sort();const c=!MG(u,i9(0,o).slice(0,o-1));if(!n)return(()=>{if(c){const e=xZ(this.movingMean.read(),l),t=xZ(this.movingVariance.read(),l),n=this.center?xZ(this.beta.read(),l):null,i=this.scale?xZ(this.gamma.read(),l):null;return kte(r,e,t,n,i,this.epsilon)}return kte(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[h,d,p]=Ste(r,this.gamma.read(),this.beta.read(),a,this.epsilon),f=(e,t,n)=>{iQ((()=>{const r=1-n,i=e.read(),o=tJ(yJ(i,t),r);e.write(yJ(i,o))}))};return(()=>{f(this.movingMean,d,this.momentum),f(this.movingVariance,p,this.momentum)})(),h}))}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:U9(this.betaInitializer),gammaInitializer:U9(this.gammaInitializer),movingMeanInitializer:U9(this.movingMeanInitializer),movingVarianceInitializer:U9(this.movingVarianceInitializer),betaRegularizer:uee(this.betaRegularizer),gammaRegularizer:uee(this.gammaRegularizer),betaConstraint:k7(this.betaConstraint),gammaConstraint:k7(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Cte.className="BatchNormalization",hJ(Cte);class Ite extends o7{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);for(const e of this.axis)if(!Number.isInteger(e))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=V9(e.betaInitializer||"zeros"),this.gammaInitializer=V9(e.gammaInitializer||"ones"),this.betaRegularizer=hee(e.betaRegularizer),this.gammaRegularizer=hee(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=K9(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=t);for(const i of this.axis)if(i<0||i>=t)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==_6(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const n=this.axis.map((t=>e[t])),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){const n=q9(e),r=n.shape,i=r.length;return iQ((()=>{let{mean:e,variance:t}=k0(n,this.axis,!0);const o=m6(1,i);for(const n of this.axis)o[n]=r[n];const a=e=>null!=e&&e.shape.length!==i?xZ(e,o):e;let s=this.scale?a(this.gamma.read()):null,l=this.center?a(this.beta.read()):null;const u=[],c=[];for(let n=0;n<i;++n)-1!==this.axis.indexOf(n)?(u.push(r[n]),c.push(1)):(u.push(1),c.push(r[n]));return e=KZ(e,u),t=KZ(t,u),null!=s&&(s=KZ(s,c)),null!=l&&(l=KZ(l,c)),kte(n,e,t,l,s,this.epsilon)}))}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:U9(this.betaInitializer),gammaInitializer:U9(this.gammaInitializer),betaRegularizer:uee(this.betaRegularizer),gammaRegularizer:uee(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}Ite.className="LayerNormalization",hJ(Ite);class Ete extends o7{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new d6(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if("number"===typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new d6(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new d6(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new e7({ndim:4})]}computeOutputShape(e){let t,n;return e=K9(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return iQ((()=>function(e,t,n){return iQ((()=>{if(4!==e.rank)throw new d6(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new d6("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new d6(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],N0(e,r)}))}(q9(e),this.padding,this.dataFormat)))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function Tte(e,t,n,r,i,o){return iQ((()=>{let a;G6(i),q6(o),H6(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==o&&(o="max"),e=wee(e,i);const s="same"===r?"same":"valid";return a="max"===o?y0(e,t,n,s):wZ(e,t,n,s),"channelsFirst"===i&&(a=a1(a,[0,3,1,2])),a}))}function _te(e,t,n,r,i,o){return iQ((()=>{let a;G6(i),q6(o),H6(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==o&&(o="max"),e=kee(e,i);const s="same"===r?"same":"valid";return a="max"===o?v0(e,t,n,s):kZ(e,t,n,s),"channelsFirst"===i&&(a=a1(a,[0,4,1,2,3])),a}))}Ete.className="ZeroPadding2D",hJ(Ete);class Nte extends o7{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"===typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new d6(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);this.poolSize=e.poolSize}if(R6(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"===typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new d6(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);this.strides=e.strides}R6(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,H6(this.padding),this.inputSpec=[new e7({ndim:3})]}computeOutputShape(e){const t=bee((e=K9(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return iQ((()=>{this.invokeCallHook(e,t),e=l9(q9(e),2);const n=this.poolingFunction(q9(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Y0(n,[2])}))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class Ate extends Nte{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return G6(i),H6(r),Tte(e,t,n,r,i,"max")}}Ate.className="MaxPooling1D",hJ(Ate);class Ote extends Nte{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return G6(i),H6(r),Tte(e,t,n,r,i,"avg")}}Ote.className="AveragePooling1D",hJ(Ote);class Rte extends o7{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new d6(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];R6(this.poolSize,"poolSize"),R6(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,G6(this.dataFormat),H6(this.padding),this.inputSpec=[new e7({ndim:4})]}computeOutputShape(e){e=K9(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=bee(t,this.poolSize[0],this.padding,this.strides[0]),n=bee(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return iQ((()=>(this.invokeCallHook(e,t),this.poolingFunction(q9(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class $te extends Rte{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return G6(i),H6(r),Tte(e,t,n,r,i,"max")}}$te.className="MaxPooling2D",hJ($te);class Pte extends Rte{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return G6(i),H6(r),Tte(e,t,n,r,i,"avg")}}Pte.className="AveragePooling2D",hJ(Pte);class Dte extends o7{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new d6(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];R6(this.poolSize,"poolSize"),R6(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,G6(this.dataFormat),H6(this.padding),this.inputSpec=[new e7({ndim:5})]}computeOutputShape(e){e=K9(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=bee(t,this.poolSize[0],this.padding,this.strides[0]),n=bee(n,this.poolSize[1],this.padding,this.strides[1]),r=bee(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return iQ((()=>(this.invokeCallHook(e,t),this.poolingFunction(q9(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Mte extends Dte{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return G6(i),H6(r),_te(e,t,n,r,i,"max")}}Mte.className="MaxPooling3D",hJ(Mte);class Fte extends Dte{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return G6(i),H6(r),_te(e,t,n,r,i,"avg")}}Fte.className="AveragePooling3D",hJ(Fte);class Lte extends o7{constructor(e){super(e),this.inputSpec=[new e7({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new p6}}class jte extends Lte{constructor(e){super(e||{})}call(e,t){return iQ((()=>{const t=q9(e);return b0(t,1)}))}}jte.className="GlobalAveragePooling1D",hJ(jte);class zte extends Lte{constructor(e){super(e||{})}call(e,t){return iQ((()=>{const t=q9(e);return r0(t,1)}))}}zte.className="GlobalMaxPooling1D",hJ(zte);class Bte extends o7{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,G6(this.dataFormat),this.inputSpec=[new e7({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new p6}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Wte extends Bte{call(e,t){return iQ((()=>{const t=q9(e);return"channelsLast"===this.dataFormat?b0(t,[1,2]):b0(t,[2,3])}))}}Wte.className="GlobalAveragePooling2D",hJ(Wte);class Ute extends Bte{call(e,t){return iQ((()=>{const t=q9(e);return"channelsLast"===this.dataFormat?r0(t,[1,2]):r0(t,[2,3])}))}}Ute.className="GlobalMaxPooling2D",hJ(Ute);class Vte extends o7{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=M7(t.layer,n);delete t.layer;const i={layer:r};return Object.assign(i,t),new e(i)}}class Gte extends Vte{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=K9(e)).length<3)throw new d6(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=K9(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return iQ((()=>jee(((e,n)=>[q9(this.layer.call(e,t)),[]]),e=q9(e),[],!1,null,null,!1,!0)[1]))}}Gte.className="TimeDistributed",hJ(Gte);class Hte extends Vte{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=M7(n),t.goBackwards=!0!==t.goBackwards;const r={};if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=M7(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){A6(U6,"BidirectionalMergeMode",e)}(this.mergeMode),e.weights)throw new p6("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,i=this.forwardLayer.computeOutputShape(e);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),this.returnState?(r=i.slice(1),t=i[0]):t=i[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):b6(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const i=Lee(e,n,r,this.numConstants);if(e=i.inputs,n=i.initialState,r=i.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const o=[],a=[];if(null!=n){const e=n.length;if(e%2>0)throw new d6("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,o.push(...n);const r=n.map((e=>new e7({shape:e.shape})));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),a.push(...r)}if(null!=r)throw new p6("Support for constants in Bidirectional layers is not implemented yet.");const s=o[0]instanceof t7;for(const l of o)if(l instanceof t7!==s)throw new d6("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(s){const n=[e].concat(o),r=this.inputSpec.concat(a),i=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=i,s}return super.apply(e,t)}call(e,t){return iQ((()=>{const n=t.initialState;let r,i,o,a;if(null==n)r=this.forwardLayer.call(e,t),i=this.backwardLayer.call(e,t);else{const o=n.slice(0,n.length/2),a=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:o})),i=this.backwardLayer.call(e,Object.assign(t,{initialState:a}))}return this.returnState&&(Array.isArray(r)&&(o=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),this.returnSequences&&(i=L0(i,1)),"concat"===this.mergeMode?a=d9([r,i]):"sum"===this.mergeMode?a=JQ(r,i):"ave"===this.mergeMode?a=tJ(.5,JQ(r,i)):"mul"===this.mergeMode?a=tJ(r,i):null==this.mergeMode&&(a=[r,i]),this.returnState?null==this.mergeMode?a.concat(o):[a].concat(o):a}))}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){X6(this.forwardLayer.name,(()=>{this.forwardLayer.build(e)})),X6(this.backwardLayer.name,(()=>{this.backwardLayer.build(e)})),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map((e=>null));return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=M7(t.layer);if(delete t.layer,null!=t.numConstants)throw new p6("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}Hte.className="Bidirectional",hJ(Hte);class qte extends o7{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return iQ((()=>("float32"!==(e=q9(e)).dtype&&(e=s9(e,"float32")),JQ(tJ(e,this.scale),this.offset))))}}qte.className="Rescaling",hJ(qte);const{resizeBilinear:Kte,cropAndResize:Xte}=s2;class Yte extends o7{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,i,o,a,s){return iQ((()=>{let l,u=!1;const c=[t/o,n/a,(r+t)/o,(i+n)/a],h=[];3===e.rank?(u=!0,l=Q0([e])):l=e;for(let e=0;e<l.shape[0];e++)h.push(c);const d=ZY(h,[h.length,4]),p=M0(0,h.length,1,"int32"),f=Xte(l,d,p,[r,i],"nearest");return s9(u?q9(n1(f)):f,s)}))}upsize(e,t,n,r){return iQ((()=>s9(Kte(e,[t,n]),r)))}call(e,t){return iQ((()=>{const t=q9(e),n=t.dtype,r=t.shape,i=r[r.length-3],o=r[r.length-2];let a=0;i!==this.height&&(a=Math.floor((i-this.height)/2));let s=0;return o!==this.width&&(s=Math.floor((o-this.width)/2),0===s&&(s=1)),a>=0&&s>=0?this.centerCrop(t,a,s,this.height,this.width,i,o,n):this.upsize(e,this.height,this.width,n)}))}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=K9(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}Yte.className="CenterCrop",hJ(Yte);class Qte extends o7{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=K9(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return iQ((()=>{let n;if("int32"!==(e=q9(e)).dtype&&(e=s9(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==this.outputMode)throw new d6(`countWeights is not used when outputMode !== count.\n              Received countWeights=${t.countWeights}`);n=q9(t.countWeights)}const r=r0(e),i=x0(e),o=JZ(this.numTokens,r).bufferSync().get(0),a=ZZ(i,0).bufferSync().get(0);if(!o||!a)throw new d6(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return function(e,t,n,r){let i=q9(e);if("int32"!==i.dtype&&(i=s9(i,"int32")),"int"===t)return i;const o=i.shape;if(0===i.rank&&(i=qZ(i,-1)),"oneHot"===t&&1!==i.shape[i.shape.length-1]&&(i=qZ(i,-1)),i.rank>2)throw new d6(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${o} which would result in output rank ${i.rank}.`);const a=["multiHot","oneHot"].includes(t),s=i;let l;if(l=BZ(s,"undefined"!==typeof r&&"count"===t?r:[],n,a),"tfIdf"!==t)return l;if(r)return tJ(l,r);throw new d6("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)}))}}Qte.className="CategoryEncoding",hJ(Qte);const Jte=new Set(["bilinear","nearest"]);class Zte extends o7{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!Jte.has(e.interpolation))throw new d6(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=K9(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return iQ((()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return s2.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return s2.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...Jte]} are supported`)}))}}Zte.className="Resizing",hJ(Zte);class ene{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}ene.className="RandomSeed";class tne extends o7{constructor(e){super(e),this.randomGenerator=new ene(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}tne.className="BaseRandomLayer";const nne=new Set(["bilinear","nearest"]);class rne extends tne{constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new d6(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new d6(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new d6(`factor cannot have upper bound less than lower bound.\n        Got upper bound: ${this.widthUpper}.\n        Got lower bound: ${this.widthLower}\n      `);if(n){if(!nne.has(n))throw new d6(`Invalid interpolation parameter: ${n} is not implemented`);this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=K9(e))[2];return[this.imgHeight,-1,t]}call(e,t){return iQ((()=>{const t=q9(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=D0([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);const i=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return s2.resizeBilinear(e,i);case"nearest":return s2.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}\n          but only ${[...nne]} are supported`)}}))}}rne.className="RandomWidth",hJ(rne);var ine,one;dH().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(ine||(ine={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(one||(one={}));Error;new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function ane(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const i=t(e);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(cne(e)){const i=Array.isArray(e)?[]:{};r.add(e);for(const o in e){const a=ane(e[o],t,n,r);i[o]=a}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return n.set(e,i.value),i.value}function sne(e){return lne(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:une)}function lne(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const i=t(e);if(i.recurse&&null!==i.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(cne(r)){const i=Array.isArray(r)?[]:{};n.add(r);for(const o in r){const r=e.map((e=>e[o])),a=lne(r,t,n);i[o]=a}return n.delete(r),i}throw new Error(`Can't recurse into non-iterable type: ${r}`)}return i.value}function une(e){return null===e?null:cne(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function cne(e){let t=!1;if(dH().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:r}=n(551);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof vY)&&!(e instanceof Promise)&&!t)}function hne(e){return function(e,t){return ane(e,t)}(e,dne)}function dne(e){return e instanceof vY?{value:e.clone(),recurse:!1}:cne(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class pne{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class fne extends pne{constructor(){super(fne.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function gne(e){return new bne(e)}function mne(e,t){return new Ane(e,t)}fne.INITIAL_CAPACITY=32;class yne{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new Ene(this,e)}filter(e){return new Cne(this,e)}map(e){return new Ine(this,e)}mapAsync(e){return new Tne(this,e)}serialMapAsync(e){return new Tne(this,e).serial()}flatmap(e){return new Nne(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile((e=>!0===e))}rowMajorBatch(e){return new Sne(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}columnMajorBatch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:une;return this.rowMajorBatch(e,t).map((e=>sne(e,n)))}concatenate(e,t){return new Ane(new vne([this,e]),t)}take(e){return e<0||null==e?this:new kne(this,e)}skip(e){return e<0||null==e?this:new wne(this,e)}prefetch(e){return new Rne(this,e)}shuffle(e,t){return new $ne(this,e,t)}serial(){return new xne(this)}}class vne extends yne{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:hne(e),done:!1}}}class bne extends yne{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(ie){throw ie.message=`Error thrown while iterating through a dataset: ${ie.message}`,ie}}}class xne extends yne{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){return this.upstream.next()}}class wne extends yne{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;oQ(e.value)}return this.upstream.next()}}class kne extends yne{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class Sne extends yne{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class Cne extends yne{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;oQ(e.value)}}}class Ine extends yne{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=$Y(e.value),n=this.transform(e.value),r=$Y(n);for(const i of t)RY(i,r)||i.dispose();return{value:n,done:!1}}}class Ene extends yne{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(ie){if(!this.handler(ie))return{value:null,done:!0}}}}class Tne extends yne{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=$Y(e.value),n=await this.transform(e.value),r=$Y(n);for(const i of t)RY(i,r)||i.dispose();return{value:n,done:!1}}}class _ne extends yne{constructor(){super(),this.outputQueue=new fne,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class Nne extends _ne{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=$Y(e.value),n=this.transform(e.value),r=$Y(n);this.outputQueue.pushAll(n);for(const i of t)RY(i,r)||i.dispose();return!0}}class Ane extends yne{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var One;!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(One||(One={}));class Rne extends yne{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new pne(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class $ne extends Rne{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=O0.alea(n||tY().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class Pne{constructor(){this.size=null}batch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this;let r;return RG(e>0,(()=>`batchSize needs to be positive, but it is\n      ${e}`)),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),Dne((async()=>(await n.iterator()).columnMajorBatch(e,t,Mne)),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,Dne((async()=>(await t.iterator()).concatenate(await e.iterator())),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,Dne((async()=>(await t.iterator()).filter((t=>iQ((()=>e(t)))))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return Dne((async()=>(await t.iterator()).map((t=>iQ((()=>e(t)))))),this.size)}mapAsync(e){const t=this;return Dne((async()=>(await t.iterator()).mapAsync(e)),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return Dne((async()=>(await t.iterator()).prefetch(e)),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,Dne((async()=>mne(gne((async()=>({value:await t.iterator(),done:!1}))).take(e))),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,Dne((async()=>(await t.iterator()).skip(e)),n)}shuffle(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const r=this,i=O0.alea(t||tY().toString());return Dne((async()=>{let t=i.int32();return n&&(t+=i.int32()),(await r.iterator()).shuffle(e,t.toString())}),this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,Dne((async()=>(await t.iterator()).take(e)),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function Dne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new class extends Pne{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function Mne(e){if(null===e)return null;const t=e[0];if(null==(n=t)||function(e){return null===e||"object"!==typeof e&&"function"!==typeof e}(n)||Array.isArray(n)||"object"===typeof n&&n instanceof vY||iY(n)){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof vY?Q0(e):ZY(e)}(e),recurse:!1}}var n;return{value:null,recurse:!0}}Pne.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function Fne(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&RG("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}const Lne=w3;class jne extends EG{nextDataId(){return jne.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new IG(this,nQ())}write(e,t,n){this.firstUse&&(this.firstUse=!1,dH().get("IS_NODE")&&_X("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&KG(n[0])){const i=n.map((e=>nY(e)));r=this.write(i,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,i){this.data.set(e,{values:t,dtype:r,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return j2(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>rY(e)));return KQ(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return KQ(e.shape,e.dtype,t)}makeOutput(e,t,n){return nQ().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=tY();e();return{kernelMs:tY()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Fne([e],"where");const t=this.readSync(e.dataId);return Lne(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}jne.nextDataId=0;function zne(e){return(t,n,r)=>{const i=GG(n,t.length);for(let o=0;o<t.length;++o)i[o]=e(t[o],r);return i}}function Bne(e,t,n){return Wne(e,zne(t),n)}function Wne(e,t,n){return r=>{let{inputs:i,attrs:o,backend:a}=r;const{x:s}=i;Fne(s,e);const l=a,u=l.data.get(s.dataId).values;let c;if("string"===s.dtype){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");c=b3(u)}else c=u;const h=n||s.dtype,d=t(c,h,o);return l.makeTensorInfo(s.shape,h,d)}}sQ("cpu",(()=>new jne),1);const Une=Bne(gq,(e=>e>=0?e:Math.exp(e)-1)),Vne={kernelName:gq,backendName:"cpu",kernelFunc:Une};function Gne(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Hne={kernelName:Rq,backendName:"cpu",kernelFunc:Gne};function qne(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:o}=r;Fne([i],"leakyRelu");const a=DG(i.shape),s=n.data.get(i.dataId).values,l=VG("float32",a);for(let u=0;u<s.length;u++)l[u]=s[u]<0?o*s[u]:s[u];return n.makeTensorInfo(i.shape,"float32",l)}const Kne={kernelName:Lq,backendName:"cpu",kernelFunc:qne};function Xne(e){return(t,n,r,i,o)=>{const a=kJ(t,n),s=a.length,l=ZG(a),u=VG(o,DG(a)),c=t.length,h=n.length,d=ZG(t),p=ZG(n),f=xJ(t,a),g=xJ(n,a);if(f.length+g.length===0)for(let m=0;m<u.length;++m)u[m]=e(r[m%r.length],i[m%i.length]);else for(let m=0;m<u.length;++m){const t=sH(m,s,l),n=t.slice(-c);f.forEach((e=>n[e]=0));const o=aH(n,c,d),a=t.slice(-h);g.forEach((e=>a[e]=0));const y=aH(a,h,p);u[m]=e(r[o],i[y])}return[u,a]}}const Yne=Xne(((e,t)=>e<0?t*e:e));function Qne(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t;Fne([r,i],"prelu");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,[s,l]=Yne(r.shape,i.shape,o,a,"float32");return n.makeTensorInfo(l,"float32",s)}const Jne={kernelName:bK,backendName:"cpu",kernelFunc:Qne},Zne=Bne(TK,(e=>Math.max(0,e))),ere={kernelName:TK,backendName:"cpu",kernelFunc:Zne},tre=Bne($K,(e=>Math.min(Math.max(0,e),6))),nre={kernelName:$K,backendName:"cpu",kernelFunc:tre},rre=zne((e=>1/(1+Math.exp(-e)))),ire=Bne(HK,(e=>1/(1+Math.exp(-e)))),ore={kernelName:HK,backendName:"cpu",kernelFunc:ire};function are(e,t,n,r,i){if("linear"===n)return Gne({inputs:{x:t},backend:e});if("relu"===n)return Zne({inputs:{x:t},backend:e});if("elu"===n)return Une({inputs:{x:t},backend:e});if("relu6"===n)return tre({inputs:{x:t},backend:e});if("prelu"===n)return Qne({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return qne({inputs:{x:t},backend:e,attrs:{alpha:i}});if("sigmoid"===n)return ire({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function sre(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(i.shape,"float32",a)},s}const lre={kernelName:UH,backendName:"cpu",kernelFunc:sre};function ure(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return sre({inputs:{real:ure(e,t,"float32"),imag:ure(e,t,"float32")},backend:e})}const r=rH(DG(t),n);return e.makeTensorInfo(t,n,r)}function cre(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}const hre={kernelName:IK,backendName:"cpu",kernelFunc:cre};function dre(e,t,n,r){if("int32"===r){return[t,"int32",Int32Array.from(e)]}if("bool"===r){const r=eY([0],n),[i,o]=Xne(((e,t)=>e!==t?1:0))(t,[],e,r,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function pre(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:o}=r;if("complex64"===o){if("complex64"===i.dtype)return Gne({inputs:{x:i},backend:n});const e=ure(n,i.shape,i.dtype),t=pre({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),r=sre({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===i.dtype){const e=cre({inputs:{input:i},backend:n}),t=pre({inputs:{x:e},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(e),t}if(!HG(i.dtype,o)){const e=Gne({inputs:{x:i},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:o}}const a=n.data.get(i.dataId).values,[s,l,u]=dre(a,i.shape,i.dtype,o);return n.makeTensorInfo(s,l,u)}const fre={kernelName:zH,backendName:"cpu",kernelFunc:pre};function gre(e,t,n,r){return null==n?n=>{let{inputs:i,backend:o}=n;const{a:a,b:s}=i,l=o;Fne([a,s],e);const u=l.data.get(a.dataId).values,c=l.data.get(s.dataId).values,h="string"===a.dtype?b3(u):u,d="string"===a.dtype?b3(c):c,p=r||a.dtype,[f,g]=t(a.shape,s.shape,h,d,p);return l.makeTensorInfo(g,p,f)}:e=>{let{inputs:i,backend:o}=e;const{a:a,b:s}=i,l=o;if("complex64"===a.dtype||"complex64"===s.dtype){const e=pre({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),t=l.data.get(e.dataId),r=t.complexTensorInfos.real,i=t.complexTensorInfos.imag,o=l.data.get(r.dataId).values,u=l.data.get(i.dataId).values,c=pre({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),h=l.data.get(c.dataId),d=h.complexTensorInfos.real,p=h.complexTensorInfos.imag,f=l.data.get(d.dataId).values,g=l.data.get(p.dataId).values,[m,y,v]=n(a.shape,s.shape,o,u,f,g),b=l.makeTensorInfo(v,"float32",m),x=l.makeTensorInfo(v,"float32",y),w=sre({inputs:{real:b,imag:x},backend:l});return l.disposeIntermediateTensorInfo(e),l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(b),l.disposeIntermediateTensorInfo(x),w}{const e=l.data.get(a.dataId).values,n=l.data.get(s.dataId).values,i=r||a.dtype,[o,u]=t(a.shape,s.shape,e,n,i);return l.makeTensorInfo(u,i,o)}}}function mre(e){return(t,n,r,i,o,a)=>{const s=kJ(t,n),l=DG(s),u=s.length,c=ZG(s),h=VG("float32",l),d=VG("float32",l),p=xJ(t,s),f=xJ(n,s),g=j2(r,i),m=j2(o,a),y=t.length,v=ZG(t),b=n.length,x=ZG(n);if(p.length+f.length===0)for(let w=0;w<h.length;w++){const t=w%g.length,n=w%m.length,r=e(g[2*t],g[2*t+1],m[2*n],m[2*n+1]);h[w]=r.real,d[w]=r.imag}else for(let w=0;w<h.length;w++){const t=sH(w,u,c),n=t.slice(-y);p.forEach((e=>n[e]=0));const r=aH(n,y,v),i=t.slice(-b);f.forEach((e=>i[e]=0));const o=aH(i,b,x),a=e(g[2*r],g[2*r+1],m[2*o],m[2*o+1]);h[w]=a.real,d[w]=a.imag}return[h,d,s]}}const yre=Xne(((e,t)=>e+t)),vre=mre(((e,t,n,r)=>({real:e+n,imag:t+r}))),bre=gre(xH,yre,vre),xre={kernelName:xH,backendName:"cpu",kernelFunc:bre};function wre(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:o}=r,a=DG(i.shape),s=BG(o,a),l=DG(s);RG(a===l,(()=>`The new shape (${s}) has ${l} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`)),n.incRef(i.dataId);const u=n.data.get(i.dataId);if(null!=u.complexTensorInfos){const e=u.complexTensorInfos.real,t=u.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:i.dataId,shape:s,dtype:i.dtype}}const kre={kernelName:_K,backendName:"cpu",kernelFunc:wre};function Sre(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o}=t,{transposeA:a,transposeB:s}=r;Fne([i,o],"matMul");const l=i.shape.length,u=o.shape.length,c=a?i.shape[l-2]:i.shape[l-1],h=s?o.shape[u-1]:o.shape[u-2],d=a?i.shape[l-1]:i.shape[l-2],p=s?o.shape[u-2]:o.shape[u-1],f=i.shape.slice(0,-2),g=o.shape.slice(0,-2),m=DG(f),y=DG(g),v=kJ(i.shape.slice(0,-2),o.shape.slice(0,-2)).concat([d,p]);RG(c===h,(()=>`Error in matMul: inner shapes (${c}) and (${h}) of Tensors with shapes ${i.shape} and ${o.shape} and transposeA=${a} and transposeB=${s} must match.`));const b=s?[y,p,h]:[y,h,p],x=wre({inputs:{x:i},backend:n,attrs:{shape:a?[m,c,d]:[m,d,c]}}),w=wre({inputs:{x:o},backend:n,attrs:{shape:b}}),k=a?x.shape[1]:x.shape[2],S=a?x.shape[2]:x.shape[1],C=s?w.shape[1]:w.shape[2],I=Math.max(m,y),E=n.data.get(x.dataId).values,T=n.data.get(w.dataId).values,_=ZG(x.shape),N=ZG(w.shape),[A,O,R]=a?[_[0],1,_[1]]:[_[0],_[1],1],[$,P,D]=s?[1,N[1],N[0]]:[N[1],1,N[0]],M=S*C,F=KQ([I,S,C],x.dtype),L=F.values,j=n.blockSize;for(let z=0;z<I;z++){const e=z%m,t=z%y;for(let n=0;n<S;n+=j){const r=Math.min(n+j,S);for(let i=0;i<C;i+=j){const o=Math.min(i+j,C);for(let a=0;a<k;a+=j){const s=Math.min(a+j,k);for(let l=n;l<r;l++)for(let n=i;n<o;n++){let r=0;for(let i=a;i<s;i++){r+=E[e*A+l*O+i*R]*T[i*$+n*P+t*D]}L[z*M+(l*C+n)]+=r}}}}}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(v,F.dtype,F.values)}const Cre={kernelName:DH,backendName:"cpu",kernelFunc:Sre};const Ire={kernelName:IX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o,bias:a,preluActivationWeights:s}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:h}=r;let d,p,f;const g=[];d=Sre({inputs:{a:i,b:o},attrs:{transposeA:l,transposeB:u},backend:n}),a&&(p=bre({inputs:{a:d,b:a},backend:n}),g.push(d),d=p),c&&(f=are(n,d,c,s,h),g.push(d),d=f);for(const m of g)n.disposeIntermediateTensorInfo(m);return d}};function Ere(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const Tre={kernelName:yH,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;Fne(t,"abs");let r=new Float32Array(DG(t.shape));return r=Ere(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},_re=Bne(vH,(e=>Math.acos(e))),Nre={kernelName:vH,backendName:"cpu",kernelFunc:_re},Are=Bne(bH,(e=>Math.acosh(e))),Ore={kernelName:bH,backendName:"cpu",kernelFunc:Are};const Rre={kernelName:wH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;Fne(t,"addN");const i=r.map((e=>n.data.get(e.dataId).values)),o=KQ(r[0].shape,r[0].dtype),a=o.values;for(let s=0;s<r.length;s++){const e=i[s];for(let t=0;t<a.length;t++)a[t]+=e[t]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function $re(e,t,n,r,i){const o=t.length,a=DG(t),s=ZG(t),l=ZG(i),u=VG(n,DG(i));for(let c=0;c<a;++c){const t=sH(c,o,s),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];u[aH(n,o,l)]=e[c]}return u}function Pre(e){const{inputs:t,attrs:n,backend:r}=e,{x:i}=t,{perm:o}=n;Fne(i,"transpose");const a=i.shape.length,s=new Array(a);for(let u=0;u<s.length;u++)s[u]=i.shape[o[u]];const l=$re(r.data.get(i.dataId).values,i.shape,i.dtype,o,s);return{dataId:r.write(l,s,i.dtype),shape:s,dtype:i.dtype}}const Dre={kernelName:yX,backendName:"cpu",kernelFunc:Pre};const Mre={kernelName:kH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;Fne(i,"all");const s=WG(o,i.shape);let l=s;const u=h0(l,i.shape.length);let c=i;null!=u&&(c=Pre({inputs:{x:i},backend:n,attrs:{perm:u}}),l=p0(l.length,i.shape.length)),c0("all",l,c.shape.length);const[h,d]=l0(c.shape,l),p=DG(d),f=rH(DG(h),c.dtype),g=n.data.get(c.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=g[e];for(let n=0;n<p;++n){const r=g[e+n];t=t&&r}f[y]=t}null!=u&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(h,c.dtype,f);if(a){const e=wre({inputs:{x:m},backend:n,attrs:{shape:u0(h,s)}});return n.disposeIntermediateTensorInfo(m),e}return m}};const Fre={kernelName:SH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;Fne(i,"any");const s=WG(o,i.shape);let l=s;const u=h0(l,i.shape.length);let c=i;null!=u&&(c=Pre({inputs:{x:i},backend:n,attrs:{perm:u}}),l=p0(l.length,i.shape.length)),c0("any",l,c.shape.length);const[h,d]=l0(c.shape,l),p=DG(d),f=rH(DG(h),c.dtype),g=n.data.get(c.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=g[e];for(let n=0;n<p;++n){const r=g[e+n];t=t||r}f[y]=t}null!=u&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(h,c.dtype,f);if(a){const e=wre({inputs:{x:m},backend:n,attrs:{shape:u0(h,s)}});return n.disposeIntermediateTensorInfo(m),e}return m}};const Lre={kernelName:CH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;Fne(i,"argMax");let a=WG(o,i.shape);const s=h0(a,i.shape.length);let l=i;const u=[];null!=s&&(l=Pre({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=p0(a.length,l.shape.length)),a=[a[0]],c0("argMax",a,l.shape.length);const[c,h]=l0(l.shape,a),d=rH(DG(c),"int32"),p=DG(h),f=n.data.get(l.dataId).values;for(let g=0;g<d.length;++g){const e=g*p;let t=f[e],n=0;for(let r=0;r<p;++r){const i=f[e+r];i>t&&(t=i,n=r)}d[g]=n}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c,"int32",d)}};const jre={kernelName:IH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;Fne(i,"argMin");let a=WG(o,i.shape);const s=h0(a,i.shape.length);let l=i;const u=[];null!=s&&(l=Pre({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=p0(a.length,l.shape.length)),a=[a[0]],c0("argMin",a,l.shape.length);const[c,h]=l0(l.shape,a),d=rH(DG(c),"int32"),p=DG(h),f=n.data.get(l.dataId).values;for(let g=0;g<d.length;++g){const e=g*p;let t=f[e],n=0;for(let r=0;r<p;++r){const i=f[e+r];i<t&&(t=i,n=r)}d[g]=n}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c,"int32",d)}},zre=Bne(EH,(e=>Math.asin(e))),Bre={kernelName:EH,backendName:"cpu",kernelFunc:zre},Wre=Bne(TH,(e=>Math.asinh(e))),Ure={kernelName:TH,backendName:"cpu",kernelFunc:Wre},Vre=Bne(_H,(e=>Math.atan(e))),Gre={kernelName:_H,backendName:"cpu",kernelFunc:Vre},Hre=Xne(((e,t)=>Math.atan2(e,t))),qre=gre(AH,Hre),Kre={kernelName:AH,backendName:"cpu",kernelFunc:qre},Xre=Bne(NH,(e=>Math.atanh(e))),Yre={kernelName:NH,backendName:"cpu",kernelFunc:Xre};function Qre(e,t,n,r,i,o){const a=i.strideHeight,s=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,h=i.effectiveFilterWidth,d=i.padInfo.top,p=i.padInfo.left,f="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=KQ(i.outShape,n),m=g.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],v=i.outShape[2]*i.outShape[3],b=i.outShape[3];for(let x=0;x<i.batchSize;++x){const t=x*y,n=x*r[0];for(let g=0;g<i.inChannels;++g)for(let y=0;y<i.outHeight;++y){const x=y*a-d,w=Math.max(0,x),k=Math.min(i.inHeight,c+x),S=t+y*v;for(let t=0;t<i.outWidth;++t){const a=t*s-p,c=Math.max(0,a),d=Math.min(i.inWidth,h+a);let y=f,v=0,x=0;for(let t=w;t<k;t+=l){const i=n+t*r[1];for(let t=c;t<d;t+=u){const n=e[i+t*r[2]+g];"max"===o&&n>y?y=n:"avg"===o&&(v+=n,x++)}if(isNaN(y))break}m[S+t*b+g]="avg"===o?v/x:y}}}return g}function Jre(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=KQ(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,g=KQ(t,n,e);for(let m=0;m<r.batchSize;++m)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){const n=t*s-p;let y=n;for(;y<0;)y+=u;const v=Math.min(r.inHeight,h+n);for(let s=0;s<r.outWidth;++s){const h=s*l-f;let p=h;for(;p<0;)p+=c;const b=Math.min(r.inWidth,d+h);let x=Number.NEGATIVE_INFINITY,w=-1;for(let t=y;t<v;t+=u){const a=t-n;for(let n=p;n<b;n+=c){const s=n-h,l=g.get(m,t,n,e);l>x&&(x=l,w=i?o?((m*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:a*d+s)}}a.set(w,m,t,s,e)}}return a}function Zre(e,t,n,r,i,o){const a=i.strideDepth,s=i.strideHeight,l=i.strideWidth,u=i.dilationDepth,c=i.dilationHeight,h=i.dilationWidth,d=i.effectiveFilterDepth,p=i.effectiveFilterHeight,f=i.effectiveFilterWidth,g=i.padInfo.front,m=i.padInfo.top,y=i.padInfo.left,v="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=KQ(i.outShape,n),x=b.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],k=i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[3]*i.outShape[4],C=i.outShape[4];for(let I=0;I<i.batchSize;++I){const t=I*w,n=I*r[0];for(let b=0;b<i.inChannels;++b)for(let w=0;w<i.outDepth;++w){const I=w*a-g;let E=I;for(;E<0;)E+=u;const T=Math.min(i.inDepth,d+I),_=t+w*k;for(let t=0;t<i.outHeight;++t){const a=t*s-m;let d=a;for(;d<0;)d+=c;const g=Math.min(i.inHeight,p+a),w=_+t*S;for(let t=0;t<i.outWidth;++t){const a=t*l-y;let s=a;for(;s<0;)s+=h;const p=Math.min(i.inWidth,f+a),m=w+t*C;let k=v,S=0,I=0;for(let t=E;t<T;t+=u){const i=n+t*r[1];for(let t=d;t<g;t+=c){const n=i+t*r[2];for(let t=s;t<p;t+=h){const i=e[n+t*r[3]+b];if("max"===o&&i>k?k=i:"avg"===o&&(S+=i,I++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}x[m+b]="avg"===o?S/Math.max(I,1):k}}}}return b}const eie={kernelName:OH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;Fne(i,"avgPool");const{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r;RG(mZ(a,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`));const u=aZ(i.shape,o,a,1,s,l);let c;if(1===u.filterWidth&&1===u.filterHeight&&MG(u.inShape,u.outShape))c=Gne({inputs:{x:i},backend:n});else{const e=n.data.get(i.dataId).values,t=ZG(i.shape),r=Qre(e,i.shape,i.dtype,t,u,"avg");c=n.makeTensorInfo(u.outShape,i.dtype,r.values)}return c}};const tie={kernelName:$H,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l,dataFormat:u}=r;Fne(i,"avgPool3d");const c=sZ(i.shape,o,a,1,s,l,u),h=Zre(n.data.get(i.dataId).values,i.shape,i.dtype,ZG(i.shape),c,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}};const nie={kernelName:PH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,{filterSize:a,strides:s,pad:l,dimRoundingMode:u}=r;Fne([i,o],"avgPool3DGrad");const c=sZ(o.shape,a,s,1,l,u),h=c.strideDepth,d=c.strideHeight,p=c.strideWidth,f=c.filterDepth,g=c.filterHeight,m=c.filterWidth,y=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,k=c.effectiveFilterWidth,S=x-1-c.padInfo.front,C=k-1-c.padInfo.left,I=w-1-c.padInfo.top,E=KQ(o.shape,"float32"),T=1/(f*g*m),_=n.bufferSync(i);for(let N=0;N<c.batchSize;++N)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inDepth;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const i=t-S,o=n-I,a=r-C;let s=0;for(let t=0;t<x;t+=y){const n=(i+t)/h;if(!(n<0||n>=c.outDepth||Math.floor(n)!==n))for(let t=0;t<w;t+=v){const r=(o+t)/d;if(!(r<0||r>=c.outHeight||Math.floor(r)!==r))for(let t=0;t<k;t+=b){const i=(a+t)/p;if(i<0||i>=c.outWidth||Math.floor(i)!==i)continue;s+=_.get(N,n,r,i,e)}}}E.set(s*T,N,t,n,r,e)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};const rie={kernelName:RH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o;Fne([i,o],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=aZ(a.shape,s,l,1,u),h=c.strideHeight,d=c.strideWidth,p=c.filterHeight,f=c.filterWidth,g=c.dilationHeight,m=c.dilationWidth,y=c.effectiveFilterHeight,v=c.effectiveFilterWidth,b=v-1-c.padInfo.left,x=y-1-c.padInfo.top,w=KQ(a.shape,"float32"),k=1/(p*f),S=n.data.get(i.dataId).values,C=KQ(i.shape,"float32",S);for(let I=0;I<c.batchSize;++I)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inHeight;++t)for(let n=0;n<c.inWidth;++n){const r=t-x,i=n-b;let o=0;for(let t=0;t<y;t+=g){const n=(r+t)/h;if(!(n<0||n>=c.outHeight||Math.floor(n)!==n))for(let t=0;t<v;t+=m){const r=(i+t)/d;if(r<0||r>=c.outWidth||Math.floor(r)!==r)continue;o+=C.get(I,n,r,e)}}w.set(o*k,I,t,n,e)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const iie={kernelName:Tq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,scale:o,offset:a,mean:s,variance:l}=t;RG(s.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),RG(null==a||s.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),RG(null==o||s.shape.length===o.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),Fne([i,s,l,o,a],"batchNorm");let{varianceEpsilon:u}=r;null==u&&(u=.001);const c=n.data.get(i.dataId).values,h=n.data.get(s.dataId).values,d=n.data.get(l.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),f=a?n.data.get(a.dataId).values:new Float32Array([0]),g=new Float32Array(c.length),m=f.length,y=p.length,v=d.length,b=h.length;let x=0,w=0,k=0,S=0;for(let C=0;C<c.length;++C)g[C]=f[x++]+(c[C]-h[w++])*p[k++]/Math.sqrt(d[S++]+u),x>=m&&(x=0),w>=b&&(w=0),k>=y&&(k=0),S>=v&&(S=0);return n.makeTensorInfo(i.shape,i.dtype,g)}};function oie(e,t,n,r,i){const o=QJ(r,t,n),a=DG(n),s=ZG(r);if(o){const n=JJ(t,s);return"string"===i?e.slice(n,n+a):e.subarray(n,n+a)}const l=KQ(r,i,"string"===i?b3(e):e),u=KQ(n,i);for(let c=0;c<u.size;++c){const e=u.indexToLoc(c),n=e.map(((e,n)=>e+t[n]));u.set(l.get(...n),...e)}return"string"===i?x3(u.values):u.values}function aie(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,size:a}=r;Fne(i,"slice");const[s,l]=ZJ(i,o,a);jJ(i,s,l);const u=oie(n.data.get(i.dataId).values,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,u)}const sie={kernelName:WK,backendName:"cpu",kernelFunc:aie};const lie={kernelName:MH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,crops:a}=r;Fne([i],"batchToSpaceND");const s=o.reduce(((e,t)=>e*t)),l=k2(i.shape,o,s),u=S2(l.length,o.length),c=C2(i.shape,o,s),h=I2(a,o.length),d=E2(c,a,o.length),p=wre({inputs:{x:i},backend:n,attrs:{shape:l}}),f=Pre({inputs:{x:p},backend:n,attrs:{perm:u}}),g=wre({inputs:{x:f},backend:n,attrs:{shape:c}}),m=aie({inputs:{x:g},backend:n,attrs:{begin:h,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),m}};function uie(e,t,n,r,i){const o=DG(r),a=rH(i,n);for(let s=0;s<e.length;s++){const n=e[s];if(n<0)throw new Error("Input x must be non-negative!");n>=i||(a[n]+=o>0?t[s]:1)}return a}function cie(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=e.shape[0],o=e.shape[1],a=KQ([i,n],t.dtype);for(let s=0;s<i;s++)for(let i=0;i<o;i++){const o=e.get(s,i);if(o<0)throw new Error("Input x must be non-negative!");o>=n||(r?a.set(1,s,o):t.size>0?a.set(a.get(s,o)+t.get(s,i),s,o):a.set(a.get(s,o)+1,s,o))}return a}const hie={kernelName:FH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a}=r,s=uie(n.data.get(i.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,s)}},die=Xne(((e,t)=>e&t)),pie={kernelName:LH,backendName:"cpu",kernelFunc:gre(LH,die)};const fie={kernelName:jH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,s=kJ(Array.from(o),Array.from(a));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},gie=zne((e=>Math.ceil(e))),mie=Wne(BH,gie),yie={kernelName:BH,backendName:"cpu",kernelFunc:mie},vie=Bne(WH,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),bie={kernelName:WH,backendName:"cpu",kernelFunc:vie},xie={kernelName:VH,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(DG(t.shape)),i=n.data.get(t.dataId),o=i.complexTensorInfos.real,a=i.complexTensorInfos.imag,s=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values;for(let u=0;u<s.length;u++){const e=s[u],t=l[u];r[u]=Math.hypot(e,t)}return n.makeOutput(r,t.shape,"float32")}};function wie(e,t,n,r){const i=GG(n,DG(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=DG(e.shape);i.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const o="string"===n?b3(e.vals):e.vals;let a=0;for(let n=0;n<e.shape[0];++n){const s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)i[s+t]=o[a++]}r+=e.shape[1]}))}return i}function kie(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}const Sie={kernelName:Pq,backendName:"cpu",kernelFunc:kie};function Cie(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,o=WG(i,t[0].shape)[0];d2(t.map((e=>e.shape)),o);let a=p2(t.map((e=>e.shape)),o);if(0===DG(a))return n.makeTensorInfo(a,t[0].dtype,[]);const s=t.filter((e=>DG(e.shape)>0));if(1===s.length)return Gne({inputs:{x:s[0]},backend:n});if("complex64"===s[0].dtype){const e=s.map((e=>cre({inputs:{input:e},backend:n}))),t=s.map((e=>kie({inputs:{input:e},backend:n}))),r=Cie({inputs:e,backend:n,attrs:{axis:o}}),i=Cie({inputs:t,backend:n,attrs:{axis:o}}),a=sre({inputs:{real:r,imag:i},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),a}const l=s.map((e=>{const t=DG(e.shape.slice(o));return wre({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),u=l.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));a=p2(l.map((e=>e.shape)),1);const c=1===l[0].shape[0],h=wie(u,a,t[0].dtype,c),d=p2(s.map((e=>e.shape)),o),p=n.makeTensorInfo(d,t[0].dtype,h);return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}const Iie={kernelName:GH,backendName:"cpu",kernelFunc:Cie};function Eie(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r;Fne([i,o],"conv2d");const h=vZ(l),d=lZ(i.shape,o.shape,a,u,s,c,!1,h),p=d.filterHeight,f=d.filterWidth,g=d.dilationHeight,m=d.dilationWidth,y=d.padInfo.left,v=d.padInfo.top,b="channelsLast"===d.dataFormat,x=new fY(d.outShape,i.dtype),w=ZG(i.shape),k=ZG(o.shape),S=w[0],C=b?w[1]:w[2],I=b?w[2]:1,E=b?1:w[1],T=x.strides[0],_=b?x.strides[1]:x.strides[2],N=b?x.strides[2]:1,A=b?1:x.strides[1],O=n.data.get(i.dataId).values,R=n.data.get(o.dataId).values,$=x.values;for(let P=0;P<d.batchSize;++P){const e=P*S,t=P*T;for(let n=0;n<d.outHeight;++n){const r=t+n*_,i=n*d.strideHeight-v;for(let t=0;t<p;++t){const n=i+t*g;if(n<0||n>=d.inHeight)continue;const o=t*k[0],a=e+n*C;for(let e=0;e<d.outWidth;++e){const t=r+e*N,n=e*d.strideWidth-y;for(let e=0;e<f;++e){const r=n+e*m;if(r<0||r>=d.inWidth)continue;const i=a+r*I;let s=o+e*k[1];for(let e=0;e<d.inChannels;++e){const n=O[i+e*E];for(let e=0;e<d.outChannels;++e)$[t+e*A]+=n*R[s+e];s+=d.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,$)}const Tie={kernelName:HH,backendName:"cpu",kernelFunc:Eie};const _ie={kernelName:qH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;Fne([i,o],"conv2dBackpropFilter");const h=vZ(l),d=lZ(i.shape,c,a,1,s,u,!1,h),{strideHeight:p,strideWidth:f,filterHeight:g,filterWidth:m}=d,y="channelsLast"===d.dataFormat,v=new fY(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,w=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,S=new fY(i.shape,i.dtype,w),C=new fY(o.shape,o.dtype,k);for(let I=0;I<g;++I){const e=Math.max(0,Math.ceil((x-I)/p)),t=Math.min(d.outHeight,(d.inHeight+x-I)/p);for(let n=0;n<m;++n){const r=Math.max(0,Math.ceil((b-n)/f)),i=Math.min(d.outWidth,(d.inWidth+b-n)/f);for(let o=0;o<d.inChannels;++o)for(let a=0;a<d.outChannels;++a){let s=0;for(let l=0;l<d.batchSize;++l)for(let u=e;u<t;++u){const e=I+u*p-x;for(let t=r;t<i;++t){const r=n+t*f-b;s+=y?S.get(l,e,r,o)*C.get(l,u,t,a):S.get(l,o,e,r)*C.get(l,a,u,t)}}v.set(s,I,n,o,a)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const Nie={kernelName:KH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{inputShape:a,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r;Fne([i,o],"conv2dBackpropInput");const h=ZG(o.shape),d=ZG(i.shape);let p=vZ(u);const f=lZ(a,o.shape,s,1,l,c,!1,p),g=new fY(f.inShape,"float32"),m=g.values,y=n.data.get(i.dataId).values,v=n.data.get(o.dataId).values,[b,x,w]=h,{batchSize:k,filterHeight:S,filterWidth:C,inChannels:I,inHeight:E,inWidth:T,outChannels:_,outHeight:N,outWidth:A,strideHeight:O,strideWidth:R}=f;p=f.dataFormat;const $=S-1-f.padInfo.top,P=C-1-f.padInfo.left,D="channelsLast"===p,M=g.strides[0],F=D?g.strides[1]:g.strides[2],L=D?g.strides[2]:1,j=D?1:g.strides[1],z=d[0],B=D?d[1]:d[2],W=D?d[2]:1,U=D?1:d[1];for(let V=0;V<k;++V)for(let e=0;e<I;++e)for(let t=0;t<E;++t){const n=t-$,r=Math.max(0,Math.ceil(n/O)),i=Math.min(N,(S+n)/O);for(let o=0;o<T;++o){const a=o-P,s=Math.max(0,Math.ceil(a/R)),l=Math.min(A,(C+a)/R);let u=0;for(let t=r;t<i;++t){const r=t*O-n;for(let n=s;n<l;++n){const i=z*V+B*t+W*n,o=b*(S-1-r)+x*(C-1-(n*R-a))+w*e;for(let e=0;e<_;++e){u+=y[i+U*e]*v[o+e]}}}m[M*V+F*t+L*o+j*e]=u}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const Aie={kernelName:XH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r;Fne([i,o],"conv3d");const u=uZ(i.shape,o.shape,a,l,s),{filterDepth:c,filterHeight:h,filterWidth:d,dilationDepth:p,dilationHeight:f,dilationWidth:g,padInfo:m}=u,y=m.front,v=m.left,b=m.top,x=new fY(u.outShape,i.dtype),w=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,S=x.values,C=ZG(i.shape),I=ZG(o.shape);for(let E=0;E<u.batchSize;++E){const e=E*C[0],t=E*x.strides[0];for(let n=0;n<u.outDepth;++n){const r=t+n*x.strides[1],i=n*u.strideDepth-y;for(let t=0;t<c;++t){const n=i+t*p;if(n<0||n>=u.inDepth)continue;const o=t*I[0],a=e+n*C[1];for(let e=0;e<u.outHeight;++e){const t=r+e*x.strides[2],n=e*u.strideHeight-b;for(let e=0;e<h;++e){const r=n+e*f;if(r<0||r>=u.inHeight)continue;const i=o+e*I[1],s=a+r*C[2];for(let e=0;e<u.outWidth;++e){const n=t+e*u.outChannels,r=e*u.strideWidth-v;for(let e=0;e<d;++e){const t=r+e*g;if(t<0||t>=u.inWidth)continue;const o=i+e*I[2],a=s+t*u.inChannels;let l=o;for(let e=0;e<u.inChannels;++e){const t=w[a+e];for(let e=0;e<u.outChannels;++e)S[n+e]+=t*k[l+e];l+=u.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const Oie={kernelName:YH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,filterShape:l}=r;Fne([i,o],"conv3dBackpropFilterV2");const u=ZG(i.shape),c=ZG(o.shape),h=uZ(i.shape,l,a,1,s),d=h.strideDepth,p=h.strideHeight,f=h.strideWidth,g=h.filterDepth,m=h.filterHeight,y=h.filterWidth,v=new fY(h.filterShape,"float32"),b=v.values,[x,w,k,S]=v.strides,C=n.data.get(o.dataId).values,[I,E,T,_]=c,N=n.data.get(i.dataId).values,[A,O,R,$]=u,P=h.padInfo.front,D=h.padInfo.left,M=h.padInfo.top;for(let F=0;F<g;++F){const e=Math.max(0,Math.ceil((P-F)/d)),t=Math.min(h.outDepth,(h.inDepth+P-F)/d),n=F*x;for(let r=0;r<m;++r){const i=Math.max(0,Math.ceil((M-r)/p)),o=Math.min(h.outHeight,(h.inHeight+M-r)/p),a=r*w+n;for(let n=0;n<y;++n){const s=Math.max(0,Math.ceil((D-n)/f)),l=Math.min(h.outWidth,(h.inWidth+D-n)/f),u=n*k+a;for(let a=0;a<h.inChannels;++a){const c=a*S+u;for(let u=0;u<h.outChannels;++u){let g=0;for(let c=0;c<h.batchSize;++c){const h=c*A,m=c*I;for(let c=e;c<t;++c){const e=(F+c*d-P)*O+h,t=c*E+m;for(let c=i;c<o;++c){const i=(r+c*p-M)*R+e,o=c*T+t;for(let e=s;e<l;++e){const t=e*_+o;g+=N[(n+e*f-D)*$+i+a]*C[t+u]}}}}b[c+u]=g}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const Rie={kernelName:QH,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{pad:a,strides:s,inputShape:l}=r;Fne([i],"conv3dBackpropInputV2");const u=ZG(i.shape),c=ZG(o.shape),h=uZ(l,o.shape,s,1,a),d=new fY(h.inShape,"float32"),p=d.values,[f,g,m,y]=d.strides,v=n.data.get(i.dataId).values,[b,x,w,k]=u,S=n.data.get(o.dataId).values,[C,I,E,T]=c,{batchSize:_,filterDepth:N,filterHeight:A,filterWidth:O,inChannels:R,inDepth:$,inHeight:P,inWidth:D,outChannels:M,outDepth:F,outHeight:L,outWidth:j,strideDepth:z,strideHeight:B,strideWidth:W}=h,U=N-1-h.padInfo.front,V=A-1-h.padInfo.top,G=O-1-h.padInfo.left;for(let H=0;H<_;++H)for(let e=0;e<R;++e)for(let t=0;t<$;++t){const n=t-U,r=Math.max(0,Math.ceil(n/z)),i=Math.min(F,(N+n)/z);for(let o=0;o<P;++o){const a=o-V,s=Math.max(0,Math.ceil(a/B)),l=Math.min(L,(A+a)/B);for(let u=0;u<D;++u){const c=u-G,h=Math.max(0,Math.ceil(c/W)),d=Math.min(j,(O+c)/W);let _=0;for(let t=r;t<i;++t){const r=t*z-n;for(let n=s;n<l;++n){const i=n*B-a;for(let o=h;o<d;++o){const a=b*H+x*t+w*n+k*o,s=C*(N-1-r)+I*(A-1-i)+E*(O-1-(o*W-c))+T*e;for(let e=0;e<M;++e){_+=v[a+e]*S[s+e]}}}}p[f*H+g*t+m*o+y*u+e]=_}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},$ie=Bne(JH,(e=>Math.cos(e))),Pie={kernelName:JH,backendName:"cpu",kernelFunc:$ie},Die=Bne(ZH,(e=>Math.cosh(e))),Mie={kernelName:ZH,backendName:"cpu",kernelFunc:Die};const Fie={kernelName:nq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:o,boxInd:a}=t,{cropSize:s,method:l,extrapolationValue:u}=r,[c,h,d,p]=i.shape,f=o.shape[0],[g,m]=s,y=KQ([f,g,m,p],"float32"),v=n.data.get(o.dataId).values,b=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,w=ZG(i.shape),k=ZG(y.shape);for(let S=0;S<f;S++){const e=4*S,t=v[e],n=v[e+1],r=v[e+2],i=v[e+3],o=b[S];if(o>=c)continue;const a=g>1?(r-t)*(h-1)/(g-1):0,s=m>1?(i-n)*(d-1)/(m-1):0;for(let c=0;c<g;c++){const e=g>1?t*(h-1)+c*a:.5*(t+r)*(h-1);if(e<0||e>h-1)for(let t=0;t<m;t++)for(let e=0;e<p;e++){const n=e+t*k[2]+c*k[1]+S*k[0];y.values[n]=u}else if("bilinear"===l){const t=Math.floor(e),r=Math.ceil(e),a=e-t;for(let e=0;e<m;e++){const l=m>1?n*(d-1)+e*s:.5*(n+i)*(d-1);if(l<0||l>d-1){for(let t=0;t<p;t++){const n=t+e*k[2]+c*k[1]+S*k[0];y.values[n]=u}continue}const h=Math.floor(l),f=Math.ceil(l),g=l-h;for(let n=0;n<p;n++){let i=n+h*w[2]+t*w[1]+o*w[0];const s=x[i];i=n+f*w[2]+t*w[1]+o*w[0];const l=x[i];i=n+h*w[2]+r*w[1]+o*w[0];const u=x[i];i=n+f*w[2]+r*w[1]+o*w[0];const d=s+(l-s)*g,p=u+(x[i]-u)*g;i=n+e*k[2]+c*k[1]+S*k[0],y.values[i]=d+(p-d)*a}}}else for(let t=0;t<m;++t){const r=m>1?n*(d-1)+t*s:.5*(n+i)*(d-1);if(r<0||r>d-1){for(let e=0;e<p;e++){const n=e+t*k[2]+c*k[1]+S*k[0];y.values[n]=u}continue}const a=Math.round(r),l=Math.round(e);for(let e=0;e<p;e++){const n=e+a*w[2]+l*w[1]+o*w[0],r=e+t*k[2]+c*k[1]+S*k[0];y.values[r]=x[n]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const Lie={kernelName:eq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;Fne(i,"cumprod");const l=h0([o],i.shape.length);let u=i;null!=l&&(u=Pre({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=p0(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const h=TY(u.dtype,"int32"),d=nH(DG(u.shape),h),p=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],g=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=g(y,e);if(0===e)d[t]=a?1:p[t];else{const n=g(y,e-1);d[t]=a?p[n]*d[n]:p[t]*d[n]}}const m=n.makeTensorInfo(u.shape,h,d);if(null!=l){const e=Pre({inputs:{x:m},backend:n,attrs:{perm:d0(l)}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(u),e}return m}};const jie={kernelName:tq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;Fne(i,"cumsum");const l=h0([o],i.shape.length);let u=i;null!=l&&(u=Pre({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=p0(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const h=TY(u.dtype,"int32"),d=rH(DG(u.shape),h),p=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],g=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=g(y,e);if(0===e)d[t]=a?0:p[t];else{const n=g(y,e-1);d[t]=a?p[n]+d[n]:p[t]+d[n]}}const m=n.makeTensorInfo(u.shape,h,d);if(null!=l){const e=Pre({inputs:{x:m},backend:n,attrs:{perm:d0(l)}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(u),e}return m}};const zie={kernelName:rq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a,binaryOutput:s}=r;if(1===i.shape.length){const e=uie(n.data.get(i.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,e)}if(2===i.shape.length){const e=cie(n.bufferSync(i),n.bufferSync(o),a,s);return n.makeTensorInfo(e.shape,o.dtype,e.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}};const Bie={kernelName:iq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:o,dataFormat:a}=r;RG("NHWC"===a,(()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`));const s=i.shape[0],l=i.shape[1],u=i.shape[2],c=i.shape[3],h=l*o,d=u*o,p=c/(o*o),f=n.data.get(i.dataId).values,g=new Float32Array(s*h*d*p);let m=0;for(let y=0;y<s;++y)for(let e=0;e<h;++e){const t=Math.floor(e/o),n=e%o;for(let e=0;e<d;++e){const r=Math.floor(e/o),i=(n*o+e%o)*p;for(let e=0;e<p;++e){const n=e+i+c*(r+u*(t+l*y));g[m++]=f[n]}}}return n.makeTensorInfo([s,h,d,p],i.dtype,g)}};function Wie(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l,dimRoundingMode:u}=r;Fne([i,o],"depthwiseConv2DNative");const c=ZG(i.shape),h=ZG(o.shape);let d=l;null==d&&(d=[1,1]),RG(mZ(a,d),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${d}'`));const p=lZ(i.shape,o.shape,a,d,s,u,!0),{filterHeight:f,filterWidth:g,dilationHeight:m,dilationWidth:y,padInfo:v}=p,b=v.left,x=v.top,w=p.outChannels/p.inChannels,k=new fY(p.outShape,i.dtype),S=n.data.get(i.dataId).values,C=n.data.get(o.dataId).values,I=k.values;for(let E=0;E<p.batchSize;++E){const e=E*c[0],t=E*k.strides[0];for(let n=0;n<p.outHeight;++n){const r=t+n*k.strides[1],i=n*p.strideHeight-x;for(let t=0;t<f;++t){const n=i+t*m;if(n<0||n>=p.inHeight)continue;const o=t*h[0],a=e+n*c[1];for(let e=0;e<p.outWidth;++e){const t=r+e*k.strides[2],n=e*p.strideWidth-b;for(let e=0;e<g;++e){const r=n+e*y;if(r<0||r>=p.inWidth)continue;const i=o+e*h[1],s=a+r*p.inChannels;let l=t,u=i;for(let e=0;e<p.inChannels;++e){const t=S[s+e];for(let e=0;e<w;++e)I[l+e]+=t*C[u+e];l+=w,u+=w}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const Uie={kernelName:oq,backendName:"cpu",kernelFunc:Wie};const Vie={kernelName:aq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r;Fne([i,o],"depthwiseConv2dNativeBackpropFilter");const h=lZ(i.shape,c,a,s,l,u,!0),{strideHeight:d,strideWidth:p,filterHeight:f,filterWidth:g}=h,m=new fY(h.filterShape,"float32"),y=h.padInfo.left,v=h.padInfo.top,b=h.outChannels/h.inChannels,x=n.data.get(i.dataId).values,w=new fY(i.shape,i.dtype,x),k=n.data.get(o.dataId).values,S=new fY(o.shape,o.dtype,k);for(let C=0;C<f;++C){const e=Math.max(0,Math.ceil((v-C)/d)),t=Math.min(h.outHeight,(h.inHeight+v-C)/d);for(let n=0;n<g;++n){const r=Math.max(0,Math.ceil((y-n)/p)),i=Math.min(h.outWidth,(h.inWidth+y-n)/p);for(let o=0;o<h.outChannels;++o){const a=Math.trunc(o/b),s=o%b;let l=0;for(let u=0;u<h.batchSize;++u)for(let s=e;s<t;++s){const e=C+s*d-v;for(let t=r;t<i;++t){const r=n+t*p-y;l+=w.get(u,e,r,a)*S.get(u,s,t,o)}}m.set(l,C,n,a,s)}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const Gie={kernelName:sq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r;Fne([i,o],"depthwiseConv2DNativeBackpropInput");const h=ZG(i.shape),d=ZG(o.shape),p=lZ(c,o.shape,a,s,l,u,!0),f=new fY(p.inShape,"float32"),g=f.values,[m,y,v]=f.strides,b=n.data.get(i.dataId).values,[x,w,k]=h,S=n.data.get(o.dataId).values,[C,I,E]=d,{batchSize:T,filterHeight:_,filterWidth:N,inChannels:A,inHeight:O,inWidth:R,outChannels:$,outHeight:P,outWidth:D,strideHeight:M,strideWidth:F}=p,L=_-1-p.padInfo.top,j=N-1-p.padInfo.left,z=$/A;for(let B=0;B<T;++B)for(let e=0;e<A;++e)for(let t=0;t<O;++t){const n=t-L,r=Math.max(0,Math.ceil(n/M)),i=Math.min(P,(_+n)/M);for(let o=0;o<R;++o){const a=o-j,s=Math.max(0,Math.ceil(a/F)),l=Math.min(D,(N+a)/F);let u=0;for(let t=r;t<i;++t){const r=t*M-n;for(let n=s;n<l;++n){const i=x*B+w*t+k*n,o=C*(_-1-r)+I*(N-1-(n*F-a))+E*e;for(let t=0;t<z;++t){u+=b[i+(e*z+t)]*S[o+t]}}}g[m*B+y*t+v*o+e]=u}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const Hie={kernelName:lq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,i=DG(r.shape),o=n.data.get(r.dataId).values,a=KQ([i,i],r.dtype),s=a.values;for(let u=0;u<o.length;u++)s[u*i+u]=o[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,a.dtype,a.values)}},qie={kernelName:uq,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r,u=n,c=u.data.get(i.dataId).values,h=i.shape.length,d=u.data.get(o.dataId).values,p=o.shape.length,{batchSize:f,inHeight:g,inWidth:m,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:k,filterHeight:S,filterWidth:C,dilationHeight:I,dilationWidth:E,outShape:T}=oZ(i.shape,o.shape,a,s,"NHWC",l),_=DG(T),N=T.length,A=GG(i.dtype,_);for(let O=0;O<f;++O)for(let e=0;e<v;++e){const t=e*w-x.top;for(let n=0;n<b;++n){const r=n*k-x.left;for(let a=0;a<y;++a){let s=Number.MIN_SAFE_INTEGER;for(let e=0;e<S;++e){const n=t+e*I;if(n>=0&&n<g)for(let t=0;t<C;++t){const l=r+t*E;if(l>=0&&l<m){const r=aH([O,n,l,a],h,ZG(i.shape)),u=aH([e,t,a],p,ZG(o.shape)),f=c[r]+d[u];f>s&&(s=f)}}}A[aH([O,e,n,a],N,ZG(T))]=s}}}return{dataId:u.write(eY(A,i.dtype),T,i.dtype),shape:T,dtype:i.dtype}}},Kie={kernelName:hq,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i,filter:o,dy:a}=t,{strides:s,pad:l,dilations:u}=r,c=n,h=tH(i.shape,c.data.get(i.dataId).values),d=tH(o.shape,c.data.get(o.dataId).values),{batchSize:p,inHeight:f,inWidth:g,inChannels:m,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:k,filterWidth:S,dilationHeight:C,dilationWidth:I,outShape:E}=oZ(i.shape,o.shape,s,l,"NHWC",u);RG(a.rank===E.length,(()=>`Error in ${hq}, dy must have the same rank as output ${E.length}, but got ${a.rank}`));const T=tH(E,c.data.get(a.dataId).values),_=iH(o.shape,o.dtype);for(let N=0;N<p;++N)for(let e=0;e<y;++e){const t=e*x-b.top;for(let n=0;n<v;++n){const r=n*w-b.left;for(let i=0;i<m;++i){let o=Number.MIN_SAFE_INTEGER,a=0,s=0;for(let e=0;e<k;++e){const n=t+e*C;if(n>=0&&n<f)for(let t=0;t<S;++t){const l=r+t*I;if(l>=0&&l<g){const r=h[N][n][l][i]+d[e][t][i];r>o&&(o=r,a=e,s=t)}}}_[a][s][i]+=T[N][e][n][i]}}}return{dataId:c.write(eY(_,i.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},Xie={kernelName:cq,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i,filter:o,dy:a}=t,{strides:s,pad:l,dilations:u}=r,c=n,h=tH(i.shape,c.data.get(i.dataId).values),d=tH(o.shape,c.data.get(o.dataId).values),{batchSize:p,inHeight:f,inWidth:g,inChannels:m,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:k,filterWidth:S,dilationHeight:C,dilationWidth:I,outShape:E}=oZ(i.shape,o.shape,s,l,"NHWC",u);RG(a.rank===E.length,(()=>`Error in ${cq}, dy must have the same rank as output ${E.length}, but got ${a.rank}`));const T=tH(E,c.data.get(a.dataId).values),_=iH(i.shape,i.dtype);for(let N=0;N<p;++N)for(let e=0;e<y;++e){const t=e*x-b.top;for(let n=0;n<v;++n){const r=n*w-b.left;for(let i=0;i<m;++i){let o=Number.MIN_SAFE_INTEGER,a=t<0?0:t,s=r<0?0:r;for(let e=0;e<k;++e){const n=t+e*C;if(n>=0&&n<f)for(let t=0;t<S;++t){const l=r+t*I;if(l>=0&&l<g){const r=h[N][n][l][i]+d[e][t][i];r>o&&(o=r,a=n,s=l)}}}_[N][a][s][i]+=T[N][e][n][i]}}}return{dataId:c.write(eY(_,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};const Yie={kernelName:dq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:i}=t,{canvas:o,options:a}=r,{contextOptions:s,imageOptions:l}=a||{},u=(null===l||void 0===l?void 0:l.alpha)||1,c=(null===s||void 0===s?void 0:s.contextType)||"2d";if("2d"!==c)throw new Error(`Context type ${s.contextType} is not supported by the CPU backend.`);const h=o.getContext(c,(null===s||void 0===s?void 0:s.contextAttributes)||{});if(null==h)throw new Error(`Could not get the context with ${c} type.`);const[d,p]=i.shape.slice(0,2),f=2===i.shape.length?1:i.shape[2],g=n.data.get(i.dataId).values,m="float32"===i.dtype?255:1,y=new Uint8ClampedArray(p*d*4);for(let b=0;b<d*p;++b){const e=[0,0,0,255*u];for(let n=0;n<f;n++){const t=g[b*f+n];if("float32"===i.dtype){if(t<0||t>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${t}.`)}else if("int32"===i.dtype&&(t<0||t>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${t}.`);1===f?(e[0]=t*m,e[1]=t*m,e[2]=t*m):e[n]=t*m}const t=4*b;y[t+0]=Math.round(e[0]),y[t+1]=Math.round(e[1]),y[t+2]=Math.round(e[2]),y[t+3]=Math.round(e[3])}o.width=p,o.height=d;const v=new ImageData(y,p,d);return h.putImageData(v,0,0),i}},Qie=Xne(((e,t)=>e*t)),Jie=mre(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}))),Zie=gre(lK,Qie,Jie),eoe={kernelName:lK,backendName:"cpu",kernelFunc:Zie};function toe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;let s;Fne(i,"sum"),s="bool"===i.dtype?pre({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):Gne({inputs:{x:i},backend:n});const l=s.shape.length,u=WG(o,s.shape),c=h0(u,l);let h=u,d=s;null!=c&&(d=Pre({inputs:{x:s},backend:n,attrs:{perm:c}}),h=p0(h.length,l)),c0("sum",h,d.shape.length);const[p,f]=l0(d.shape,h);let g=ure(n,p,TY(d.dtype,"int32"));const m=DG(f),y=n.data.get(g.dataId).values,v=n.data.get(d.dataId).values;for(let b=0;b<y.length;++b){const e=b*m;let t=0;for(let n=0;n<m;++n)t+=v[e+n];y[b]=t}if(a){const e=g;g=wre({inputs:{x:g},backend:n,attrs:{shape:u0(g.shape,u)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(s),null!=c&&n.disposeIntermediateTensorInfo(d),g}const noe={kernelName:XK,backendName:"cpu",kernelFunc:toe};const roe={kernelName:fq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,o=t,{allDims:a,summedDims:s,idDims:l}=Q2(i,o.length);Z2(a.length,l,o);const{path:u,steps:c}=e3(s,l),h=c.length;let d=null,p=a.length;const f=[];for(let g=0;g<h;++g){for(const e of c[g]){const{permutationIndices:t,expandDims:r}=J2(p,l[e]);let i;t3(t)?i=o[e]:(i=Pre({inputs:{x:o[e]},backend:n,attrs:{perm:t}}),f.push(i));const a=i.shape.slice();for(let e=0;e<r.length;++e)a.splice(r[e],0,1);MG(i.shape,a)||(i=wre({inputs:{x:i},backend:n,attrs:{shape:a}}),f.push(i)),null===d?d=i:(d=Zie({inputs:{a:i,b:d},backend:n}),f.push(d))}g<h-1&&(u[g]>=0&&(d=toe({inputs:{x:d},backend:n,attrs:{axis:u[g]-(a.length-p),keepDims:!1}}),f.push(d)),p--)}for(const g of f)g!==d&&n.disposeIntermediateTensorInfo(g);return d}};const ioe={kernelName:mq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:i}=t;Fne([r,i],"eluGrad");const o=new Float32Array(DG(i.shape)),a=n.data.get(i.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<a.length;++l){const e=a[l];o[l]=e>=0?s[l]:s[l]*(e+1)}return n.makeTensorInfo(i.shape,"float32",o)}},ooe=Xne(((e,t)=>e===t?1:0)),aoe=gre(vq,ooe,null,"bool"),soe={kernelName:vq,backendName:"cpu",kernelFunc:aoe},loe=$2,uoe=P2,coe=D2,hoe=M2,doe=F2,poe=L2,foe=Bne(yq,(e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+loe*n);return t*(1-((((poe*r+doe)*r+hoe)*r+coe)*r+uoe)*r*Math.exp(-n*n))})),goe={kernelName:yq,backendName:"cpu",kernelFunc:foe},moe=zne((e=>Math.exp(e))),yoe=Wne(bq,moe,"float32"),voe={kernelName:bq,backendName:"cpu",kernelFunc:yoe};function boe(e){const{inputs:t,backend:n,attrs:r}=e,{input:i}=t,{dim:o}=r,a=i.shape.length,s=i.shape.slice();let l=o;return o<0&&(RG(-(a+1)<=o,(()=>`Axis must be in the interval [${-(a+1)}, ${a}]`)),l=a+o+1),s.splice(l,0,1),wre({inputs:{x:i},backend:n,attrs:{shape:s}})}const xoe={kernelName:xq,backendName:"cpu",kernelFunc:boe},woe=zne((e=>Math.expm1(e))),koe=Wne(wq,woe),Soe={kernelName:wq,backendName:"cpu",kernelFunc:koe},Coe=Xne(((e,t)=>e/t)),Ioe=gre(pq,Coe),Eoe={kernelName:pq,backendName:"cpu",kernelFunc:Ioe},Toe=Xne(((e,t)=>e-t)),_oe=mre(((e,t,n,r)=>({real:e-n,imag:t-r}))),Noe=gre(hX,Toe,_oe),Aoe={kernelName:hX,backendName:"cpu",kernelFunc:Noe};function Ooe(e,t,n){const r=e.shape,i=r[0],o=r[1],a=n.data.get(e.dataId),s=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,u=[i,o],c=DG(u),h=VG("float32",c),d=VG("float32",c);for(let m=0;m<i;m++){const e=aie({inputs:{x:s},backend:n,attrs:{begin:[m,0],size:[1,o]}}),r=aie({inputs:{x:l},backend:n,attrs:{begin:[m,0],size:[1,o]}}),i=sre({inputs:{real:e,imag:r},backend:n}),{real:a,imag:u}=Roe(i,t,n),c=j2(a,u);for(let t=0;t<o;t++){const e=U2(c,t);h[m*o+t]=e.real,d[m*o+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i)}const p=n.makeTensorInfo(u,"float32",h),f=n.makeTensorInfo(u,"float32",d),g=sre({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}function Roe(e,t,n){const r=DG(e.shape),i=n.data.get(e.dataId),o=n.data.get(i.complexTensorInfos.real.dataId).values,a=n.data.get(i.complexTensorInfos.imag.dataId).values;if(0===((s=r)&s-1)){const i=$oe(o,a,r,t,n),s=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(s,"float32",i.real),t=n.makeTensorInfo(s,"float32",i.imag),o=n.makeTensorInfo([],"float32",ZX(r,"float32")),a=Gne({inputs:{x:o},backend:n}),l=Eoe.kernelFunc({inputs:{a:e,b:o},backend:n}),u=Eoe.kernelFunc({inputs:{a:t,b:a},backend:n}),c=n.data.get(l.dataId).values,h=n.data.get(u.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),{real:c,imag:h}}return i}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let i=0;i<t;i++){let o=0,a=0;for(let r=0;r<t;r++){const s=H2(i*r,t,n),l=U2(e,r);o+=l.real*s.real-l.imag*s.imag,a+=l.real*s.imag+l.imag*s.real}n&&(o/=t,a/=t),V2(r,o,a,i)}return r}(j2(o,a),r,t);return z2(e)}var s}function $oe(e,t,n,r,i){if(1===n)return{real:e,imag:t};const o=j2(e,t),a=n/2,s=B2(o),l=s.real,u=s.imag,c=[l.length],h=i.makeTensorInfo(c,"float32",l),d=i.makeTensorInfo(c,"float32",u),p=sre({inputs:{real:h,imag:d},backend:i}),f=W2(o),g=f.real,m=f.imag,y=[g.length],v=i.makeTensorInfo(y,"float32",g),b=i.makeTensorInfo(y,"float32",m),x=sre({inputs:{real:v,imag:b},backend:i}),w=$oe(l,u,a,r,i),k=w.real,S=w.imag,C=[k.length],I=i.makeTensorInfo(C,"float32",k),E=i.makeTensorInfo(C,"float32",S),T=sre({inputs:{real:I,imag:E},backend:i}),_=$oe(g,m,a,r,i),N=_.real,A=_.imag,O=[N.length],R=i.makeTensorInfo(O,"float32",N),$=i.makeTensorInfo(O,"float32",A),P=sre({inputs:{real:R,imag:$},backend:i}),D=G2(n,r),M=[D.real.length],F=i.makeTensorInfo(M,"float32",D.real),L=i.makeTensorInfo(M,"float32",D.imag),j=sre({inputs:{real:F,imag:L},backend:i}),z=Zie({inputs:{a:j,b:P},backend:i}),B=bre({inputs:{a:T,b:z},backend:i}),W=Noe({inputs:{a:T,b:z},backend:i}),U=cre({inputs:{input:B},backend:i}),V=cre({inputs:{input:W},backend:i}),G=kie({inputs:{input:B},backend:i}),H=kie({inputs:{input:W},backend:i}),q=Cie({inputs:[U,V],backend:i,attrs:{axis:0}}),K=Cie({inputs:[G,H],backend:i,attrs:{axis:0}}),X=i.data.get(q.dataId).values,Y=i.data.get(K.dataId).values;return i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(b),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(P),i.disposeIntermediateTensorInfo(F),i.disposeIntermediateTensorInfo(L),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(K),{real:X,imag:Y}}const Poe={kernelName:kq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,i=DG(r.shape),o=r.shape[r.shape.length-1],a=wre({inputs:{x:r},backend:n,attrs:{shape:[i/o,o]}}),s=Ooe(a,!1,n),l=wre({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),l}};function Doe(e){const{backend:t,attrs:n}=e,{shape:r,value:i,dtype:o}=n,a=o||YG(i),s=GG(a,DG(r));return function(e,t){e.fill(t)}(s,i),t.makeTensorInfo(r,a,s)}const Moe={kernelName:Sq,backendName:"cpu",kernelFunc:Doe};const Foe={kernelName:Cq,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:i}=t,o=r,a=VG(i.dtype,DG(i.shape)),[s,l,u,c]=i.shape,h=o.data.get(i.dataId).values;for(let d=0;d<s;d++){const e=d*u*l*c;for(let t=0;t<l;t++){const n=t*(u*c);for(let t=0;t<u;t++){const r=t*c;for(let i=0;i<c;i++){const o=Math.round(u-t-1),s=e+n+r+i;let l=h[s];if(o>=0&&o<u){l=h[e+n+o*c+i]}a[s]=l}}}}return{dataId:o.write(a,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},Loe=zne((e=>Math.floor(e))),joe=Wne(Iq,Loe),zoe={kernelName:Iq,backendName:"cpu",kernelFunc:joe},Boe=Xne(((e,t)=>Math.floor(e/t))),Woe=gre(Eq,Boe,null,"int32"),Uoe={kernelName:Eq,backendName:"cpu",kernelFunc:Woe};const Voe={kernelName:EX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let g=Eie({inputs:{x:i,filter:o},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d}});if(a){const e=g;if("NCHW"===c&&1===a.shape.length&&1!==a.shape[0]){const e=wre({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});g=bre({inputs:{a:g,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else g=bre({inputs:{a:g,b:a},backend:n});n.disposeIntermediateTensorInfo(e)}if(p){const e=g;if("NCHW"===c&&"prelu"===p&&1===s.shape.length&&1!==s.shape[0]){const e=wre({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});g=are(n,g,p,e,f),n.disposeIntermediateTensorInfo(e)}else g=are(n,g,p,s,f);n.disposeIntermediateTensorInfo(e)}return g}};const Goe={kernelName:TX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let g=Wie({inputs:{x:i,filter:o},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d}});if(a){const e=g;g=bre({inputs:{a:g,b:a},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=g;g=are(n,g,p,s,f),n.disposeIntermediateTensorInfo(e)}return g}};function Hoe(e,t,n,r,i,o,a,s,l){const u=KQ([r,o],n);for(let c=0;c<r;c++){const n=[];let r=0;for(let t=0;t<i;t++){const o=e[c*i+t];r+=o*a[t],n.push(o)}if(r<0||r>=l/o)throw new Error(`Invalid indices: ${n} does not index into ${s}`);for(let e=0;e<o;e++)u.values[c*o+e]=t.get(...t.indexToLoc(r*o+e))}return u}const qoe={kernelName:Nq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,o=DG(r.shape),a=i.shape,s=a[a.length-1],[l,u,c,h]=T2(r,i);if(0===u)return n.makeTensorInfo(l,r.dtype,[]);const d=Hoe(n.data.get(i.dataId).values,n.bufferSync(r),r.dtype,u,s,c,h,r.shape,o);return n.makeTensorInfo(l,r.dtype,d.values)}};function Koe(e,t,n){const r=KQ(n,e.dtype);for(let i=0;i<r.size;++i){const n=r.indexToLoc(i).slice(),o=n[0],a=n[2],s=t.locToIndex([o,a]);n[2]=t.values[s];const l=e.locToIndex(n);0<=l&&l<e.values.length&&(r.values[i]=e.values[l])}return r}const Xoe={kernelName:_q,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:o}=t,{axis:a,batchDims:s}=r;Fne([i,o],"gatherV2");const l=WG(a,i.shape)[0],u=n.data.get(o.dataId).values,c=i.shape[l];for(let b=0;b<u.length;++b){const e=u[b];RG(e<=c-1&&e>=0,(()=>`GatherV2: the index value ${e} is not in [0, ${c-1}]`))}let h=s;null==s&&(h=0);const d=DG(o.shape),p=v3(i,o,l,h),f=wre({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),g=wre({inputs:{x:o},backend:n,attrs:{shape:[p.batchSize,d/p.batchSize]}}),m=[p.batchSize,p.outerSize,d/p.batchSize,p.sliceSize],y=n.bufferSync(g),v=Koe(n.bufferSync(f),y,m);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(p.outputShape,v.dtype,v.values)}},Yoe=Xne(((e,t)=>e>t?1:0)),Qoe=gre(Aq,Yoe,null,"bool"),Joe={kernelName:Aq,backendName:"cpu",kernelFunc:Qoe},Zoe=Xne(((e,t)=>e>=t?1:0)),eae=gre(Oq,Zoe,null,"bool"),tae={kernelName:Oq,backendName:"cpu",kernelFunc:eae};const nae={kernelName:$q,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,i=DG(r.shape),o=r.shape[r.shape.length-1],a=wre({inputs:{x:r},backend:n,attrs:{shape:[i/o,o]}}),s=Ooe(a,!0,n),l=wre({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),l}},rae=Bne(Dq,(e=>Number.isFinite(e)?1:0),"bool"),iae={kernelName:Dq,backendName:"cpu",kernelFunc:rae},oae=Bne(Mq,(e=>Math.abs(e)===1/0?1:0),"bool"),aae={kernelName:Mq,backendName:"cpu",kernelFunc:oae},sae=Bne(Fq,(e=>Number.isNaN(e)?1:0),"bool"),lae={kernelName:Fq,backendName:"cpu",kernelFunc:sae},uae=Xne(((e,t)=>e<t?1:0)),cae=gre(jq,uae,null,"bool"),hae={kernelName:jq,backendName:"cpu",kernelFunc:cae},dae=Xne(((e,t)=>e<=t?1:0)),pae=gre(zq,dae,null,"bool"),fae={kernelName:zq,backendName:"cpu",kernelFunc:pae};function gae(e,t,n){const r=(t-e)/(n-1),i=rH(n,"float32");i[0]=e;for(let o=1;o<i.length;o++)i[o]=i[o-1]+r;return i}const mae={kernelName:Bq,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:o}=n,a=gae(r,i,o);return t.makeTensorInfo([a.length],"float32",a)}},yae=zne((e=>Math.log(e))),vae=Wne(Wq,yae),bae={kernelName:Wq,backendName:"cpu",kernelFunc:vae},xae=Bne(Uq,(e=>Math.log1p(e))),wae={kernelName:Uq,backendName:"cpu",kernelFunc:xae},kae=Xne(((e,t)=>e&&t)),Sae=gre(Vq,kae,null,"bool"),Cae={kernelName:Vq,backendName:"cpu",kernelFunc:Sae},Iae=Bne(Gq,(e=>e?0:1),"bool"),Eae={kernelName:Gq,backendName:"cpu",kernelFunc:Iae},Tae=Xne(((e,t)=>e||t)),_ae=gre(Hq,Tae,null,"bool"),Nae={kernelName:Hq,backendName:"cpu",kernelFunc:_ae};const Aae={kernelName:qq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:o,bias:a,alpha:s,beta:l}=r;Fne(i,"LRN");const u=i.shape[3],c=u-1,h=n.data.get(i.dataId).values,d=DG(i.shape),p=new Float32Array(d);function f(e){const t=e%u;let n=e-t+Math.max(0,t-o);const r=e-t+Math.min(t+o,c);let i=0;for(;n<=r;n++){const e=h[n];i+=e*e}return i}for(let g=0;g<d;g++){const e=f(g),t=h[g]*Math.pow(a+s*e,-l);p[g]=t}return n.makeTensorInfo(i.shape,i.dtype,p)}};const Oae={kernelName:Kq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,y:o,dy:a}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=r;Fne(a,"LRNGrad");const h=DG(a.shape),d=a.shape[3],p=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,g=n.data.get(o.dataId).values,m=new Float32Array(h),y=h;for(let v=0;v<y;v++){const e=v%d,t=v-e+Math.max(0,e-s),n=v-e+Math.min(d,e+s+1);let r=0;for(let i=t;i<n;i++)r+=Math.pow(f[i],2);r=u*r+l;for(let i=t;i<n;i++){let e=-2*u*c*f[i]*g[v]/r;v===i&&(e+=Math.pow(r,-c)),e*=p[v],m[i]+=e}}return n.makeTensorInfo(a.shape,i.dtype,m)}};function Rae(e,t,n,r){const i=VG(r,DG(n));for(let o=0;o<i.length;++o){const n=o*t;let r=e[n];for(let i=0;i<t;++i){const t=e[n+i];(Number.isNaN(t)||t>r)&&(r=t)}i[o]=r}return i}function $ae(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:o,keepDims:a}=r,s=n;let l=i.shape;const u=l.length,c=WG(o,l);let h=c;const d=h0(h,u);let p=s.data.get(i.dataId).values;if(null!=d){const e=new Array(u);for(let t=0;t<e.length;t++)e[t]=l[d[t]];p=$re(p,l,i.dtype,d,e),h=p0(h.length,u),l=e}Fne(i,"max"),c0("max",h,u);const[f,g]=l0(l,h),m=Rae(p,DG(g),f,i.dtype),y=s.write(m,f,i.dtype);let v=f;if(a){v=u0(f,c)}return{dataId:y,shape:v,dtype:i.dtype}}const Pae={kernelName:Xq,backendName:"cpu",kernelFunc:$ae},Dae=Xne(((e,t)=>Math.max(e,t))),Mae=gre(Yq,Dae),Fae={kernelName:Yq,backendName:"cpu",kernelFunc:Mae};const Lae={kernelName:Qq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;Fne(i,"maxPool");const{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r;RG(mZ(a,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`));const u=aZ(i.shape,o,a,1,s,l);let c;if(1===u.filterWidth&&1===u.filterHeight&&MG(u.inShape,u.outShape))c=Gne({inputs:{x:i},backend:n});else{const e=n.data.get(i.dataId).values,t=ZG(i.shape),r=Qre(e,i.shape,i.dtype,t,u,"max");c=n.makeTensorInfo(u.outShape,i.dtype,r.values)}return c}};const jae={kernelName:Zq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l,dataFormat:u}=r;Fne(i,"maxPool3d");const c=sZ(i.shape,o,a,1,s,l,u),h=Zre(n.data.get(i.dataId).values,i.shape,i.dtype,ZG(i.shape),c,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}};const zae={kernelName:eK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,{filterSize:a,strides:s,pad:l,dimRoundingMode:u}=r;Fne([i,o],"maxPool3DGrad");const c=sZ(o.shape,a,s,1,l,u),h=function(e,t){const n=KQ(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let g=0;g<t.batchSize;++g)for(let m=0;m<t.inChannels;++m)for(let y=0;y<t.outDepth;++y){const v=y*r-d;let b=v;for(;b<0;)b+=a;const x=Math.min(t.inDepth,u+v);for(let r=0;r<t.outHeight;++r){const u=r*i-p;let d=u;for(;d<0;)d+=s;const w=Math.min(t.inHeight,c+u);for(let i=0;i<t.outWidth;++i){const p=i*o-f;let k=p;for(;k<0;)k+=l;const S=Math.min(t.inWidth,h+p);let C=Number.NEGATIVE_INFINITY,I=-1;for(let t=b;t<x;t+=a){const n=t-v;for(let r=d;r<w;r+=s){const i=r-u;for(let o=k;o<S;o+=l){const a=o-p,s=e.get(g,t,r,o,m);s>=C&&(C=s,I=n*c*h+i*c+a)}}}n.set(I,g,y,r,i,m)}}}return n}(n.bufferSync(o),c),d=c.strideDepth,p=c.strideHeight,f=c.strideWidth,g=c.dilationDepth,m=c.dilationHeight,y=c.dilationWidth,v=c.effectiveFilterDepth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=v-1-c.padInfo.front,k=x-1-c.padInfo.left,S=b-1-c.padInfo.top,C=KQ(o.shape,"float32"),I=n.bufferSync(i);for(let E=0;E<c.batchSize;++E)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inDepth;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const i=t-w,o=n-S,a=r-k;let s=0;for(let t=0;t<v;t+=g){const n=(i+t)/d;if(!(n<0||n>=c.outDepth||Math.floor(n)!==n))for(let r=0;r<b;r+=m){const i=(o+r)/p;if(!(i<0||i>=c.outHeight||Math.floor(i)!==i))for(let o=0;o<x;o+=y){const l=(a+o)/f;if(l<0||l>=c.outWidth||Math.floor(l)!==l)continue;const u=v*b*x-1-h.get(E,n,i,l,e)===t*b*x+r*x+o?1:0;if(0===u)continue;s+=I.get(E,n,i,l,e)*u}}}C.set(s,E,t,n,r,e)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};const Bae={kernelName:Jq,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o,output:a}=t,s=o;Fne([o,a],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:h}=r,d=aZ(s.shape,l,u,1,c,h),p=n.data.get(s.dataId).values,f=KQ(d.outShape,s.dtype,Jre(p,s.shape,s.dtype,d).values),g=d.strideHeight,m=d.strideWidth,y=d.dilationHeight,v=d.dilationWidth,b=d.effectiveFilterHeight,x=d.effectiveFilterWidth,w=x-1-d.padInfo.left,k=b-1-d.padInfo.top,S=KQ(s.shape,"float32"),C=n.data.get(i.dataId).values,I=KQ(i.shape,"float32",C);for(let E=0;E<d.batchSize;++E)for(let e=0;e<d.inChannels;++e)for(let t=0;t<d.inHeight;++t)for(let n=0;n<d.inWidth;++n){const r=t-k,i=n-w;let o=0;for(let t=0;t<b;t+=y){const n=(r+t)/g;if(!(n<0||n>=d.outHeight||Math.floor(n)!==n))for(let r=0;r<x;r+=v){const a=(i+r)/m;if(a<0||a>=d.outWidth||Math.floor(a)!==a)continue;const s=b*x-1-f.get(E,n,a,e)===t*x+r?1:0;if(0===s)continue;o+=I.get(E,n,a,e)*s}}S.set(o,E,t,n,e)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};const Wae={kernelName:tK,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:i}=t,{filterSize:o,strides:a,pad:s,includeBatchInIndex:l}=n,u=r;Fne(i,"MaxPoolWithArgmax");const c=u.data.get(i.dataId).values,h=aZ(i.shape,o,a,[1,1],s),[d,p]=function(e,t,n,r,i){const o=Qre(e,0,n,ZG(t),i,"max"),a=Jre(e,t,n,i,!0,r);return[o.values,a.values]}(c,i.shape,i.dtype,l,h),f=u.write(d,h.outShape,i.dtype),g=u.write(p,h.outShape,i.dtype);return[{dataId:f,shape:h.outShape,dtype:i.dtype},{dataId:g,shape:h.outShape,dtype:"int32"}]}};const Uae={kernelName:nK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=WG(o,i.shape),l=DG(l0(i.shape,s)[1]),u=[],c=n.makeTensorInfo([],"float32",new Float32Array([l]));u.push(c);const h=pre({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});u.push(h);const d=Ioe({inputs:{a:h,b:c},backend:n});u.push(d);const p=toe({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:a}});return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}};const Vae={kernelName:rK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;Fne(i,"min");const s=WG(o,i.shape);let l=s;const u=h0(l,i.shape.length);let c=i;null!=u&&(c=Pre({inputs:{x:i},backend:n,attrs:{perm:u}}),l=p0(l.length,i.shape.length)),c0("min",l,c.shape.length);const[h,d]=l0(c.shape,l),p=DG(d),f=rH(DG(h),c.dtype),g=n.data.get(c.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=g[e];for(let n=0;n<p;++n){const r=g[e+n];(Number.isNaN(r)||r<t)&&(t=r)}f[y]=t}null!=u&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(h,c.dtype,f);if(a){const e=wre({inputs:{x:m},backend:n,attrs:{shape:u0(h,s)}});return n.disposeIntermediateTensorInfo(m),e}return m}},Gae=Xne(((e,t)=>Math.min(e,t))),Hae=gre(iK,Gae),qae={kernelName:iK,backendName:"cpu",kernelFunc:Hae};const Kae={kernelName:oK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,mode:a}=r;Fne(i,"mirrorPad");const s=o.map(((e,t)=>e[0]+i.shape[t]+e[1])),l=o.map((e=>e[0])),u=o.map(((e,t)=>e[0]+i.shape[t])),c="reflect"===a?0:1,h=n.data.get(i.dataId).values,d=i.shape.length,p=ZG(i.shape),f=DG(s),g=s.length,m=ZG(s),y=VG(i.dtype,f);for(let v=0;v<f;v++){let e=sH(v,g,m);for(let n=0;n<g;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-c:e[n]>=u[n]&&(e[n]=2*(u[n]-1)-e[n]+c);e=e.map(((e,t)=>e-l[t]));const t=aH(e,d,p);y[v]=h[t]}return{dataId:n.write(y,s,i.dtype),shape:s,dtype:i.dtype}}},Xae=Xne(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),Yae=gre(aK,Xae),Qae={kernelName:aK,backendName:"cpu",kernelFunc:Yae};function Jae(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:o}=r,a=i.shape.length;let s=o;if(-1===s&&(s=a-1),s!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${s}`);const l=WG([s],i.shape),u=$ae({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=u0(u.shape,l),h=wre({inputs:{x:u},backend:n,attrs:{shape:c}}),d=Noe({inputs:{a:i,b:h},backend:n}),p=yoe({inputs:{x:d},backend:n}),f=toe({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),g=wre({inputs:{x:f},backend:n,attrs:{shape:c}}),m=Ioe({inputs:{a:p,b:g},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),m}const Zae={kernelName:JK,backendName:"cpu",kernelFunc:Jae};const ese={kernelName:sK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:o,seed:a,normalized:s}=r;Fne(i,"multinomial");const l=s?i:Jae({inputs:{logits:i},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],h=n.data.get(l.dataId).values,d=[u,o],p=rH(DG(d),"int32");for(let f=0;f<u;++f){const e=f*c,t=new Float32Array(c-1);t[0]=h[e];for(let i=1;i<t.length;++i)t[i]=t[i-1]+h[e+i];const n=O0.alea(a.toString()),r=f*o;for(let i=0;i<o;++i){const e=n();p[r+i]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){p[r+i]=n;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",p)}};function tse(e,t,n){const r=ZX(-1,n);return Qie([],t,r,e,n)}const nse={kernelName:uK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;Fne(r,"neg");const i=n.data.get(r.dataId).values,[o,a]=tse(i,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}},rse=$1;const ise={kernelName:hK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l}=r;Fne(i,"NonMaxSuppression");const u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,{selectedIndices:h}=rse(u,c,a,s,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},ose=P1;const ase={kernelName:dK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r;Fne(i,"NonMaxSuppressionPadded");const c=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,{selectedIndices:d,validOutputs:p}=ose(c,h,a,s,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},sse=D1;const lse={kernelName:pK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r;Fne(i,"NonMaxSuppressionWithScore");const c=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,d=a,p=s,f=l,g=u,{selectedIndices:m,selectedScores:y}=sse(c,h,d,p,f,g);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},use=Xne(((e,t)=>e!==t?1:0)),cse=gre(cK,use,null,"bool"),hse={kernelName:cK,backendName:"cpu",kernelFunc:cse};const dse={kernelName:gK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:o,depth:a,onValue:s,offValue:l}=r;Fne(i,"oneHot");const u=DG(i.shape),c=new Float32Array(u*a);c.fill(l);const h=n.data.get(i.dataId).values;for(let d=0;d<u;++d)h[d]>=0&&h[d]<a&&(c[d*a+h[d]]=s);return n.makeTensorInfo([...i.shape,a],o,c)}};function pse(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=cre({inputs:{input:r},backend:n}),t=pse({inputs:{x:e},backend:n}),i=kie({inputs:{input:r},backend:n}),o=pse({inputs:{x:i},backend:n}),a=sre({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),a}return Doe({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const fse={kernelName:wX,backendName:"cpu",kernelFunc:pse};const gse={kernelName:fK,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===i.dtype){const t=cre({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r}),o=kie({inputs:{input:i},backend:r}),a=pse({inputs:{x:o},backend:r}),s=sre({inputs:{real:n,imag:a},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}return Doe({backend:r,attrs:{shape:i.shape,value:1,dtype:i.dtype}})}};function mse(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return boe({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const o=t[0].shape,a=t[0].dtype;t.forEach((e=>{$G(o,e.shape,"All tensors passed to stack must have matching shapes"),RG(a===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],l=Cie({inputs:t.map((e=>{const t=boe({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t})),backend:n,attrs:{axis:i}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}const yse={kernelName:mK,backendName:"cpu",kernelFunc:mse};const vse={kernelName:yK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,constantValue:a}=r;Fne(i,"pad");const s=o.map(((e,t)=>e[0]+i.shape[t]+e[1])),l=o.map((e=>e[0])),u=n.data.get(i.dataId).values,c=DG(i.shape),h=i.shape.length,d=ZG(i.shape),p=DG(s),f=s.length,g=ZG(s),m=VG(i.dtype,p);0!==a&&m.fill(a);for(let y=0;y<c;y++){const e=sH(y,h,d).map(((e,t)=>e+l[t]));m[aH(e,f,g)]=u[y]}return{dataId:n.write(m,s,i.dtype),shape:s,dtype:i.dtype}}},bse=Xne(((e,t)=>Math.pow(e,t))),xse=gre(vK,bse),wse={kernelName:vK,backendName:"cpu",kernelFunc:xse};function kse(e,t,n,r){const[i,o]=l0(e,r),a=TY(t,"int32"),s=rH(DG(i),a),l=DG(o);for(let u=0;u<s.length;++u){const e=u*l;let t=1;for(let r=0;r<l;++r)t*=n[e+r];s[u]=t}return{outVals:s,outShape:i,outDtype:a}}const Sse={kernelName:xK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;Fne(i,"prod");const s=i.shape.length,l=WG(o,i.shape),u=h0(l,s);let c=l,h=i;const d=[];null!=u&&(h=Pre({inputs:{x:i},backend:n,attrs:{perm:u}}),d.push(h),c=p0(c.length,s));const p=n.data.get(h.dataId).values,{outVals:f,outShape:g,outDtype:m}=kse(h.shape,h.dtype,p,c);let y=g;return a&&(y=u0(g,l)),d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(y,m,f)}};function Cse(e,t,n,r){const i=[];let o=0;const a=t.length-1+n.length,s=new Array(a).fill(null).map((()=>[0]));!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],i=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let l=1;for(let u=0;u<t.length-1;++u){l*=t[u];const e=t[u+1];for(let t=1;t<l+1;++t)s[u].push(t*e)}for(let u=0;u<e.length;++u){let r=e[u],a=e[u]+1;for(let e=0;e<n.length;++e){const i=n[e],o=e+t.length-1;if(o>=0){const e=s[o],t=e[e.length-1]-i[r];for(let n=r;n<a;++n)s[o].push(i[n+1]+t)}r=i[r],a=i[a]}a!==r&&(i.push([r,a]),o+=a-r)}return{outSplits:s,valueSlices:i,numValues:o}}function Ise(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function Ese(e,t,n,r,i){const o=t.slice();o[0]=i;const a=GG(n,DG(o)),s=e.length;return function(e,t,n,r,i,o){const a=Ise(t,2)[1],s=Ise(o,2)[1];let l=0;for(const u of n)for(let t=u[0];t<u[1];++t){for(let n=0;n<r;++n)i[l*s+n]=e[t*a+n];++l}}(e,t,r,0===s?0:s/t[0],a,o),[a,o]}function Tse(e,t,n,r,i,o,a,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach(((e,r)=>{if(e<0||e>=n){const i=sH(r,t.length,ZG(t)).join(",");throw new Error(`indices[${i}] = ${e} is not in [0, ${n})`)}}))}(o,a,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:u,valueSlices:c,numValues:h}=Cse(o,a,e,l),d=function(e){const t=[];for(let n=0;n<e.length;++n){const r=GG("int32",e[n].length);t.push(r),e[n].forEach(((e,t)=>r[t]=e))}return t}(u),p=Ese(n,r,i,c,h);return[d,p[0],p[1]]}const _se={kernelName:wK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:o,indices:a}=t,{outputRaggedRank:s}=r,l=i.map((e=>n.data.get(e.dataId).values)),u=i.map((e=>e.shape)),c=n.data.get(o.dataId).values,h=n.data.get(a.dataId).values,[d,p,f]=Tse(l,u,c,o.shape,o.dtype,h,a.shape),g=d.map((e=>n.makeTensorInfo([e.length],"int32",e))),m=n.makeTensorInfo(f,o.dtype,p);return g.concat([m])}},Nse=2147483647;function Ase(e,t,n,r,i,o,a){if(t.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const s=0===t.length,l=0===i.length,u=0===a.length,c=[];s||c.push(t[0]),l||c.push(i[0]),u||c.push(a[0]);for(let g=1;g<c.length;++g)if(c[g]!==c[g-1])throw new Error("starts, limits, and deltas must have the same shape");const h=0===c.length?1:c[0],d=GG("int32",h+1);d[0]=0;for(let g=0;g<h;++g){const t=s?e[0]:e[g],n=l?r[0]:r[g],i=u?o[0]:o[g];if(0===i)throw new Error("Requires delta != 0");let a;if(i>0&&n<t||i<0&&n>t)a=0;else if(a=Math.ceil(Math.abs((n-t)/i)),a>Nse)throw new Error(`Requires ((limit - start) / delta) <= ${Nse}`);d[g+1]=d[g]+a}const p=GG(n,d[h]);let f=0;for(let g=0;g<h;++g){const t=d[g+1]-d[g];let n=s?e[0]:e[g];const r=u?o[0]:o[g];for(let e=0;e<t;++e)p[f++]=n,n+=r}return[d,p]}const Ose={kernelName:kK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:o}=t,a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[u,c]=Ase(a,r.shape,r.dtype,s,i.shape,l,o.shape);return[n.makeTensorInfo([u.length],"int32",u),n.makeTensorInfo([c.length],r.dtype,c)]}};var Rse=f2;class $se{constructor(e,t,n,r,i,o,a,s,l,u){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=s,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=m2(u),this.raggedRank=y2(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Rse.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Rse.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Rse.VALUE_ROWIDS:return $se.getMaxWidthValueRowID(t);case Rse.ROW_SPLITS:return $se.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${Rse[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],i=0;for(let o=1;o<t;++o){const t=e[o];t!==r&&(r=t,i=Math.max(o-n,i),n=o)}return Math.max(t-n,i)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Dse(e,n)}calculateOutputSize(e){const t=this.valuesShape;v2(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=g2(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(let i=1;i<=this.raggedRank;++i)r[i]<0&&(r[i]=this.getMaxWidth(i));return r}calculateFirstParentOutputIndex(e,t,n){const r=Math.min(e,n),i=[];let o=0;for(let a=0;a<r;++a,o+=t)i.push(o);for(let a=r;a<e;++a)i.push(-1);return RG(i.length===e,(()=>"Final length of result must be equal to firstDimension.")),i}calculateOutputIndexRowSplit(e,t,n,r){const i=e.length,o=[];for(let a=0;a<i-1;++a){const i=e[a+1]-e[a];let s=Math.min(r,i),l=t[a];-1===l&&(s=0);for(let e=0;e<s;++e)o.push(l),l+=n;for(let e=0;e<i-s;++e)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,t,n,r){const i=e.length,o=[];if(0===i)return[];let a=0,s=e[0];if(s>=t.length)throw new Error(`Got currentValueRowId=${s}, which is not less than ${t.length}`);let l=t[s];o.push(l);for(let u=1;u<i;++u){const i=e[u];if(i===s)l>=0&&(++a,a<r?l+=n:l=-1);else{if(a=0,s=i,i>=t.length)throw new Error(`Got nextValueRowId=${i} which is not less than ${t.length}`);l=t[i]}o.push(l)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,t,n,r){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case Rse.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,t,n,r);case Rse.ROW_SPLITS:if(i.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(i,t,n,r);default:throw new Error(`Unsupported partition type: ${Rse[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case Rse.FIRST_DIM_SIZE:return e[0];case Rse.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Rse.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Rse[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let o=n.length-2;o>=0;--o)n[o]=n[o+1]*t[o+1];const r=Dse(t,!1),i=GG(this.valuesDType,DG(r));if(n[0]*t[0]>0){let o=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){o=this.calculateOutputIndex(e-1,o,n[e],t[e])}this.setOutput(this.raggedRank,o,i,r)}return[r,i]}setOutput(e,t,n,r){if(0===n.length)return;const i=this.values,o=n;let a=r.slice();a=a.slice(e+1);const s=DG(a),l=t.length;let u=this.defaultValue;if(u.length!==s&&1!==u.length){const e=this.defaultValueShape;iQ((()=>{const t=xZ(u,e),n=TZ(t,a);u=n.dataSync()}))}let c=0,h=0,d=0;for(let p=0;p<=l;++p){let e=p<l?t[p]:-1;if(e!==d){if(h<d){const e=i.subarray(c*s);Pse(o.subarray(h*s),e,(d-h)*s)}if(p>=l){const t=n.length;e=Math.floor(t/s)}if(e>d)if(1===this.defaultValue.length)o.subarray(d*s,e*s).fill(this.defaultValue[0]),d=e;else for(;e>d;){Pse(o.slice(d*s),u,s),++d}e<0?(c=p+1,h=d):(c=p,h=d,d=h+1)}else++d}}}function Pse(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function Dse(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function Mse(e,t,n,r,i,o,a,s,l,u){return new $se(e,t,n,r,i,o,a,s,l,u).compute()}const Fse={kernelName:SK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:i,values:o,defaultValue:a,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,h=n.data.get(a.dataId).values,d=s.map((e=>n.data.get(e.dataId).values)),p=s.map((e=>e.shape)),[f,g]=Mse(u,i.shape,c,o.shape,o.dtype,h,a.shape,d,p,l);return n.makeTensorInfo(f,o.dtype,g)}};function Lse(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return rH(0,r);const i=rH(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),i[0]=e;for(let o=1;o<i.length;o++)i[o]=i[o-1]+n;return i}const jse={kernelName:CK,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,dtype:o,step:a}=n,s=Lse(r,i,a,o);return t.makeTensorInfo([s.length],o,s)}},zse=Bne(EK,(e=>1/e)),Bse={kernelName:EK,backendName:"cpu",kernelFunc:zse};const Wse={kernelName:OK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r;Fne(i,"resizeBilinear");const l=ZG(i.shape),[u,c]=s,[h,d,p,f]=i.shape,g=n.data.get(i.dataId).values,m=new Float32Array(DG([h,u,c,f])),y=[o&&u>1?d-1:d,o&&c>1?p-1:p],v=[o&&u>1?u-1:u,o&&c>1?c-1:c];let b=0;const x=y[0]/v[0],w=y[1]/v[1];for(let k=0;k<h;k++)for(let e=0;e<u;e++){let t;t=a?x*(e+.5)-.5:x*e;const n=Math.max(0,Math.floor(t)),r=t-n,i=Math.min(d-1,Math.ceil(t)),o=k*l[0]+n*l[1],s=k*l[0]+i*l[1];for(let e=0;e<c;e++){let t;t=a?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),i=t-n,u=Math.min(p-1,Math.ceil(t)),c=o+n*l[2],h=s+n*l[2],d=o+u*l[2],y=s+u*l[2];for(let e=0;e<f;e++){const t=g[c+e],n=g[h+e],o=t+(g[d+e]-t)*i,a=o+(n+(g[y+e]-n)*i-o)*r;m[b++]=a}}}return n.makeTensorInfo([h,u,c,f],"float32",m)}};const Use={kernelName:RK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r;Fne([o,i],"resizeBilinearGrad");const s=ZG(i.shape),[l,u,c,h]=i.shape,[,d,p]=o.shape,f=new Float32Array(l*u*c*h),g=[a&&d>1?u-1:u,a&&p>1?c-1:c],m=[a&&d>1?d-1:d,a&&p>1?p-1:p],y=g[0]/m[0],v=g[1]/m[1],b=n.data.get(o.dataId).values;let x=0;for(let w=0;w<l;w++){const e=w*s[0];for(let t=0;t<d;t++){const n=t*y,r=Math.floor(n),i=Math.min(Math.ceil(n),u-1),o=e+r*s[1],a=e+i*s[1],l=n-r,d=1-l;for(let e=0;e<p;e++){const t=e*v,n=Math.floor(t),r=Math.min(Math.ceil(t),c-1),i=t-n,u=1-i,p=o+n*s[2],g=o+r*s[2],m=a+n*s[2],y=a+r*s[2],w=d*u,k=d*i,S=l*u,C=l*i;for(let e=0;e<h;e++){const t=b[x++];f[p+e]+=t*w,f[g+e]+=t*k,f[m+e]+=t*S,f[y+e]+=t*C}}}}return n.makeTensorInfo([l,c,u,h],"float32",f)}};const Vse={kernelName:NK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r;Fne(i,"resizeNearestNeighbor");const l=ZG(i.shape),[u,c]=s,[h,d,p,f]=i.shape,g=n.data.get(i.dataId).values,m=new Float32Array(h*u*c*f),y=[o&&u>1?d-1:d,o&&c>1?p-1:p],v=[o&&u>1?u-1:u,o&&c>1?c-1:c],b=y[0]/v[0],x=y[1]/v[1];let w=0;for(let k=0;k<h;k++){const e=k*l[0];for(let t=0;t<u;t++){const n=a?b*(t+.5):b*t;let r=Math.min(d-1,o?Math.round(n):Math.floor(n));a&&(r=Math.max(0,r));const i=e+r*l[1];for(let e=0;e<c;e++){const t=a?x*(e+.5):x*e;let n=Math.min(p-1,o?Math.round(t):Math.floor(t));a&&(n=Math.max(0,n));const r=i+n*l[2];for(let e=0;e<f;e++){const t=g[r+e];m[w++]=t}}}}return n.makeTensorInfo([h,u,c,f],i.dtype,m)}};const Gse={kernelName:AK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r;Fne([o,i],"resizeNearestNeighborGrad");const s=ZG(i.shape),l=ZG(o.shape),[u,c,h,d]=i.shape,[,p,f]=o.shape,g=new Float32Array(u*c*h*d),m=n.data.get(o.dataId).values,y=[a&&p>1?c-1:c,a&&f>1?h-1:h],v=[a&&p>1?p-1:p,a&&f>1?f-1:f],b=y[0]/v[0],x=y[1]/v[1],w=1/b,k=1/x,S=2*Math.ceil(w)+2,C=2*Math.ceil(k)+2;for(let I=0;I<u;I++){const e=I*s[0];for(let t=0;t<c;t++){const n=e+t*s[1],r=Math.floor(t*w),i=Math.floor(r-S/2);for(let o=0;o<h;o++){const r=n+o*s[2],u=Math.floor(o*k),y=Math.floor(u-C/2);for(let n=0;n<d;n++){let s=0;for(let r=0;r<S;r++){const u=r+i;if(u<0||u>=p)continue;const d=e+u*l[1],g=u*b;if(t===Math.min(c-1,a?Math.round(g):Math.floor(g)))for(let e=0;e<C;e++){const t=e+y;if(t<0||t>=f)continue;const r=d+t*l[2],i=t*x;o===Math.min(h-1,a?Math.round(i):Math.floor(i))&&(s+=m[r+n])}}g[r+n]=s}}}}return n.makeTensorInfo(i.shape,i.dtype,g)}};const Hse={kernelName:PK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:o}=r;Fne(i,"reverse");const a=i.shape.length,s=WG(o,i.shape);if(0===a)return Gne({inputs:{x:i},backend:n});const l=new fY(i.shape,i.dtype),u=n.bufferSync(i);for(let c=0;c<l.size;c++){const e=l.indexToLoc(c),t=e.slice();s.forEach((e=>t[e]=i.shape[e]-1-t[e])),l.set(u.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},qse={kernelName:CX,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:i}=t,{radians:o,fillValue:a,center:s}=n,l=r,u=VG(i.dtype,DG(i.shape)),[c,h,d,p]=i.shape,[f,g]=w2(s,h,d),m=Math.sin(o),y=Math.cos(o),v=l.data.get(i.dataId).values;for(let b=0;b<c;b++){const e=b*d*h*p;for(let t=0;t<h;t++){const n=t*(d*p);for(let r=0;r<d;r++){const i=r*p;for(let o=0;o<p;o++){const s=[c,t,r,o],l=s[2],b=s[1];let x=(l-f)*y-(b-g)*m,w=(l-f)*m+(b-g)*y;x=Math.round(x+f),w=Math.round(w+g);let k=a;if("number"!==typeof a&&(k=3===o?255:a[o]),x>=0&&x<d&&w>=0&&w<h){k=v[e+w*(d*p)+x*p+o]}u[e+n+i+o]=k}}}}return{dataId:l.write(u,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},Kse=Bne(DK,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),Xse={kernelName:DK,backendName:"cpu",kernelFunc:Kse},Yse=zne((e=>1/Math.sqrt(e))),Qse=Wne(MK,Yse),Jse={kernelName:MK,backendName:"cpu",kernelFunc:Qse};function Zse(e,t,n,r,i,o,a,s,l,u){const c=[r/i,i],h=e.values,d=t.values;if(0===r)return KQ(n,t.dtype);const p=l instanceof fY?l:KQ(c,t.dtype);"string"===typeof l||"number"===typeof l?p.values.fill(l):"boolean"===typeof l&&p.values.fill(+l);for(let f=0;f<o;f++){const e=[];let o=0;for(let t=0;t<a;t++){const n=h[f*a+t];e.push(n),o+=n*s[t]}if(o<0||o>=r/i)throw new Error(`Invalid indices: ${e} does not index into ${n}`);for(let n=0;n<i;n++)u?p.values[o*i+n]+=d[f*i+n]:p.values[o*i+n]=0===t.rank?d[0]:d[f*i+n]}return p}const ele={kernelName:FK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:o}=t,{shape:a}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=A2(0,i,a),d=Zse(n.bufferSync(i),n.bufferSync(o),a,h,u,l,s,c,0,!0);return n.makeTensorInfo(a,d.dtype,d.values)}};function tle(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<t?n=i+1:r=i;return r}function nle(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<=t?n=i+1:r=i;return r}const rle={kernelName:jK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:o}=t,{side:a}=r,s=function(e,t,n,r,i,o){const a=GG("int32",n*i);for(let s=0;s<n;++s){const n=e.slice(s*r,(s+1)*r),l=s*i;for(let e=0;e<i;++e)a[l+e]="left"===o?tle(n,t[e+l]):nle(n,t[e+l])}return a}(n.data.get(i.dataId).values,n.data.get(o.dataId).values,i.shape[0],i.shape[1],o.shape[1],a);return n.makeTensorInfo(o.shape,"int32",s)}};const ile={kernelName:zK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:o}=t;Fne([r,i,o],"select");const a=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=TY(i.dtype,o.dtype),h=rH(DG(i.shape),c);let d=0;const p=0===a||a>1||1===i.shape.length?1:DG(i.shape.slice(1));for(let f=0;f<s.length;f++)for(let e=0;e<p;e++)1===s[f]?h[d++]=l[f]:h[d++]=u[f];return n.makeTensorInfo(i.shape,c,h)}},ole=O2,ale=R2,sle=Bne(BK,(e=>e>=0?ale*e:ole*(Math.exp(e)-1))),lle={kernelName:BK,backendName:"cpu",kernelFunc:sle},ule=Bne(GK,(e=>e<0?-1:e>0?1:0)),cle={kernelName:GK,backendName:"cpu",kernelFunc:ule},hle=Bne(UK,(e=>Math.sin(e))),dle={kernelName:UK,backendName:"cpu",kernelFunc:hle},ple=Bne(VK,(e=>Math.sinh(e))),fle={kernelName:VK,backendName:"cpu",kernelFunc:ple},gle=Math.log(1.1920928955078125e-7)+2,mle=Bne(qK,(e=>{const t=e>-gle,n=e<gle,r=Math.exp(e);let i;return i=n?r:t?e:Math.log(1+r),i})),yle={kernelName:qK,backendName:"cpu",kernelFunc:mle};const vle={kernelName:YK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,paddings:a}=r;Fne([i],"spaceToBatchND");const s=DG(o),l=[[0,0]];l.push(...a);for(let m=1+o.length;m<i.shape.length;++m)l.push([0,0]);const u=vse.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),c=k2(u.shape,o,s,!1),h=S2(c.length,o.length,!1),d=C2(u.shape,o,s,!1),p=wre({inputs:{x:u},backend:n,attrs:{shape:c}}),f=Pre({inputs:{x:p},backend:n,attrs:{perm:h}}),g=wre({inputs:{x:f},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}};function ble(e,t,n,r,i,o,a){const s=t[0],l=o[0],u=new Array(l),c=new Array(s),h=t[1];if(0===l){if(0!==s)throw new Error(i3(s));return[GG(n,0),[0,h],GG(i,0),u,c]}let d=!0,p=0;const f=new Array(l).fill(0);for(let m=0;m<s;++m){const t=e[m*h];if(t<0)throw new Error(o3(m,t));if(t>=l)throw new Error(a3(m,t,l));++f[t],d=d&&t>=p,p=t}let g=!0;for(let m=0;m<l;++m){const e=0===f[m];u[m]=e,g=g&&!e,f[m]=Math.max(f[m],1),m>0&&(f[m]+=f[m-1])}if(g&&d){const t=e,n=r;for(let e=0;e<s;++e)c[e]=e;return[t,[s,h],n,u,c]}{const t=f[l-1],o=GG(n,t*h),d=GG(i,t),p=new Array(l).fill(0);for(let n=0;n<s;++n){const t=e[n*h],i=p[t],a=(0===t?0:f[t-1])+i;p[t]++;for(let r=0;r<h;++r)o[a*h+r]=e[n*h+r];d[a]=r[n],c[n]=a}for(let e=0;e<l;++e){if(0===p[e]){const t=0===e?0:f[e-1];o[t*h+0]=e;for(let e=1;e<h;++e)o[t*h+e]=0;d[t]=a}}return[o,[t,h],d,u,c]}}const xle={kernelName:ZK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:o,defaultValue:a}=t;if(1!==o.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${o.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${r.shape}`);if(1!==i.shape.length)throw new Error(`Values must be a vector, saw:\n        ${i.shape}`);if(0!==a.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${a.shape}`);const s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=n.data.get(a.dataId).values[0],[h,d,p,f,g]=ble(s,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],i.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};function wle(e,t,n,r,i){const o=DG(r),a=t[0],s=i.length,l=[];let u=1,c=-1;for(let g=0;g<s;++g){const e=i[g];if(-1===e){if(-1!==c)throw new Error(s3(c,g));c=g,l.push(1)}else{if(e<0)throw new Error(l3(g,e));u*=e,l.push(e)}}if(-1!==c){if(u<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(o/u);if(u*e!==o)throw new Error(c3(r,l));l[c]=e}if(DG(l)!==o)throw new Error(h3(r,l));const h=r.length,d=[];if(h>0){d[h-1]=1;for(let e=h-2;e>=0;--e)d[e]=d[e+1]*r[e+1]}const p=[];if(s>0){p[s-1]=1;for(let e=s-2;e>=0;--e)p[e]=p[e+1]*l[e+1]}const f=GG(n,a*s);for(let g=0;g<a;++g){let t=0;for(let n=0;n<h;++n)t+=e[g*h+n]*d[n];for(let e=0;e<s;++e)f[g*s+e]=Math.trunc(t/p[e]),t%=p[e]}return[f,[a,s],l]}const kle={kernelName:eX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:o}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${r.shape}`);if(1!==i.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${i.shape}`);if(1!==o.shape.length)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const a=Array.from(n.data.get(i.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(o.dataId).values),[u,c,h]=wle(s,r.shape,r.dtype,a,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};function Sle(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const s=r.length,l=[t[0],e.length/t[0]],u=l[1],c=s>0?i[s-1]+1:0;if(c<0)throw new Error("segment ids must be >= 0");const h=t.slice();h[0]=c;const d=h.reduce(((e,t)=>e*t),1),p=GG(n,d);if(0===s)return c>0&&p.fill(a),[p,h];if(c<=0)throw new Error("segment ids must be >= 0");let f=0,g=1,m=0,y=i[f];for(;;){let t=0;if(g<s){if(t=i[g],y===t){++g;continue}if(y>=t)throw new Error("segment ids are not increasing")}if(y<0||y>=c)throw new Error(f3(y,c));y>m&&p.fill(a,m*u,y*u);for(let n=f;n<g;++n){const t=r[n];if(t<0||t>=l[0])throw new Error(g3(n,r[n],l[0]));for(let n=0;n<u;n++)p[y*u+n]+=e[t*u+n]}if(o)for(let e=0;e<u;e++)p[y*u+e]/=g-f;if(f=g,++g,m=y+1,y=t,g>s)break}return m<c&&p.fill(a,m*u,c*u),[p,h]}const Cle={kernelName:tX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${i.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${o.shape}`);if(i.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[u,c]=Sle(a,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}};const Ile={kernelName:nX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${i.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${o.shape}`);if(i.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[u,c]=Sle(a,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}};const Ele={kernelName:rX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:o,defaultValue:a}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:h,outputSize:d}=A2(0,i,s),p=!1,f=n.bufferSync(i);let g;switch(o.dtype){case"bool":g=Zse(f,n.bufferSync(o),s,d,c,u,l,h,Boolean(n.data.get(a.dataId).values[0]),p);break;case"float32":g=Zse(f,n.bufferSync(o),s,d,c,u,l,h,n.data.get(a.dataId).values[0],p);break;case"int32":g=Zse(f,n.bufferSync(o),s,d,c,u,l,h,n.data.get(a.dataId).values[0],p);break;case"string":g=Zse(f,n.bufferSync(o),s,d,c,u,l,h,rY(n.data.get(a.dataId).values[0]),p);break;default:throw new Error(`Unsupported type ${o.dtype}`)}return n.makeTensorInfo(s,g.dtype,g.values)}};const Tle={kernelName:QK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:o,axis:a}=r,s=WG(a,i.shape)[0],l=r3(i,o,s),u=new Array(i.shape.length).fill(0),c=i.shape.slice();return l.map((e=>{const t=[...c];t[s]=e;const r=aie({inputs:{x:i},backend:n,attrs:{begin:u,size:t}});return u[s]+=e,r}))}},_le=zne((e=>Math.sqrt(e))),Nle=Bne(KK,(e=>Math.sqrt(e))),Ale={kernelName:KK,backendName:"cpu",kernelFunc:Nle},Ole={kernelName:oX,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{x:r}=t,i=n;Fne(r,"square");const o=i.data.get(r.dataId).values,a=new Float32Array(o.length);for(let s=0;s<o.length;++s){const e=o[s];a[s]=e*e}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Rle=Xne(((e,t)=>{const n=e-t;return n*n})),$le=gre(iX,Rle),Ple={kernelName:iX,backendName:"cpu",kernelFunc:$le},Dle=zne(((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=t;return e.replace(new RegExp(n,r?"g":""),i)})),Mle=Wne(aX,Dle),Fle={kernelName:aX,backendName:"cpu",kernelFunc:Mle},Lle=Bne(kX,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),jle={kernelName:kX,backendName:"cpu",kernelFunc:Lle};function zle(e,t,n,r){const i=KQ(e,t.dtype);for(let o=0;o<i.size;o++){const e=i.indexToLoc(o),a=new Array(e.length);for(let t=0;t<a.length;t++)a[t]=e[t]*n[t]+r[t];i.set(t.get(...a),...e)}return i}const Ble={kernelName:sX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,end:a,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:h,shrinkAxisMask:d}=r;Fne(i,"stridedSlice");const{finalShapeSparse:p,finalShape:f,isIdentity:g,sliceDim0:m,isSimpleSlice:y,begin:v,end:b,strides:x}=eZ(i.shape,o,a,s,l,u,c,h,d);let w;if(g)w=wre({inputs:{x:i},backend:n,attrs:{shape:f}});else if(m||y){RG(i.shape.length>=1,(()=>`Input must have rank at least 1, got: ${i.shape.length}`));const e=BJ(v,b,x),t=aie({inputs:{x:i},backend:n,attrs:{begin:v,size:e}});w=wre({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=zle(p,n.bufferSync(i),x,v);w=n.makeTensorInfo(f,e.dtype,e.values)}return w}};class Wle{constructor(e,t,n,r,i,o){this.separator=nY(e),this.nGramWidths=t,this.leftPad=nY(n),this.rightPad=nY(r),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,i,o){for(let a=0;a<i;++a){const s=this.getPadWidth(o),l=Math.max(0,s-a),u=Math.max(0,s-(i-(a+1))),c=o-(l+u),h=t+(l>0?0:a-s);let d=0;d+=l*this.leftPad.length;for(let t=0;t<c;++t)d+=e[h+t].length;d+=u*this.rightPad.length;d+=(l+u+c-1)*this.separator.length,n[r+a]=new Uint8Array(d);const p=n[r+a];let f=0;const g=e=>e.forEach((e=>p[f++]=e));for(let e=0;e<l;++e)g(this.leftPad),g(this.separator);for(let t=0;t<c-1;++t)g(e[h+t]),g(this.separator);if(c>0){g(e[h+c-1]);for(let e=0;e<u;++e)g(this.separator),g(this.rightPad)}else{for(let e=0;e<u-1;++e)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let i=1;i<r;++i){let r=t[i]>=e;if(r=r&&t[i]<=n,!r)throw new Error(`Invalid split value ${t[i]}, must be in [${e}, ${n}]`);e=t[i]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const i=r-1,o=GG("int32",r);if(0===n||0===r){const e=new Array(n);for(let t=0;t<=i;++t)o[t]=0;return[e,o]}o[0]=0;for(let s=1;s<=i;++s){const e=t[s]-t[s-1];let n=0;this.nGramWidths.forEach((t=>{n+=this.getNumNGrams(e,t)})),this.preserveShort&&e>0&&0===n&&(n=1),o[s]=o[s-1]+n}const a=new Array(o[i]);for(let s=0;s<i;++s){const n=t[s];let r=o[s];if(this.nGramWidths.forEach((i=>{const o=t[s+1]-t[s],l=this.getNumNGrams(o,i);this.createNGrams(e,n,a,r,l,i),r+=l})),this.preserveShort&&r===o[s]){const i=t[s+1]-t[s];if(0===i)continue;const o=i+2*this.padWidth,l=1;this.createNGrams(e,n,a,r,l,o)}}return[a,o]}}function Ule(e,t,n,r,i,o,a,s){return new Wle(n,r,i,o,a,s).compute(e,t)}const Vle={kernelName:lX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:o,leftPad:a,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:h}=t,d=n.data.get(c.dataId).values,p=n.data.get(h.dataId).values,[f,g]=Ule(d,p,i,o,a,s,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",g)]}};function Gle(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const i=t[0];let o=e.indexOf(i);for(;-1!==o;){const t=e.subarray(0,o);n&&0===t.length||r.push(t),o=(e=e.subarray(o+1)).indexOf(i)}return void(n&&0===e.length||r.push(e))}let i=0;for(let o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){const t=e.subarray(i,o);n&&0===t.length||r.push(t),i=o+1}}function Hle(e,t,n){const r=e.length,i=[];let o=0,a=0;const s=new Array(r);for(let d=0;d<r;++d){const r=i.length;Gle(e[d],t,n,i);const l=i.length-r;s[d]=l,o+=l,a=Math.max(a,l)}const l=GG("int32",2*o),u=new Array(o),c=[r,a];let h=0;for(let d=0;d<r;++d)for(let e=0;e<s[d];++e)l[2*h]=d,l[2*h+1]=e,u[h]=i[h],++h;return[l,u,c]}const qle={kernelName:uX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:o,delimiter:a}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(0!==a.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const s=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values[0],[u,c,h]=Hle(s,l,i),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};function Kle(e,t){const n=GG("int32",e.length);for(let r=0;r<e.length;++r)n[r]=JX(e[r]).modulo(t).getLowBitsUnsigned();return n}const Xle={kernelName:cX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=Kle(n.data.get(o.dataId).values,i);return n.makeTensorInfo(o.shape,"int32",a)}},Yle=Bne(dX,(e=>Math.tan(e))),Qle={kernelName:dX,backendName:"cpu",kernelFunc:Yle},Jle=Bne(pX,(e=>Math.tanh(e)));const Zle={kernelName:LK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:r,indices:i,updates:o}=t,{sliceRank:a,numUpdates:s,sliceSize:l,strides:u,outputSize:c}=A2(0,i,r.shape),h=n.bufferSync(i),d=n.bufferSync(o),p=n.bufferSync(r),f=Zse(h,d,r.shape,c,l,s,a,u,p,!1);return n.makeTensorInfo(r.shape,f.dtype,f.values)}};function eue(e,t){const n=new Array(e.rank);for(let i=0;i<n.length;i++)n[i]=e.shape[i]*t[i];const r=KQ(n,e.dtype);for(let i=0;i<r.values.length;++i){const t=r.indexToLoc(i),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const o=e.locToIndex(n);r.values[i]=e.values[o]}return r}const tue={kernelName:fX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:o}=r;Fne(i,"tile");const a=eue(n.bufferSync(i),o);return n.makeTensorInfo(a.shape,a.dtype,a.values)}},nue=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function rue(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;r>n;){if(r-n>600){const i=r-n+1,o=t-n+1,a=Math.log(i),s=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*s*(i-s)/i)*Math.sign(o-i/2);rue(e,t,Math.max(n,Math.floor(t-o*s/i+l)),Math.min(r,Math.floor(t+(i-o)*s/i+l)))}const i=e[t];let o=n,a=r;for(OG(e,n,t),nue(e[r],i)>0&&OG(e,n,r);o<a;){for(OG(e,o,a),o++,a--;nue(e[o],i)<0;)o+=1;for(;nue(e[a],i)>0;)a-=1}0===nue(e[n],i)?OG(e,n,a):(a+=1,OG(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}}function iue(e,t,n,r,i){const o=t[t.length-1],[a,s]=[e.length/o,o],l=VG(n,a*r),u=VG("int32",a*r);for(let h=0;h<a;h++){const t=h*s,n=e.subarray(t,t+s);let o=new Array(n.length);n.forEach(((e,t)=>o[t]={value:e,index:t})),r<o.length&&(rue(o,r),o=o.slice(0,r)),i&&o.sort(nue);const a=h*r,c=l.subarray(a,a+r),d=u.subarray(a,a+r);for(let e=0;e<r;e++)c[e]=o[e].value,d[e]=o[e].index}const c=t.slice();return c[c.length-1]=r,[KQ(c,n,l),KQ(c,"int32",u)]}const oue={kernelName:gX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:o,sorted:a}=r;Fne(i,"topk");const s=n.data.get(i.dataId).values,[l,u]=iue(s,i.shape,i.dtype,o,a);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}};const aue={kernelName:mX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:i,transforms:o}=t,{interpolation:a,fillMode:s,fillValue:l,outputShape:u}=n,[c,h,d,p]=i.shape,[f,g]=null!=u?u:[h,d],m=[c,f,g,p],y=ZG(i.shape),v=y[0],b=y[1],x=y[2],w=ZG(m),k=w[0],S=w[1],C=w[2],I=VG(i.dtype,DG(m));I.fill(l);const E=r.data.get(i.dataId).values,T=r.data.get(o.dataId).values;for(let _=0;_<c;++_){const e=1===o.shape[0]?T:T.subarray(8*_,8*_+8);for(let t=0;t<f;++t)for(let n=0;n<g;++n)for(let r=0;r<p;++r){let i;const o=e[6]*n+e[7]*t+1;if(0===o)continue;const u=(e[0]*n+e[1]*t+e[2])/o,c=(e[3]*n+e[4]*t+e[5])/o,p=sue(u,d,s),f=sue(c,h,s);switch(a){case"nearest":i=uue(E,h,d,v,b,x,_,f,p,r,l);break;case"bilinear":i=cue(E,h,d,v,b,x,_,f,p,r,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}I[_*k+t*S+n*C+r]=i}return r.makeTensorInfo(m,i.dtype,I)}return{dataId:r.write(I,m,i.dtype),shape:i.shape,dtype:i.dtype}}};function sue(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return NG(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return NG(0,n,t-1)}(e,t);case"nearest":return function(e,t){return NG(0,e,t-1)}(e,t);default:return function(e){return e}(e)}}function lue(e,t,n,r,i,o,a,s,l,u,c){return 0<=s&&s<t&&0<=l&&l<n?e[a*r+s*i+l*o+u]:c}function uue(e,t,n,r,i,o,a,s,l,u,c){return lue(e,t,n,r,i,o,a,Math.round(s),Math.round(l),u,c)}function cue(e,t,n,r,i,o,a,s,l,u,c){const h=Math.floor(s),d=Math.floor(l),p=h+1,f=d+1;return(p-s)*((f-l)*lue(e,t,n,r,i,o,a,h,d,u,c)+(l-d)*lue(e,t,n,r,i,o,a,h,f,u,c))+(s-h)*((f-l)*lue(e,t,n,r,i,o,a,p,d,u,c)+(l-d)*lue(e,t,n,r,i,o,a,p,f,u,c))}function hue(e,t,n,r){const i=WG(t,n)[0],o=[1,n[0],1];for(let f=0;f<i;f++)o[0]*=n[f];o[1]=n[i];for(let f=i+1;f<n.length;f++)o[2]*=n[f];const a=new Map,s=new Int32Array(n[i]),l=new fY(o,r,e),u=[],c=1===o[0]&&1===o[2];for(let f=0;f<n[i];f++){let t;if(c)t=e[f].toString();else{const e=[];for(let t=0;t<o[0];t++)for(let n=0;n<o[2];n++)e.push(l.get(t,f,n));t=e.join(",")}const n=a.get(t);if(null!=n)s[f]=n;else{const e=a.size;a.set(t,e),s[f]=e,u.push(f)}}const h=o.slice();h[1]=a.size;const d=new fY(h,r);u.forEach(((e,t)=>{for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)d.set(l.get(n,e,r),n,t,r)}));const p=n.slice();return p[i]=h[1],{outputValues:d.values,outputShape:p,indices:s}}const due={kernelName:vX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:o}=t;Fne(o,"unique");const a=r.data.get(o.dataId).values,{outputValues:s,outputShape:l,indices:u}=hue(a,i,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}};const pue={kernelName:bX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:o}=r;o<0&&(o+=i.shape.length);const a=i.shape.length,s=i.shape[o],l=new Array(a-1);let u=0;for(let p=0;p<a;p++)p!==o&&(l[u++]=i.shape[p]);const c=new Array(a).fill(0),h=i.shape.slice();h[o]=1;const d=new Array(s);for(let p=0;p<d.length;p++){c[o]=p;const e=aie({inputs:{x:i},backend:n,attrs:{begin:c,size:h}});d[p]=wre({inputs:{x:e},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(e)}return d}};const fue={kernelName:xX,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:o}=t,{numSegments:a}=r;Fne(i,"unsortedSegmentSum");const s=[],l=[],u=i.shape.length-o.shape.length;let c=o;for(let d=0;d<u;++d){const e=boe({inputs:{input:c},backend:n,attrs:{dim:d+1}});c=e,l.push(e)}for(let d=0;d<a;++d){const e=ZX(d,"int32"),t=n.makeTensorInfo([],"int32",e),r=aoe({inputs:{a:t,b:c},backend:n}),o=pre({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),a=Zie({inputs:{a:o,b:i},backend:n}),u=toe({inputs:{x:a},backend:n,attrs:{axis:0,keepDims:!1}});s.push(u),l.push(t),l.push(r),l.push(o),l.push(a),l.push(u)}const h=mse({inputs:s,backend:n,attrs:{axis:0}});return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}},gue=[Ire,Tre,Nre,Ore,xre,Rre,Mre,Fre,Lre,jre,Bre,Ure,Gre,Kre,Yre,eie,tie,nie,rie,Cre,iie,lie,hie,pie,fie,fre,yie,bie,lre,xie,Iie,Tie,_ie,Nie,Aie,Oie,Rie,Pie,Mie,Fie,Lie,jie,zie,Bie,Uie,Vie,Gie,Hie,qie,Kie,Xie,Yie,roe,Vne,ioe,soe,goe,voe,xoe,Soe,Poe,Moe,Foe,zoe,Uoe,Voe,Goe,qoe,Xoe,Joe,tae,Hne,nae,Sie,iae,aae,lae,Kne,hae,fae,mae,bae,wae,Cae,Eae,Nae,Aae,Oae,Pae,Fae,Lae,jae,zae,Bae,Wae,Uae,Vae,qae,Kae,Qae,ese,eoe,nse,ise,ase,lse,hse,dse,gse,yse,vse,wse,Jne,Sse,_se,Ose,Fse,jse,hre,Eoe,Bse,ere,nre,kre,Wse,Use,Vse,Gse,Hse,qse,Xse,Jse,ele,rle,ile,lle,ore,cle,dle,fle,sie,Zae,yle,vle,xle,kle,Cle,Ile,Ele,Tle,Ale,Ole,Ple,Fle,jle,Ble,Vle,qle,Xle,Aoe,noe,Qle,{kernelName:pX,backendName:"cpu",kernelFunc:Jle},Zle,tue,oue,aue,Dre,due,pue,fue,fse];for(const n of gue)DX(n);const mue={},yue={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function vue(e,t){if(!(e in mue)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(dH().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete mue[e]}),!1),dH().getBool("SOFTWARE_WEBGL_ENABLED")&&(yue.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",yue)||n.getContext("experimental-webgl",yue);return n.getContext("webgl2",yue)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;mue[e]=n}const n=mue[e];return null==n||n.isContextLost()?(delete mue[e],vue(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),mue[e])}var bue,xue,wue;function kue(e,t){return[t,e]}function Sue(e){const t=DG(e);return LG(Math.ceil(t/4))}function Cue(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Iue(e,t){const n=e;let r,i,o,a,s,l,u,c,h,d;return 2===dH().getNumber("WEBGL_VERSION")?(r=n.R32F,i=n.R16F,o=n.RGBA16F,a=n.RGBA32F,s=n.RED,u=4,c=1,h=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(r=e.RGBA,i=e.RGBA,o=e.RGBA,a=n.RGBA,s=e.RGBA,u=4,c=4,h=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:h,textureTypeFloat:d}}function Eue(e,t){const n=t();return dH().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(bue||(bue={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(xue||(xue={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(wue||(wue={}));function Tue(e){return!!(dH().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function _ue(e,t){return Fue(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}const Nue=/ERROR: [0-9]+:([0-9]+):/g;function Aue(e,t){const n=Nue.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(e);const r=+n[1],i=e.split("\n"),o=i.length.toString().length+2,a=i.map(((e,t)=>jG((t+1).toString(),o)+e));let s=0;for(let h=0;h<a.length;h++)s=Math.max(a[h].length,s);const l=a.slice(0,r-1),u=a.slice(r-1,r),c=a.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${jG(u[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join("\n"))}function Oue(e,t){if(Eue(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Rue(e,t,n,r,i,o,a){const s=e.getAttribLocation(t,n);return-1!==s&&(Eue(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),Eue(e,(()=>e.vertexAttribPointer(s,i,e.FLOAT,!1,o,a))),Eue(e,(()=>e.enableVertexAttribArray(s))),!0)}function $ue(e,t,n,r){Eue(e,(()=>function(e,t,n){Lue(e,n),Eue(e,(()=>e.activeTexture(e.TEXTURE0+n))),Eue(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,r))),Eue(e,(()=>e.uniform1i(n,r)))}function Pue(e,t,n){Eue(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),Eue(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function Due(e,t){Eue(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),Eue(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function Mue(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function Fue(e,t,n){const r=Eue(e,(()=>t()));if(null==r)throw new Error(n);return r}function Lue(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${n}]`}.`)}}function jue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return DG(e.slice(0,e.length-t))}function zue(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Bue(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[jue(e),...zue(e)]),t}function Wue(e){return e%2===0}function Uue(e,t){if(MG(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(Wue(n)&&Wue(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Wue(e[0])&&Wue(t[0])}let Vue,Gue;function Hue(e,t){return null!=e.getExtension(t)}function que(e){try{if(null!=vue(e))return!0}catch(ie){return console.log("Error when getting WebGL context: ",ie),!1}return!1}function Kue(e){if(0===e)return!1;const t=vue(e);if(1!==e){if(Hue(t,"EXT_color_buffer_float"))return Xue(t);const e="EXT_color_buffer_half_float";if(Hue(t,e)){const n=t.getExtension(e);return function(e,t){const n=Iue(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const i=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,i,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),s}(t,n)}return!1}if(!Hue(t,"OES_texture_float"))return!1;if(!Hue(t,"WEBGL_color_buffer_float"))return!1;return Xue(t)}function Xue(e){const t=Iue(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function Yue(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&RG("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the WebGL backend.`))}))}const Que=dH();function Jue(){let e,t,n,r,i,o,a,s,l,u;return 2===dH().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s=dH().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}function Zue(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=ZG(t);return r.map(((t,i)=>`${`int ${e[i]} = ${n} / ${t}`}; ${i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${t}`:`index -= ${e[i]} * ${t}`};`)).join("")}function ece(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=ZG(t);return r.map(((t,i)=>`${`int ${e[i]} = ${n} / outShapeStrides[${i}]`}; ${i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * outShapeStrides[${i}]`:`index -= ${e[i]} * outShapeStrides[${i}]`};`)).join("")}function tce(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=e.map(((e,t)=>t)),i=function(e,t){const n=e.length,r=e.map((e=>`${t}[${e}]`)),i=new Array(n-1);i[n-2]=r[n-1];for(let o=n-3;o>=0;--o)i[o]=`(${i[o+1]} * ${r[o+1]})`;return i}(r,t);return i.map(((t,r)=>`${`int ${e[r]} = ${n} / ${i[r]}`}; ${r===i.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * ${i[r]}`:`index -= ${e[r]} * ${i[r]}`};`)).join("")}function nce(e){const t=ZG(e).map((e=>e.toString()));return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}Que.registerFlag("HAS_WEBGL",(()=>Que.getNumber("WEBGL_VERSION")>0)),Que.registerFlag("WEBGL_VERSION",(()=>que(2)?2:que(1)?1:0)),Que.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),Que.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===Que.get("WEBGL_VERSION"))),Que.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),Que.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),Que.registerFlag("WEBGL_PACK",(()=>Que.getBool("HAS_WEBGL"))),Que.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>Que.getBool("WEBGL_PACK"))),Que.registerFlag("WEBGL_PACK_CLIP",(()=>Que.getBool("WEBGL_PACK"))),Que.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>Que.getBool("WEBGL_PACK"))),Que.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>Que.getBool("WEBGL_PACK"))),Que.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>Que.getBool("WEBGL_PACK"))),Que.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>Que.getBool("WEBGL_PACK"))),Que.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>Que.getBool("WEBGL_PACK"))),Que.registerFlag("WEBGL_PACK_REDUCE",(()=>Que.getBool("WEBGL_PACK"))),Que.registerFlag("WEBGL_LAZILY_UNPACK",(()=>Que.getBool("WEBGL_PACK"))),Que.registerFlag("WEBGL_CONV_IM2COL",(()=>Que.getBool("WEBGL_PACK"))),Que.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(()=>Que.getBool("WEBGL_PACK"))),Que.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==Vue){const t=vue(e);Vue=t.getParameter(t.MAX_TEXTURE_SIZE)}return Vue}(Que.getNumber("WEBGL_VERSION")))),Que.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==Gue){const t=vue(e);Gue=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Gue)}(Que.getNumber("WEBGL_VERSION")))),Que.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=Que.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=vue(e);return t=Hue(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Hue(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),Que.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>Que.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!WY())),Que.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=vue(e);if(1===e){if(!Hue(t,"OES_texture_float"))return!1}else if(!Hue(t,"EXT_color_buffer_float"))return!1;return Xue(t)}(Que.getNumber("WEBGL_VERSION")))),Que.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!Que.getBool("WEBGL_FORCE_F16_TEXTURES")&&Que.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),Que.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>Kue(Que.getNumber("WEBGL_VERSION")))),Que.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=Que.getNumber("WEBGL_VERSION"))&&null!=vue(e).fenceSync;var e})),Que.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>Que.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),Que.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if("number"!==typeof e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)})),Que.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>WY()?1:-1),(e=>{if("number"!==typeof e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)})),Que.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),Que.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),Que.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),Que.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),Que.registerFlag("WEBGL_EXP_CONV",(()=>!1)),Que.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>Que.getBool("IS_TEST"))),Que.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),Que.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),Que.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1)),Que.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const rce="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:ice}=i;function oce(e,t,n){const r=[];if(e.forEach((e=>{const t=DG(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(r.push(`uniform sampler2D ${e.name};`),r.push(`uniform int offset${e.name};`)),n.enableShapeUniforms){const{uniformShape:t}=mce(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push(`uniform int ${e.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${e.name}Shape;`)}r.push(`uniform ivec2 ${e.name}TexShape;`)}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)}));const i=r.join("\n"),o=e.map((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i="";i+=n?sce(e,r):ace(e,r);const o=e.shapeInfo.logicalShape,a=t.logicalShape;o.length<=a.length&&(i+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=e.shapeInfo.logicalShape.length,a=t.logicalShape.length,s=ice(e.shapeInfo.logicalShape,t.logicalShape),l=gce(a),u=a-o;let c;const h=["x","y","z","w","u","v"];c=0===o?"":a<2&&s.length>=1?"coords = 0;":s.map((e=>`coords.${h[e+u]} = 0;`)).join("\n");let d="";d=a<2&&o>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${h[t+u]}`)).join(", ");let p="return outputValue;";const f=1===DG(e.shapeInfo.logicalShape),g=DG(t.logicalShape),m=1===g;if(1!==o||f||m){if(f&&!m)p=1===a?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const e=o-2,t=o-1;s.indexOf(e)>-1&&s.indexOf(t)>-1?p="return vec4(outputValue.x);":s.indexOf(e)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(t)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${i}() {\n      ${l} coords = getOutputCoords();\n      ${c}\n      vec4 outputValue = get${r}(${d});\n      ${p}\n    }\n  `}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.texShape,a=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===l&&null==e.shapeInfo.flatOffset&&MG(a,o))return`\n      float ${i}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const u=gce(l),c=ice(e.shapeInfo.logicalShape,t.logicalShape),h=l-s;let d;const p=["x","y","z","w","u","v"];d=0===s?"":l<2&&c.length>=1?"coords = 0;":c.map((e=>`coords.${p[e+h]} = 0;`)).join("\n");let f="";f=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${p[t+h]}`)).join(", ");return`\n    float ${i}() {\n      ${u} coords = getOutputCoords();\n      ${d}\n      return get${r}(${f});\n    }\n  `}(e,t));return i}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),a=t.texShape,s=Jue(),l=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(s);let u,c,h=function(e){const t=`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${lce}\n    ${uce}\n    ${cce}\n  `;return t}(s);t.isPacked?(u=function(e,t,n){switch(e.length){case 0:return dce();case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `;if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(MG(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const i=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[2]/2),o=i*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[e.length-1]/2),o=i*Math.ceil(e[e.length-2]/2);let a=o,s="",l="b, r, c";for(let u=2;u<e.length-1;u++)a*=e[e.length-u-1],s=`\n      int b${u} = index / ${a};\n      index -= b${u} * ${a};\n    `+s,l=`b${u}, `+l;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${s}\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec${e.length}(${l});\n    }\n  `}(e,t,n)}}(t.logicalShape,a,n.enableShapeUniforms),c=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(s)):(u=function(e,t,n){switch(e.length){case 0:return dce();case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `;if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}(0,t,n);case 2:return function(e,t,n){if(MG(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `;if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `;if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `;if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n){return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${ece(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`}const r=Zue(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}(e,t,n);case 4:return function(e,t,n){if(n){return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${ece(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `}const r=Zue(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t,n);case 5:return function(e,t){const n=Zue(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){const n=Zue(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(t.logicalShape,a,n.enableShapeUniforms),c=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(s)),n.packedInputs&&(h+=hce);return[h,l,c,i,u,o,n.userCode].join("\n")}function ace(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,o]=e.shapeInfo.texShape;if(1===i&&1===o)return`\n      float ${r}() {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const a=pce(n);if(t)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});\n      return sampleTexture(${n}, uv);\n    }\n  `;const[s,l]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${s}, ${l}, ${a});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${fce(e)}\n      }\n    `;const i=e.shapeInfo.texShape,o=i[0],a=i[1];if(1===a&&1===o)return`\n      float ${r}(int index) {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const s=pce(n);if(1===a)return t?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${o}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(1===o)return t?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${a}.0, 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(t)return`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `;return`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${o}, ${a}, index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&MG(n,o)){if(t)return`\n      float ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `;const e=o[0];return`\n    float ${i}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${o[1]}.0, ${e}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}const{newShape:a,keptDims:s}=UG(n),l=a;if(l.length<n.length){const n=["row","col"];return`\n      ${ace(yce(e,l),t)}\n      float ${i}(int row, int col) {\n        return ${i}(${vce(n,s)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${fce(e)}\n      }\n    `;const u=o[0],c=o[1],h=pce(r);if(1===c)return t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;if(1===u)return t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `;if(t)return`\n      float ${i}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${h};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `;return`\n  float ${i}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${h};\n    vec2 uv = uvFromFlat(${u}, ${c}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],a=n[2],{newShape:s,keptDims:l}=UG(n),u=s;if(u.length<n.length){const n=["row","col","depth"];return`\n        ${ace(yce(e,u),t)}\n        float ${i}(int row, int col, int depth) {\n          return ${i}(${vce(n,l)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${o}, ${a}, 1)));\n        ${fce(e)}\n      }\n    `;const c=e.shapeInfo.texShape,h=c[0],d=c[1],p=e.shapeInfo.flatOffset;if(d===o&&null==p)return t?`\n      float ${i}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${i}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${a}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${h}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(d===a&&null==p)return t?`\n      float ${i}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${h}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;const f=pce(r);if(t)return`\n    float ${i}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ${f};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `;return`\n      float ${i}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${o} + col * ${a} + depth + ${f};\n        vec2 uv = uvFromFlat(${h}, ${d}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],a=n[2]*o,s=n[1]*a,{newShape:l,keptDims:u}=UG(n);if(l.length<n.length){const n=["row","col","depth","depth2"];return`\n      ${ace(yce(e,l),t)}\n      float ${i}(int row, int col, int depth, int depth2) {\n        return ${i}(${vce(n,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${s}, ${a}, ${o}, 1)));\n        ${fce(e)}\n      }\n    `;const c=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1],f=`int stride2 = ${r}Shape[3];`,g=`int stride1 = ${r}Shape[2] * stride2;`,m=`int stride0 = ${r}Shape[1] * stride1;`;if(p===s&&null==c)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        ${f}\n        ${g}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${a}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(p===o&&null==c)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;const y=pce(r);if(t)return`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${f}\n      ${g}\n      ${m}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `;return`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${a} +\n          depth * ${o} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${p}, index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],o=t[3]*i,a=t[2]*o,s=t[1]*a,{newShape:l,keptDims:u}=UG(t);if(l.length<t.length){const t=["row","col","depth","depth2","depth3"];return`\n      ${ace(yce(e,l))}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${vce(t,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${s}, ${a}, ${o}, ${i})) +\n          depth3;\n        ${fce(e)}\n      }\n    `;const c=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1];if(p===s&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${a}, ${o}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(p===i&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const f=pce(n);return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${a} + depth * ${o} +\n          depth2 * ${i} + depth3 + ${f};\n      vec2 uv = uvFromFlat(${d}, ${p}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:o}=UG(t);if(i.length<t.length){const t=["row","col","depth","depth2","depth3","depth4"];return`\n      ${ace(yce(e,i))}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${vce(t,o)});\n      }\n    `}const a=t[5],s=t[4]*a,l=t[3]*s,u=t[2]*l,c=t[1]*u;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${c}, ${u}, ${l}, ${s})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${a}, 1)));\n        ${fce(e)}\n      }\n    `;const h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];if(f===c&&null==h)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${u}, ${l}, ${s}, ${a})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(f===a&&null==h)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const g=pce(n);return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${c} + col * ${u} + depth * ${l} +\n          depth2 * ${s} + depth3 * ${a} + depth4 + ${g};\n      vec2 uv = uvFromFlat(${p}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function sce(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Jue();return`\n    vec4 ${n}() {\n      return ${r.texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=Jue();if(t)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${o.texture2D}(${n}, uv);\n    }\n  `;const a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${a[0]}, ${a[1]}, index);\n      return ${o.texture2D}(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=o[0],s=o[1],l=Jue();if(null!=o&&MG(n,o))return t?`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${a}.0);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `;if(t)return`\n    vec4 ${i}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `;const u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=Math.ceil(n[1]/2);return`\n    vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){const r=[1,2],o=["b","row","col"];return`\n        ${sce(yce(e,n.slice(1)),t)}\n        vec4 ${i}(int b, int row, int col) {\n          return ${i}(${vce(o,r)});\n        }\n      `}const s=Jue();if(t)return`\n    vec4 ${i}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `;const l=a[0],u=a[1],c=Math.ceil(n[2]/2),h=c*Math.ceil(n[1]/2);return`\n    vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${u}, ${h}, ${c}, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Jue();if(t)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${n}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);\n    }\n  `;const o=e.shapeInfo.logicalShape,a=o.length,s=e.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=l[0],c=l[1],h=Math.ceil(o[a-1]/2);let d=h*Math.ceil(o[a-2]/2),p="int b, int row, int col",f=`b * ${d} + (row / 2) * ${h} + (col / 2)`;for(let g=2;g<a-1;g++)p=`int b${g}, `+p,d*=o[a-g-1],f=`b${g} * ${d} + `+f;return`\n    vec4 ${r}(${p}) {\n      int index = ${f};\n      int texR = index / ${c};\n      int texC = index - texR * ${c};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});\n      return ${i.texture2D}(${n}, uv);\n    }\n  `}(e,t)}}const lce="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",uce="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",cce="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",hce="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function dce(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function pce(e){return`offset${e}`}function fce(e){const t=e.name,n=DG(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function gce(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function mce(e,t,n){const{newShape:r,keptDims:i}=UG(t),o=t.length,a=e&&3===o&&1===t[0],s=a?t.slice(1):r,l=!e&&o>1&&!MG(t,n)&&r.length<o||a;return{useSqueezeShape:l,uniformShape:l?s:t,keptDims:i}}function yce(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function vce(e,t){return t.map((t=>e[t])).join(", ")}function bce(e,t,n,r){const i=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=i.map((e=>e.shapeInfo)),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=oce(i,a,t),l=function(e,t){const n=Fue(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(Eue(e,(()=>e.shaderSource(n,t))),Eue(e,(()=>e.compileShader(n))),dH().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw Aue(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),u=e.createProgram(l);return dH().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:o,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(u),Object.assign({program:t,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:o,outShapeInfo:a},xce(e,t,u)))}function xce(e,t,n){const r=[],i=[];let o,a,s,l=null,u=null;u=e.getUniformLocation(n,"NAN",!1),1===dH().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const h of t.variableNames){const i={name:h,uniform:e.getUniformLocation(n,h,c),offset:e.getUniformLocation(n,`offset${h}`,c)};t.enableShapeUniforms&&(i.shape=e.getUniformLocation(n,`${h}Shape`,c),i.texShape=e.getUniformLocation(n,`${h}TexShape`,c)),r.push(i)}if(t.enableShapeUniforms&&(o=e.getUniformLocation(n,"outShape",c),s=e.getUniformLocation(n,"outShapeStrides",c),a=e.getUniformLocation(n,"outTexShape",c)),t.customUniforms)for(const h of t.customUniforms)i.push(e.getUniformLocation(n,h.name,c));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:u,outShapeLocation:o,outShapeStridesLocation:s,outTexShapeLocation:a}}function wce(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach(((e,n)=>{const r=e.logicalShape,i=t[n],o=i.shape;if(!MG(r,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${o} must match`);if(e.isUniform&&i.isUniform)return;const a=e.texShape,s=i.isUniform?null:i.texData.texShape;if(!MG(a,s))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${s} must match`)}))}function kce(e){return dH().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class Sce{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=bue.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=Jue();this.outputShape=e,this.enableShapeUniforms=kce(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?ece(["r","c","d"],e):Zue(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${t.output} = result;\n      }\n    `}}class Cce{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=bue.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=Jue();this.outputShape=e,this.enableShapeUniforms=kce(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?ece(["r","c","d"],e):Zue(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${t.output} = result;\n      }\n    `}}class Ice{constructor(e){this.variableNames=["A"],this.outTexUsage=xue.DOWNLOAD;const t=Jue();this.outputShape=e,this.userCode=`\n      ${rce}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}class Ece{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=xue.DOWNLOAD;const t=Jue();this.outputShape=e,this.userCode=`\n      ${rce}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}const Tce={R:0,G:1,B:2,A:3};class _ce{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Jue();this.outputShape=e,this.enableShapeUniforms=kce(this.outputShape.length);let i="result";t&&(i="floor(result * 255. + 0.5)");let o="";for(let a=0;a<n.length;a++){const e=n[a];o+=`\n          if(offset == ${a}) {\n            result = values[${Tce[e]}];\n          }`}this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":nce(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${n.length});\n\n        flatIndex = idiv(flatIndex, ${n.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${r.texture2D}(A, uv);\n          ${o}\n        }\n        ${r.output} = vec4(${i}, 0., 0., 0.);\n      }\n    `}}class Nce{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Jue();this.outputShape=e,this.enableShapeUniforms=kce(this.outputShape.length);let r="",i="result";t&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let t=0;t<=1;t++){const i=2*o+t;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${t} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\n          localCoords[2] += ${t};\n          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\n            localCoords[1] += ${o};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${n.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${i}] = values[0];\n            } else if (offset == 1) {\n              result[${i}] = values[1];\n            } else if (offset == 2) {\n              result[${i}] = values[2];\n            } else {\n              result[${i}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":nce(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${n.output} = ${i};\n        }\n    `}}function Ace(e){const t=Jue();return function(e,t){const n=Fue(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(Eue(e,(()=>e.shaderSource(n,t))),Eue(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}function Oce(e){return function(e,t){const n=Fue(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return Eue(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),Eue(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Rce(e){return function(e,t){const n=Fue(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return Eue(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),Eue(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}function $ce(e,t,n,r,i,o){!function(e,t){const n=dH().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>n||t>n)throw new Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}(t,n);const a=function(e){return Fue(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return Eue(e,(()=>e.bindTexture(s,a))),Eue(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),Eue(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),Eue(e,(()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST))),Eue(e,(()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===dH().getNumber("WEBGL_VERSION")?Eue(e,(()=>e.texImage2D(s,0,r,t,n,0,i,o,null))):Eue(e,(()=>e.texStorage2D(s,1,r,t,n))),Eue(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:a,texShape:[n,t]}}function Pce(e){return e.internalFormatFloat}function Dce(e){return e.internalFormatHalfFloat}function Mce(e){return e.downloadTextureFormat}function Fce(e){return e.internalFormatPackedFloat}function Lce(e){return e.internalFormatPackedHalfFloat}function jce(e,t,n,r,i,o,a,s){const l=e,u=new Float32Array(function(e,t){const[n,r]=Cue(e,t);return n*r*4}(o,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}class zce{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=dH().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){mue[e]=t}(t,e)):this.gl=vue(t),e=this.gl,2===dH().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>Eue(t,(()=>t.createVertexArray())),this.bindVertexArray=e=>Eue(t,(()=>t.bindVertexArray(e))),this.deleteVertexArray=e=>Eue(t,(()=>t.deleteVertexArray(e))),this.getVertexArray=()=>Eue(t,(()=>t.getParameter(t.VERTEX_ARRAY_BINDING)))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Eue(e,(()=>t.createVertexArrayOES())),this.bindVertexArray=n=>Eue(e,(()=>t.bindVertexArrayOES(n))),this.deleteVertexArray=n=>Eue(e,(()=>t.deleteVertexArrayOES(n))),this.getVertexArray=()=>Eue(e,(()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES)))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===dH().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=_ue(this.gl,e),Hue(this.gl,t))this.textureHalfFloatExtension=_ue(this.gl,t);else if(dH().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Hue(this.gl,r))this.colorBufferHalfFloatExtension=_ue(this.gl,r);else if(dH().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Hue(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Hue(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=Oce(this.gl),this.indexBuffer=Rce(this.gl),this.framebuffer=function(e){return Fue(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=Iue(this.gl,this.textureHalfFloatExtension)}get debug(){return dH().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Eue(e,(()=>e.finish())),Eue(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),Eue(e,(()=>e.deleteFramebuffer(this.framebuffer))),Eue(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),Eue(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),Eue(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=kue(t,n);return $ce(e,i,o,Pce(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=kue(t,n);return $ce(e,i,o,Dce(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=kue(t,n);return $ce(e,i,o,Mce(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){Eue(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===dH().getNumber("WEBGL_VERSION")?Eue(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):Eue(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===dH().getNumber("WEBGL_VERSION")?Eue(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):Eue(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),Eue(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,i,o){let a,s,l;Eue(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),i instanceof Uint8Array?(a=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,l=e.RGBA):(a=new Float32Array(n*r*4),s=e.FLOAT,l=o.internalFormatPackedFloat),a.set(i),2===dH().getNumber("WEBGL_VERSION")?Eue(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,a))):Eue(e,(()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,s,a))),Eue(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=Cue(t,n);return $ce(e,i,o,Lce(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=Cue(t,n);return $ce(e,i,o,Fce(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(Due(this.gl,this.framebuffer),this.outputTexture=null),Eue(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,r){const[i,o]=kue(t,n),a=new Uint8Array(t*n*4);return Eue(e,(()=>e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,a))),new Float32Array(a.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,i,o){return jce(this.gl,e,0,0,0,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n){const r=e.createBuffer();Eue(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,r)));const i=16*t*n;return Eue(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ))),Eue(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),Eue(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(dH().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(i,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=i}else dH().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,dH().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const r=new Float32Array(t*n*4);return Eue(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=Ace(t));const n=function(e){return Fue(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);Eue(t,(()=>t.attachShader(n,this.vertexShader))),Eue(t,(()=>t.attachShader(n,e))),function(e,t){if(Eue(e,(()=>e.linkProgram(t))),!dH().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&Oue(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;Eue(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer))),function(e,t,n){Eue(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),Rue(e,t,"clipSpacePos",n,3,20,0)&&Rue(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(Eue(this.gl,(()=>this.gl.deleteProgram(e))),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Oue(this.gl,this.program),Eue(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return Fue(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),Eue(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),$ue(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,i]=Cue(t,n);this.setOutputMatrixTextureDriver(e,r,i)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&Oue(this.gl,this.program),Mue(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Eue(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Eue(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=_ue(this.gl,2===dH().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===dH().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===dH().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await zG((()=>this.disposed||this.isQueryAvailable(e,dH().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,dH().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in dH().platform&&(n=dH().platform.setTimeoutCustom.bind(dH().platform)),zG((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),Pue(this.gl,e,this.framebuffer),this.debug&&Mue(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(Pue(this.gl,this.outputTexture,this.framebuffer),this.debug&&Mue(this.gl)):Due(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;Pue(r,e,this.framebuffer),this.debug&&Mue(r),this.outputTexture=e,Eue(r,(()=>r.viewport(0,0,t,n))),Eue(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),Eue(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{mx:Bce,XI:Wce,Nk:Uce,f6:Vce,ct:Gce,YG:Hce,hH:qce,z3:Kce,sG:Xce,uM:Yce,vS:Qce,qB:Jce,GG:Zce,rq:ehe,lg:the,WR:nhe,cu:rhe,GE:ihe,px:ohe,jC:ahe,He:she,hE:lhe,BF:uhe,Dk:che,cl:hhe,_B:dhe,ub:phe,_f:fhe,Ku:ghe,qy:mhe,Zy:yhe,bu:vhe,zv:bhe,dH:xhe,HS:whe,yH:khe,l3:She,z9:Che,x6:Ihe,_m:Ehe,eW:The,GK:_he,SP:Nhe,yr:Ahe,dl:Ohe,Dw:Rhe,xT:$he,_X:Phe,wz:Dhe}=o;function Mhe(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>`${e}.${t}`))}function Fhe(e,t){return 1===t?[e]:Mhe(e,t)}class Lhe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=kce(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=Fhe("rc",this.rank),t=gce(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),i=this.getOutput(e);this.userCode=`\n        void main() {\n          ${t} rc = getOutputCoords();\n\n          if(${n}) {\n            setOutput(vec4(0));\n          } else {\n            ${r}\n\n            setOutput(vec4(${i}));\n          }\n        }\n      `}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let i=`${0===n?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let t=2;t<this.rank;t++)i=`${e[e.length-1-t]},`+i;t.push(i)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${t[0]};\n      int c = ${t[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${n};\n      bool rEdge = rp1 >= ${r};\n    `}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){return`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`}return`getA(${t[0]}),\n            cEdge ? 0. : getA(${t[1]}),\n            rEdge ? 0. : getA(${t[2]}),\n            rEdge || cEdge ? 0. : getA(${t[3]})`}}class jhe{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=kce(this.outputShape.length);let n="";for(let r=0;r<4;r++){let e="thisRC = rc;";r%2===1&&(e+="thisRC.z += 1;"),r>1&&(e+="thisRC.y += 1;"),n+=`\n        ${e}\n        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${r}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${r>0?"}":""}\n      `}this.userCode=`\n      ${function(e,t){const n=t?tce(["r","c","d"],"inputShape"):Zue(["r","c","d"],e);return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${n}\n      return ivec3(r, c, d);\n    }\n  `}(t,this.enableShapeUniforms)}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":nce(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class zhe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const r=Whe(t,n),i=Uhe(e,r,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=Bhe(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const e=this.freeTextures[i].pop();return this.usedTextures[i].push(e),e}let a;return r===wue.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===wue.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===wue.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===wue.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===wue.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const i=Whe(n,r),o=Uhe(t,i,r);o in this.freeTextures||(this.freeTextures[o]=[]);const a=Bhe(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=dH().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const l=this.usedTextures[o],u=l&&l.indexOf(e);if(null==u||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[u]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Bhe(e,t,n,r,i){const o=function(e,t){switch(e){case wue.PACKED_2X2_FLOAT32:return Fce(t);case wue.PACKED_2X2_FLOAT16:return Lce(t);case wue.UNPACKED_FLOAT32:return Pce(t);case wue.UNPACKED_FLOAT16:return Dce(t);case wue.PACKED_4X1_UNSIGNED_BYTE:return Mce(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,r);let a;if(i){const[t,n]=Cue(e[0],e[1]);a=t*n}else{const[t,n]=kue(e[0],e[1]);a=t*n}const s=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}(n,o);return a*s}function Whe(e,t){if(e===xue.UPLOAD)return wue.PACKED_2X2_FLOAT32;if(e===xue.RENDER||null==e)return function(e){return dH().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?wue.PACKED_2X2_FLOAT32:wue.UNPACKED_FLOAT32:e?wue.PACKED_2X2_FLOAT16:wue.UNPACKED_FLOAT16}(t);if(e===xue.DOWNLOAD||e===xue.PIXELS)return wue.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function Uhe(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}class Vhe{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=kce(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const Ghe="if (isnan(x)) return x;",Hhe="return abs(x);";const qhe=Ghe+"\n  return (x < 0.0) ? 0.0 : x;\n",Khe=Ghe+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Xhe="return x;";class Yhe{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=kce(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class Qhe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=kce(this.outputShape.length);const t=e.length,n=Fhe("rc",t),r=gce(t),i=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),o=n.slice(-2),a=t<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${i});\n\n        setOutput(getChannel(packedInput, ${a}));\n      }\n    `}}const Jhe=w3,Zhe={};const ede=dH().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class tde extends EG{nextDataId(){return tde.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!dH().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof zce)t=e;else{const n=vue(dH().getNumber("WEBGL_VERSION"),e);t=new zce(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=vue(dH().getNumber("WEBGL_VERSION"));t=new zce(e),this.binaryCache=((n=dH().getNumber("WEBGL_VERSION"))in Zhe||(Zhe[n]={}),Zhe[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new zhe(this.gpgpu),this.numMBBeforeWarning=null==dH().global.screen?1024:dH().global.screen.height*dH().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new IG(this,nQ())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,i,o){const a=this.makeTensorInfo(t,n),s=this.texData.get(a.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,i]},s.texShape=[r,i];const l=Bue(t),u=new _ce(l,!1,o),c=this.runWebGLProgram(u,[a],n,[[r,i]]);return c.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(a),c.dataId}write(e,t,n){if((dH().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||dH().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:xue.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,i){if(dH().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:xue.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:i,slice:o,shape:a,isPacked:s}=t;if(null!=o){let t;t=s?new Yhe(a,Xhe):new Vhe(a,Xhe);const n=this.runWebGLProgram(t,[{dataId:e,shape:a,dtype:r}],r),i=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const l=null!=this.activeTimers;let u,c;if(l&&(u=tY()),"complex64"===r){c=j2(this.readSync(i.real.dataId),this.readSync(i.imag.dataId))}else c=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=tY()-u),this.convertAndCacheOnCPU(e,c)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:i,dtype:o,complexTensorInfos:a,isPacked:s}=t;if(null!=i){let t;t=s?new Yhe(r,Xhe):new Vhe(r,Xhe);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:o}],o),i=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(e);if(dH().getBool("DEBUG")&&!dH().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===dH().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,u,c=null;if("complex64"!==o&&dH().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);c=this.gpgpu.createBufferFromTexture(t.texture.texture,...Sue(r))}if(this.pendingRead.set(e,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const e=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]);u=j2(e[0],e[1])}else if(null==c)u=this.getValuesFromTexture(e);else{const e=DG(r);u=this.gpgpu.downloadFloat32MatrixFromBuffer(c,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=c){const e=this.gpgpu.gl;Eue(e,(()=>e.deleteBuffer(c)))}const h=this.convertAndCacheOnCPU(e,u),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach((e=>e(h))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&nQ().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:r,shape:i,slice:o,dtype:a,isPacked:s,texture:l}=n;if("complex64"===a)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){let n;n=s?new Yhe(i,Xhe):new Vhe(i,Xhe);const r=this.runWebGLProgram(n,[{dataId:e,shape:i,dtype:a}],a),o=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),o}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,t.customTexShape),c=nQ().makeTensorFromTensorInfo(u),h=this.texData.get(u.dataId);return Object.assign({tensorRef:c},h.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>rY(e)));return KQ(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return KQ(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!Tue(n)){if(dH().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),i=DG(t);if(dH().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),o=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...Sue(t)).subarray(0,i);return this.disposeIntermediateTensorInfo(n),o}const o=dH().getBool("WEBGL_PACK")&&!0===r,a=o?Bue(t):t,s=o?new Ece(a):new Ice(a),l=this.runWebGLProgram(s,[{shape:a,dtype:n,dataId:e}],"float32"),u=this.texData.get(l.dataId),c=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(l),c}timerAvailable(){return dH().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const i=oY(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),o=oY(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(dH().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(i);a.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),a.getExtraProfileInfo=()=>e.map(((e,t)=>({name:o[t],ms:e}))).map((e=>`${e.name}: ${e.ms}`)).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return dH().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:tY(),endMs:null}}endTimer(e){return dH().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=tY(),e)}async getQueryTime(e){if(dH().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:i,isPacked:o,slice:a}=this.texData.get(e),s=a&&a.origDataId||e,l=this.dataRefCount.get(s);l>1?this.dataRefCount.set(s,l-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,i,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ede;return dH().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&DG(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){_X("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return Jhe(e.shape,t)}packedUnaryOp(e,t,n){const r=new Yhe(e.shape,t),i=this.compileAndRun(r,[e],n);return nQ().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=xhe(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(dH().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Hhe,e.dtype);const t=new Vhe(e.shape,Hhe),n=this.compileAndRun(t,[e]);return nQ().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&KG(n[0])){const i=n.map((e=>nY(e)));r=this.write(i,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return nQ().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new Qhe(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new Lhe(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[jue(e.shape),...zue(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},i=[jue(t),...zue(t)],o=new jhe(i,n),a=[n],s=this.runWebGLProgram(o,[r],e.dtype,a,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:i,dtype:o}=n;if(null!=t){RG(DG(i)<=t[0]*t[1]*4,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const a=Bue(i);let s;s=r?new Cce(a):new Sce(a);const l=[null!=t?t:Sue(a)];return{dtype:o,shape:i,dataId:this.runWebGLProgram(s,[{shape:a,dtype:o,dataId:e}],o,l,!0,t).dataId}}runWebGLProgram(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;const a=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(a.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===bue.DENSE){const t=null!=o?o:Sue(e.outputShape);s.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===DG(a.shape))return s.values=VG(a.dtype,0),a;const l=[],u=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&DG(t.shape)<=dH().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!Uue(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(a.dataId);const c={shape:a.shape,texData:s,isUniform:!1},h=function(e,t,n){let r="";t.concat(n).forEach((t=>{const i=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const o=t.texData.texShape,{useSqueezeShape:a,uniformShape:s,keptDims:l}=mce(e.packedInputs,t.shape,o);let u="",c="",h="";if(1===s.length&&e.packedInputs){const e=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];u=`${e[0]>1}_${e[1]>1}`}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){const e=ZG(s);h=`${e[0]===o[1]}_${e[e.length-1]===o[1]}`}}else c=`${s[0]>1}_${s[1]>1}`;const d=t.shape.length,p=2===s.length&&MG(t.shape,o),f=1===DG(t.shape),g=xJ(t.shape,n.shape),m=!e.packedInputs&&d===n.shape.length&&MG(o,n.texData.texShape),y=e.packedInputs||s.length>2?"":`${o[0]>1}_${o[1]>1}`;r+=`${d}_${m}_${a?l:""}_${s.length}_${f}_${g}_${p}_${u}_${c}_${h}_${y}_${i}`}else{const e=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${e}_${i}`}}));const i=e.userCode;let o=e.constructor.name;return o+="_"+r+"_"+i+`${dH().getNumber("WEBGL_VERSION")}`,o}(e,u,c),d=this.getAndSaveBinary(h,(()=>bce(this.gpgpu,e,u,c))),p=null!=this.activeTimers;let f;p&&(f=this.startTimer()),dH().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,i){t.program.enableShapeUniforms||(wce(t.inShapeInfos,n),wce([t.outShapeInfo],[r]));const o=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,a[0],a[1]):e.setOutputMatrixTexture(o.texture,a[0],a[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===dH().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){const r=n[l],{uniform:i,offset:o,shape:a,texShape:s}=t.variablesLocations[l];if(a){const{uniformShape:n}=mce(t.program.packedInputs,r.shape,r.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(a,new Int32Array(n));break;case 2:e.gl.uniform2iv(a,new Int32Array(n));break;case 3:e.gl.uniform3iv(a,new Int32Array(n));break;case 4:e.gl.uniform4iv(a,new Int32Array(n))}}if(s&&e.gl.uniform2i(s,r.texData.texShape[0],r.texData.texShape[1]),null!=i)if(r.isUniform)if(DG(r.shape)<2)e.gl.uniform1f(i,r.uniformValues[0]);else{let t=r.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(i,t)}else null!=r.texData.slice&&null!=o&&e.gl.uniform1i(o,r.texData.slice.flatOffset),e.setInputMatrixTexture(r.texData.texture.texture,i,l)}const s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=ZG(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&i)for(let l=0;l<t.program.customUniforms.length;++l){const n=t.program.customUniforms[l],r=t.customUniformLocations[l],o=i[l];if("float"===n.type)e.gl.uniform1fv(r,o);else if("vec2"===n.type)e.gl.uniform2fv(r,o);else if("vec3"===n.type)e.gl.uniform3fv(r,o);else if("vec4"===n.type)e.gl.uniform4fv(r,o);else if("int"===n.type)e.gl.uniform1iv(r,o);else if("ivec2"===n.type)e.gl.uniform2iv(r,o);else if("ivec3"===n.type)e.gl.uniform3iv(r,o);else{if("ivec4"!==n.type)throw Error(`uniform type ${n.type} is not supported yet.`);e.gl.uniform4iv(r,o)}}e.executeProgram()}(this.gpgpu,d,u,c,r),l.forEach((e=>this.disposeIntermediateTensorInfo(e))),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const g=dH().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const e=tY();e-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!dH().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===i){const e=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),e}return a}compileAndRun(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,i)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!dH().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=iQ((()=>{if(!dH().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=dH().getBool("DEBUG");dH().set("DEBUG",!1);const t=this.abs(aJ(1e-8)).dataSync()[0];if(dH().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:i,texture:o,usage:a,isPacked:s}=t;if(null!=o)return;const l=null!=this.activeTimers;let u;l&&(u=tY());let c=t.texShape;if(null==c&&(c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=dH().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=dH().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&dH().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,e=e.map(((t,n)=>n>=e.length-2?AG(e[n]):e[n])),1===e.length&&(e=[2,e[0]])),2!==e.length){const t=UG(e);e=t.newShape}let i=DG(e),o=null;e.length<=1&&i<=n?o=[1,i]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);const a=null!=o&&Math.max(...o)>r&&Math.min(...o)<=(t?2:1)&&Math.min(...o)>0;if(null==o||a)if(t){const t=jue(e);let n=2,r=2;e.length&&([n,r]=zue(e)),i=t*(n/2)*(r/2),o=LG(i).map((e=>2*e))}else o=LG(i);return o}(n,s),t.texShape=c),null!=i){const e=Bue(n);let o,a=c[1],h=c[0];const d=i instanceof Uint8Array||i instanceof Uint8ClampedArray;!s&&d||([a,h]=Cue(c[0],c[1])),o=s?new Nce(e,d):new _ce(e,d);const p=d?[h,a]:c,f=this.makeTensorInfo(p,r),g=this.texData.get(f.dataId);g.usage=d?xue.PIXELS:xue.UPLOAD,g.texShape=p,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),a,h,i);const m=[[h,a]],y=!0,v=this.runWebGLProgram(o,[f],r,m,y),b=this.texData.get(v.dataId);t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,dH().get("ENGINE_COMPILE_ONLY")?this.disposeData(v.dataId):(t.texture=b.texture,t.values=null,this.texData.delete(v.dataId)),this.disposeIntermediateTensorInfo(f),l&&(this.uploadWaitMs+=tY()-u)}else{const e=this.acquireTexture(c,a,r,s);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*qG(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(bI){throw bI}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await h2(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw Aue(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:s}=xce(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=i,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=s}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:r,height:i,width:o,channels:a}=e,s=nQ().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=s.writeTexture(r,t,n,i,o,a);return nQ().makeTensorFromDataId(l,t,n,s)}}tde.nextDataId=0;UY()&&sQ("webgl",(()=>new tde),2);const nde="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class rde{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=kJ(t,n),this.enableShapeUniforms=kce(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}const ide="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class ode{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=kJ(t,n);const i=this.outputShape.length;this.enableShapeUniforms=kce(i);let o="";if(r)if(0===i||1===DG(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{if(o=`\n          ${gce(i)} coords = getOutputCoords();\n        `,1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=Fhe("coords",i);this.enableShapeUniforms?o+=`\n            bool nextRowOutOfBounds =\n              (${e[i-2]} + 1) >= outShape[${i} - 2];\n            bool nextColOutOfBounds =\n              (${e[i-1]} + 1) >= outShape[${i} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:o+=`\n            bool nextRowOutOfBounds =\n              (${e[i-2]} + 1) >= ${this.outputShape[i-2]};\n            bool nextColOutOfBounds =\n              (${e[i-1]} + 1) >= ${this.outputShape[i-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${o}\n\n        setOutput(result);\n      }\n    `}}function ade(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const sde={kernelName:Rq,backendName:"webgl",kernelFunc:ade};function lde(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,o=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(o.dataId),s=ade({inputs:{x:r},backend:n}),l=ade({inputs:{x:i},backend:n});return a.complexTensorInfos={real:s,imag:l},o}const ude={kernelName:UH,backendName:"webgl",kernelFunc:lde},cde="return (a < 0.) ? b * a : a;",hde="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const dde={kernelName:Lq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:o}=r,a=n.makeTensorInfo([],"float32",ZX(o,"float32")),s=dH().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ode(hde,i.shape,a.shape):new rde(cde,i.shape,a.shape),l=n.runWebGLProgram(s,[i,a],"float32");return n.disposeIntermediateTensorInfo(a),l}},pde="return (a < 0.) ? b * a : a;",fde="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const gde={kernelName:bK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t,o=dH().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ode(fde,r.shape,i.shape):new rde(pde,r.shape,i.shape);return n.runWebGLProgram(o,[r,i],"float32")}},mde="if (isnan(x)) return x;";function yde(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:r,dtype:i}=e;return e=>{let{inputs:o,backend:a}=e;const{x:s}=o,l=a,u=i||s.dtype;if(l.shouldExecuteOnCPU([s])&&null!=r){const e=l.texData.get(s.dataId),t=r(e.values,u);return l.makeTensorInfo(s.shape,u,t)}let c;return c=dH().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new Yhe(s.shape,n):new Vhe(s.shape,t),l.runWebGLProgram(c,[s],u)}}function vde(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:r=!1,supportsComplex:i=!1,cpuKernelImpl:o,dtype:a}=e;return e=>{let{inputs:s,backend:l}=e;const{a:u,b:c}=s,h=l;if(i&&"complex64"===u.dtype){const e=h.texData.get(u.dataId),n=h.texData.get(c.dataId),[r,i]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((e=>{const[n,r]=e,i={dataId:n.dataId,dtype:n.dtype,shape:u.shape},o={dataId:r.dataId,dtype:r.dtype,shape:c.shape},a=new rde(t,u.shape,c.shape);return h.runWebGLProgram(a,[i,o],TY(n.dtype,r.dtype))})),o=lde({inputs:{real:r,imag:i},backend:h});return h.disposeIntermediateTensorInfo(r),h.disposeIntermediateTensorInfo(i),o}const d=a||TY(u.dtype,c.dtype);if(("string"===u.dtype||"string"===c.dtype||h.shouldExecuteOnCPU([u,c]))&&null!=o){const e=h.texData.get(u.dataId).values,t=h.texData.get(c.dataId).values,n="string"===u.dtype?b3(e):e,r="string"===u.dtype?b3(t):t,[i,a]=o(u.shape,c.shape,n,r,d),s=h.makeTensorInfo(a,d);return h.texData.get(s.dataId).values=i,s}let p;return p=dH().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new ode(n,u.shape,c.shape,r):new rde(t,u.shape,c.shape),h.runWebGLProgram(p,[u,c],d)}}function bde(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":qhe;if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":Khe;if("prelu"===e)return t?fde:pde;if("leakyrelu"===e)return t?hde:cde;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}class xde{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=kce(this.outputShape.length);const u=r?e[1]:e[2],c=Math.ceil(u/2),h=r?"i * 2, rc.y":"rc.y, i * 2",d=i?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",m="";a&&(g=s?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${a}\n        }`:l?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${a}\n        }`:`vec4 activation(vec4 x) {\n          ${a}\n        }`,m="result = activation(result);");const y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let v="rc.x",b="rc.x";e[0]<t[0]?v=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(b=`imod(rc.x, ${t[0]})`),this.userCode=`\n      ${g}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${c}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${v};\n        int batchB = ${b};\n        for (int i = 0; i < ${c}; i++) {\n          vec4 a = getMatrixA(batchA, ${h});\n          vec4 b = getMatrixB(batchB, ${d});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${p[0]} * ${f[0]});\n          result += (${p[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${y}\n\n        ${m}\n\n        setOutput(result);\n      }\n    `}}const wde="return areal * breal - aimag * bimag;",kde="return areal * bimag + aimag * breal;";class Sde{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=kJ(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const Cde="return a * b;";function Ide(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,o=TY(r.dtype,i.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(i.dataId),o=new Sde(wde,r.shape,i.shape),a=new Sde(kde,r.shape,i.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:i.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:i.shape}],l=n.runWebGLProgram(o,s,"float32"),u=n.runWebGLProgram(a,s,"float32"),c=lde({inputs:{real:l,imag:u},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}if(n.shouldExecuteOnCPU([r,i])){const e=n.texData.get(r.dataId),t=n.texData.get(i.dataId),[a,s]=uhe(r.shape,i.shape,e.values,t.values,o),l=n.makeTensorInfo(s,o);return n.texData.get(l.dataId).values=a,l}let a;return a=dH().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ode(Cde,r.shape,i.shape):new rde(Cde,r.shape,i.shape),n.runWebGLProgram(a,[r,i],o)}const Ede={kernelName:lK,backendName:"webgl",kernelFunc:Ide};function Tde(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:o}=r,a=n,s=DG(i.shape),l=BG(o,s),u=DG(l);RG(s===u,(()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`));const c=a.texData.get(i.dataId);return!c.isPacked||Uue(i.shape,l)||null!==c.texture&&Uue(c.shape,l)?(a.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype}):function(e,t,n){const r=[jue(e.shape),...zue(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},o=[jue(t),...zue(t)],a=new jhe(o,r),s=[r],l=n.runWebGLProgram(a,[i],e.dtype,s,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(i,l,a)}const _de={kernelName:_K,backendName:"webgl",kernelFunc:Tde};class Nde{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:o}=e;this.outputShape=[r,o];const a=4*Math.floor(n/4),s=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${FG(e)?e.toPrecision(2):e}, ones);`}let u="";i%n>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===s}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}class Ade{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:o}=e;this.outputShape=[r,o];let a="0.0",s="";"prod"===t?a="1.0":"min"===t?(a="1.0 / 1e-20",s="min"):"max"===t&&(a="-1.0 / 1e-20",s="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const u=4*Math.floor(n/4),c=n%4;let h=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${s}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${s}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,d="vec4";"all"===t?(a="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(a="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";i%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${a};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${a});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${2===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${3===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${h}\n        }\n        setOutput(${l});\n      }\n    `}}function Ode(e,t,n,r){const i=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=x2(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let o=e;for(let a=0;a<i.length;a++){const{inSize:s,windowSize:l,outSize:u}=i[a];let c,h;c="mean"===n?0===a?new Nde({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:u},s):new Nde({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:u}):new Ade({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:u},n),h=o,o=r.runWebGLProgram(c,[o],t),h.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(h)}return o}class Rde{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[t[o]];this.outputShape=n,this.rank=n.length;const r=gce(this.rank),i=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let i=0;i<e.length;i++)r[e[i]]=n[i];return r.join()}(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${i}));\n    }\n    `}}class $de{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let u=0;u<n.length;u++)n[u]=e[t[u]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=gce(this.rank),i=Mhe("rc",this.rank),o=new Array(this.rank);for(let u=0;u<t.length;u++)o[t[u]]=i[u];const a=`vec2(${o.slice(-2).join()})`,s=`++${i[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${s}) {\n        result[1] = ${l};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${l};\n        if(${s}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function Pde(e,t,n){const r=dH().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $de(e.shape,t):new Rde(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function Dde(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;return function(e,t,n,r){const i=t,o=e.shape.length,a=WG(i,e.shape);let s=a;const l=h0(s,o),u=null!=l;let c=e;u&&(c=Pde(e,l,r),s=p0(s.length,o)),c0("sum",s,o);const[h,d]=l0(c.shape,s);let p=h;n&&(p=u0(h,a));const f=DG(d),g=Tde({inputs:{x:c},attrs:{shape:[DG(e.shape)/f,f]},backend:r}),m=Ode(g,_Y(e.dtype),"sum",r),y=Tde({inputs:{x:m},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(m),u&&r.disposeIntermediateTensorInfo(c),y}(i,o,a,n)}const Mde={kernelName:XK,backendName:"webgl",kernelFunc:Dde};function Fde(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{perm:o}=r,a=n,s=i.shape.length,l=new Array(s);for(let c=0;c<l.length;c++)l[c]=i.shape[o[c]];let u;if(a.shouldExecuteOnCPU([i])){const e=a.texData.get(i.dataId).values,t=Phe(e,i.shape,i.dtype,o,l);u=a.makeTensorInfo(l,i.dtype);a.texData.get(u.dataId).values=t}else u=Pde(i,o,a);return u}const Lde={kernelName:yX,backendName:"webgl",kernelFunc:Fde};function jde(e){let{a:t,b:n,transposeA:r,transposeB:i,backend:o,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:l=0,activation:u=null}=e;const c=t.shape.length,h=n.shape.length,d=r?t.shape[c-2]:t.shape[c-1],p=i?n.shape[h-1]:n.shape[h-2],f=r?t.shape[c-1]:t.shape[c-2],g=i?n.shape[h-2]:n.shape[h-1],m=t.shape.slice(0,-2),y=n.shape.slice(0,-2),v=DG(m),b=DG(y),x=kJ(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,g]);RG(d===p,(()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${n.shape} and transposeA=${r} and transposeB=${i} must match.`));const w=r?[v,d,f]:[v,f,d],k=i?[b,g,p]:[b,p,g],S=Tde({inputs:{x:t},backend:o,attrs:{shape:w}}),C=Tde({inputs:{x:n},backend:o,attrs:{shape:k}}),I=[S,C],E=Math.max(v,b),T=r?S.shape[1]:S.shape[2],_=null!=a,N=null!=s,A="leakyrelu"===u,O=null!=u?bde(u,!0):null;let R;if((1===f||1===g)&&T>1e3&&!1===(_||N||A||null!=O)){let e=S,t=C;r&&(e=Fde({inputs:{x:S},backend:o,attrs:{perm:[0,2,1]}}),I.push(e)),i&&(t=Fde({inputs:{x:C},backend:o,attrs:{perm:[0,2,1]}}),I.push(t));const n=1===g;let a=e;1!==g&&(a=Tde({inputs:{x:e},backend:o,attrs:{shape:[E,T,1]}}),I.push(a));const s=1===g?2:1;let l=t;n&&(l=Tde({inputs:{x:t},backend:o,attrs:{shape:[E,1,T]}}),I.push(l));const u=Ide({inputs:{a:a,b:l},backend:o});R=Dde({inputs:{x:u},backend:o,attrs:{axis:s,keepDims:!0}}),I.push(u)}else{const e=TY(t.dtype,n.dtype),u=new xde(w,k,[E,f,g],r,i,_,O,N,A),c=[S,C];if(null!=a&&c.push(a),N&&c.push(s),A){const e=o.makeTensorInfo([],"float32",ZX(l,"float32"));c.push(e),I.push(e)}R=o.runWebGLProgram(u,c,e)}const $=Tde({inputs:{x:R},backend:o,attrs:{shape:x}});I.push(R);for(const P of I)o.disposeIntermediateTensorInfo(P);return $}const zde={kernelName:IX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o,bias:a,preluActivationWeights:s}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:h}=r;return jde({a:i,b:o,transposeA:l,transposeB:u,backend:n,bias:a,preluActivationWeights:s,leakyreluAlpha:h,activation:c})}},Bde="return abs(x);";const Wde={kernelName:yH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=xhe(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let i;return i=dH().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Yhe(r.shape,Bde):new Vhe(r.shape,Bde),n.runWebGLProgram(i,[r],r.dtype)}},Ude=yde({opSnippet:Ghe+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),Vde={kernelName:vH,backendName:"webgl",kernelFunc:Ude},Gde=yde({opSnippet:Ghe+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),Hde={kernelName:bH,backendName:"webgl",kernelFunc:Gde},qde="return a + b;",Kde=vde({opSnippet:qde,packedOpSnippet:qde,supportsComplex:!0,cpuKernelImpl:Bce}),Xde={kernelName:xH,backendName:"webgl",kernelFunc:Kde};class Yde{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`float v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}class Qde{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}const Jde={kernelName:wH,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,i=n;if(1===i.length)return ade({inputs:{x:i[0]},backend:r});if(i.length>dH().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(i.length/2),n=e({inputs:i.slice(0,t),backend:r}),o=e({inputs:i.slice(t),backend:r});return e({inputs:[n,o],backend:r})}const o=i.map((e=>e.dtype)).reduce(((e,t)=>TY(e,t))),a=i.map((e=>e.shape)),s=dH().getBool("WEBGL_PACK")?new Qde(i[0].shape,a):new Yde(i[0].shape,a);return r.runWebGLProgram(s,i,o)}};const Zde={kernelName:kH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=WG(o,i.shape);let u=l;const c=h0(u,s);let h=i;null!=c&&(h=Fde({inputs:{x:i},backend:n,attrs:{perm:c}}),u=p0(u.length,s)),c0("all",u,s);const[d,p]=l0(h.shape,u),f=Tde({inputs:{x:h},backend:n,attrs:{shape:[-1,DG(p)]}}),g=Ode(f,f.dtype,"all",n);let m;if(a){m=Tde({inputs:{x:g},backend:n,attrs:{shape:u0(d,l)}})}else m=Tde({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(h),m}};const epe={kernelName:SH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=WG(o,i.shape);let u=l;const c=h0(u,s);let h=i;null!=c&&(h=Fde({inputs:{x:i},backend:n,attrs:{perm:c}}),u=p0(u.length,s)),c0("any",u,s);const[d,p]=l0(h.shape,u),f=Tde({inputs:{x:h},backend:n,attrs:{shape:[-1,DG(p)]}}),g=Ode(f,f.dtype,"any",n);let m;if(a){m=Tde({inputs:{x:g},backend:n,attrs:{shape:u0(d,l)}})}else m=Tde({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(h),m}};class tpe{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:i,outSize:o}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const a="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${s};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${a} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class npe{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,RG(e.length>2,(()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`));const i=e[e.length-1],o=Math.ceil(i/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");const a=this.outputShape,s=a.length,l=gce(s),u=Fhe("coords",s);let c,h;if(1===o){h=s+1;const e=gce(h);c=`\n        ${e} sourceLocR = ${e}(${u.join()}, 0);\n        ++${u[s-1]};\n        ${e} sourceLocG = ${e}(${u.join()}, 0);\n        ++${u[s-2]};\n        ${e} sourceLocA = ${e}(${u.join()}, 0);\n        --${u[s-1]};\n        ${e} sourceLocB = ${e}(${u.join()}, 0);\n        --${u[s-2]};`}else h=s,c=`\n        ${l} sourceLocR = coords;\n        ++${u[s-1]};\n        ${l} sourceLocG = coords;\n        ++${u[s-2]};\n        ${l} sourceLocA = coords;\n        --${u[s-1]};\n        ${l} sourceLocB = coords;\n        --${u[s-2]};`;const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],f=d.map((e=>"int "+e)),g=Fhe("sourceLocR",h-1).concat("inIdx.r"),m=Fhe("sourceLocG",h-1).concat("inIdx.g"),y=Fhe("sourceLocB",h-1).concat("inIdx.b"),v=Fhe("sourceLocA",h-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",x=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${y.join()}),\n                             getBestIndicesAChannel(${v.join()})));`,w=`vec4(\n            getAChannel(${g.join()}),\n            hasNextCol ? getAChannel(${m.join()}) : 0.,\n            hasNextRow ? getAChannel(${y.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,k=r?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${d.join()}),\n                                          vec2(${d.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${d.join()}),\n                               vec2(${d.slice(-2).join()}));\n      }\n      ${k}\n      void main() {\n        ${l} coords = getOutputCoords();\n        bool hasNextCol = ${u[s-1]} < ${a[s-1]-1};\n        bool hasNextRow = ${u[s-2]} < ${a[s-2]-1};\n        ${c}\n        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},\n          sourceLocB${p}, sourceLocA${p}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${w};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${x}\n          vec4 candidate = ${w};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function rpe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.shape[0],o=t.shape[1];null!=r&&(i=r.shape[0],o=r.shape[1]);const a=x2(o),s={windowSize:a,inSize:o,batchSize:i,outSize:Math.ceil(o/a)},l=new tpe(s,n,null==r),u=[t];null!=r&&u.push(r);const c=e.runWebGLProgram(l,u,"int32");if(1===c.shape[1])return c;const h=rpe(e,t,n,c);return e.disposeIntermediateTensorInfo(c),h}function ipe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i=null!=r?r.shape:t.shape,o=x2(i[i.length-1]),a=new npe(i,o,n,null==r),s=null==r?[t]:[t,r],l=e.runWebGLProgram(a,s,"int32");if(l.shape.length===t.shape.length){const r=ipe(e,t,n,l);return e.disposeIntermediateTensorInfo(l),r}return l}function ope(e,t,n,r){const i=[n];if(c0("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,t.shape.length),!dH().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],o=e.texData.get(t.dataId);let a=t;null!==o&&o.isPacked&&(a=e.unpackTensor(t),n.push(a));const[s,l]=l0(a.shape,i),u=DG(l),c=Tde({inputs:{x:a},backend:e,attrs:{shape:[-1,u]}});n.push(c);const h=rpe(e,c,r);n.push(h);const d=Tde({inputs:{x:h},backend:e,attrs:{shape:s}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),d}return ipe(e,t,r)}const ape={kernelName:CH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;let a=WG(o,i.shape);const s=h0(a,i.shape.length);let l=i;const u=[];null!=s&&(l=Fde({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=p0(a.length,l.shape.length)),c0("argMax",[a[0]],l.shape.length);const c=ope(n,l,a[0],"max");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}};const spe={kernelName:IH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;let a=WG(o,i.shape);const s=h0(a,i.shape.length);let l=i;const u=[];null!=s&&(l=Fde({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=p0(a.length,l.shape.length)),c0("argMin",[a[0]],l.shape.length);const c=ope(n,l,a[0],"min");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}},lpe=yde({opSnippet:Ghe+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),upe={kernelName:EH,backendName:"webgl",kernelFunc:lpe},cpe=yde({opSnippet:Ghe+"return log(x + sqrt(x * x + 1.0));"}),hpe={kernelName:TH,backendName:"webgl",kernelFunc:cpe},dpe=yde({opSnippet:Ghe+"\n  return atan(x);\n"}),ppe={kernelName:_H,backendName:"webgl",kernelFunc:dpe},fpe=vde({opSnippet:nde+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ide+"\n  return result;\n"}),gpe={kernelName:AH,backendName:"webgl",kernelFunc:fpe},mpe=yde({opSnippet:Ghe+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),ype={kernelName:NH,backendName:"webgl",kernelFunc:mpe};class vpe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,m=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let y="0.0";if(f||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${a}, ${s});\n        const ivec2 pads = ivec2(${d}, ${p});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${c};\n              wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?i?g:m:`wR * ${h} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let v=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(v="avgValue / max(count, 1.0)");const b=4*Math.floor(o/4),x=o%4,w=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${a}, ${s});\n      const ivec2 pads = ivec2(${d}, ${p});\n      const float initializationValue = ${y};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${y});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${c};\n            wR += ${l}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${b}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${w}\n          }\n\n          int xC = xCCorner + ${b};\n          if (${1===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${w}\n          } else if (${2===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${w}\n          } else if (${3===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${w}\n          }\n        }\n        setOutput(${v});\n      }\n    `}}class bpe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,s=e.strideHeight,l=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,g=e.padInfo.front,m=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const v="avg"===t;let b="0.0";if(v||(b="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${a}, ${s}, ${l});\n        const ivec3 pads = ivec3(${g}, ${m}, ${y});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${p};\n                wR += ${c}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${h}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${t} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let x=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(x="avgValue / max(count, 1.0)");const w=4*Math.floor(o/4),k=o%4,S=`\n      if (${v}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${a}, ${s}, ${l});\n      const ivec3 pads = ivec3(${g}, ${m}, ${y});\n      const float initializationValue = ${b};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${b});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p};\n            wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${w}; wC += 4) {\n              int xC = xCCorner + wC * ${h};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${h}, ch)\n              );\n\n              ${S}\n            }\n\n            int xC = xCCorner + ${w};\n            if (${1===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${S}\n            } else if (${2===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${S}\n            } else if (${3===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                initializationValue\n              );\n\n              ${S}\n            }\n          }\n        }\n        setOutput(${x});\n      }\n    `}}const xpe={kernelName:OH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;Yue(i,"avgPool");const{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r;RG(mZ(a,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`));const u=aZ(i.shape,o,a,1,s,l);if(1===u.filterWidth&&1===u.filterHeight&&MG(u.inShape,u.outShape))return ade({inputs:{x:i},backend:n});const c=new vpe(u,"avg",!1);return n.runWebGLProgram(c,[i],"float32")}};const wpe={kernelName:$H,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=sZ(i.shape,o,a,[1,1,1],s,l,u),h=new bpe(c,"avg",!1);return n.runWebGLProgram(h,[i],"float32")}};class kpe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=s-1-e.padInfo.top,c=l-1-e.padInfo.left,h=1/(t*n);this.userCode=`\n      const ivec2 pads = ivec2(${u}, ${c});\n      const float avgMultiplier = float(${h});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${s};\n            wR += ${o}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${l};\n            wC+= ${a}) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Spe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=c-1-e.padInfo.front,f=h-1-e.padInfo.top,g=d-1-e.padInfo.left,m=1/(t*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${p}, ${f}, ${g});\n      const float avgMultiplier = float(${m});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${c};\n            wD += ${s}) {\n          float dyD = float(dyDCorner + wD) / ${i}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${h};\n              wR += ${l}) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${d};\n                wC += ${u}) {\n              float dyC = float(dyCCorner + wC) / ${a}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const Cpe={kernelName:PH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,h=sZ(a.shape,s,l,[1,1,1],u,c),d=new Spe(h);return n.runWebGLProgram(d,[i],a.dtype)}};const Ipe={kernelName:RH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o;Yue([i,o],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=aZ(a.shape,s,l,1,u),h=new kpe(c);return n.runWebGLProgram(h,[i],a.dtype)}};const Epe={kernelName:DH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o}=t,{transposeA:a,transposeB:s}=r;return jde({a:i,b:o,transposeA:a,transposeB:s,backend:n})}};class Tpe{constructor(e,t,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],kJ(e,t),kJ(e,n);let a="0.0";null!=r&&(kJ(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let s="1.0";null!=i&&(kJ(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${a};\n        float scale = ${s};\n        float inv = scale * inversesqrt(variance + float(${o}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class _pe{constructor(e,t,n,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],kJ(e,t),kJ(e,n);let a="vec4(0.0)";null!=r&&(kJ(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=i&&(kJ(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${a};\n        vec4 scale = ${s};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${o}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const Npe={kernelName:Tq,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i,mean:o,variance:a,offset:s,scale:l}=t;RG(o.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),RG(null==s||o.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),RG(null==l||o.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:u}=r;null==u&&(u=.001);const c=[i,o,a];let h=null;null!=s&&(h=s.shape,c.push(s));let d=null;null!=l&&(d=l.shape,c.push(l));const p=dH().getBool("WEBGL_PACK_NORMALIZATION")?new _pe(i.shape,o.shape,a.shape,h,d,u):new Tpe(i.shape,o.shape,a.shape,h,d,u);return n.runWebGLProgram(p,c,c[0].dtype)}};class Ape{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=gce(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return Ope.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let r;const i=e.map(((e,t)=>`sourceLoc.${Ope[t]} = start[${t}] + coords.${Ope[t]};`));r=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${i.join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${r}\n        setOutput(getSource(${n}));\n      }\n    `}}const Ope=["x","y","z","w","u","v"];class Rpe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=gce(this.rank),n=Fhe("coords",this.rank),r=Fhe("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,o=`getChannel(getSource(${r.join()}), ${i})`,a=`\n      result.x = ${o};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${o};\n        --${r[this.rank-1]};\n      }\n    `,s=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${o};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map(((e,t)=>`start[${t}]`)).join()});`:e.map(((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`)).join("\n");this.userCode=`\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${a}\n        ${s}\n        setOutput(result);\n      }\n    `}}function $pe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,size:a}=r,[s,l]=ZJ(i,o,a);if(jJ(i,s,l),0===DG(l))return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||"string"===i.dtype){const e=n.texData.get(i.dataId),t=whe(e.values,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,t)}const{isPacked:u}=n.texData.get(i.dataId),c=QJ(i.shape,s,l);if(u||!c){const e=dH().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Rpe(l):new Ape(l),t=[s];return n.runWebGLProgram(e,[i],i.dtype,t)}return n.uploadToGPU(i.dataId),function(e,t,n,r){const i=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),a=r.texData.get(o.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=e.dtype;let s=JJ(t,ZG(e.shape));i.slice&&(s+=i.slice.flatOffset),a.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||e.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),o}(i,s,l,n)}const Ppe={kernelName:WK,backendName:"webgl",kernelFunc:$pe},Dpe={kernelName:MH,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,crops:a}=r;RG(i.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const s=o.reduce(((e,t)=>e*t)),l=k2(i.shape,o,s),u=S2(l.length,o.length),c=C2(i.shape,o,s),h=I2(a,o.length),d=E2(c,a,o.length),p=[],f=Tde({inputs:{x:i},backend:n,attrs:{shape:l}}),g=Fde({inputs:{x:f},backend:n,attrs:{perm:u}}),m=Tde({inputs:{x:g},backend:n,attrs:{shape:c}}),y=$pe({inputs:{x:m},backend:n,attrs:{begin:h,size:d}});return p.push(f),p.push(g),p.push(m),p.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}};const Mpe={kernelName:FH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a}=r,s=n.readSync(i.dataId),l=n.readSync(o.dataId),u=Wce(s,l,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,u)}};const Fpe={kernelName:LH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,o=dH().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=dH().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||1===a){const e=n.texData.get(r.dataId).values,t=n.texData.get(i.dataId).values,[o,a]=Vce(r.shape,i.shape,e,t,r.dtype),s=n.makeTensorInfo(a,r.dtype);return n.texData.get(s.dataId).values=o,s}let s;return s=o?new ode("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,i.shape,!1):new rde("\n  return float(int(a.r) & int(b.r));\n",r.shape,i.shape),n.runWebGLProgram(s,[r,i],r.dtype)}};const Lpe={kernelName:jH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,o=n.readSync(r.dataId),a=n.readSync(i.dataId),s=kJ(Array.from(o),Array.from(a));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},jpe=vde({opSnippet:"return float(a != b);",cpuKernelImpl:hhe,dtype:"bool"}),zpe={kernelName:cK,backendName:"webgl",kernelFunc:jpe};function Bpe(e){const{inputs:t,backend:n}=e,{input:r}=t;return ade({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const Wpe={kernelName:IK,backendName:"webgl",kernelFunc:Bpe};const Upe={kernelName:zH,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:i}=t,{x:o}=n,{dtype:a}=i;if("complex64"===a){if("complex64"===o.dtype)return ade({inputs:{x:o},backend:r});const t=E0(o.shape),n=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),i=lde({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),i}if("complex64"===o.dtype){const t=Bpe({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:a}});return r.disposeIntermediateTensorInfo(t),n}if(!HG(o.dtype,a)){const e=ade({inputs:{x:o},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:a}}if(r.shouldExecuteOnCPU([o])){const e=r.texData.get(o.dataId).values,[t,n,i]=Gce(e,o.shape,o.dtype,a);return r.makeTensorInfo(t,n,i)}if("int32"===a)return function(e,t){const n=new Vhe(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===a){const e=r.makeTensorInfo([],"bool",VG("bool",1)),t=jpe({inputs:{a:o,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${a}`)}},Vpe="return ceil(x);",Gpe=yde({opSnippet:Vpe,packedOpSnippet:Vpe,cpuKernelImpl:Hce}),Hpe={kernelName:BH,backendName:"webgl",kernelFunc:Gpe};class qpe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class Kpe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const Xpe={kernelName:WH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{clipValueMin:o,clipValueMax:a}=r;let s;s=dH().getBool("WEBGL_PACK_CLIP")?new Kpe(i.shape):new qpe(i.shape);const l=[[o],[a]];return n.runWebGLProgram(s,[i],i.dtype,l)}};class Ype{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function Qpe(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const Jpe={kernelName:VH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,i=n.texData.get(r.dataId),o=new Ype(r.shape),a=[Qpe(r,i.complexTensorInfos.real),Qpe(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(o,a,a[0].dtype)}};class Zpe{constructor(e){this.outputShape=[],this.outputShape=p2(e,1),this.variableNames=e.map(((e,t)=>`T${t}`));const t=new Array(e.length-1);t[0]=e[0][1];for(let o=1;o<t.length;o++)t[o]=t[o-1]+e[o][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<t.length;o++){const e=t[o-1];n.push(`else if (yC < ${t[o]}) setOutput(getT${o}(yR, yC-${e}));`)}const r=t.length,i=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${i}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class efe{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=p2(e,t);const n=this.outputShape,r=n.length,i=gce(r),o=Fhe("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>`T${t}`));const s=new Array(e.length-1);s[0]=e[0][t];for(let f=1;f<s.length;f++)s[f]=s[f-1]+e[f][t];const l=a[t],u=a.slice(-2),c=a.join();let h=`if (${l} < ${s[0]}) {\n        return getChannel(\n            getT0(${c}), vec2(${u.join()}));\n        }`;for(let f=1;f<s.length;f++){const e=s[f-1];h+=`\n        if (${l} < ${s[f]}  && ${l} >= ${s[f-1]}) {\n          return getChannel(\n            getT${f}(${tfe(a,l,e)}),\n            vec2(${tfe(u,l,e)}));\n        }`}const d=s.length,p=s[s.length-1];h+=`\n        return getChannel(\n          getT${d}(${tfe(a,l,p)}),\n          vec2(${tfe(u,l,p)}));`,this.userCode=`\n      float getValue(${a.map((e=>"int "+e))}) {\n        ${h}\n      }\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${o}), 0., 0., 0.);\n\n        ${o[r-1]} = ${o[r-1]} + 1;\n        if (${o[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${o});\n        }\n\n        ${o[r-2]} = ${o[r-2]} + 1;\n        if (${o[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${o});\n        }\n\n        ${o[r-1]} = ${o[r-1]} - 1;\n        if (${o[r-2]} < ${n[r-2]} &&\n            ${o[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${o});\n        }\n        setOutput(result);\n      }\n    `}}function tfe(e,t,n){const r=e.indexOf(t),i=e.map(((e,t)=>t===r?`${e} - ${n}`:e));return i.join()}function nfe(e){const{inputs:t,backend:n}=e,{input:r}=t;return ade({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const rfe={kernelName:Pq,backendName:"webgl",kernelFunc:nfe};function ife(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>Bpe({inputs:{input:e},backend:n}))),i=e.map((e=>nfe({inputs:{input:e},backend:n}))),o=ife(r,t,n),a=ife(i,t,n),s=lde({inputs:{real:o,imag:a},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),i.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),s}let i=n.shouldExecuteOnCPU(e);if("string"===r&&(i=!0),i){const i=e.map((e=>{const r=DG(e.shape.slice(t));return Tde({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),o=i.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),a=p2(i.map((e=>e.shape)),1),s=1===i[0].shape[0],l=qce(o,a,r,s),u=p2(e.map((e=>e.shape)),t),c=n.makeTensorInfo(u,r,l);return i.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}const o=e.filter((e=>DG(e.shape)>0)),a=dH().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(1===o.length){const t=a?new Vhe(e[0].shape,Xhe):new Yhe(e[0].shape,Xhe);return n.runWebGLProgram(t,e,r)}const s=dH().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>s){const e=[];for(let i=0;i<o.length;i+=s){const r=o.slice(i,i+s);e.push(ife(r,t,n))}const r=ife(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return r}if(a){const e=new efe(o.map((e=>e.shape)),t);return n.runWebGLProgram(e,o,r)}const{tensors2D:l,outShape:u}=function(e,t,n){const r=p2(e.map((e=>e.shape)),t),i=e.map((e=>Tde({inputs:{x:e},attrs:{shape:[-1,DG(e.shape.slice(t))]},backend:n})));return{tensors2D:i,outShape:r}}(o,t,n),c=new Zpe(l.map((e=>e.shape))),h=n.runWebGLProgram(c,l,r);l.forEach((e=>n.disposeIntermediateTensorInfo(e)));const d=Tde({inputs:{x:h},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(h),d}function ofe(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,o=WG(i,t[0].shape)[0];d2(t.map((e=>e.shape)),o);const a=p2(t.map((e=>e.shape)),o);if(0===DG(a))return n.makeTensorInfo(a,t[0].dtype,[]);const s=t.filter((e=>DG(e.shape)>0));return 1===s.length?ade({inputs:{x:s[0]},backend:n}):ife(s,o,n)}const afe={kernelName:GH,backendName:"webgl",kernelFunc:ofe};class sfe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,s=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,g="channelsLast"===e.dataFormat,m=g?1:2,y=g?2:3,v=g?3:1;let b="",x="";n&&(b=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,x="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${b}\n\n      const ivec2 strides = ivec2(${s}, ${l});\n      const ivec2 pads = ivec2(${o}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${v}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${m}], coords[${y}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${h}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            int xC = xCCorner + wC * ${c};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${p}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${g}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${g}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${p}) *\n                    getW(wR, wC, ${p}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${p}, xR, xC) *\n                    getW(wR, wC, ${p}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2)\n              );\n\n              if (${g}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2),\n                getW(wR, wC, ${p} + 2, d2)\n              );\n\n              if (${g}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1),\n                  getX(batch, xR, xC, ${p} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC),\n                  getX(batch, ${p} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${w}\n        ${x}\n        setOutput(result);\n      }\n    `}}class lfe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterDepth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${i}, ${o}, ${a});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${c}; wF++) {\n          int xF = xFCorner + wF * ${s};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h}; wR++) {\n            int xR = xRCorner + wR * ${l};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${p}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${p}) *\n                  getW(wF, wR, wC, ${p}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1),\n                  getX(batch, xF, xR, xC, ${p} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2),\n                  getW(wF, wR, wC, ${p} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class ufe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=kce(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,s=e.dilationWidth,l=e.filterHeight,u=e.filterWidth,c=u;let h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<u;g++)h+=`\n           vec4 xTexelC${2*g};\n           int xTexelC${2*g}Ready;\n           vec4 xTexelC${2*g+1};\n           int xTexelC${2*g+1}Ready;\n           vec4 xC${g};`;h+=`\n     for (int r = 0; r < ${l}; r++) {\n      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {\n       `;for(let g=0;g<u;g++)h+=`\n           xTexelC${2*g} = vec4(0.0);\n           xTexelC${2*g}Ready = 0;\n           xTexelC${2*g+1} = vec4(0.0);\n           xTexelC${2*g+1}Ready = 0;\n           xC${g} = vec4(0.0);`;h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let g=0;g<(c+1)/2;g++){const t=2*g;if(h+=`\n           xC = xCCorner + ${t*s};\n           `,1===a){if(t<u&&(o%2===1?(h+=`\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n               `,h+=1===s&&t>0?`\n                 xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);\n                 `:`\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC${t} = vec4(previous.zw, xTexelC${t}.xy);\n                   } else {\n                     xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);\n                   }\n                   `):h+=`\n                 if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n\n                 xC${t} = xTexelC${t};\n                 `,t+1<u)){const e=o%2===0?AG(s):s;s%2===0&&o%2===1||s%2!==0&&o%2!==1?(h+=`\n                   xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                     xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC${t+1}.zw = vec2(0.0);\n                     }\n                     xTexelC${t+1}Ready = 1;\n                   }\n                   `,h+=s>1?`\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC${t+1} = vec4(previous.zw, xTexelC${t+1}.xy);\n                     } else {\n                      xC${t+1} = vec4(0.0, 0.0, xTexelC${t+1}.xy);\n                     }\n                     `:`\n                     xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);\n                     `):h+=1===e?`\n                     xC${t+1} = xTexelC${t};\n                     `:`\n                     xCOffset = xC + ${e};\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                       xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC${t+1}.zw = vec2(0.0);\n                       }\n                       xTexelC${t+1}Ready = 1;\n                     }\n\n                     xC${t+1} = xTexelC${t+1};\n                     `}}else t<u&&(o%2===1?(h+=`\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {\n                   xTexelC${t+1} = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC${t+1}.zw = vec2(0.0);\n                   }\n                   xTexelC${t+1}Ready = 1;\n                 }\n\n                 xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n               `,t+1<u&&(h+=`\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);\n                 `)):(h+=`\n                 if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                   xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${t+1}.zw = vec2(0.);\n                   }\n                   xTexelC${t+1}Ready = 1;\n                 }\n\n                 xC${t} = vec4(\n                   xTexelC${t}.xy, xTexelC${t+1}.xy);\n               `,t+1<u&&(h+=`\n                   xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n                 `)));t<u&&(h+=`\n             wTexel = getW(r, ${t}, d1, d2);\n             dotProd += xC${t}.xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ${e.inChannels}) {\n               dotProd += xC${t}.yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           `,t+1<u&&(h+=`\n               wTexel = getW(r, ${t+1}, d1, d2);\n               dotProd += xC${t+1}.xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ${e.inChannels}) {\n                 dotProd += xC${t+1}.yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             `))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";let d="",p="";n&&(d=r?`vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ${n}\n         }`:i?`vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ${n}\n         }`:`vec4 activation(vec4 x) {\n           ${n}\n         }`,p="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n       ${d}\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ${h}\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ${f}\n         ${p}\n         setOutput(result);\n       }\n     `}}class cfe{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=kce(this.outputShape.length);const{dataFormat:n}=t,r=Jue(),i="channelsLast"===n,o=i?1:2,a=i?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let u=0;u<=1;u++)for(let e=0;e<=1;e++)l+=`\n          blockIndex = rc.z + ${e};\n          pos = rc.y + ${u};\n\n          ${s}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${o}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${a}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${i}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*u+e}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*u+e}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${l}\n\n        ${r.output} = result;\n      }\n    `}}function hfe(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function dfe(e){let{x:t,filter:n,convInfo:r,backend:i,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:l=null}=e;const u=t.shape,c=i.texData.get(t.dataId),h=r.inChannels,d=u[0]*u[1]*u[2],p=r.outChannels,f="channelsLast"===r.dataFormat,g=!1;let m;const y=[];if(null!=a){const e=hfe(a.shape,f);null!=e&&(a=Tde({inputs:{x:a},backend:i,attrs:{shape:e}}),y.push(a))}if(null!=o){const e=hfe(o.shape,f);null!=e&&(o=Tde({inputs:{x:o},backend:i,attrs:{shape:e}}),y.push(o))}if(!((1===d||1===p)&&h>1e3)&&c.isPacked&&f&&null!=c.texture&&u[2]%2!==0&&MG(c.shape.slice(-3),u.slice(-3))){const e=u[0]*u[1]*(u[2]+1),h={dataId:t.dataId,shape:[1,e,r.inChannels],dtype:t.dtype},d=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,RG(Uue(c.shape,h.shape),(()=>`packed reshape ${c.shape} to ${h.shape} isn't free`));const p=Tde({inputs:{x:n},backend:i,attrs:{shape:[1,r.inChannels,r.outChannels]}});y.push(p);const f=jde({a:h,b:p,backend:i,transposeA:false,transposeB:g,bias:o,activation:l,preluActivationWeights:a,leakyreluAlpha:s}),v=i.texData.get(f.dataId);RG(v.isPacked,(()=>"batchMatMul result is expected to be packed")),c.shape=d,v.shape=r.outShape,m=ade({inputs:{x:f},backend:i}),m.shape=r.outShape,y.push(f)}else{const e=r.outHeight*r.outWidth,u=Tde({inputs:{x:t},backend:i,attrs:{shape:f?[r.batchSize,e,r.inChannels]:[r.batchSize,r.inChannels,e]}}),c=Tde({inputs:{x:n},backend:i,attrs:{shape:[1,r.inChannels,r.outChannels]}}),h=jde({a:f?u:c,b:f?c:u,transposeA:!f,transposeB:g,backend:i,bias:o,activation:l,preluActivationWeights:a,leakyreluAlpha:s});m=Tde({inputs:{x:h},backend:i,attrs:{shape:r.outShape}}),y.push(u),y.push(c),y.push(h)}for(const v of y)i.disposeIntermediateTensorInfo(v);return m}function pfe(e){let{x:t,filter:n,convInfo:r,backend:i,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:l=null}=e;const{filterWidth:u,filterHeight:c,inChannels:h,outWidth:d,outHeight:p,dataFormat:f}=r,g="channelsLast"===f,m=u*c*h,y=p*d,v=[r.batchSize,m,y],b=[];if(null!=a){const e=hfe(a.shape,g);null!=e&&(a=Tde({inputs:{x:a},backend:i,attrs:{shape:e}}),b.push(a))}if(null!=o){const e=hfe(o.shape,g);null!=e&&(o=Tde({inputs:{x:o},backend:i,attrs:{shape:e}}),b.push(o))}const x=Tde({inputs:{x:n},backend:i,attrs:{shape:[1,m,DG(n.shape)/m]}});b.push(x);const w=new cfe(v,r),k=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],S=i.runWebGLProgram(w,[t],"float32",k),C=Tde({inputs:{x:S},backend:i,attrs:{shape:v}});b.push(S),b.push(C);const I=null!=o,E=null!=a,T="leakyrelu"===l,_=l?bde(l,!0):null,N=new xde(g?C.shape:x.shape,g?x.shape:C.shape,g?[r.batchSize,y,r.outChannels]:[r.batchSize,r.outChannels,y],!0,!1,I,_,E,T),A=g?[C,x]:[x,C];if(o&&A.push(o),E&&A.push(a),T){const e=i.makeTensorInfo([],"float32",ZX(s,"float32"));A.push(e),b.push(e)}const O=i.runWebGLProgram(N,A,"float32"),R=Tde({inputs:{x:O},backend:i,attrs:{shape:r.outShape}});b.push(O);for(const $ of b)i.disposeIntermediateTensorInfo($);return R}const ffe={kernelName:HH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r,h=vZ(l),d=lZ(i.shape,o.shape,a,u,s,c,!1,h);let p;if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(d.strideWidth<=2&&"channelsLast"===h&&dH().getBool("WEBGL_EXP_CONV")){const e=new ufe(d),t=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];p=n.runWebGLProgram(e,[i,o],"float32",t)}else if(dH().getBool("WEBGL_CONV_IM2COL"))p=pfe({x:i,filter:o,convInfo:d,backend:n});else{const e=new sfe(d);p=n.runWebGLProgram(e,[i,o],"float32")}else p=dfe({x:i,filter:o,convInfo:d,backend:n});const f=Tde({inputs:{x:p},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(p),f}};class gfe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              ${o?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);"}\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class mfe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o="channelsLast"===e.dataFormat,a=t-1-e.padInfo.top,s=n-1-e.padInfo.left,l=o?1:2,u=o?2:3,c=o?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${c}];\n\n        ivec2 dyCorner = ivec2(coords[${l}], coords[${u}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${o}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class yfe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${i};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${o};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${a};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class vfe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${s}, ${l}, ${u});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${i}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${a}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const bfe={kernelName:qH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,h=vZ(l),d=lZ(i.shape,c,a,1,s,u,!1,h),p=new gfe(d);return n.runWebGLProgram(p,[i,o],"float32")}};class xfe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=kce(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,i=n-1-e.padInfo.left;this.userCode=`\n      const ivec2 pads = ivec2(${r}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            int wCPerm = ${n} - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    `}}const wfe={kernelName:KH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{inputShape:a,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r,h=vZ(u),d=lZ(a,o.shape,s,1,l,c,!1,h);if(dH().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===h){const e=[[d.strideHeight,d.strideWidth]],t=new xfe(d);return n.runWebGLProgram(t,[i,o],"float32",e)}{const e=new mfe(d);return n.runWebGLProgram(e,[i,o],"float32")}}};const kfe={kernelName:XH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r,u=uZ(i.shape,o.shape,a,l,s),c=new lfe(u);return n.runWebGLProgram(c,[i,o],"float32")}};const Sfe={kernelName:YH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,filterShape:l}=r,u=uZ(i.shape,l,a,1,s),c=new yfe(u);return n.runWebGLProgram(c,[i,o],"float32")}};const Cfe={kernelName:QH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{pad:a,strides:s,inputShape:l}=r,u=uZ(l,o.shape,s,1,a),c=new vfe(u);return n.runWebGLProgram(c,[i,o],"float32")}},Ife=yde({opSnippet:mde+"\n  return cos(x);\n",packedOpSnippet:`\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ${ide}\n  return result;\n`}),Efe={kernelName:JH,backendName:"webgl",kernelFunc:Ife},Tfe=yde({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),_fe={kernelName:ZH,backendName:"webgl",kernelFunc:Tfe};class Nfe{constructor(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,s,l]=e,[u]=t,[c,h]=n;this.outputShape=[u,c,h,l];const d="bilinear"===r?1:0,[p,f]=[a-1+".0",s-1+".0"],[g,m,y]=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[v,b,x]=h>1?[""+(s-1)/(h-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\n      const float height_ratio = float(${g});\n      const float width_ratio = float(${v});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${o}) {\n          return;\n        }\n\n        float height_scale = ${m};\n        float width_scale = ${b};\n\n        float in_y = ${y};\n        if( in_y < 0.0 || in_y > ${p} ) {\n          setOutput(float(${i}));\n          return;\n        }\n        float in_x = ${x};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${i}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const Afe={kernelName:nq,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:o,boxInd:a}=t,{cropSize:s,method:l,extrapolationValue:u}=r,c=new Nfe(i.shape,o.shape,s,l,u);return n.runWebGLProgram(c,[i,o,a],"float32")}};var Ofe;!function(e){e.Prod="*",e.Sum="+"}(Ofe||(Ofe={}));class Rfe{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===Ofe.Prod?"1.0":"0.0",a=n?o:`getX(${$fe(i,"coords",this.op)})`,s=this.outputShape[this.outputShape.length-1];let l="",u="";n?(l=r?"end != "+(s-1):"end != 0",u=r?"end + 1":"end - 1"):(l=r?`end + pow2 < ${s}`:"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${gce(i)} coords = getOutputCoords();\n        int end = ${Pfe(i,"coords",this.op)};\n        float val = ${a};\n        int pow2 = int(pow(2.0, index));\n        if (${l}) {\n          int idx = ${u};\n          ${Pfe(i,"coords",this.op)} = idx;\n          val ${this.op}= getX(${$fe(i,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}}function $fe(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function Pfe(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function Dfe(e,t,n,r,i,o){const a=t.shape.length,s=h0([r],a);let l=t;null!=s&&(l=Fde({inputs:{x:t},backend:n,attrs:{perm:s}}));const u=p0(1,a)[0];if(u!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);const c=l.shape[u];let h=ade({inputs:{x:l},backend:n});for(let d=0;d<=Math.ceil(Math.log2(c))-1;d++){const t=new Rfe(e,l.shape,!1,o),r=[[d]],i=h;h=n.runWebGLProgram(t,[h],h.dtype,r),n.disposeIntermediateTensorInfo(i)}if(i){const t=new Rfe(e,l.shape,i,o),r=h;h=n.runWebGLProgram(t,[h],h.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=s){const e=Fde({inputs:{x:h},backend:n,attrs:{perm:d0(s)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),e}return h}const Mfe={kernelName:eq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;return Dfe(Ofe.Prod,i,n,o,a,s)}};const Ffe={kernelName:tq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;return Dfe(Ofe.Sum,i,n,o,a,s)}};const Lfe={kernelName:rq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a,binaryOutput:s}=r;if(1===i.shape.length){const e=n.readSync(i.dataId),t=n.readSync(o.dataId),r=Wce(e,t,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,r)}if(2===i.shape.length){const e=n.bufferSync(i),t=n.bufferSync(o),r=Uce(e,t,a,s);return n.makeTensorInfo(r.shape,o.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}};class jfe{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const zfe={kernelName:iq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:o,dataFormat:a}=r,s=i.shape[0],l=("NHWC"===a?i.shape[1]:i.shape[2])*o,u=("NHWC"===a?i.shape[2]:i.shape[3])*o,c=("NHWC"===a?i.shape[3]:i.shape[1])/(o*o),h=new jfe("NHWC"===a?[s,l,u,c]:[s,c,l,u],o,a);return n.runWebGLProgram(h,[i],i.dtype)}};class Bfe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=kce(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,s=e.outChannels/e.inChannels;let l="",u="";n&&(l=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,u="result = activation(result);");const c=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${l}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${s};\n        int q = d2 - d1 * ${s};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${o}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${c}\n        ${u}\n        setOutput(result);\n      }\n    `}}class Wfe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=kce(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,h=c;let d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<c;m++)d+=`\n          vec4 xTexelC${2*m};\n          int xTexelC${2*m}Ready;\n          vec4 xTexelC${2*m+1};\n          int xTexelC${2*m+1}Ready;\n          vec4 xC${m};`;d+=`\n    for (int r = 0; r < ${u}; r++) {\n      `;for(let m=0;m<c;m++)d+=`\n          xTexelC${2*m} = vec4(0.0);\n          xTexelC${2*m}Ready = 0;\n          xTexelC${2*m+1} = vec4(0.0);\n          xTexelC${2*m+1}Ready = 0;\n          xC${m} = vec4(0.0);`;d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let m=0;m<(h+1)/2;m++){const e=2*m;if(d+=`\n          xC = xCCorner + ${e*l};\n          `,1===s){if(e<c&&(a%2===1?(d+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n              `,d+=1===l&&e>0?`\n                xC${e} = vec4(xTexelC${e-2}.zw, xTexelC${e}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${e} = vec4(previous.zw, xTexelC${e}.xy);\n                  } else {\n                    xC${e} = vec4(0.0, 0.0, xTexelC${e}.xy);\n                  }\n                  `):d+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                xC${e} = xTexelC${e};\n                `,e+1<c)){const t=a%2===0?AG(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(d+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${t};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                    xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${e+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${e+1}Ready = 1;\n                  }\n                  `,d+=l>1?`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC${e+1} = vec4(previous.zw, xTexelC${e+1}.xy);\n                    } else {\n                     xC${e+1} = vec4(0.0, 0.0, xTexelC${e+1}.xy);\n                    }\n                    `:`\n                    xC${e+1} = vec4(xTexelC${e}.zw, xTexelC${e+1}.xy);\n                    `):d+=1===t?`\n                    xC${e+1} = xTexelC${e};\n                    `:`\n                    xCOffset = xC + ${t};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                      xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${e+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${e+1}Ready = 1;\n                    }\n\n                    xC${e+1} = xTexelC${e+1};\n                    `}}else e<c&&(a%2===1?(d+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${e+1}Ready == 0) {\n                  xTexelC${e+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${e+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${e+1}Ready = 1;\n                }\n\n                xC${e} = vec4(xTexelC${e}.zw, xTexelC${e+1}.zw);\n              `,e+1<c&&(d+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${e+1} = vec4(xTexelC${e+1}.xy, final.xy);\n                `)):(d+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                  xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e+1}.zw = vec2(0.);\n                  }\n                  xTexelC${e+1}Ready = 1;\n                }\n\n                xC${e} = vec4(\n                  xTexelC${e}.xy, xTexelC${e+1}.xy);\n              `,e+1<c&&(d+=`\n                  xC${e+1} = vec4(xTexelC${e}.zw, xTexelC${e+1}.zw);\n                `)));e<c&&(d+=`\n            wTexel = getW(r, ${e}, d1, q);\n            dotProd += xC${e} * vec4(wTexel.xz, wTexel.xz);\n          `,e+1<c&&(d+=`\n              wTexel = getW(r, ${e+1}, d1, q);\n              dotProd += xC${e+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}d+="\n    }\n  ",d+="\n      }\n    ";let p="",f="";n&&(p=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,f="result = activation(result);");const g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${p}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${o};\n        int q = d2 - d1 * ${o};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${d}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${g}\n        ${f}\n        setOutput(result);\n      }\n    `}}const Ufe={kernelName:oq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l,dimRoundingMode:u}=r;let c=l;null==c&&(c=[1,1]),RG(mZ(a,c),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`));const h=lZ(i.shape,o.shape,a,c,s,u,!0);let d;d=dH().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new Wfe(h):new Bfe(h);const p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(d,[i,o],"float32",p)}};class Vfe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${o} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Gfe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${o}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${s}; dm++) {\n              int d2 = d1 * ${s} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const Hfe={kernelName:aq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r,h=lZ(i.shape,c,a,s,l,u,!0),d=new Vfe(h);return n.runWebGLProgram(d,[i,o],"float32")}};const qfe={kernelName:sq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r,h=lZ(c,o.shape,a,s,l,u,!0),d=new Gfe(h);return n.runWebGLProgram(d,[i,o],"float32")}};class Kfe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const Xfe={kernelName:lq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,i=[...r.shape,...r.shape],o=DG(r.shape),a=Tde({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new Kfe(o),l=n.runWebGLProgram(s,[a],a.dtype),u=Tde({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}};class Yfe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:s,dilationHeight:l,dilationWidth:u}=e,{top:c,left:h}=r;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${o});\n      const ivec2 pads = ivec2(${c}, ${h});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${a}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${s}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const Qfe={kernelName:uq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r,u=oZ(i.shape,o.shape,a,s,"NHWC",l);let c;const h=new Yfe(u);c=n.runWebGLProgram(h,[i,o],"float32");const d=Tde({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),d}};const Jfe={kernelName:fq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,o=t,{allDims:a,summedDims:s,idDims:l}=Q2(i,o.length);Z2(a.length,l,o);const{path:u,steps:c}=e3(s,l),h=c.length;let d=null,p=a.length;const f=[];for(let g=0;g<h;++g){for(const e of c[g]){const{permutationIndices:t,expandDims:r}=J2(p,l[e]);let i;t3(t)?i=o[e]:(i=Fde({inputs:{x:o[e]},backend:n,attrs:{perm:t}}),f.push(i));const a=i.shape.slice();for(let e=0;e<r.length;++e)a.splice(r[e],0,1);MG(i.shape,a)||(i=Tde({inputs:{x:i},backend:n,attrs:{shape:a}}),f.push(i)),null===d?d=i:(d=Ide({inputs:{a:i,b:d},backend:n}),f.push(d))}g<h-1&&(u[g]>=0&&(d=Dde({inputs:{x:d},backend:n,attrs:{axis:u[g]-(a.length-p),keepDims:!1}}),f.push(d)),p--)}for(const g of f)g!==d&&n.disposeIntermediateTensorInfo(g);return d}},Zfe=yde({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),ege={kernelName:gq,backendName:"webgl",kernelFunc:Zfe},tge={kernelName:mq,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:i}=t,o=dH().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ode("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,i.shape):new rde("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,i.shape);return n.runWebGLProgram(o,[r,i],r.dtype)}},nge=vde({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:Kce}),rge={kernelName:vq,backendName:"webgl",kernelFunc:nge},ige=yde({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${$2};\n  float a1 = ${P2};\n  float a2 = ${D2};\n  float a3 = ${M2};\n  float a4 = ${F2};\n  float a5 = ${L2};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),oge={kernelName:yq,backendName:"webgl",kernelFunc:ige},age=yde({opSnippet:mde+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:Xce,dtype:"float32"}),sge={kernelName:bq,backendName:"webgl",kernelFunc:age};function lge(e){const{inputs:t,attrs:n,backend:r}=e,{dim:i}=n,{input:o}=t,a=o.shape.length,s=o.shape.slice();let l=i;return i<0&&(RG(-(a+1)<=i,(()=>`Axis must be in the interval [${-(a+1)}, ${a}]`)),l=a+i+1),s.splice(l,0,1),Tde({inputs:{x:o},backend:r,attrs:{shape:s}})}const uge={kernelName:xq,backendName:"webgl",kernelFunc:lge},cge="return exp(x) - 1.0;",hge=yde({opSnippet:cge,packedOpSnippet:cge,cpuKernelImpl:Yce}),dge={kernelName:wq,backendName:"webgl",kernelFunc:hge};class pge{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const i=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=n?`${r}.0`:"1.0";let a;if("real"===e)a="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);a="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${i};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${a}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${o};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function fge(e,t,n){const r=n.texData.get(e.dataId),i=DG(e.shape),o=e.shape[e.shape.length-1],a=Tde({inputs:{x:e},backend:n,attrs:{shape:[i/o,o]}}),s=a.shape,l=new pge("real",s,t),u=new pge("imag",s,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],h=n.runWebGLProgram(l,c,"float32"),d=n.runWebGLProgram(u,c,"float32"),p=lde({inputs:{real:h,imag:d},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d);const f=Tde({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),f}const gge={kernelName:kq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return fge(r,!1,n)}};class mge{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function yge(e){const{backend:t,attrs:n}=e,{shape:r,value:i}=n;let{dtype:o}=n;if(o=o||YG(i),"string"===o){const e=GG(o,DG(r));return e.fill(i),t.makeTensorInfo(r,o,e)}{const e=new mge(r,i),n=[[i]];return t.runWebGLProgram(e,[],o,n)}}const vge={kernelName:Sq,backendName:"webgl",kernelFunc:yge};class bge{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const xge={kernelName:Cq,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:r}=t,i=n,o=new bge(r.shape);return i.runWebGLProgram(o,[r],r.dtype)}},wge="return floor(x);",kge=yde({opSnippet:wge,packedOpSnippet:wge,cpuKernelImpl:Qce}),Sge={kernelName:Iq,backendName:"webgl",kernelFunc:kge},Cge=vde({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Ige={kernelName:Eq,backendName:"webgl",kernelFunc:Cge};class Ege{constructor(e){this.variableNames=["A"];const t=Jue(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class Tge{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=Jue(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}const _ge={kernelName:SX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:i}=t;const{numChannels:o}=r,a="undefined"!==typeof HTMLVideoElement&&i instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&i instanceof HTMLImageElement,[l,u]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=[u,l],h=[u,l,o];if(s||a){const e=dH().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=Nge&&e===Age||(Age=e,Nge=document.createElement("canvas").getContext("2d",{willReadFrequently:Age})),Nge.canvas.width=l,Nge.canvas.height=u,Nge.drawImage(i,0,0,l,u),i=Nge.canvas}const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=xue.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),i);const p=dH().getBool("WEBGL_PACK")?new Tge(h):new Ege(h),f=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),f}};let Nge,Age=dH().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const Oge={kernelName:EX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,g=vZ(c),m=lZ(i.shape,o.shape,l,h,u,d,!1,g);let y;const v=[],b=null!=a,x=null!=s,w="leakyrelu"===p,k=()=>{const e=[i,o],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=Tde({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return v.push(t),t}return e};if(b&&e.push(t(a,c)),x&&e.push(t(s,c)),w){const t=n.makeTensorInfo([],"float32",ZX(f,"float32"));e.push(t),v.push(t)}return e};if(1!==m.filterHeight||1!==m.filterWidth||1!==m.dilationHeight||1!==m.dilationWidth||1!==m.strideHeight||1!==m.strideWidth||"SAME"!==m.padInfo.type&&"VALID"!==m.padInfo.type)if(m.strideWidth<=2&&"channelsLast"===g&&dH().getBool("WEBGL_EXP_CONV")){const e=p?bde(p,!0):null,t=new ufe(m,b,e,x,w),r=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],i=k();y=n.runWebGLProgram(t,i,"float32",r)}else if(dH().getBool("WEBGL_CONV_IM2COL"))y=pfe({x:i,filter:o,convInfo:m,backend:n,bias:a,activation:p,preluActivationWeights:s,leakyreluAlpha:f});else{const e=p?bde(p,!1):null,t=new sfe(m,b,e,x,w),r=k();y=n.runWebGLProgram(t,r,"float32")}else y=dfe({x:i,filter:o,convInfo:m,backend:n,bias:a,activation:p,preluActivationWeights:s,leakyreluAlpha:f});const S=Tde({inputs:{x:y},backend:n,attrs:{shape:m.outShape}});return v.push(y),v.forEach((e=>n.disposeIntermediateTensorInfo(e))),S}};const Rge={kernelName:TX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dilations:c,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r,f=[];let g=c;null==g&&(g=[1,1]),RG(mZ(l,g),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`));const m=lZ(i.shape,o.shape,l,g,u,h,!0),y=dH().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,v=d?bde(d,y):null,b=[i,o],x=null!=a,w=null!=s,k="leakyrelu"===d;if(x&&b.push(a),w&&b.push(s),k){const e=n.makeTensorInfo([],"float32",ZX(p,"float32"));b.push(e),f.push(e)}let S;S=y?new Wfe(m,x,v,w,k):new Bfe(m,x,v,w,k);const C=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],I=n.runWebGLProgram(S,b,"float32",C);return f.forEach((e=>n.disposeIntermediateTensorInfo(e))),I}};class $ge{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const i=gce(n.length);let o="\n    int index;";for(let a=0;a<this.sliceDim;a++)o+=`\n          index = round(getIndices(coords[0], ${a}));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};\n          flattenIndex += index * ${this.strides[a]};`;this.userCode=`\n         void main() {\n          ${i} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ${o}\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}const Pge={kernelName:Nq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,o=i.shape,a=o[o.length-1],s=DG(r.shape),[l,u,c,h]=T2(r,i),d=Tde({inputs:{x:i},backend:n,attrs:{shape:[u,a]}}),p=Tde({inputs:{x:r},backend:n,attrs:{shape:[DG(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,i])||"string"===r.dtype){const e=n.readSync(i.dataId),t=n.bufferSync(r),o=Jce(e,t,r.dtype,u,a,c,h,r.shape,s);return n.makeTensorInfo(l,r.dtype,o.values)}const f=new $ge(a,h,[u,c],r.shape),g=n.runWebGLProgram(f,[p,d],p.dtype),m=Tde({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),m}};class Dge{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=gce(this.rank),r=function(e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let r=0;r<e.length;r++)2===r?n.push("index"):n.push(`${t[r]}`);return n.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${r}));\n      }\n    `}}function Mge(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:o}=t,{axis:a,batchDims:s}=r,l=WG(a,i.shape)[0];if(dH().get("DEBUG")){const e=n.readSync(o.dataId),t=i.shape[l];for(let n=0;n<e.length;++n){const r=e[n];RG(r<=t-1&&r>=0,(()=>`GatherV2: the index value ${r} is not in [0, ${t-1}]`))}}const u=v3(i,o,l,s),c=DG(o.shape),h=[],d=Tde({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),p=Tde({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});h.push(d),h.push(p);const f=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([i,o])||"string"===i.dtype){const e=n.bufferSync(p),t=n.bufferSync(d),r=Zce(t,e,f);return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u.outputShape,r.dtype,r.values)}const g=new Dge(d.shape,f),m=n.runWebGLProgram(g,[d,p],d.dtype);h.push(m);const y=Tde({inputs:{x:m},backend:n,attrs:{shape:u.outputShape}});return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}const Fge={kernelName:_q,backendName:"webgl",kernelFunc:Mge},Lge=vde({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:ehe,dtype:"bool"}),jge={kernelName:Aq,backendName:"webgl",kernelFunc:Lge},zge=vde({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:the}),Bge={kernelName:Oq,backendName:"webgl",kernelFunc:zge};const Wge={kernelName:$q,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return fge(r,!0,n)}},Uge=yde({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Vge={kernelName:Dq,backendName:"webgl",kernelFunc:Uge},Gge=yde({opSnippet:"return float(isinf(x));",dtype:"bool"}),Hge={kernelName:Mq,backendName:"webgl",kernelFunc:Gge},qge=yde({opSnippet:"return float(isnan(x));",dtype:"bool"}),Kge={kernelName:Fq,backendName:"webgl",kernelFunc:qge},Xge=vde({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:nhe,dtype:"bool"}),Yge={kernelName:jq,backendName:"webgl",kernelFunc:Xge},Qge=vde({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:rhe,dtype:"bool"}),Jge={kernelName:zq,backendName:"webgl",kernelFunc:Qge};const Zge={kernelName:Bq,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:o}=n,a=ihe(r,i,o);return t.makeTensorInfo([a.length],"float32",a)}},eme=yde({opSnippet:mde+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:ohe}),tme={kernelName:Wq,backendName:"webgl",kernelFunc:eme},nme=yde({opSnippet:mde+"\n  return log(1.0 + x);\n"}),rme={kernelName:Uq,backendName:"webgl",kernelFunc:nme},ime=vde({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),ome={kernelName:Vq,backendName:"webgl",kernelFunc:ime},ame=yde({opSnippet:"return float(!(x >= 1.0));"}),sme={kernelName:Gq,backendName:"webgl",kernelFunc:ame},lme=vde({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),ume={kernelName:Hq,backendName:"webgl",kernelFunc:lme};class cme{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[];const o=t,a=e[3]-1;let s;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;s=.5===i?`inversesqrt(${l})`:1===i?`1.0/(${l})`:`exp(log(${l}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${o}; j <= ${o}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${a}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${s};\n        setOutput(val);\n      }\n    `}}class hme{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=t,a=e[3]-1;let s;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;s=.5===i?`inversesqrt(${l})`:1===i?`1.0/(${l})`:`exp(log(${l}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${o};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${o}; j <= ${o}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${s};\n        setOutput(result);\n      }\n    `}}const dme={kernelName:qq,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:o,bias:a,alpha:s,beta:l}=r,u=dH().getBool("WEBGL_PACK_NORMALIZATION")?new hme(i.shape,o,a,s,l):new cme(i.shape,o,a,s,l);return n.runWebGLProgram(u,[i],i.dtype)}};class pme{constructor(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${i})\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${i});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const fme={kernelName:Kq,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i,y:o,dy:a}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=r,h=new pme(i.shape,s,l,u,c);return n.runWebGLProgram(h,[i,o,a],i.dtype)}};function gme(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:o,keepDims:a}=r,s=i.shape.length,l=WG(o,i.shape);let u=l;const c=h0(u,s),h=null!=c,d=n.shouldExecuteOnCPU([i]);let p=i;if(h){if(d){const e=n.texData.get(p.dataId).values,t=new Array(s);for(let n=0;n<t.length;n++)t[n]=i.shape[c[n]];const r=Phe(e,i.shape,i.dtype,c,t);p=n.makeTensorInfo(t,i.dtype);n.texData.get(p.dataId).values=r}else p=Pde(i,c,n);u=p0(u.length,s)}c0("max",u,s);const[f,g]=l0(p.shape,u);let m,y=f;if(a&&(y=u0(f,l)),d){const e=n.texData.get(p.dataId).values,t=ahe(e,DG(g),y,i.dtype);m=n.makeTensorInfo(y,i.dtype);n.texData.get(m.dataId).values=t}else m=function(e,t,n,r){const i=DG(t),o=Tde({inputs:{x:e},attrs:{shape:[DG(e.shape)/i,i]},backend:r}),a=Ode(o,e.dtype,"max",r),s=Tde({inputs:{x:a},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}(p,g,y,n);return h&&n.disposeIntermediateTensorInfo(p),m}const mme={kernelName:Xq,backendName:"webgl",kernelFunc:gme},yme=vde({opSnippet:nde+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ide+"\n  return result;\n",cpuKernelImpl:she}),vme={kernelName:Yq,backendName:"webgl",kernelFunc:yme};const bme={kernelName:Qq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;Yue(i,"maxPool");const{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r;RG(mZ(a,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`));const u=aZ(i.shape,o,a,1,s,l);if(1===u.filterWidth&&1===u.filterHeight&&MG(u.inShape,u.outShape))return ade({inputs:{x:i},backend:n});const c=new vpe(u,"max",!1);return n.runWebGLProgram(c,[i],i.dtype)}};const xme={kernelName:Zq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dataFormat:l,dimRoundingMode:u}=r,c=sZ(i.shape,o,a,[1,1,1],s,u,l),h=new bpe(c,"max",!1);return n.runWebGLProgram(h,[i],i.dtype)}};class wme{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,s=o-1-e.padInfo.left,l=i*o-1;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${o} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class kme{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.front,h=l-1-e.padInfo.top,d=u-1-e.padInfo.left,p=s*l*u-1;this.userCode=`\n      const ivec3 pads = ivec3(${c}, ${h}, ${d});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${s};\n           wD += ${i}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${l};\n              wR += ${o}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${u};\n                wC += ${a}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${p} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${l} * ${u} +\n                  wR * ${u} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const Sme={kernelName:eK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,h=sZ(a.shape,s,l,[1,1,1],u,c),d=new bpe(h,"max",!0),p=n.runWebGLProgram(d,[a],a.dtype),f=new kme(h),g=n.runWebGLProgram(f,[i,p],a.dtype);return n.disposeIntermediateTensorInfo(p),g}};const Cme={kernelName:Jq,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o,output:a}=t,s=o;Yue([o,a],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:h}=r,d=aZ(s.shape,l,u,1,c,h),p=new vpe(d,"max",!0),f=n.runWebGLProgram(p,[s],s.dtype),g=new wme(d),m=n.runWebGLProgram(g,[i,f],s.dtype);return n.disposeIntermediateTensorInfo(f),m}};const Ime={kernelName:tK,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:i}=t,{filterSize:o,strides:a,pad:s,includeBatchInIndex:l}=n,u=r;RG(4===i.shape.length,(()=>`Error in maxPool: input must be rank 4 but got rank ${i.shape.length}.`));const c=[1,1];RG(mZ(a,c),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`));const h=aZ(i.shape,o,a,c,s),[d,p]=function(e,t,n,r){let i=new vpe(n,"max",!1);const o=r.runWebGLProgram(i,[e],"float32");return i=new vpe(n,"max",!0,!0,t),[o,r.runWebGLProgram(i,[e],"float32")]}(i,l,h,u);return[d,p]}};const Eme={kernelName:nK,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:i}=t,{keepDims:o,axis:a}=n,s=r,l=i.shape.length,u=WG(a,i.shape);let c=u;const h=h0(c,l),d=null!=h,p=s.shouldExecuteOnCPU([i]),f=[];let g=i;if(d){if(p){const e=s.texData.get(g.dataId).values,t=new Array(l);for(let r=0;r<t.length;r++)t[r]=i.shape[h[r]];const n=Phe(e,i.shape,i.dtype,h,t);g=s.makeTensorInfo(t,i.dtype);s.texData.get(g.dataId).values=n}else g=Pde(i,h,s);f.push(g),c=p0(c.length,l)}c0("sum",c,l);const[m,y]=l0(g.shape,c);let v=m;o&&(v=u0(m,u));const b=function(e,t,n,r){const i=DG(t),o=Tde({inputs:{x:e},attrs:{shape:[DG(e.shape)/i,i]},backend:r}),a=Ode(o,"float32","mean",r),s=Tde({inputs:{x:a},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}(g,y,v,s);for(const x of f)s.disposeIntermediateTensorInfo(x);return b}};const Tme={kernelName:rK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=WG(o,i.shape);let u=l;const c=h0(u,s);let h=i;null!=c&&(h=Fde({inputs:{x:i},backend:n,attrs:{perm:c}}),u=p0(u.length,i.shape.length)),c0("min",u,s);const[d,p]=l0(h.shape,u),f=Tde({inputs:{x:h},backend:n,attrs:{shape:[-1,DG(p)]}}),g=Ode(f,f.dtype,"min",n);let m;if(a){m=Tde({inputs:{x:g},backend:n,attrs:{shape:u0(d,l)}})}else m=Tde({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(h),m}},_me=vde({opSnippet:nde+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ide+"\n  return result;\n",cpuKernelImpl:lhe}),Nme={kernelName:iK,backendName:"webgl",kernelFunc:_me};class Ame{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=gce(r),o=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?`\n      ${i} start = ${i}(${o});\n      ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${l};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};\n          }\n        }\n        ${i} coords = outC - start;\n        setOutput(getX(${s}));\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${l};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${l};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class Ome{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=gce(r),o=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=Fhe("rc",r),l=Fhe("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,h="reflect"===n?0:1;let d="";if(1===r){const e=`\n        ${i} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${h};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${h};\n        }\n        source -= start;\n      `;d=`\n        ${i} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${s[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n      `}else{const e=`\n        ${i} source = rc;\n        ${i} lt = ${i}(lessThan(source, start));\n        ${i} gte = ${i}(greaterThanEqual(source, end));\n        ${i} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${h}) +\n                gte * ((end - 1) * 2 - source + ${h});\n        source -= start;\n      `;d=`\n        ${i} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${s[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n        rc = outputLoc;\n        ${s[r-2]} += 1;\n        if(${s[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${l.join()}), ${c});\n          ${s[r-1]} += 1;\n          if(${u}) {\n            ${e}\n            result[3] = getChannel(getX(${l.join()}), ${c});\n          }\n        }\n      `}this.userCode=`\n      const ${i} start = ${i}(${o});\n      const ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${d}\n        setOutput(result);\n      }\n    `}}const Rme={kernelName:oK,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i}=t,{paddings:o,mode:a}=r,s=dH().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ome(i.shape,o,a):new Ame(i.shape,o,a);return n.runWebGLProgram(s,[i],i.dtype)}},$me=vde({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+ide+"\n  return result;\n"}),Pme={kernelName:aK,backendName:"webgl",kernelFunc:$me};class Dme{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}}const Mme=vde({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),Fme={kernelName:pq,backendName:"webgl",kernelFunc:Mme},Lme="return a - b;",jme=vde({opSnippet:Lme,packedOpSnippet:Lme,supportsComplex:!0,cpuKernelImpl:Ohe}),zme={kernelName:hX,backendName:"webgl",kernelFunc:jme};function Bme(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:o}=r,a=WG([o],i.shape),s=gme({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=u0(s.shape,a),u=Tde({inputs:{x:s},backend:n,attrs:{shape:l}}),c=jme({inputs:{a:i,b:u},backend:n}),h=age({inputs:{x:c},backend:n}),d=Dde({inputs:{x:h},backend:n,attrs:{axis:a,keepDims:!1}}),p=Tde({inputs:{x:d},backend:n,attrs:{shape:l}}),f=Mme({inputs:{a:h,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}const Wme={kernelName:JK,backendName:"webgl",kernelFunc:Bme};const Ume={kernelName:sK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:o,seed:a,normalized:s}=r,l=s?i:Bme({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),u=l.shape[0],c=l.shape[1],h=new Dme(u,c,o),d=[[a]],p=n.runWebGLProgram(h,[l],"int32",d);return s||n.disposeIntermediateTensorInfo(l),p}},Vme=Ghe+"\n  return -x;\n";const Gme={kernelName:uK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,i]=che(e.values,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,t)}let i;return i=dH().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Yhe(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new Vhe(r.shape,Vme),n.runWebGLProgram(i,[r],r.dtype)}},Hme=$1;const qme={kernelName:hK,backendName:"webgl",kernelFunc:function(e){_X("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l}=r,u=n.readSync(i.dataId),c=n.readSync(o.dataId),{selectedIndices:h}=Hme(u,c,a,s,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},Kme=P1;const Xme={kernelName:dK,backendName:"webgl",kernelFunc:function(e){_X("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(i.dataId),h=n.readSync(o.dataId),{selectedIndices:d,validOutputs:p}=Kme(c,h,a,s,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},Yme=D1;const Qme={kernelName:pK,backendName:"webgl",kernelFunc:function(e){_X("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(i.dataId),h=n.readSync(o.dataId),d=a,p=s,f=l,g=u,{selectedIndices:m,selectedScores:y}=Yme(c,h,d,p,f,g);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class Jme{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}const Zme={kernelName:gK,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:o,depth:a,onValue:s,offValue:l}=r,u=DG(i.shape),c=new Jme(u,a,s,l),h=Tde({inputs:{x:i},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(c,[h],o);n.disposeIntermediateTensorInfo(h);const p=Tde({inputs:{x:d},backend:n,attrs:{shape:[...i.shape,a]}});return n.disposeIntermediateTensorInfo(d),p}};function eye(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=Bpe({inputs:{input:r},backend:n}),t=eye({inputs:{x:e},backend:n}),i=nfe({inputs:{input:r},backend:n}),o=eye({inputs:{x:i},backend:n}),a=lde({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),a}return yge({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const tye={kernelName:wX,backendName:"webgl",kernelFunc:eye};const nye={kernelName:fK,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===i.dtype){const t=Bpe({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r}),o=nfe({inputs:{input:i},backend:r}),a=eye({inputs:{x:o},backend:r}),s=lde({inputs:{real:n,imag:a},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}return yge({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:r})}};const rye={kernelName:mK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return lge({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const o=t[0].shape,a=t[0].dtype;t.forEach((e=>{$G(o,e.shape,"All tensors passed to stack must have matching shapes"),RG(a===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],l=ofe({inputs:t.map((e=>{const t=lge({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t})),backend:n,attrs:{axis:i}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}};class iye{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=gce(r),o=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${i} start = ${i}(${o});\n      ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${i} coords = outC - start;\n          setOutput(getX(${s}));\n        }\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class oye{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=gce(r),o=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=Fhe("rc",r),l=Fhe("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,h=[`${i} rc = outputLoc;`,`${s[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${s[r-2]} += 1;\n       if(${s[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${s[r-1]} += 1;\n         if(${u}) {`],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,g=1===r?2:4;f<g;f++)p+=`\n        ${h[f]}\n        if (${d}) {\n          result[${f}] = float(value);\n        } else {\n          ${i} source = rc - start;\n          result[${f}] = getChannel(getX(${l.join()}), ${c});\n        }\n      `;p+=1===r?"} ":"}}",this.userCode=`\n      const ${i} start = ${i}(${o});\n      const ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}const aye=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,constantValue:a}=r;if(0===DG(i.shape)){const e=o.map(((e,t)=>e[0]+i.shape[t]+e[1]));return yge({backend:n,attrs:{shape:e,value:a,dtype:i.dtype}})}const s=dH().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oye(i.shape,o,a):new iye(i.shape,o,a),l=[[a]];return n.runWebGLProgram(s,[i],i.dtype,l)},sye={kernelName:yK,backendName:"webgl",kernelFunc:aye},lye=vde({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+ide+"\n  return result;\n"}),uye={kernelName:vK,backendName:"webgl",kernelFunc:lye};const cye={kernelName:xK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=[],u=WG(o,i.shape);let c=u;const h=h0(c,s);let d,p=i;if(null!=h&&(p=Fde({inputs:{x:i},backend:n,attrs:{perm:h}}),c=p0(c.length,s),l.push(p)),c0("prod",c,s),n.shouldExecuteOnCPU([p])){const e=n.texData.get(p.dataId).values,{outVals:t,outShape:r,outDtype:i}=dhe(p.shape,p.dtype,e,c);d=n.makeTensorInfo(r,i,t)}else{const[e,t]=l0(p.shape,c),r=DG(t),o=Tde({inputs:{x:p},backend:n,attrs:{shape:[-1,r]}}),a=Ode(o,_Y(i.dtype),"prod",n);d=Tde({inputs:{x:a},backend:n,attrs:{shape:e}}),l.push(o),l.push(a)}if(a){l.push(d);const e=u0(d.shape,u);d=Tde({inputs:{x:d},backend:n,attrs:{shape:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}};const hye={kernelName:wK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:o,indices:a}=t,{outputRaggedRank:s}=r,l=i.map((e=>n.readSync(e.dataId))),u=i.map((e=>e.shape)),c=n.readSync(o.dataId),h=n.readSync(a.dataId),[d,p,f]=phe(l,u,c,o.shape,o.dtype,h,a.shape,s),g=d.map((e=>n.makeTensorInfo([e.length],"int32",e))),m=n.makeTensorInfo(f,o.dtype,p);return g.concat([m])}};const dye={kernelName:kK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:o}=t,a=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(o.dataId),[u,c]=fhe(a,r.shape,r.dtype,s,i.shape,l,o.shape);return[n.makeTensorInfo([u.length],"int32",u),n.makeTensorInfo([c.length],r.dtype,c)]}};const pye={kernelName:SK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:i,values:o,defaultValue:a,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,u=n.readSync(i.dataId),c=n.readSync(o.dataId),h=n.readSync(a.dataId),d=s.map((e=>n.readSync(e.dataId))),p=s.map((e=>e.shape)),[f,g]=ghe(u,i.shape,c,o.shape,o.dtype,h,a.shape,d,p,l);return n.makeTensorInfo(f,o.dtype,g)}},fye=e=>{const{backend:t,attrs:n}=e,{start:r,stop:i,step:o,dtype:a}=n,s=mhe(r,i,o,a);return t.makeTensorInfo([s.length],a,s)},gye={kernelName:CK,backendName:"webgl",kernelFunc:fye},mye=yde({opSnippet:"return 1.0 / x;"}),yye={kernelName:EK,backendName:"webgl",kernelFunc:mye},vye=yde({opSnippet:Ghe+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),bye={kernelName:TK,backendName:"webgl",kernelFunc:vye},xye=yde({opSnippet:Ghe+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),wye={kernelName:$K,backendName:"webgl",kernelFunc:xye};class kye{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];const[o,a,s,l]=e;this.outputShape=[o,t,n,l];const u=[r&&t>1?a-1:a,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class Sye{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,s,l]=e;this.outputShape=[o,t,n,l];const u=[r&&t>1?a-1:a,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const Cye={kernelName:OK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r,[l,u]=s,c=dH().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Sye(i.shape,l,u,o,a):new kye(i.shape,l,u,o,a);return n.runWebGLProgram(c,[i],"float32")}};class Iye{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,i]=t,[,o,a]=e,s=[n&&o>1?r-1:r,n&&a>1?i-1:i],l=[n&&o>1?o-1:o,n&&a>1?a-1:a],u=s[0]/l[0],c=s[1]/l[1],h=1/u,d=1/c,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const Eye={kernelName:RK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r,s=new Iye(o.shape,i.shape,a);return n.runWebGLProgram(s,[o],o.dtype)}};class Tye{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];const[o,a,s,l]=e;this.outputShape=[o,t,n,l];const u=[r&&t>1?a-1:a,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=r?"0.5":"0.0";let d;d=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${d};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class _ye{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,s,l]=e;this.outputShape=[o,t,n,l];const u=[r&&t>1?a-1:a,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=r?"0.5":"0.0";let d;d=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${d};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}const Nye={kernelName:NK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r,[l,u]=s,c=dH().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new _ye(i.shape,l,u,o,a):new Tye(i.shape,l,u,o,a);return n.runWebGLProgram(c,[i],i.dtype)}};class Aye{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,i]=t,[,o,a]=e,s=[n&&o>1?r-1:r,n&&a>1?i-1:i],l=[n&&o>1?o-1:o,n&&a>1?a-1:a],u=s[0]/l[0],c=s[1]/l[1],h=1/u,d=1/c,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${s[0]}) *\n                (float(dyR) / float(${l[0]}));\n\n            float sourceFracCol =\n                float(${s[1]}) *\n                  (float(dyC) / float(${l[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${i}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const Oye={kernelName:AK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r,s=new Aye(o.shape,i.shape,a);return n.runWebGLProgram(s,[o],o.dtype)}};class Rye{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const r=e.map(((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(r))).join(","),i=gce(n);this.userCode=`\n      void main() {\n        ${i} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class $ye{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const r=Fhe("rc",n),i=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,o=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,a=gce(n);function s(n){const r=e.map(((r,i)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:`${r[n]}`}(i,n)));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${a} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return s(e)}(r.slice())};\n          if(${i}){\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())};\n          }\n          if(${o}) {\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())};\n            if(${i}) {\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const Pye={kernelName:PK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:o}=r,a=i.shape.length,s=WG(o,i.shape);if(0===a)return ade({inputs:{x:i},backend:n});const l=dH().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $ye(i.shape,s):new Rye(i.shape,s);return n.runWebGLProgram(l,[i],i.dtype)}};class Dye{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let i="";i="number"===typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${i}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const Mye={kernelName:CX,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:i}=t,{radians:o,fillValue:a,center:s}=n,l=r,u=new Dye(i.shape,a),[c,h]=w2(s,i.shape[1],i.shape[2]),d=[[c,h,Math.sin(o),Math.cos(o)]];return l.runWebGLProgram(u,[i],i.dtype,d)}},Fye=yde({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Lye={kernelName:DK,backendName:"webgl",kernelFunc:Fye},jye=yde({opSnippet:"return inversesqrt(x);",cpuKernelImpl:yhe}),zye={kernelName:MK,backendName:"webgl",kernelFunc:jye};class Bye{constructor(e,t,n,r,i,o){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const s=gce(i.length),l=gce(o.length);let u="";1===n?u="i":2===n&&(u="i, j");const c=`getIndices(${u})`;let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d=`getUpdates(${h})`;let p="";a&&(p="coords[0], coords[1]");const f=`getDefaultValue(${p})`,g=t>1?"strides[j]":"strides";this.userCode=`\n        ${s} strides = ${s}(${i});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${c});\n              flattenedIndex += index * ${g};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${d};\n              found = true;\n            }\n          }\n          setOutput(mix(${f}, sum, float(found)));\n        }\n      `}}class Wye{constructor(e,t,n,r,i,o){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const s=gce(i.length),l=gce(o.length);let u="";1===n?u="i":2===n&&(u="i, j");const c=`getIndices(${u})`;let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d=`getUpdates(${h})`;let p="";a&&(p="coords[0], coords[1]");const f=`getDefaultValue(${p})`,g=t>1?"strides[j]":"strides",m=t>1?"strides[j + 1]":"strides";this.userCode=`\n        ${s} strides = ${s}(${i});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ${e}; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ${t}; j+=2) {\n              ivec4 index = round(${c});\n              flattenedIndex += index.xz * ${g};\n              if (j + 1 < ${t}) {\n                flattenedIndex += index.yw * ${m};\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ${d};\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(${f}, sum, found));\n        }\n      `}}const Uye={kernelName:FK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:o}=t,{shape:a}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=A2(0,i,a),d=[h/u,u];if(0===h)return n.makeTensorInfo(a,i.dtype);const p=Tde({inputs:{x:i},backend:n,attrs:{shape:[l,s]}}),f=Tde({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0]));let m;m=dH().getBool("WEBGL_PACK")?new Wye(l,s,p.shape.length,f.shape.length,c,d):new Bye(l,s,p.shape.length,f.shape.length,c,d);const y=n.runWebGLProgram(m,[f,p,g],f.dtype),v=Tde({inputs:{x:y},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),v}};class Vye{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const i=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,o=2===dH().getNumber("WEBGL_VERSION")?"while (left < right) {":i,a="left"===r?"<":"<=";this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${o}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${a} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}const Gye={kernelName:jK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:o}=t,{side:a}=r,s=new Vye(i.shape[0],i.shape[1],o.shape[1],a),l=[[i.shape[1]]];return n.runWebGLProgram(s,[i,o],"int32",l)}};class Hye{constructor(e,t,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)i="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=[];for(let r=0;r<t.length;r++)a.push(`${n[r]}`),r<e&&o.push(`${n[r]}`);r=o.join(),i=a.join()}const o=gce(n);this.userCode=`\n      void main() {\n        ${o} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${i}));\n        } else {\n          setOutput(getB(${i}));\n        }\n      }\n    `}}const qye={kernelName:zK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:o}=t,a=new Hye(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[r,i,o],TY(i.dtype,o.dtype))}},Kye=yde({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${O2};\n  float scale = ${R2};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),Xye={kernelName:BK,backendName:"webgl",kernelFunc:Kye},Yye=yde({opSnippet:mde+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:bhe}),Qye={kernelName:HK,backendName:"webgl",kernelFunc:Yye},Jye=yde({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),Zye={kernelName:GK,backendName:"webgl",kernelFunc:Jye},eve=yde({opSnippet:mde+"\n  return sin(x);\n",packedOpSnippet:`\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ${ide}\n  return result;\n`}),tve={kernelName:UK,backendName:"webgl",kernelFunc:eve},nve=yde({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),rve={kernelName:VK,backendName:"webgl",kernelFunc:nve},ive=yde({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),ove={kernelName:qK,backendName:"webgl",kernelFunc:ive},ave={kernelName:YK,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,paddings:a}=r;RG(i.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const s=o.reduce(((e,t)=>e*t)),l=[[0,0]];l.push(...a);for(let y=1+o.length;y<i.shape.length;++y)l.push([0,0]);const u=[],c=aye({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),h=k2(c.shape,o,s,!1),d=S2(h.length,o.length,!1),p=C2(c.shape,o,s,!1),f=Tde({inputs:{x:c},backend:n,attrs:{shape:h}}),g=Fde({inputs:{x:f},backend:n,attrs:{perm:d}}),m=Tde({inputs:{x:g},backend:n,attrs:{shape:p}});return u.push(c),u.push(f),u.push(g),u.forEach((e=>n.disposeIntermediateTensorInfo(e))),m}};const sve={kernelName:ZK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:o,defaultValue:a}=t;if(1!==o.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${o.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${r.shape}`);if(1!==i.shape.length)throw new Error(`Values must be a vector, saw:\n         ${i.shape}`);if(0!==a.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${a.shape}`);const s=n.readSync(r.dataId),l=n.readSync(i.dataId),u=n.readSync(o.dataId),c=n.readSync(a.dataId)[0],[h,d,p,f,g]=khe(s,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],i.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};const lve={kernelName:eX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:o}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==i.shape.length)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(1!==o.shape.length)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const a=Array.from(n.readSync(i.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(o.dataId)),[u,c,h]=She(s,r.shape,r.dtype,a,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};const uve={kernelName:tX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${i.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${o.shape}`);const a=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(o.dataId),[u,c]=Che(a,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}};const cve={kernelName:nX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${i.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${o.shape}`);const a=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(o.dataId),[u,c]=Che(a,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}};const hve={kernelName:rX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:o,defaultValue:a}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:h,outputSize:d}=A2(0,i,s),p=!1;if("string"===o.dtype){const e=n.bufferSync(i),t=n.bufferSync(o),r=rY(n.readSync(a.dataId)[0]),f=vhe(e,t,s,d,c,u,l,h,r,p);return n.makeTensorInfo(s,f.dtype,f.values)}const f=new Bye(u,l,i.shape.length,o.shape.length,h,[d,1],p),g=n.runWebGLProgram(f,[o,i,a],o.dtype),m=Tde({inputs:{x:g},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(g),m}};const dve={kernelName:QK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:o,axis:a}=r,s=WG(a,i.shape)[0],l=r3(i,o,s),u=i.shape.length,c=new Array(u).fill(0),h=i.shape.slice();return l.map((e=>{const t=[...h];t[s]=e;const r=$pe({inputs:{x:i},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r}))}},pve="return sqrt(x);",fve=yde({opSnippet:pve,packedOpSnippet:pve,cpuKernelImpl:Ihe}),gve={kernelName:KK,backendName:"webgl",kernelFunc:fve},mve={kernelName:oX,backendName:"webgl",kernelFunc:yde({opSnippet:"return x * x;"})},yve="return (a - b) * (a - b);",vve=vde({opSnippet:yve,packedOpSnippet:yve}),bve={kernelName:iX,backendName:"webgl",kernelFunc:vve};const xve={kernelName:aX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");const o=b3(n.readSync(i.dataId)),a=Ehe(o,"string",r);return n.makeTensorInfo(i.shape,"string",a)}};const wve={kernelName:kX,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e;const{x:i}=t,o=Ghe+`\n    return x > 0.0 ? 1.0 : float(${n.alpha});\n  `,a=new Vhe(i.shape,o);return r.runWebGLProgram(a,[i],i.dtype)}};class kve{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,i=gce(n.length),o=gce(n.length);let a="";if(1===r)a="coords * strides + begin";else{let e=0;a=n.map(((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`))).join(",")}this.userCode=`\n      ${i} begin = ${i}(${e});\n      ${i} strides = ${i}(${t});\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${a}));\n      }\n    `}}const Sve={kernelName:sX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,end:a,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:h,shrinkAxisMask:d}=r,{finalShapeSparse:p,finalShape:f,isIdentity:g,sliceDim0:m,isSimpleSlice:y,begin:v,end:b,strides:x}=eZ(i.shape,o,a,s,l,u,c,h,d);let w;if(g)w=Tde({inputs:{x:i},backend:n,attrs:{shape:f}});else if(m||y){RG(i.shape.length>=1,(()=>`Input must have rank at least 1, got: ${i.shape.length}`));const e=BJ(v,b,x),t=$pe({inputs:{x:i},backend:n,attrs:{begin:v,size:e}});w=Tde({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([i])){const e=n.readSync(i.dataId),t=KQ(i.shape,i.dtype,e),r=The(p,t,x,v);w=n.makeTensorInfo(f,i.dtype,r.values)}else{const e=new kve(v,x,p);w=n.runWebGLProgram(e,[i],i.dtype)}}const k=Tde({inputs:{x:w},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(w),k}};const Cve={kernelName:lX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:o,leftPad:a,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:h}=t,d=n.readSync(c.dataId),p=n.readSync(h.dataId),[f,g]=_he(d,p,i,o,a,s,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",g)]}};const Ive={kernelName:uX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:o,delimiter:a}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(0!==a.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const s=n.readSync(o.dataId),l=n.readSync(a.dataId)[0],[u,c,h]=Nhe(s,l,i),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};const Eve={kernelName:cX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(o.dataId),s=Ahe(a,i);return n.makeTensorInfo(o.shape,"int32",s)}},Tve=yde({opSnippet:"return tan(x);"}),_ve={kernelName:dX,backendName:"webgl",kernelFunc:Tve},Nve=yde({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),Ave={kernelName:pX,backendName:"webgl",kernelFunc:Nve};const Ove={kernelName:LK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:i,indices:o,updates:a}=t,{}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=A2(0,o,i.shape),d=[h/u,u];if(0===h)return n.makeTensorInfo(i.shape,o.dtype);const p=Tde({inputs:{x:o},backend:n,attrs:{shape:[l,s]}}),f=Tde({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),g=Tde({inputs:{x:i},backend:n,attrs:{shape:d}}),m=new Bye(l,s,p.shape.length,f.shape.length,c,d,!1,!0),y=n.runWebGLProgram(m,[f,p,g],g.dtype),v=Tde({inputs:{x:y},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}};class Rve{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[o]*t[o];this.outputShape=n,this.rank=n.length;const r=gce(this.rank),i=function(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<e.length;i++)r.push(`imod(${n[i]}, ${e[i]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}function $ve(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:o}=r;if("string"===i.dtype||i.shape.length>5){const e=n.readSync(i.dataId),t="string"===i.dtype?e.map((e=>rY(e))):e,r=KQ(i.shape,i.dtype,t),a=Rhe(r,o);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const a=new Rve(i.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const Pve={kernelName:fX,backendName:"webgl",kernelFunc:$ve};class Dve{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class Mve{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function Fve(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function Lve(e){let t=1;for(;t<e;)t*=2;return t}const jve={kernelName:gX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:o,sorted:a}=r,s=dH().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=dH().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=i.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([i])||c<s||o>l){const e=n.readSync(i.dataId),[t,r]=$he(e,u,i.dtype,o,a);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===o)return u[u.length-1]=0,[n.makeTensorInfo(u,i.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===c)return[i,yge({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const h=n.texData.get(i.dataId),d=null!==h&&h.isPacked,p=d?n.unpackTensor(i):i,f=DG(u)/c,g=Tde({inputs:{x:p},attrs:{shape:[f,c]},backend:n});d&&Fve(n,p);const m=Lve(o),y=Lve(c);let v=null;const b=()=>null===v?[g,g]:[g,v],x=(e,t,r)=>{const i=b(),o=new Dve(r),a=[[c],[null===v?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=v;v=n.runWebGLProgram(o,i,"int32",a),Fve(n,s)};for(let I=1;I<m;I*=2){const e=2*I;for(let t=I;t>=1;t/=2)x(e,t,[f,y])}for(let I=y;I>m;I/=2){const e=b(),t=new Mve([f,I/2]),r=[[c],[null===v?1:0],[m]],i=v;v=n.runWebGLProgram(t,e,"int32",r),Fve(n,i);const o=m/2,a=2*o;for(let n=o;n>=1;n/=2)x(a,n,v.shape)}let w=v;v=$pe({inputs:{x:v},backend:n,attrs:{begin:0,size:[f,o]}}),Fve(n,w);let k=Mge({inputs:{x:g,indices:v},backend:n,attrs:{axis:1,batchDims:1}});Fve(n,g);const S=u.slice(0,-1);S.push(o),w=v,v=Tde({inputs:{x:v},attrs:{shape:S},backend:n}),Fve(n,w);const C=k;return k=Tde({inputs:{x:k},attrs:{shape:S},backend:n}),Fve(n,C),[k,v]}};class zve{constructor(e,t,n,r,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a="nearest"===n?1:2;let s;switch(r){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${s} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${s} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${s} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${i});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${i});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${t}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${a} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}const Bve={kernelName:mX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,transforms:o}=t,{interpolation:a,fillMode:s,fillValue:l,outputShape:u}=r,[c,h,d,p]=i.shape,[f,g]=null!=u?u:[h,d],m=new zve(h,d,a,s,l,[c,f,g,p]);return n.runWebGLProgram(m,[i,o],"float32")}};const Wve={kernelName:vX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:o}=t;Yue(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(o.dataId),{outputValues:s,outputShape:l,indices:u}=Dhe(a,i,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}};const Uve={kernelName:bX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:o}=r;o<0&&(o+=i.shape.length);const a=i,s=a.shape.length,l=i.shape[o],u=new Array(s-1);let c=0;for(let g=0;g<s;g++)g!==o&&(u[c++]=a.shape[g]);const h=[],d=new Array(s).fill(0),p=a.shape.slice();p[o]=1;const f=new Array(l);for(let g=0;g<f.length;g++){d[o]=g;const e=$pe({inputs:{x:a},backend:n,attrs:{begin:d,size:p}}),t=Tde({inputs:{x:e},backend:n,attrs:{shape:u}});f[g]=t,h.push(e)}return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class Vve{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/n);this.outputShape=[r,a];const s=4*Math.floor(n/4),l=n%4,u="\n        sumValue += dot(values, segFilter);\n    ";let c="";i%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `);let h="";i%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${h}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${o})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${o})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${s}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${s};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}const Gve={kernelName:xX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:o}=t,{numSegments:a}=r,s=i.shape.length,l=[];let u=0;const c=h0([u],s);let h=i;null!=c&&(h=Fde({inputs:{x:i},backend:n,attrs:{perm:c}}),l.push(h),u=p0(1,s)[0]);const d=y3(h.shape,u,a),p=DG([h.shape[u]]),f=Tde({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}});l.push(f);const g=_Y(i.dtype),m=(e,t,r,i,o)=>{const a=e.shape[0],s=e.shape[1],u=m3(s,o),c=new Vve({windowSize:u,inSize:s,batchSize:a,numSegments:o},t),h=n.compileAndRun(c,[e,r],i);if(l.push(h),h.shape[1]===o)return h;const d=fye({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=$ve({inputs:{x:d},backend:n,attrs:{reps:[s/u]}});l.push(d),l.push(p);return m(h,t,p,i,o)},y=Tde({inputs:{x:m(f,"unsortedSegmentSum",o,g,a)},backend:n,attrs:{shape:d}});let v=y;if(null!=c){l.push(y);const e=d0(c);v=Fde({inputs:{x:v},backend:n,attrs:{perm:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}},Hve=[zde,Wde,Vde,Hde,Xde,Jde,Zde,epe,ape,spe,upe,hpe,ppe,gpe,ype,xpe,wpe,Cpe,Ipe,Epe,Npe,Dpe,Mpe,Fpe,Lpe,Upe,Hpe,Xpe,ude,Jpe,afe,ffe,bfe,wfe,kfe,Sfe,Cfe,Efe,_fe,Afe,Mfe,Ffe,Lfe,zfe,Ufe,Hfe,qfe,Xfe,Qfe,Jfe,ege,tge,rge,oge,sge,uge,dge,gge,vge,xge,Sge,Ige,_ge,Oge,Rge,Pge,Fge,jge,Bge,sde,Wge,rfe,Vge,Hge,Kge,dde,Yge,Jge,Zge,tme,rme,ome,sme,ume,dme,fme,mme,vme,bme,xme,Sme,Cme,Ime,Eme,Tme,Nme,Rme,Pme,Ume,Ede,Gme,qme,Xme,Qme,zpe,Zme,nye,rye,sye,uye,gde,cye,hye,dye,pye,gye,Wpe,Fme,yye,bye,wye,_de,Cye,Eye,Nye,Oye,Pye,Mye,Lye,zye,Uye,Gye,qye,Xye,Qye,Zye,tve,rve,Ppe,Wme,ove,ave,sve,lve,uve,cve,hve,dve,gve,mve,bve,xve,wve,Sve,Cve,Ive,Eve,zme,Mde,_ve,Ave,Ove,Pve,jve,Bve,Lde,Wve,Uve,Gve,tye];for(const n of Hve)DX(n);const qve=e=>{let{...t}=e;const[n,r]=(0,a.useState)(5),[i,o]=(0,a.useState)(60),[s,l]=(0,a.useState)(1),[u,c]=(0,a.useState)(2),[h,d]=(0,a.useState)(null),[p,f]=(0,a.useState)(null);(0,a.useEffect)((()=>{(async()=>{const e=await F8("https://raw.githubusercontent.com/emmanuelsheshi/models/refs/heads/main/model.json");f(e)})()}),[]);return(0,Rj.jsxs)("div",{className:" rounded-lg p-6 shadow-md  mx-auto "+(t.theme?"bg-gray-900 text-white":"bg-gray-100 text-black"),children:[(0,Rj.jsx)("h2",{className:"text-lg font-bold mb-4 text-center",children:"Tensor Flow Freezing Time Estimator"}),(0,Rj.jsxs)("div",{className:"space-y-4",children:[(0,Rj.jsxs)("div",{children:[(0,Rj.jsx)("label",{htmlFor:"temperature",className:"block text-sm font-medium",children:"Temperature (\xb0C)"}),(0,Rj.jsx)("input",{type:"number",id:"temperature",value:n,onChange:e=>r(e.target.value),className:"w-full p-2 rounded-md border focus:ring-2 focus:outline-none "+(t.theme?"bg-gray-700 border-gray-600 text-white focus:ring-blue-400":"bg-white border-gray-300 text-gray-800 focus:ring-blue-500")})]}),(0,Rj.jsxs)("div",{children:[(0,Rj.jsx)("label",{htmlFor:"humidity",className:"block text-sm font-medium",children:"Humidity (%)"}),(0,Rj.jsx)("input",{type:"number",id:"humidity",value:i,onChange:e=>o(e.target.value),className:"w-full p-2 rounded-md border focus:ring-2 focus:outline-none "+(t.theme?"bg-gray-700 border-gray-600 text-white focus:ring-blue-400":"bg-white border-gray-300 text-gray-800 focus:ring-blue-500")})]}),(0,Rj.jsxs)("div",{children:[(0,Rj.jsx)("label",{htmlFor:"foodType",className:"block text-sm font-medium",children:"Food Type"}),(0,Rj.jsx)("input",{type:"number",id:"foodType",value:s,onChange:e=>l(e.target.value),className:"w-full p-2 rounded-md border focus:ring-2 focus:outline-none "+(t.theme?"bg-gray-700 border-gray-600 text-white focus:ring-blue-400":"bg-white border-gray-300 text-gray-800 focus:ring-blue-500")})]}),(0,Rj.jsxs)("div",{children:[(0,Rj.jsx)("label",{htmlFor:"foodQuantity",className:"block text-sm font-medium",children:"Food Quantity"}),(0,Rj.jsx)("input",{type:"number",id:"foodQuantity",value:u,onChange:e=>c(e.target.value),className:"w-full p-2 rounded-md border focus:ring-2 focus:outline-none "+(t.theme?"bg-gray-700 border-gray-600 text-white focus:ring-blue-400":"bg-white border-gray-300 text-gray-800 focus:ring-blue-500")})]})]}),(0,Rj.jsx)("button",{onClick:async()=>{if(p){const e=ZY([[Number(n),i,s,u]]),t=(await p.predict(e)).dataSync()[0];d(t)}else console.log("Model is not loaded yet.")},className:"mt-4 w-full py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md font-medium shadow-md",children:"Predict Time"}),null!==h&&(0,Rj.jsx)("div",{className:"mt-4 text-center",children:(0,Rj.jsxs)("p",{className:"text-sm font-semibold text-gray-700",children:["Predicted Freezing Time: ",h.toFixed(2)," hours"]})})]})},Kve=()=>{const[e,t]=(0,a.useState)(!1),[n,r]=(0,a.useState)(5),[i,o]=(0,a.useState)(60),[s,l]=(0,a.useState)([]),[u,c]=(0,a.useState)(!1),[h,d]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1),[g,m]=(0,a.useState)(5),[y,v]=(0,a.useState)(1),[b,x]=(0,a.useState)("0");(0,a.useEffect)((()=>{const e=hA(pD,"mode");try{yA(e,(e=>{const t=e.val();v(t)}))}catch{LB("no network connection"),console.log("no network connection")}}),[]),(0,a.useEffect)((()=>{const e=hA(pD,"status");try{yA(e,(e=>{const t=e.val();x(t)}))}catch{LB("no network connection"),console.log("no network connection")}}),[]),(0,a.useEffect)((()=>{null!==n&&l((e=>{const t=[...e,{temp:n,time:(new Date).toLocaleTimeString()}];return t.length>20?t.slice(1):t}))}),[n,e]),(0,a.useEffect)((()=>{pA(hA(pD,"status"),e?1:0).then((e=>{d(!1)})).catch((e=>{console.log(e)}))}),[e]);(0,a.useEffect)((()=>{const e=hA(pD,"temperature");try{yA(e,(e=>{const t=e.val();r(t)}))}catch(Yve){console.log(Yve)}}),[n]),(0,a.useEffect)((()=>{yA(hA(pD,"humidity"),(e=>{const t=e.val();o(t)}))}),[i]);(0,a.useEffect)((()=>{f(0===y)}),[y]);(0,a.useEffect)((()=>{const e=hA(pD,"status");try{yA(e,(e=>{const t=e.val();x(t)}))}catch(bI){console.log("Error updating status in Firebase")}}),[b]);return(0,Rj.jsx)("div",{className:"min-h-screen w-full  flex items-center justify-center "+(u?"bg-gray-900 text-white":"bg-gray-100 text-black"),children:(0,Rj.jsxs)("div",{className:"p-6 w-full rounded-lg shadow-lg text-center space-y-6 max-w-6xl",children:[(0,Rj.jsx)("div",{className:"header bg-[transparent] p-4 rounded-lg flex flex-col items-center shadow-md ",children:(0,Rj.jsxs)("div",{className:"flex  items-start gap-2 mb-2  ",children:[(0,Rj.jsx)("div",{className:"",children:(0,Rj.jsx)("img",{className:"w-12 h-12 min-w-12 ",src:"/images/abu-logo.png",alt:"Logo"})}),(0,Rj.jsxs)("div",{className:"ml-4",children:[(0,Rj.jsx)("h1",{className:"text-xl font-bold",children:"Performance Optimization of an IoT"}),(0,Rj.jsx)("h1",{className:"text-xl  font-bold",children:"Freezer"}),(0,Rj.jsx)("div",{className:"text-sm italic",children:"By"}),(0,Rj.jsx)("div",{className:"text-sm italic",children:"Haruna Garba Rabo"}),(0,Rj.jsx)("div",{className:"text-sm",children:"P19EGME8069"}),(0,Rj.jsx)("div",{className:"text-xs",children:"Supervisors: Dr Y.S Danbatta and Dr M.O Afolayan"})]})]})}),(0,Rj.jsxs)("div",{className:"flex flex-col justify-center items-center gap-3",children:[(0,Rj.jsx)("div",{className:" w-full h-28  flex flex-row items-center justify-center gap-2",children:(0,Rj.jsxs)("div",{className:"w-[50%]    flex flex-col items-center justify-center gap-2",children:[(0,Rj.jsx)(iB,{loading:h,variant:"contained",className:"w-full",startIcon:e?(0,Rj.jsx)(Mz,{}):(0,Rj.jsx)(Dz,{}),onClick:()=>{t(!e),d(!0)},disabled:p,children:e?"Turn Off Fridge":"Turn On Fridge"}),(0,Rj.jsx)(iB,{variant:"contained",onClick:()=>{v((e=>{const t=0===e?1:0;return pA(hA(pD,"mode"),t).then((()=>{console.log("Mode updated successfully in Firebase!")})).catch((e=>{console.error("Error updating mode in Firebase:",e)})),t}))},className:` h-10 w-full rounded-full transition-colors duration-300 ${0===y?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"} shadow-lg`,children:0===y?"switch to manual":"switch to auto "})]})}),(0,Rj.jsx)("div",{className:"bg-cyan-600"}),(0,Rj.jsxs)("div",{className:"flex justify-center items-center flex-col ",children:[(0,Rj.jsx)(XB,{variant:"body1",children:"Set Point (\xb0C):"}),(0,Rj.jsx)(tG,{type:"number",value:g,onChange:e=>{const t=e.target.value;m(t)},variant:"outlined",size:"small",color:"white",sx:{width:"80px",marginTop:"10px",marginBottom:"10px",input:{color:"coral"}}}),(0,Rj.jsx)(Nz,{variant:"contained",color:"secondary",onClick:()=>{pA(hA(pD,"set_temp"),parseFloat(g)).then((()=>{console.log("Set point updated successfully in Firebase!")})).catch((e=>{console.error("Error updating set point in Firebase:",e)}))},sx:{borderRadius:2,px:2,py:1,boxShadow:2,transition:"background-color 0.3s","&:hover":{backgroundColor:"#6a1b9a"}},children:"Set"})]}),(0,Rj.jsx)(CG,{onTimeSet:e=>{t(e),pA(hA(pD,"status"),e?1:0).then((()=>console.log(`Fridge turned ${e?"on":"off"} in Firebase!`))).catch((e=>console.error("Error updating fridge status:",e)))}})]}),(0,Rj.jsxs)("div",{children:[(0,Rj.jsx)("h3",{className:"text-xl font-medium",children:"Fridge Temperature"}),(0,Rj.jsxs)("div",{className:"text-4xl flex justify-center items-center mb-4",children:[(0,Rj.jsx)(st,{className:"mr-2"}),(0,Rj.jsxs)("span",{children:[n,"\xb0C"]})]}),(0,Rj.jsxs)("div",{className:"text-xl mb-4",children:[(0,Rj.jsx)(lt,{className:"inline-block mr-2"}),"Humidity: ",i,"%"]}),(0,Rj.jsxs)("div",{className:"w-full flex flex-row justify-between",children:[(0,Rj.jsxs)("div",{className:"flex items-center space-x-3 mt-4 mb-5",children:[(0,Rj.jsx)(XB,{variant:"caption",children:"Fridge Status:"}),(0,Rj.jsx)(oG,{sx:{width:20,height:20,borderRadius:"50%",backgroundColor:1===b?"red":"gray",boxShadow:1===b?"0 0 10px rgba(255, 0, 0, 0.7)":"none"}}),(0,Rj.jsx)(XB,{variant:"body2",color:1===b?"red":"textSecondary"})]}),(0,Rj.jsxs)("div",{className:"flex items-center space-x-3 mt-4 mb-5",children:[(0,Rj.jsx)(XB,{variant:"caption",children:"light"}),(0,Rj.jsx)(Xe,{checked:u,onChange:c,className:(u?"bg-gray-700":"bg-gray-200")+" relative inline-flex items-center h-6 rounded-full w-11",children:(0,Rj.jsx)("span",{className:(u?"translate-x-6":"translate-x-1")+" inline-block w-4 h-4 transform bg-white rounded-full transition"})}),(0,Rj.jsx)(XB,{variant:"caption",children:"Dark"})]}),(0,Rj.jsxs)("div",{className:"flex items-center space-x-3 mt-4 mb-5",children:[(0,Rj.jsx)(XB,{variant:"caption",children:"Fridge Mode:"}),(0,Rj.jsx)(XB,{variant:"body2",color:1===b?"red":"coral",children:1===y?"manual":"auto"})]})]}),(0,Rj.jsxs)("div",{className:`bg-white mb-5 ${u?"dark:bg-gray-800":""} p-4 rounded-lg shadow-md`,children:[(0,Rj.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Temperature History"}),(0,Rj.jsx)(bn,{width:"100%",height:200,children:(0,Rj.jsxs)(Jx,{data:s,children:[(0,Rj.jsx)(mw,{strokeDasharray:"3 3"}),(0,Rj.jsx)(zx,{dataKey:"time"}),(0,Rj.jsx)(Qx,{domain:[0,20]}),(0,Rj.jsx)(wr,{}),(0,Rj.jsx)(ox,{type:"monotone",dataKey:"temp",stroke:u?"#00C49F":"#8884d8"})]})})]}),(0,Rj.jsx)(qve,{theme:u})]})]})})},Xve=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:a}=t;n(e),r(e),i(e),o(e),a(e)}))};l.createRoot(document.getElementById("root")).render((0,Rj.jsx)(a.StrictMode,{children:(0,Rj.jsx)(Kve,{})})),Xve()})()})();
//# sourceMappingURL=main.7a5350a8.js.map